"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const oe=require("react");function nI(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}function Vh(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const re=nI(oe);var vp=function(t,e){return vp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},vp(t,e)};function rI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _e=function(){return _e=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_e.apply(this,arguments)};function al(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function ot(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function tt(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Kg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Or(t){return this instanceof Or?(this.v=t,this):new Or(t)}function Qb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof Or?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function e0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kg=="function"?Kg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}const aI="Logging",sI="NoHubcallbackProvidedException";var Ar;(function(t){t.DEBUG="DEBUG",t.ERROR="ERROR",t.INFO="INFO",t.WARN="WARN",t.VERBOSE="VERBOSE",t.NONE="NONE"})(Ar||(Ar={}));const Xg={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class As{constructor(e,n=Ar.WARN){this.name=e,this.level=n,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...n){let r=this.level;As.LOG_LEVEL&&(r=As.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);const a=Xg[r];if(!(Xg[e]>=a))return;let o=console.log.bind(console);e===Ar.ERROR&&console.error&&(o=console.error.bind(console)),e===Ar.WARN&&console.warn&&(o=console.warn.bind(console));const i=`[${e}] ${this._ts()} ${this.name}`;let c="";if(n.length===1&&typeof n[0]=="string")c=`${i} - ${n[0]}`,o(c);else if(n.length===1)c=`${i} ${n[0]}`,o(i,n[0]);else if(typeof n[0]=="string"){let l=n.slice(1);l.length===1&&(l=l[0]),c=`${i} - ${n[0]} ${l}`,o(`${i} - ${n[0]}`,l)}else c=`${i} ${n}`,o(i,n);for(const l of this._pluggables){const u={message:c,timestamp:Date.now()};l.pushLogs([u])}}log(...e){this._log(Ar.INFO,...e)}info(...e){this._log(Ar.INFO,...e)}warn(...e){this._log(Ar.WARN,...e)}error(...e){this._log(Ar.ERROR,...e)}debug(...e){this._log(Ar.DEBUG,...e)}verbose(...e){this._log(Ar.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===aI&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}As.LOG_LEVEL=null;class ji extends Error{constructor({message:e,name:n,recoverySuggestion:r,underlyingError:a}){super(e),this.name=n,this.underlyingError=a,this.recoverySuggestion=r,this.constructor=ji,Object.setPrototypeOf(this,ji.prototype)}}const t0=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",ri=new As("Hub");class oI{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,n){const r=this.listeners.get(e);if(!r){ri.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...r.filter(({callback:a})=>a!==n)])}dispatch(e,n,r,a){typeof e=="string"&&this.protectedChannels.indexOf(e)>-1&&(a===t0||ri.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const s={channel:e,payload:{...n},source:r,patternInfo:[]};try{this._toListeners(s)}catch(o){ri.error(o)}}listen(e,n,r="noname"){let a;if(typeof n!="function")throw new ji({name:sI,message:"No callback supplied to Hub"});a=n;let s=this.listeners.get(e);return s||(s=[],this.listeners.set(e,s)),s.push({name:r,callback:a}),()=>{this._remove(e,a)}}_toListeners(e){const{channel:n,payload:r}=e,a=this.listeners.get(n);a&&a.forEach(s=>{ri.debug(`Dispatching to ${n} with `,r);try{s.callback(e)}catch(o){ri.error(o)}})}}const iI=new oI("__default__"),uI=new As("parseAWSExports"),cI={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},lI=(t={})=>{if(!Object.prototype.hasOwnProperty.call(t,"aws_project_region"))throw new ji({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:e,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:a,aws_bots_config:s,aws_cognito_identity_pool_id:o,aws_cognito_sign_up_verification_method:i,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:l,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:f,aws_cognito_social_providers:p,aws_cognito_username_attributes:h,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:g,aws_mobile_analytics_app_region:v,aws_user_files_s3_bucket:b,aws_user_files_s3_bucket_region:w,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:S,aws_user_pools_id:I,aws_user_pools_web_client_id:E,geo:T,oauth:R,predictions:$,aws_cloud_logic_custom:D,Notifications:M,modelIntrospection:z}=t,F={};g&&(F.Analytics={Pinpoint:{appId:g,region:v}});const{InAppMessaging:V,Push:H}=M??{};if(V?.AWSPinpoint||H?.AWSPinpoint){if(V?.AWSPinpoint){const{appId:ne,region:ie}=V.AWSPinpoint;F.Notifications={InAppMessaging:{Pinpoint:{appId:ne,region:ie}}}}if(H?.AWSPinpoint){const{appId:ne,region:ie}=H.AWSPinpoint;F.Notifications={...F.Notifications,PushNotification:{Pinpoint:{appId:ne,region:ie}}}}}if(Array.isArray(s)&&(F.Interactions={LexV1:Object.fromEntries(s.map(ne=>[ne.name,ne]))}),r){const ne=cI[n];ne||uI.debug(`Invalid authentication type ${n}. Falling back to IAM.`),F.API={GraphQL:{endpoint:r,apiKey:e,region:a,defaultAuthMode:ne??"iam"}},z&&(F.API.GraphQL.modelIntrospection=z)}const U=c?{status:c&&c.toLowerCase(),totpEnabled:l?.includes("TOTP")??!1,smsEnabled:l?.includes("SMS")??!1}:void 0,Z=u?{minLength:u.passwordPolicyMinLength,requireLowercase:u.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:u.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:u.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:u.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,X=Array.from(new Set([...d??[],...f??[]])).reduce((ne,ie)=>({...ne,[ie.toLowerCase()]:{required:!0}}),{}),se=h?.includes("EMAIL")??!1,te=h?.includes("PHONE_NUMBER")??!1;(o||I)&&(F.Auth={Cognito:{identityPoolId:o,allowGuestAccess:m!=="enable",signUpVerificationMethod:i,userAttributes:X,userPoolClientId:E,userPoolId:I,mfa:U,passwordFormat:Z,loginWith:{username:!(se||te),email:se,phone:te}}});const ce=R?Object.keys(R).length>0:!1,ee=p?p.length>0:!1;if(F.Auth&&ce&&(F.Auth.Cognito.loginWith={...F.Auth.Cognito.loginWith,oauth:{...dI(R),...ee&&{providers:fI(p)}}}),b&&(F.Storage={S3:{bucket:b,region:w,dangerouslyConnectToHttpEndpointForTesting:S}}),T){const{amazon_location_service:ne}=T;F.Geo=ne?{LocationService:{...ne,searchIndices:ne.search_indices,region:ne.region}}:{...T}}if(D&&(F.API={...F.API,REST:D.reduce((ne,ie)=>{const{name:ge,endpoint:be,region:pe,service:we}=ie;return{...ne,[ge]:{endpoint:be,...we?{service:we}:void 0,...pe?{region:pe}:void 0}}},{})}),$){const{VoiceId:ne}=$?.convert?.speechGenerator?.defaults??{};F.Predictions=ne?{...$,convert:{...$.convert,speechGenerator:{...$.convert.speechGenerator,defaults:{voiceId:ne}}}}:$}return F},Yg=t=>t?.split(",")??[],dI=({domain:t,scope:e,redirectSignIn:n,redirectSignOut:r,responseType:a})=>({domain:t,scopes:e,redirectSignIn:Yg(n),redirectSignOut:Yg(r),responseType:a}),fI=t=>t.map(e=>{const n=e.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),pI=t=>t&&t["nonRetryable"],Zu=new As("retryUtil");async function hI(t,e,n,r){if(typeof t!="function")throw Error("functionToRetry must be a function");return new Promise(async(a,s)=>{let o=0,i=!1,c,l=()=>{},u;for(r&&r.then(()=>{i=!0,clearTimeout(c),l()});!i;){o++,Zu.debug(`${t.name} attempt #${o} with this vars: ${JSON.stringify(e)}`);try{a(await t(...e));return}catch(d){if(u=d,Zu.debug(`error on ${t.name}`,d),pI(d)){Zu.debug(`${t.name} non retryable error`,d),s(d);return}const f=n(o,e,d);if(Zu.debug(`${t.name} retrying in ${f} ms`),f===!1||i){s(d);return}else await new Promise(p=>{l=p,c=setTimeout(l,f)})}}s(u)})}const n0=t=>{const e=Reflect.ownKeys(t);for(const n of e){const r=t[n];(r&&typeof r=="object"||typeof r=="function")&&n0(r)}return Object.freeze(t)};class mI{configure(e,n){this.authConfig=e,this.authOptions=n}async fetchAuthSession(e={}){let n,r;const a=await this.getTokens(e);return a?(r=a.accessToken?.payload?.sub,n=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:a,authenticated:!0,forceRefresh:e.forceRefresh})):n=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:a,credentials:n?.credentials,identityId:n?.identityId,userSub:r}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}const gI=Symbol("oauth-listener");class yI{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new mI}configure(e,n){let r;Object.keys(e).some(a=>a.startsWith("aws_"))?r=lI(e):r=e,this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=n0(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),iI.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",t0),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[gI](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}const vI=new yI,bI=(t,e)=>t.Auth.fetchAuthSession(e),r0=t=>bI(vI,t),bu=t=>new TextEncoder().encode(t),Fi=t=>typeof t=="string"?bu(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Hh=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)},a0=5*60*1e3;function wI(t=a0){return r=>{const a=2**r*100+100*Math.random();return a>t?!1:a}}var sn;(function(t){t.WebUnknown="0",t.React="1",t.NextJs="2",t.Angular="3",t.VueJs="4",t.Nuxt="5",t.Svelte="6",t.ServerSideUnknown="100",t.ReactSSR="101",t.NextJsSSR="102",t.AngularSSR="103",t.VueJsSSR="104",t.NuxtSSR="105",t.SvelteSSR="106",t.ReactNative="201",t.Expo="202"})(sn||(sn={}));var Zg;(function(t){t.API="api",t.Auth="auth",t.Analytics="analytics",t.DataStore="datastore",t.Geo="geo",t.InAppMessaging="inappmessaging",t.Interactions="interactions",t.Predictions="predictions",t.PubSub="pubsub",t.PushNotification="pushnotification",t.Storage="storage"})(Zg||(Zg={}));var Jg;(function(t){t.Record="1",t.IdentifyUser="2"})(Jg||(Jg={}));var Qg;(function(t){t.GraphQl="1",t.Get="2",t.Post="3",t.Put="4",t.Patch="5",t.Del="6",t.Head="7"})(Qg||(Qg={}));var ey;(function(t){t.SignUp="1",t.ConfirmSignUp="2",t.ResendSignUpCode="3",t.SignIn="4",t.FetchMFAPreference="6",t.UpdateMFAPreference="7",t.SetUpTOTP="10",t.VerifyTOTPSetup="11",t.ConfirmSignIn="12",t.DeleteUserAttributes="15",t.DeleteUser="16",t.UpdateUserAttributes="17",t.FetchUserAttributes="18",t.ConfirmUserAttribute="22",t.SignOut="26",t.UpdatePassword="27",t.ResetPassword="28",t.ConfirmResetPassword="29",t.FederatedSignIn="30",t.RememberDevice="32",t.ForgetDevice="33",t.FetchDevices="34",t.SendUserAttributeVerificationCode="35",t.SignInWithRedirect="36"})(ey||(ey={}));var ty;(function(t){t.Subscribe="1",t.GraphQl="2"})(ty||(ty={}));var ny;(function(t){t.SearchByText="0",t.SearchByCoordinates="1",t.SearchForSuggestions="2",t.SearchByPlaceId="3",t.SaveGeofences="4",t.GetGeofence="5",t.ListGeofences="6",t.DeleteGeofences="7"})(ny||(ny={}));var ry;(function(t){t.SyncMessages="1",t.IdentifyUser="2",t.NotifyMessageInteraction="3"})(ry||(ry={}));var ay;(function(t){t.None="0"})(ay||(ay={}));var sy;(function(t){t.Convert="1",t.Identify="2",t.Interpret="3"})(sy||(sy={}));var oy;(function(t){t.Subscribe="1"})(oy||(oy={}));var iy;(function(t){t.InitializePushNotifications="1",t.IdentifyUser="2"})(iy||(iy={}));var uy;(function(t){t.UploadData="1",t.DownloadData="2",t.List="3",t.Copy="4",t.Remove="5",t.GetProperties="6",t.GetUrl="7"})(uy||(uy={}));const SI="6.0.20",sl=()=>typeof global<"u",Oo=()=>typeof window<"u",s0=()=>typeof document<"u",jh=()=>typeof process<"u",Ui=(t,e)=>!!Object.keys(t).find(n=>n.startsWith(e));function _I(){const t=r=>r.startsWith("_react")||r.startsWith("__react"),e=r=>Object.keys(r).find(t),n=()=>Array.from(document.querySelectorAll("[id]"));return s0()&&n().some(e)}function xI(){return jh()&&typeof process.env<"u"&&!!Object.keys(process.env).find(t=>t.includes("react"))}function II(){return Oo()&&Ui(window,"__VUE")}function kI(){return sl()&&Ui(global,"__VUE")}function EI(){return Oo()&&Ui(window,"__SVELTE")}function TI(){return jh()&&typeof process.env<"u"&&!!Object.keys(process.env).find(t=>t.includes("svelte"))}function CI(){return Oo()&&window.next&&typeof window.next=="object"}function NI(){return sl()&&(Ui(global,"__next")||Ui(global,"__NEXT"))}function AI(){return Oo()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function RI(){return sl()&&typeof global.__NUXT_PATHS__<"u"}function $I(){const t=!!(s0()&&document.querySelector("[ng-version]")),e=!!(Oo()&&typeof window.ng<"u");return t||e}function DI(){return jh()&&typeof process.env=="object"&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}function OI(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function FI(){return sl()&&typeof global.expo<"u"}function MI(){return Oo()}const PI=[{platform:sn.Expo,detectionMethod:FI},{platform:sn.ReactNative,detectionMethod:OI},{platform:sn.NextJs,detectionMethod:CI},{platform:sn.Nuxt,detectionMethod:AI},{platform:sn.Angular,detectionMethod:$I},{platform:sn.React,detectionMethod:_I},{platform:sn.VueJs,detectionMethod:II},{platform:sn.Svelte,detectionMethod:EI},{platform:sn.WebUnknown,detectionMethod:MI},{platform:sn.NextJsSSR,detectionMethod:NI},{platform:sn.NuxtSSR,detectionMethod:RI},{platform:sn.ReactSSR,detectionMethod:xI},{platform:sn.VueJsSSR,detectionMethod:kI},{platform:sn.AngularSSR,detectionMethod:DI},{platform:sn.SvelteSSR,detectionMethod:TI}];function BI(){return PI.find(t=>t.detectionMethod())?.platform||sn.ServerSideUnknown}let Mi;const Of=[];let bp=!1;const LI=10,WI=10,zI=1e3,o0=()=>{if(!Mi){if(Mi=BI(),bp)for(;Of.length;)Of.pop()?.();else Of.forEach(t=>{t()});cy(sn.ServerSideUnknown,LI),cy(sn.WebUnknown,WI)}return Mi};function VI(){Mi=void 0}function cy(t,e){Mi===t&&!bp&&setTimeout(()=>{VI(),bp=!0,setTimeout(o0,zI)},e)}const HI={},jI=(t,e)=>HI[t]?.[e]?.additionalDetails,UI="aws-amplify",GI=({category:t,action:e}={})=>{const n=[[UI,SI]];if(t&&n.push([t,e]),n.push(["framework",o0()]),t&&e){const r=jI(t,e);r&&r.forEach(a=>{n.push(a)})}return n},qI=t=>GI(t).map(([r,a])=>r&&a?`${r}/${a}`:r).join(" "),KI=(t,e,n=a0,r)=>hI(t,e,wI(n),r);var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ws(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _a(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var i0={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wp=function(t,e){return wp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},wp(t,e)};function XI(t,e){wp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sp=function(){return Sp=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sp.apply(this,arguments)};function YI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function ZI(t,e,n,r){var a=arguments.length,s=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function JI(t,e){return function(n,r){e(n,r,t)}}function QI(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ek(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function tk(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function nk(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function rk(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function _p(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u0(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function ak(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u0(arguments[e]));return t}function sk(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var s=arguments[e],o=0,i=s.length;o<i;o++,a++)r[a]=s[o];return r}function Gi(t){return this instanceof Gi?(this.v=t,this):new Gi(t)}function ok(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof Gi?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function ik(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,s){e[a]=t[a]?function(o){return(n=!n)?{value:Gi(t[a](o)),done:a==="return"}:s?s(o):o}:s}}function uk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _p=="function"?_p(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}function ck(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function lk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function dk(t){return t&&t.__esModule?t:{default:t}}function fk(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function pk(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const hk=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Sp},__asyncDelegator:ik,__asyncGenerator:ok,__asyncValues:uk,__await:Gi,__awaiter:ek,__classPrivateFieldGet:fk,__classPrivateFieldSet:pk,__createBinding:nk,__decorate:ZI,__exportStar:rk,__extends:XI,__generator:tk,__importDefault:dk,__importStar:lk,__makeTemplateObject:ck,__metadata:QI,__param:JI,__read:u0,__rest:YI,__spread:ak,__spreadArrays:sk,__values:_p},Symbol.toStringTag,{value:"Module"})),c0=_a(hk);var ai={},ur={},ly;function l0(){return ly||(ly=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.MAX_HASHABLE_LENGTH=ur.INIT=ur.KEY=ur.DIGEST_LENGTH=ur.BLOCK_SIZE=void 0,ur.BLOCK_SIZE=64,ur.DIGEST_LENGTH=32,ur.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ur.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ur}var si={},dy;function mk(){if(dy)return si;dy=1,Object.defineProperty(si,"__esModule",{value:!0}),si.RawSha256=void 0;var t=l0(),e=function(){function n(){this.state=Int32Array.from(t.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=r.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>t.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=r[a++],s--,this.bufferLength===t.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var r=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%t.BLOCK_SIZE>=t.BLOCK_SIZE-8){for(var o=this.bufferLength;o<t.BLOCK_SIZE;o++)a.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<t.BLOCK_SIZE-8;o++)a.setUint8(o,0);a.setUint32(t.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),a.setUint32(t.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(t.DIGEST_LENGTH),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},n.prototype.hashBuffer=function(){for(var r=this,a=r.buffer,s=r.state,o=s[0],i=s[1],c=s[2],l=s[3],u=s[4],d=s[5],f=s[6],p=s[7],h=0;h<t.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(a[h*4]&255)<<24|(a[h*4+1]&255)<<16|(a[h*4+2]&255)<<8|a[h*4+3]&255;else{var m=this.temp[h-2],g=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=this.temp[h-15];var v=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;this.temp[h]=(g+this.temp[h-7]|0)+(v+this.temp[h-16]|0)}var b=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&f)|0)+(p+(t.KEY[h]+this.temp[h]|0)|0)|0,w=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&c^i&c)|0;p=f,f=d,d=u,u=l+b|0,l=c,c=i,i=o,o=b+w|0}s[0]+=o,s[1]+=i,s[2]+=c,s[3]+=l,s[4]+=u,s[5]+=d,s[6]+=f,s[7]+=p},n}();return si.RawSha256=e,si}var Ff={},oi={};const gk=t=>{const e=[];for(let n=0,r=t.length;n<r;n++){const a=t.charCodeAt(n);if(a<128)e.push(a);else if(a<2048)e.push(a>>6|192,a&63|128);else if(n+1<t.length&&(a&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){const s=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023);e.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else e.push(a>>12|224,a>>6&63|128,a&63|128)}return Uint8Array.from(e)},yk=t=>{let e="";for(let n=0,r=t.length;n<r;n++){const a=t[n];if(a<128)e+=String.fromCharCode(a);else if(192<=a&&a<224){const s=t[++n];e+=String.fromCharCode((a&31)<<6|s&63)}else if(240<=a&&a<365){const o="%"+[a,t[++n],t[++n],t[++n]].map(i=>i.toString(16)).join("%");e+=decodeURIComponent(o)}else e+=String.fromCharCode((a&15)<<12|(t[++n]&63)<<6|t[++n]&63)}return e};function vk(t){return new TextEncoder().encode(t)}function bk(t){return new TextDecoder("utf-8").decode(t)}const wk=t=>typeof TextEncoder=="function"?vk(t):gk(t),Sk=t=>typeof TextDecoder=="function"?bk(t):yk(t),_k=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:wk,toUtf8:Sk},Symbol.toStringTag,{value:"Module"})),d0=_a(_k);var fy;function xk(){if(fy)return oi;fy=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.convertToBuffer=void 0;var t=d0,e=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:t.fromUtf8;function n(r){return r instanceof Uint8Array?r:typeof r=="string"?e(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}return oi.convertToBuffer=n,oi}var ii={},py;function Ik(){if(py)return ii;py=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.isEmptyData=void 0;function t(e){return typeof e=="string"?e.length===0:e.byteLength===0}return ii.isEmptyData=t,ii}var ui={},hy;function kk(){if(hy)return ui;hy=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.numToUint8=void 0;function t(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}return ui.numToUint8=t,ui}var ci={},my;function Ek(){if(my)return ci;my=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.uint32ArrayFrom=void 0;function t(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),r=0;r<e.length;)n[r]=e[r],r+=1;return n}return Uint32Array.from(e)}return ci.uint32ArrayFrom=t,ci}var gy;function wu(){return gy||(gy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var e=xk();Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=Ik();Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var r=kk();Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var a=Ek();Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return a.uint32ArrayFrom}})}(Ff)),Ff}var yy;function Tk(){if(yy)return ai;yy=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Sha256=void 0;var t=c0,e=l0(),n=mk(),r=wu(),a=function(){function o(i){this.secret=i,this.hash=new n.RawSha256,this.reset()}return o.prototype.update=function(i){if(!((0,r.isEmptyData)(i)||this.error))try{this.hash.update((0,r.convertToBuffer)(i))}catch(c){this.error=c}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(i){return[2,this.digestSync()]})})},o.prototype.reset=function(){if(this.hash=new n.RawSha256,this.secret){this.outer=new n.RawSha256;var i=s(this.secret),c=new Uint8Array(e.BLOCK_SIZE);c.set(i);for(var l=0;l<e.BLOCK_SIZE;l++)i[l]^=54,c[l]^=92;this.hash.update(i),this.outer.update(c);for(var l=0;l<i.byteLength;l++)i[l]=0}},o}();ai.Sha256=a;function s(o){var i=(0,r.convertToBuffer)(o);if(i.byteLength>e.BLOCK_SIZE){var c=new n.RawSha256;c.update(i),i=c.digest()}var l=new Uint8Array(e.BLOCK_SIZE);return l.set(i),l}return ai}(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=c0;e.__exportStar(Tk(),t)})(i0);var xp={exports:{}},Mf={},Ju={exports:{}},Pf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function Ck(){if(vy)return Pf;vy=1;var t=oe;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function i(d,f){var p=f(),h=r({inst:{value:p,getSnapshot:f}}),m=h[0].inst,g=h[1];return s(function(){m.value=p,m.getSnapshot=f,c(m)&&g({inst:m})},[d,p,f]),a(function(){return c(m)&&g({inst:m}),d(function(){c(m)&&g({inst:m})})},[d]),o(p),p}function c(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:i;return Pf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Pf}var Bf={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function Nk(){return by||(by=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=oe,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(w){{for(var S=arguments.length,I=new Array(S>1?S-1:0),E=1;E<S;E++)I[E-1]=arguments[E];r("error",w,I)}}function r(w,S,I){{var E=e.ReactDebugCurrentFrame,T=E.getStackAddendum();T!==""&&(S+="%s",I=I.concat([T]));var R=I.map(function($){return String($)});R.unshift("Warning: "+S),Function.prototype.apply.call(console[w],console,R)}}function a(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var s=typeof Object.is=="function"?Object.is:a,o=t.useState,i=t.useEffect,c=t.useLayoutEffect,l=t.useDebugValue,u=!1,d=!1;function f(w,S,I){u||t.startTransition!==void 0&&(u=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var E=S();if(!d){var T=S();s(E,T)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}var R=o({inst:{value:E,getSnapshot:S}}),$=R[0].inst,D=R[1];return c(function(){$.value=E,$.getSnapshot=S,p($)&&D({inst:$})},[w,E,S]),i(function(){p($)&&D({inst:$});var M=function(){p($)&&D({inst:$})};return w(M)},[w]),l(E),E}function p(w){var S=w.getSnapshot,I=w.value;try{var E=S();return!s(I,E)}catch{return!0}}function h(w,S,I){return S()}var m=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g=!m,v=g?h:f,b=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v;Bf.useSyncExternalStore=b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Bf}var wy;function f0(){return wy||(wy=1,process.env.NODE_ENV==="production"?Ju.exports=Ck():Ju.exports=Nk()),Ju.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function Ak(){if(Sy)return Mf;Sy=1;var t=oe,e=f0();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,i=t.useMemo,c=t.useDebugValue;return Mf.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var h=s(null);if(h.current===null){var m={hasValue:!1,value:null};h.current=m}else m=h.current;h=i(function(){function v(E){if(!b){if(b=!0,w=E,E=f(E),p!==void 0&&m.hasValue){var T=m.value;if(p(T,E))return S=T}return S=E}if(T=S,r(w,E))return T;var R=f(E);return p!==void 0&&p(T,R)?T:(w=E,S=R)}var b=!1,w,S,I=d===void 0?null:d;return[function(){return v(u())},I===null?void 0:function(){return v(I())}]},[u,d,f,p]);var g=a(l,h[0],h[1]);return o(function(){m.hasValue=!0,m.value=g},[g]),c(g),g},Mf}var Lf={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function Rk(){return _y||(_y=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=oe,e=f0();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,i=t.useMemo,c=t.useDebugValue;function l(u,d,f,p,h){var m=s(null),g;m.current===null?(g={hasValue:!1,value:null},m.current=g):g=m.current;var v=i(function(){var I=!1,E,T,R=function(z){if(!I){I=!0,E=z;var F=p(z);if(h!==void 0&&g.hasValue){var V=g.value;if(h(V,F))return T=V,V}return T=F,F}var H=E,U=T;if(r(H,z))return U;var Z=p(z);return h!==void 0&&h(U,Z)?U:(E=z,T=Z,Z)},$=f===void 0?null:f,D=function(){return R(d())},M=$===null?void 0:function(){return R($())};return[D,M]},[d,f,p,h]),b=v[0],w=v[1],S=a(u,b,w);return o(function(){g.hasValue=!0,g.value=S},[S]),c(S),S}Lf.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Lf}process.env.NODE_ENV==="production"?xp.exports=Ak():xp.exports=Rk();var p0=xp.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var me=function(){return me=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},me.apply(this,arguments)};function Uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function it(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Bt(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,s;r<a;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var kt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(kt||(kt={}));var xo;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(xo||(xo={}));var Ip=kt.Start,Gh=kt.Stop,Su=kt.Raise,ol=kt.Send,h0=kt.Cancel,$k=kt.NullEvent,qh=kt.Assign;kt.After;kt.DoneState;var m0=kt.Log,Dk=kt.Init,kp=kt.Invoke;kt.ErrorExecution;var xy=kt.ErrorPlatform,Ok=kt.ErrorCustom,g0=kt.Update,Fk=kt.Choose,Mk=kt.Pure,y0=".",Iy={},Ep="xstate.guard",Pk="",Xt=process.env.NODE_ENV==="production",Qu;function Kh(t,e,n){n===void 0&&(n=y0);var r=Pi(t,n),a=Pi(e,n);return pt(a)?pt(r)?a===r:!1:pt(r)?r in a:Object.keys(r).every(function(s){return s in a?Kh(r[s],a[s]):!1})}function v0(t){try{return pt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Tp(t,e){try{return Fo(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Bk(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Pi(t,e){if(Bk(t))return t.value;if(Fo(t))return _c(t);if(typeof t!="string")return t;var n=Tp(t,e);return _c(n)}function _c(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function Ii(t,e){for(var n={},r=Object.keys(t),a=0;a<r.length;a++){var s=r[a];n[s]=e(t[s],s,t,a)}return n}function ky(t,e,n){var r,a,s={};try{for(var o=it(Object.keys(t)),i=o.next();!i.done;i=o.next()){var c=i.value,l=t[c];n(l)&&(s[c]=e(l,c,t))}}catch(u){r={error:u}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return s}var Lk=function(t){return function(e){var n,r,a=e;try{for(var s=it(t),o=s.next();!o.done;o=s.next()){var i=o.value;a=a[i]}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}};function Wk(t,e){return function(n){var r,a,s=n;try{for(var o=it(t),i=o.next();!i.done;i=o.next()){var c=i.value;s=s[e][c]}}catch(l){r={error:l}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return s}}function fc(t){if(!t)return[[]];if(pt(t))return[[t]];var e=Gt(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:fc(t[n]).map(function(a){return[n].concat(a)})}));return e}function Gt(t){var e;return(e=[]).concat.apply(e,Bt([],mt(t),!1))}function b0(t){return Fo(t)?t:[t]}function $r(t){return t===void 0?[]:b0(t)}function xc(t,e,n){var r,a;if(gt(t))return t(e,n.data);var s={};try{for(var o=it(Object.keys(t)),i=o.next();!i.done;i=o.next()){var c=i.value,l=t[c];gt(l)?s[c]=l(e,n.data):s[c]=l}}catch(u){r={error:u}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return s}function zk(t){return/^(done|error)\./.test(t)}function Ey(t){return!!(t instanceof Promise||t!==null&&(gt(t)||typeof t=="object")&&gt(t.then))}function Vk(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Hk(t,e){var n,r,a=mt([[],[]],2),s=a[0],o=a[1];try{for(var i=it(t),c=i.next();!c.done;c=i.next()){var l=c.value;e(l)?s.push(l):o.push(l)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[s,o]}function w0(t,e){return Ii(t.states,function(n,r){if(n){var a=(pt(e)?void 0:e[r])||(n?n.current:void 0);if(a)return{current:a,states:w0(n,a)}}})}function jk(t,e){return{current:e,states:w0(t,e)}}function Ty(t,e,n,r){Xt||mn(!!t,"Attempting to update undefined context");var a=t&&n.reduce(function(s,o){var i,c,l=o.assignment,u={state:r,action:o,_event:e},d={};if(gt(l))d=l(s,e.data,u);else try{for(var f=it(Object.keys(l)),p=f.next();!p.done;p=f.next()){var h=p.value,m=l[h];d[h]=gt(m)?m(s,e.data,u):m}}catch(g){i={error:g}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(i)throw i.error}}return Object.assign({},s,d)},t);return a}var mn=function(){};Xt||(mn=function(t,e){var n=t instanceof Error?t:void 0;if(!(!n&&t)&&console!==void 0){var r=["Warning: ".concat(e)];n&&r.push(n),console.warn.apply(console,r)}});function Fo(t){return Array.isArray(t)}function gt(t){return typeof t=="function"}function pt(t){return typeof t=="string"}function S0(t,e){if(t)return pt(t)?{type:Ep,name:t,predicate:e?e[t]:void 0}:gt(t)?{type:Ep,name:t.name,predicate:t}:t}function Uk(t){try{return"subscribe"in t&&gt(t.subscribe)}catch{return!1}}var Oa=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Qu={},Qu[Oa]=function(){return this},Qu[Symbol.observable]=function(){return this};function ma(t){return!!t&&"__xstatenode"in t}function Gk(t){return!!t&&typeof t.send=="function"}var qk=function(){var t=0;return function(){return t++,t.toString(16)}}();function il(t,e){return pt(t)||typeof t=="number"?me({type:t},e):t}function _n(t,e){if(!pt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=il(t);return me({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function to(t,e){var n=b0(e).map(function(r){return typeof r>"u"||typeof r=="string"||ma(r)?{target:r,event:t}:me(me({},r),{event:t})});return n}function Kk(t){if(!(t===void 0||t===Pk))return $r(t)}function Xk(t,e,n){if(!Xt){var r=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(t,"'.").concat(r));else{var a=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(t,"'. ").concat(r," Current error is '").concat(e,"'.").concat(a))}}}function _0(t,e,n,r,a){var s=t.options.guards,o={state:a,cond:e,_event:r};if(e.type===Ep)return(s?.[e.name]||e.predicate)(n,r.data,o);var i=s?.[e.type];if(!i)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return i(n,r.data,o)}function x0(t){return typeof t=="string"?{type:t}:t}function Bi(t,e,n){var r=function(){},a=typeof t=="object",s=a?t:null;return{next:((a?t.next:t)||r).bind(s),error:((a?t.error:e)||r).bind(s),complete:((a?t.complete:n)||r).bind(s)}}function ec(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Cp(t){return(t.type===Su||t.type===ol&&t.to===xo.Internal)&&typeof t.delay!="number"}var go=_n({type:Dk});function Np(t,e){return e&&e[t]||void 0}function qi(t,e){var n;if(pt(t)||typeof t=="number"){var r=Np(t,e);gt(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(gt(t))n={type:t.name||t.toString(),exec:t};else{var r=Np(t.type,e);if(gt(r))n=me(me({},t),{exec:r});else if(r){var a=r.type||t.type;n=me(me(me({},r),t),{type:a})}else n=t}return n}var Fa=function(t,e){if(!t)return[];var n=Fo(t)?t:[t];return n.map(function(r){return qi(r,e)})};function Xh(t){var e=qi(t);return me(me({id:pt(t)?t:e.id},e),{type:e.type})}function Yk(t,e){return{type:Su,event:typeof t=="function"?t:il(t),delay:e?e.delay:void 0,id:e?.id}}function Zk(t,e,n,r){var a={_event:n},s=_n(gt(t.event)?t.event(e,n.data,a):t.event),o;if(pt(t.delay)){var i=r&&r[t.delay];o=gt(i)?i(e,n.data,a):i}else o=gt(t.delay)?t.delay(e,n.data,a):t.delay;return me(me({},t),{type:Su,_event:s,delay:o})}function ki(t,e){return{to:e?e.to:void 0,type:ol,event:gt(t)?t:il(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:gt(t)?t.name:v0(t)}}function Jk(t,e,n,r){var a={_event:n},s=_n(gt(t.event)?t.event(e,n.data,a):t.event),o;if(pt(t.delay)){var i=r&&r[t.delay];o=gt(i)?i(e,n.data,a):i}else o=gt(t.delay)?t.delay(e,n.data,a):t.delay;var c=gt(t.to)?t.to(e,n.data,a):t.to;return me(me({},t),{to:c,_event:s,event:s.data,delay:o})}var Qk=function(t,e,n){return me(me({},t),{value:pt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Ei=function(t){return{type:h0,sendId:t}};function eE(t){var e=Xh(t);return{type:kt.Start,activity:e,exec:void 0}}function tE(t){var e=gt(t)?t:Xh(t);return{type:kt.Stop,activity:e,exec:void 0}}function nE(t,e,n){var r=gt(t.activity)?t.activity(e,n.data):t.activity,a=typeof r=="string"?{id:r}:r,s={type:kt.Stop,activity:a};return s}var rE=function(t){return{type:qh,assignment:t}};function aE(t,e){var n=e?"#".concat(e):"";return"".concat(kt.After,"(").concat(t,")").concat(n)}function tc(t,e){var n="".concat(kt.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function pc(t,e){var n="".concat(kt.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Ti(t,e){var n="".concat(kt.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var sE=function(t){var e,n,r=[];try{for(var a=it(t),s=a.next();!s.done;s=a.next())for(var o=s.value,i=0;i<o.actions.length;){if(o.actions[i].type===qh){r.push(o.actions[i]),o.actions.splice(i,1);continue}i++}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r};function Ic(t,e,n,r,a,s,o){o===void 0&&(o=!1);var i=o?[]:sE(a),c=i.length?Ty(n,r,i,e):n,l=o?[n]:void 0,u=[];function d(h,m){var g;switch(m.type){case Su:{var v=Zk(m,c,r,t.options.delays);return s&&typeof v.delay=="number"&&s(v,c,r),v}case ol:var b=Jk(m,c,r,t.options.delays);if(!Xt){var w=m.delay;mn(!pt(w)||typeof b.delay=="number","No delay reference for delay expression '".concat(w,"' was found on machine '").concat(t.id,"'"))}return s&&b.to!==xo.Internal&&(h==="entry"?u.push(b):s(b,c,r)),b;case m0:{var S=Qk(m,c,r);return s?.(S,c,r),S}case Fk:{var I=m,E=(g=I.conds.find(function(Z){var q=S0(Z.cond,t.options.guards);return!q||_0(t,q,c,r,s?void 0:e)}))===null||g===void 0?void 0:g.actions;if(!E)return[];var T=mt(Ic(t,e,c,r,[{type:h,actions:Fa($r(E),t.options.actions)}],s,o),2),R=T[0],$=T[1];return c=$,l?.push(c),R}case Mk:{var E=m.get(c,r.data);if(!E)return[];var D=mt(Ic(t,e,c,r,[{type:h,actions:Fa($r(E),t.options.actions)}],s,o),2),M=D[0],z=D[1];return c=z,l?.push(c),M}case Gh:{var S=nE(m,c,r);return s?.(S,n,r),S}case qh:{c=Ty(c,r,[m],s?void 0:e),l?.push(c);break}default:var F=qi(m,t.options.actions),V=F.exec;if(s)s(F,c,r);else if(V&&l){var H=l.length-1,U=me(me({},F),{exec:function(Z){for(var q=[],X=1;X<arguments.length;X++)q[X-1]=arguments[X];V.apply(void 0,Bt([l[H]],mt(q),!1))}});F=U}return F}}function f(h){var m,g,v=[];try{for(var b=it(h.actions),w=b.next();!w.done;w=b.next()){var S=w.value,I=d(h.type,S);I&&(v=v.concat(I))}}catch(E){m={error:E}}finally{try{w&&!w.done&&(g=b.return)&&g.call(b)}finally{if(m)throw m.error}}return u.forEach(function(E){s(E,c,r)}),u.length=0,v}var p=Gt(a.map(f));return[p,c]}var kc=[],oo=function(t,e){kc.push(t);var n=e(t);return kc.pop(),n},oE=function(t){return t(kc[kc.length-1])};function I0(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Oa]=function(){return this},e}function iE(t,e,n,r){var a,s=x0(t.src),o=(a=e?.options.services)===null||a===void 0?void 0:a[s.type],i=t.data?xc(t.data,n,r):void 0,c=o?Yh(o,t.id,i):I0(t.id);return c.meta=t,c}function Yh(t,e,n){var r=I0(e);if(r.deferred=!0,ma(t)){var a=r.state=oo(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return a}}return r}function uE(t){try{return typeof t.send=="function"}catch{return!1}}function cE(t){return uE(t)&&"id"in t}function lE(t){var e;return me((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Oa]=function(){return this},e),t)}var Ec=function(t){return t.type==="atomic"||t.type==="final"};function k0(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Ki(t){return k0(t).filter(function(e){return e.type!=="history"})}function E0(t){var e=[t];return Ec(t)?e:e.concat(Gt(Ki(t).map(E0)))}function Ci(t,e){var n,r,a,s,o,i,c,l,u=new Set(t),d=Ap(u),f=new Set(e);try{for(var p=it(f),h=p.next();!h.done;h=p.next())for(var m=h.value,g=m.parent;g&&!f.has(g);)f.add(g),g=g.parent}catch($){n={error:$}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var v=Ap(f);try{for(var b=it(f),w=b.next();!w.done;w=b.next()){var m=w.value;if(m.type==="compound"&&(!v.get(m)||!v.get(m).length))d.get(m)?d.get(m).forEach(function(D){return f.add(D)}):m.initialStateNodes.forEach(function(D){return f.add(D)});else if(m.type==="parallel")try{for(var S=(o=void 0,it(Ki(m))),I=S.next();!I.done;I=S.next()){var E=I.value;f.has(E)||(f.add(E),d.get(E)?d.get(E).forEach(function(D){return f.add(D)}):E.initialStateNodes.forEach(function(D){return f.add(D)}))}}catch(D){o={error:D}}finally{try{I&&!I.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}}catch($){a={error:$}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}try{for(var T=it(f),R=T.next();!R.done;R=T.next())for(var m=R.value,g=m.parent;g&&!f.has(g);)f.add(g),g=g.parent}catch($){c={error:$}}finally{try{R&&!R.done&&(l=T.return)&&l.call(T)}finally{if(c)throw c.error}}return f}function T0(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Ec(r))return r.key}else return{}}var a={};return n.forEach(function(s){a[s.key]=T0(s,e)}),a}function Ap(t){var e,n,r=new Map;try{for(var a=it(t),s=a.next();!s.done;s=a.next()){var o=s.value;r.has(o)||r.set(o,[]),o.parent&&(r.has(o.parent)||r.set(o.parent,[]),r.get(o.parent).push(o))}}catch(i){e={error:i}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r}function dE(t,e){var n=Ci([t],e);return T0(t,Ap(n))}function Ni(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function fE(t){return Bt([],mt(new Set(Gt(Bt([],mt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function hc(t,e){return e.type==="compound"?Ki(e).some(function(n){return n.type==="final"&&Ni(t,n)}):e.type==="parallel"?Ki(e).every(function(n){return hc(t,n)}):!1}function pE(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Cy(t){return new Set(Gt(t.map(function(e){return e.tags})))}function C0(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(pt(t)||pt(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(a){return C0(t[a],e[a])})}function hE(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function mE(t,e){var n=t.exec,r=me(me({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var Dr=function(){function t(e){var n=this,r;this.actions=[],this.activities=Iy,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Iy,this.meta=pE(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return fE(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var r=go;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=go;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),pt(e))return[e];var a=Object.keys(e);return a.concat.apply(a,Bt([],mt(a.map(function(s){return r.toStrings(e[s],n).map(function(o){return s+n+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=Uh(e,["configuration","transitions","tags","machine"]);return me(me({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return Kh(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;Xt&&mn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!r?.transitions.length&&r.transitions.some(function(a){return a.target!==void 0||a.actions.length})},t}(),gE={deferEvents:!1},Ny=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=me(me({},gE),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t}(),Wf=new Map,yE=0,li={bookId:function(){return"x:".concat(yE++)},register:function(t,e){return Wf.set(t,e),t},get:function(t){return Wf.get(t)},free:function(t){Wf.delete(t)}};function Zh(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;Xt||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function vE(){var t=Zh();if(t&&"__xstate__"in t)return t.__xstate__}function bE(t){if(Zh()){var e=vE();e&&e.register(t)}}function wE(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,a=[],s=!1,o=function(){if(!s){for(s=!0;a.length>0;){var l=a.shift();n=t.transition(n,l,c),r.forEach(function(u){return u.next(n)})}s=!1}},i=lE({id:e.id,send:function(l){a.push(l),o()},getSnapshot:function(){return n},subscribe:function(l,u,d){var f=Bi(l,u,d);return r.add(f),f.next(n),{unsubscribe:function(){r.delete(f)}}}}),c={parent:e.parent,self:i,id:e.id||"anonymous",observers:r};return n=t.start?t.start(c):n,i}var Rp={sync:!1,autoForward:!1},Qt;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Qt||(Qt={}));var SE=function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Qt.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(u,d){if(Fo(u))return r.batch(u),r.state;var f=_n(il(u,d));if(r.status===Qt.Stopped)return Xt||mn(!1,'Event "'.concat(f.name,'" was sent to stopped service "').concat(r.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(f.data))),r.state;if(r.status!==Qt.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(f.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(f.data)));return r.scheduler.schedule(function(){r.forward(f);var p=r._nextState(f);r.update(p,f)}),r._state},this.sendTo=function(u,d,f){var p=r.parent&&(d===xo.Parent||r.parent.id===d),h=p?r.parent:pt(d)?d===xo.Internal?r:r.children.get(d)||li.get(d):Gk(d)?d:void 0;if(!h){if(!p)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(r.id,"'."));Xt||mn(!1,"Service '".concat(r.id,"' has no parent: unable to send event ").concat(u.type));return}if("machine"in h){if(r.status!==Qt.Stopped||r.parent!==h||r.state.done){var m=me(me({},u),{name:u.name===Ok?"".concat(Ti(r.id)):u.name,origin:r.sessionId});!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,m]):h.send(m)}}else!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,u.data]):h.send(u.data)},this._exec=function(u,d,f,p){p===void 0&&(p=r.machine.options.actions);var h=u.exec||Np(u.type,p),m=gt(h)?h:h?h.exec:u.exec;if(m)try{return m(d,f.data,r.machine.config.predictableActionArguments?{action:u,_event:f}:{action:u,state:r.state,_event:f})}catch(V){throw r.parent&&r.parent.send({type:"xstate.error",data:V}),V}switch(u.type){case Su:{var g=u;r.defer(g);break}case ol:var v=u;if(typeof v.delay=="number"){r.defer(v);return}else v.to?r.sendTo(v._event,v.to,f===go):r.send(v._event);break;case h0:r.cancel(u.sendId);break;case Ip:{if(r.status!==Qt.Running)return;var b=u.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[b.id||b.type])break;if(b.type===kt.Invoke){var w=x0(b.src),S=r.machine.options.services?r.machine.options.services[w.type]:void 0,I=b.id,E=b.data;Xt||mn(!("forward"in b),"`forward` property is deprecated (found in invocation of '".concat(b.src,"' in in machine '").concat(r.machine.id,"'). ")+"Please use `autoForward` instead.");var T="autoForward"in b?b.autoForward:!!b.forward;if(!S){Xt||mn(!1,"No service found for invocation '".concat(b.src,"' in machine '").concat(r.machine.id,"'."));return}var R=E?xc(E,d,f):void 0;if(typeof S=="string")return;var $=gt(S)?S(d,f.data,{data:R,src:w,meta:b.meta}):S;if(!$)return;var D=void 0;ma($)&&($=R?$.withContext(R):$,D={autoForward:T}),r.spawn($,I,D)}else r.spawnActivity(b);break}case Gh:{r.stopChild(u.activity.id);break}case m0:var M=u,z=M.label,F=M.value;z?r.logger(z,F):r.logger(F);break;default:Xt||mn(!1,"No implementation found for action type '".concat(u.type,"'"));break}};var a=me(me({},t.defaultOptions),n),s=a.clock,o=a.logger,i=a.parent,c=a.id,l=c!==void 0?c:e.id;this.id=l,this.logger=o,this.clock=s,this.parent=i,this.options=a,this.scheduler=new Ny({deferEvents:this.options.deferEvents}),this.sessionId=li.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:oo(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return Xt||mn(this.status!==Qt.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,a;try{for(var s=it(e.actions),o=s.next();!o.done;o=s.next()){var i=o.value;this.exec(i,e,n)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,a,s,o,i,c,l,u,d=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===go)&&this.options.execute)this.execute(this.state);else for(var f=void 0;f=this._outgoingQueue.shift();)f[0].send(f[1]);if(this.children.forEach(function($){d.state.children[$.id]=$}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var p=it(this.eventListeners),h=p.next();!h.done;h=p.next()){var m=h.value;m(e.event)}}catch($){r={error:$}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}try{for(var g=it(this.listeners),v=g.next();!v.done;v=g.next()){var m=v.value;m(e,e.event)}}catch($){s={error:$}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}try{for(var b=it(this.contextListeners),w=b.next();!w.done;w=b.next()){var S=w.value;S(this.state.context,this.state.history?this.state.history.context:void 0)}}catch($){i={error:$}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(i)throw i.error}}if(this.state.done){var I=e.configuration.find(function($){return $.type==="final"&&$.parent===d.machine}),E=I&&I.doneData?xc(I.doneData,e.context,n):void 0;this._doneEvent=pc(this.id,E);try{for(var T=it(this.doneListeners),R=T.next();!R.done;R=T.next()){var m=R.value;m(this._doneEvent)}}catch($){l={error:$}}finally{try{R&&!R.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}this._stop(),this._stopChildren(),li.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Qt.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var a=this,s=Bi(e,n,r);this.listeners.add(s.next),this.status!==Qt.NotStarted&&s.next(this.state);var o=function(){a.doneListeners.delete(o),a.stopListeners.delete(o),s.complete()};return this.status===Qt.Stopped?s.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){a.listeners.delete(s.next),a.doneListeners.delete(o),a.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Qt.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Qt.Running)return this;this.machine._init(),li.register(this.sessionId,this),this.initialized=!0,this.status=Qt.Running;var r=e===void 0?this.initialState:oo(this,function(){return hE(e)?n.machine.resolveState(e):n.machine.resolveState(Dr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,go)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){gt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,a,s,o,i,c,l,u;try{for(var d=it(this.listeners),f=d.next();!f.done;f=d.next()){var p=f.value;this.listeners.delete(p)}}catch(T){e={error:T}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}try{for(var h=it(this.stopListeners),m=h.next();!m.done;m=h.next()){var p=m.value;p(),this.stopListeners.delete(p)}}catch(T){r={error:T}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}try{for(var g=it(this.contextListeners),v=g.next();!v.done;v=g.next()){var p=v.value;this.contextListeners.delete(p)}}catch(T){s={error:T}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}try{for(var b=it(this.doneListeners),w=b.next();!w.done;w=b.next()){var p=w.value;this.doneListeners.delete(p)}}catch(T){i={error:T}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(i)throw i.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Qt.Stopped,this._initialState=void 0;try{for(var S=it(Object.keys(this.delayedEventsMap)),I=S.next();!I.done;I=S.next()){var E=I.value;this.clock.clearTimeout(this.delayedEventsMap[E])}}catch(T){l={error:T}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new Ny({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=e._state)===null||r===void 0)&&r.done)){var a=_n({type:"xstate.stop"}),s=oo(e,function(){var o=Gt(Bt([],mt(e.state.configuration),!1).sort(function(d,f){return f.order-d.order}).map(function(d){return Fa(d.onExit,e.machine.options.actions)})),i=mt(Ic(e.machine,e.state,e.state.context,a,[{type:"exit",actions:o}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),c=i[0],l=i[1],u=new Dr({value:e.state.value,context:l,_event:a,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:c.filter(function(d){return!Cp(d)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return u.changed=!0,u});e.update(s,a),e._stopChildren(),li.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(this.status===Qt.NotStarted&&this.options.deferEvents)Xt||mn(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==Qt.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var a,s,o=n.state,i=!1,c=[],l=function(p){var h=_n(p);n.forward(h),o=oo(n,function(){return n.machine.transition(o,h,void 0,r||void 0)}),c.push.apply(c,Bt([],mt(n.machine.config.predictableActionArguments?o.actions:o.actions.map(function(m){return mE(m,o)})),!1)),i=i||!!o.changed};try{for(var u=it(e),d=u.next();!d.done;d=u.next()){var f=d.value;l(f)}}catch(p){a={error:p}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}o.changed=i,o.actions=c,n.update(o,_n(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var a=_n(e);if(a.name.indexOf(xy)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(xy)===0}))throw a.data.data;var s=oo(this,function(){return r.machine.transition(r.state,a,void 0,n||void 0)});return s},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var a=it(this.forwardTo),s=a.next();!s.done;s=a.next()){var o=s.value,i=this.children.get(o);if(!i)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));i.send(e)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),gt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==Qt.Running)return Yh(e,n);if(Ey(e))return this.spawnPromise(Promise.resolve(e),n);if(gt(e))return this.spawnCallback(e,n);if(cE(e))return this.spawnActor(e,n);if(Uk(e))return this.spawnObservable(e,n);if(ma(e))return this.spawnMachine(e,me(me({},r),{id:n}));if(Vk(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var a=new t(e,me(me({},this.options),{parent:this,id:n.id||e.id})),s=me(me({},Rp),n);s.sync&&a.onTransition(function(i){r.send(g0,{state:i,id:a.id})});var o=a;return this.children.set(a.id,o),s.autoForward&&this.forwardTo.add(a.id),a.onDone(function(i){r.removeChild(a.id),r.send(_n(i,{origin:a.id}))}).start(),o},t.prototype.spawnBehavior=function(e,n){var r=wE(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,a=this,s=!1,o;e.then(function(c){s||(o=c,a.removeChild(n),a.send(_n(pc(n,c),{origin:n})))},function(c){if(!s){a.removeChild(n);var l=Ti(n,c);try{a.send(_n(l,{origin:n}))}catch(u){Xk(c,u,n),a.devTools&&a.devTools.send(l,a.state),a.machine.strict&&a.stop()}}});var i=(r={id:n,send:function(){},subscribe:function(c,l,u){var d=Bi(c,l,u),f=!1;return e.then(function(p){f||(d.next(p),!f&&d.complete())},function(p){f||d.error(p)}),{unsubscribe:function(){return f=!0}}},stop:function(){s=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return o}},r[Oa]=function(){return this},r);return this.children.set(n,i),i},t.prototype.spawnCallback=function(e,n){var r,a=this,s=!1,o=new Set,i=new Set,c,l=function(f){c=f,i.forEach(function(p){return p(f)}),!s&&a.send(_n(f,{origin:n}))},u;try{u=e(l,function(f){o.add(f)})}catch(f){this.send(Ti(n,f))}if(Ey(u))return this.spawnPromise(u,n);var d=(r={id:n,send:function(f){return o.forEach(function(p){return p(f)})},subscribe:function(f){var p=Bi(f);return i.add(p.next),{unsubscribe:function(){i.delete(p.next)}}},stop:function(){s=!0,gt(u)&&u()},toJSON:function(){return{id:n}},getSnapshot:function(){return c}},r[Oa]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnObservable=function(e,n){var r,a=this,s,o=e.subscribe(function(c){s=c,a.send(_n(c,{origin:n}))},function(c){a.removeChild(n),a.send(_n(Ti(n,c),{origin:n}))},function(){a.removeChild(n),a.send(_n(pc(n),{origin:n}))}),i=(r={id:n,send:function(){},subscribe:function(c,l,u){return e.subscribe(c,l,u)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:n}}},r[Oa]=function(){return this},r);return this.children.set(n,i),i},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!n){Xt||mn(!1,"No implementation found for activity '".concat(e.type,"'"));return}var r=n(this.state.context,e);this.spawnEffect(e.id,r)},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Oa]=function(){return this},r))},t.prototype.attachDev=function(){var e=Zh();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(me(me({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:me({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}bE(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Oa]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Qt.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=N0,t}(),_E=function(t){return pt(t)?me(me({},Rp),{name:t}):me(me(me({},Rp),{name:qk()}),t)};function xE(t,e){var n=_E(e);return oE(function(r){if(!Xt){var a=ma(t)||gt(t);mn(!!r||a,'Attempted to spawn an Actor (ID: "'.concat(ma(t)?t.id:"undefined",'") outside of a service. This will have no effect.'))}return r?r.spawn(t,n.name,n):Yh(t,n.name)})}function N0(t,e){var n=new SE(t,e);return n}function IE(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function nc(t){return me(me({type:kp},t),{toJSON:function(){t.onDone,t.onError;var e=Uh(t,["onDone","onError"]);return me(me({},e),{type:kp,src:IE(t.src)})}})}var io="",$p="#",di="*",no={},ro=function(t){return t[0]===$p},kE=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},EE=function(t,e,n){var r=n.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(pt(s.target)||ma(s.target))}),a=e===io?"the transient event":"event '".concat(e,"'");mn(!r,"One or more transitions for ".concat(a," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},TE=function(){function t(e,n,r,a){r===void 0&&(r="context"in e?e.context:void 0);var s=this,o;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(kE(),n),this.parent=a?.parent,this.key=this.config.key||a?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:y0),this.id=this.config.id||Bt([this.machine.key],mt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,Xt||mn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?Ii(this.config.states,function(l,u){var d,f=new t(l,{},void 0,{parent:s,key:u});return Object.assign(s.idMap,me((d={},d[f.id]=f,d),f.idMap)),f}):no;var i=0;function c(l){var u,d;l.order=i++;try{for(var f=it(k0(l)),p=f.next();!p.done;p=f.next()){var h=p.value;c(h)}}catch(m){u={error:m}}finally{try{p&&!p.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var u=l.event;return u===io}):io in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=$r(this.config.entry||this.config.onEntry).map(function(l){return qi(l)}),this.onExit=$r(this.config.exit||this.config.onExit).map(function(l){return qi(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=$r(this.config.invoke).map(function(l,u){var d,f;if(ma(l)){var p=ec(s.id,u);return s.machine.options.services=me((d={},d[p]=l,d),s.machine.options.services),nc({src:p,id:p})}else if(pt(l.src)){var p=l.id||ec(s.id,u);return nc(me(me({},l),{id:p,src:l.src}))}else if(ma(l.src)||gt(l.src)){var p=l.id||ec(s.id,u);return s.machine.options.services=me((f={},f[p]=l.src,f),s.machine.options.services),nc(me(me({id:p},l),{src:p}))}else{var h=l.src;return nc(me(me({id:ec(s.id,u)},l),{src:h}))}}),this.activities=$r(this.config.activities).concat(this.invoke).map(function(l){return Xh(l)}),this.transition=this.transition.bind(this),this.tags=$r(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||E0(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,a=r.actions,s=r.activities,o=r.guards,i=r.services,c=r.delays;return new t(this.config,{actions:me(me({},a),e.actions),activities:me(me({},s),e.activities),guards:me(me({},o),e.guards),services:me(me({},i),e.services),delays:me(me({},c),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return gt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Ii(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===io,r=this.transitions.filter(function(a){var s=a.eventType===e;return n?s:s||a.eventType===di});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(s,o){var i=gt(s)?"".concat(e.id,":delay[").concat(o,"]"):s,c=aE(i,e.id);return e.onEntry.push(ki(c,{delay:s})),e.onExit.push(Ei(c)),c},a=Fo(n)?n.map(function(s,o){var i=r(s.delay,o);return me(me({},s),{event:i})}):Gt(Object.keys(n).map(function(s,o){var i=n[s],c=pt(i)?{target:i}:i,l=isNaN(+s)?s:+s,u=r(l,o);return $r(c).map(function(d){return me(me({},d),{event:u,delay:l})})}));return a.map(function(s){var o=s.delay;return me(me({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var a=e instanceof Dr?e.value:Pi(e,this.delimiter);if(pt(a)){var s=this.getStateNode(a).initial;return s!==void 0?this.getStateNodes((n={},n[a]=s,n)):[this,this.states[a]]}var o=Object.keys(a),i=[this];return i.push.apply(i,Bt([],mt(Gt(o.map(function(c){return r.getStateNode(c).getStateNodes(a[c])}))),!1)),i},t.prototype.handles=function(e){var n=v0(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof Dr?e:Dr.create(e),r=Array.from(Ci([],this.getStateNodes(n.value)));return new Dr(me(me({},n),{value:this.resolve(n.value),configuration:r,done:hc(r,this),tags:Cy(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var a=this.getStateNode(e),s=a.next(n,r);return!s||!s.transitions.length?this.next(n,r):s},t.prototype.transitionCompoundNode=function(e,n,r){var a=Object.keys(e),s=this.getStateNode(a[0]),o=s._transition(e[a[0]],n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionParallelNode=function(e,n,r){var a,s,o={};try{for(var i=it(Object.keys(e)),c=i.next();!c.done;c=i.next()){var l=c.value,u=e[l];if(u){var d=this.getStateNode(l),f=d._transition(u,n,r);f&&(o[l]=f)}}}catch(v){a={error:v}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(a)throw a.error}}var p=Object.keys(o).map(function(v){return o[v]}),h=Gt(p.map(function(v){return v.transitions})),m=p.some(function(v){return v.transitions.length>0});if(!m)return this.next(n,r);var g=Gt(Object.keys(o).map(function(v){return o[v].configuration}));return{transitions:h,exitSet:Gt(p.map(function(v){return v.exitSet})),configuration:g,source:n,actions:Gt(Object.keys(o).map(function(v){return o[v].actions}))}},t.prototype._transition=function(e,n,r){return pt(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,_n(n))},t.prototype.next=function(e,n){var r,a,s=this,o=n.name,i=[],c=[],l;try{for(var u=it(this.getCandidates(o)),d=u.next();!d.done;d=u.next()){var f=d.value,p=f.cond,h=f.in,m=e.context,g=h?pt(h)&&ro(h)?e.matches(Pi(this.getStateNodeById(h).path,this.delimiter)):Kh(Pi(h,this.delimiter),Lk(this.path.slice(0,-2))(e.value)):!0,v=!1;try{v=!p||_0(this.machine,p,m,n,e)}catch(S){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(S.message))}if(v&&g){f.target!==void 0&&(c=f.target),i.push.apply(i,Bt([],mt(f.actions),!1)),l=f;break}}}catch(S){r={error:S}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}if(l){if(!c.length)return{transitions:[l],exitSet:[],configuration:e.value?[this]:[],source:e,actions:i};var b=Gt(c.map(function(S){return s.getRelativeStateNodes(S,e.historyValue)})),w=!!l.internal;return{transitions:[l],exitSet:w?[]:Gt(c.map(function(S){return s.getPotentiallyReenteringNodes(S)})),configuration:b,source:e,actions:i}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],r=this,a=e;r&&r!==a;)n.push(r),r=r.parent;return r!==a?[]:(n.push(a),n)},t.prototype.getActions=function(e,n,r,a,s,o,i){var c,l,u,d,f=this,p=o?Ci([],this.getStateNodes(o.value)):[],h=new Set;try{for(var m=it(Array.from(e).sort(function(M,z){return M.order-z.order})),g=m.next();!g.done;g=m.next()){var v=g.value;(!Ni(p,v)||Ni(r.exitSet,v)||v.parent&&h.has(v.parent))&&h.add(v)}}catch(M){c={error:M}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}try{for(var b=it(p),w=b.next();!w.done;w=b.next()){var v=w.value;(!Ni(e,v)||Ni(r.exitSet,v.parent))&&r.exitSet.push(v)}}catch(M){u={error:M}}finally{try{w&&!w.done&&(d=b.return)&&d.call(b)}finally{if(u)throw u.error}}r.exitSet.sort(function(M,z){return z.order-M.order});var S=Array.from(h).sort(function(M,z){return M.order-z.order}),I=new Set(r.exitSet),E=Gt(S.map(function(M){var z=[];if(M.type!=="final")return z;var F=M.parent;if(!F.parent)return z;z.push(tc(M.id,M.doneData),tc(F.id,M.doneData?xc(M.doneData,a,s):void 0));var V=F.parent;return V.type==="parallel"&&Ki(V).every(function(H){return hc(r.configuration,H)})&&z.push(tc(V.id)),z})),T=S.map(function(M){var z=M.onEntry,F=M.activities.map(function(V){return eE(V)});return{type:"entry",actions:Fa(i?Bt(Bt([],mt(z),!1),mt(F),!1):Bt(Bt([],mt(F),!1),mt(z),!1),f.machine.options.actions)}}).concat({type:"state_done",actions:E.map(function(M){return Yk(M)})}),R=Array.from(I).map(function(M){return{type:"exit",actions:Fa(Bt(Bt([],mt(M.onExit),!1),mt(M.activities.map(function(z){return tE(z)})),!1),f.machine.options.actions)}}),$=R.concat({type:"transition",actions:Fa(r.actions,this.machine.options.actions)}).concat(T);if(n){var D=Fa(Gt(Bt([],mt(e),!1).sort(function(M,z){return z.order-M.order}).map(function(M){return M.onExit})),this.machine.options.actions).filter(function(M){return!Cp(M)});return $.concat({type:"stop",actions:D})}return $},t.prototype.transition=function(e,n,r,a){e===void 0&&(e=this.initialState);var s=_n(n),o;if(e instanceof Dr)o=r===void 0?e:this.resolveState(Dr.from(e,r));else{var i=pt(e)?this.resolve(_c(this.getResolvedPath(e))):this.resolve(e),c=r??this.machine.context;o=this.resolveState(Dr.from(i,c))}if(!Xt&&s.name===di)throw new Error("An event cannot have the wildcard type ('".concat(di,"')"));if(this.strict&&!this.events.includes(s.name)&&!zk(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var l=this._transition(o.value,o,s)||{transitions:[],configuration:[],exitSet:[],source:o,actions:[]},u=Ci([],this.getStateNodes(o.value)),d=l.configuration.length?Ci(u,l.configuration):u;return l.configuration=Bt([],mt(d),!1),this.resolveTransition(l,o,o.context,a,s)},t.prototype.resolveRaisedTransition=function(e,n,r,a){var s,o=e.actions;return e=this.transition(e,n,void 0,a),e._event=r,e.event=r.data,(s=e.actions).unshift.apply(s,Bt([],mt(o),!1)),e},t.prototype.resolveTransition=function(e,n,r,a,s){var o,i,c,l,u=this;s===void 0&&(s=go);var d=e.configuration,f=!n||e.transitions.length>0,p=f?e.configuration:n?n.configuration:[],h=hc(p,this),m=f?dE(this.machine,d):void 0,g=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,v=this.getActions(new Set(p),h,e,r,s,n,a),b=n?me({},n.activities):{};try{for(var w=it(v),S=w.next();!S.done;S=w.next()){var I=S.value;try{for(var E=(c=void 0,it(I.actions)),T=E.next();!T.done;T=E.next()){var R=T.value;R.type===Ip?b[R.activity.id||R.activity.type]=R:R.type===Gh&&(b[R.activity.id||R.activity.type]=!1)}}catch(ne){c={error:ne}}finally{try{T&&!T.done&&(l=E.return)&&l.call(E)}finally{if(c)throw c.error}}}}catch(ne){o={error:ne}}finally{try{S&&!S.done&&(i=w.return)&&i.call(w)}finally{if(o)throw o.error}}var $=mt(Ic(this,n,r,s,v,a,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),D=$[0],M=$[1],z=mt(Hk(D,Cp),2),F=z[0],V=z[1],H=D.filter(function(ne){var ie;return ne.type===Ip&&((ie=ne.activity)===null||ie===void 0?void 0:ie.type)===kp}),U=H.reduce(function(ne,ie){return ne[ie.activity.id]=iE(ie.activity,u.machine,M,s),ne},n?me({},n.children):{}),Z=new Dr({value:m||n.value,context:M,_event:s,_sessionid:n?n._sessionid:null,historyValue:m?g?jk(g,m):void 0:n?n.historyValue:void 0,history:!m||e.source?n:void 0,actions:m?V:[],activities:m?b:n?n.activities:{},events:[],configuration:p,transitions:e.transitions,children:U,done:h,tags:Cy(p),machine:this}),q=r!==M;Z.changed=s.name===g0||q;var X=Z.history;X&&delete X.history;var se=!h&&(this._transient||d.some(function(ne){return ne._transient}));if(!f&&(!se||s.name===io))return Z;var te=Z;if(!h)for(se&&(te=this.resolveRaisedTransition(te,{type:$k},s,a));F.length;){var ce=F.shift();te=this.resolveRaisedTransition(te,ce._event,s,a)}var ee=te.changed||(X?!!te.actions.length||q||typeof X.value!=typeof te.value||!C0(te.value,X.value):void 0);return te.changed=ee,te.history=X,te},t.prototype.getStateNode=function(e){if(ro(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=ro(e)?e.slice($p.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&ro(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Tp(e,this.delimiter).slice(),r=this;n.length;){var a=n.shift();if(!a.length)break;r=r.getStateNode(a)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||no;switch(this.type){case"parallel":return Ii(this.initialStateValue,function(s,o){return s?r.getStateNode(o).resolve(e[o]||s):no});case"compound":if(pt(e)){var a=this.getStateNode(e);return a.type==="parallel"||a.type==="compound"?(n={},n[e]=a.initialStateValue,n):e}return Object.keys(e).length?Ii(e,function(s,o){return s?r.getStateNode(o).resolve(s):no}):this.initialStateValue||{};default:return e||no}},t.prototype.getResolvedPath=function(e){if(ro(e)){var n=this.machine.idMap[e.slice($p.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Tp(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=ky(this.states,function(r){return r.initialStateValue||no},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Ec(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;pt(n.target)?e=ro(n.target)?_c(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Ec(this))return[this];if(this.type==="compound"&&!this.initial)return Xt||mn(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var n=fc(this.initialStateValue);return Gt(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=mt(e),r=n[0],a=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var s=this.getStateNode(r);if(s.type==="history")return s.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(a)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:ky(this.states,function(n,r){if(!e)return n.historyValue();var a=pt(e)?void 0:e[r];return n.historyValue(a||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var a=this.target;return a?Gt(fc(a).map(function(o){return r.getFromRelativePath(o)})):r.initialStateNodes}var s=Wk(r.path,"states")(e).current;return pt(s)?[r.getStateNode(s)]:Gt(fc(s).map(function(o){return n.history==="deep"?r.getFromRelativePath(o):[r.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Gt(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,a;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var i=it(Object.keys(s)),c=i.next();!c.done;c=i.next()){var l=c.value,u=s[l];if(u.states)try{for(var d=(r=void 0,it(u.events)),f=d.next();!f.done;f=d.next()){var p=f.value;o.add("".concat(p))}}catch(h){r={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!pt(r))return r;var a=r[0]===n.delimiter;if(a&&!n.parent)return n.getStateNodeByPath(r.slice(1));var s=a?n.key+r:r;if(n.parent)try{var o=n.parent.getStateNodeByPath(s);return o}catch(i){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(i.message))}else return n.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var n=this,r=Kk(e.target),a="internal"in e?e.internal:r?r.some(function(c){return pt(c)&&c[0]===n.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(r),i=me(me({},e),{actions:Fa($r(e.actions)),cond:S0(e.cond,s),target:o,source:this,internal:a,eventType:e.event,toJSON:function(){return me(me({},i),{target:i.target?i.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(n.id)})}});return i},t.prototype.formatTransitions=function(){var e,n,r=this,a;if(!this.config.on)a=[];else if(Array.isArray(this.config.on))a=this.config.on;else{var s=this.config.on,o=di,i=s[o],c=i===void 0?[]:i,l=Uh(s,[typeof o=="symbol"?o:o+""]);a=Gt(Object.keys(l).map(function(b){!Xt&&b===io&&mn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var w=to(b,l[b]);return Xt||EE(r,b,w),w}).concat(to(di,c)))}var u=this.config.always?to("",this.config.always):[],d=this.config.onDone?to(String(tc(this.id)),this.config.onDone):[];Xt||mn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var f=Gt(this.invoke.map(function(b){var w=[];return b.onDone&&w.push.apply(w,Bt([],mt(to(String(pc(b.id)),b.onDone)),!1)),b.onError&&w.push.apply(w,Bt([],mt(to(String(Ti(b.id)),b.onError)),!1)),w})),p=this.after,h=Gt(Bt(Bt(Bt(Bt([],mt(d),!1),mt(f),!1),mt(a),!1),mt(u),!1).map(function(b){return $r(b).map(function(w){return r.formatTransition(w)})}));try{for(var m=it(p),g=m.next();!g.done;g=m.next()){var v=g.value;h.push(v)}}catch(b){e={error:b}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}return h},t}(),Ay=!1;function CE(t,e){return!Xt&&!("predictableActionArguments"in t)&&!Ay&&(Ay=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new TE(t,e)}var xt=rE,A0=oe.useLayoutEffect;function Dp(t){var e=re.useRef();return e.current||(e.current={v:t()}),e.current.v}var Tc=globalThis&&globalThis.__assign||function(){return Tc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Tc.apply(this,arguments)},NE=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},R0=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s};function AE(t,e){var n=Dp(function(){return typeof t=="function"?t():t});if(process.env.NODE_ENV!=="production"&&typeof t!="function"){var r=R0(oe.useState(n),1),a=r[0];t!==a&&console.warn("Machine given to `useMachine` has changed between renders. This is not supported and might lead to unexpected results.\nPlease make sure that you pass the same Machine as argument each time.")}var s=e.context,o=e.guards,i=e.actions,c=e.activities,l=e.services,u=e.delays;e.state;var d=NE(e,["context","guards","actions","activities","services","delays","state"]),f=Dp(function(){var p={context:s,guards:o,actions:i,activities:c,services:l,delays:u},h=n.withConfig(p,function(){return Tc(Tc({},n.context),s)});return N0(h,d)});return A0(function(){Object.assign(f.machine.options.actions,i),Object.assign(f.machine.options.guards,o),Object.assign(f.machine.options.activities,c),Object.assign(f.machine.options.services,l),Object.assign(f.machine.options.delays,u)},[i,o,c,l,u]),f}function RE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=R0(e,2),a=r[0],s=a===void 0?{}:a,o=r[1],i=AE(t,s);return oe.useEffect(function(){if(o){var c=i.subscribe(Bi(o));return function(){c.unsubscribe()}}},[o]),oe.useEffect(function(){var c=s.state;return i.start(c?Dr.create(c):void 0),function(){i.stop(),i.status=Qt.NotStarted}},[]),i}globalThis&&globalThis.__read;globalThis&&globalThis.__values;function $0(t){return t.status!==0?t.getSnapshot():t.machine.initialState}function Jh(t){return"state"in t&&"machine"in t}function $E(t,e,n){if(t.status===Qt.NotStarted)return!0;var r=n.changed===void 0&&(Object.keys(n.children).length>0||typeof e.changed=="boolean");return!(n.changed||r)}function DE(t){return t}function D0(t){return"state"in t}function OE(t){return"deferred"in t}function FE(t){return"getSnapshot"in t?Jh(t)?$0(t):t.getSnapshot():D0(t)?t.state:void 0}function ME(t,e){e===void 0&&(e=FE);var n=oe.useRef(t),r=oe.useRef([]),a=oe.useCallback(function(l){var u=t.subscribe(l).unsubscribe;return u},[t]),s=oe.useCallback(function(){return e(t)},[t,e]),o=oe.useCallback(function(l,u){return Jh(t)?$E(t,l,u):l===u},[t]),i=p0.useSyncExternalStoreWithSelector(a,s,s,DE,o),c=Dp(function(){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var d=l[0];process.env.NODE_ENV!=="production"&&l.length>1&&console.warn("Unexpected payload: ".concat(JSON.stringify(l[1]),". Only a single event object can be sent to actor send() functions."));var f=n.current;OE(f)&&f.deferred?r.current.push(d):f.send(d)}});return A0(function(){for(n.current=t;r.current.length>0;){var l=r.current.shift();t.send(l)}},[t]),[i,c]}var PE=function(t,e){return t===e},BE=function(t,e){if(Jh(t)){if(t.status===0&&e.current)return e.current;var n=$0(t);return e.current=t.status===0?n:null,n}return D0(t)?t.state:void 0};function LE(t,e,n,r){n===void 0&&(n=PE);var a=oe.useRef(null),s=oe.useCallback(function(c){var l=t.subscribe(c).unsubscribe;return l},[t]),o=oe.useCallback(function(){return r?r(t):BE(t,a)},[t,r]),i=p0.useSyncExternalStoreWithSelector(s,o,o,e,n);return i}var WE=function(){function t(){}return t.prototype.triggerModelLoading=function(){this.modelLoadingPromise=this.loadModels()},t}(),fa;(function(t){t.DARK="dark",t.BRIGHT="bright",t.NORMAL="normal"})(fa||(fa={}));var nt;(function(t){t.MATCHED="MATCHED",t.TOO_FAR="TOO FAR",t.TOO_CLOSE="TOO CLOSE",t.CANT_IDENTIFY="CANNOT IDENTIFY",t.FACE_IDENTIFIED="ONE FACE IDENTIFIED",t.TOO_MANY="TOO MANY FACES",t.OFF_CENTER="OFF CENTER"})(nt||(nt={}));var lt={TIMEOUT:"TIMEOUT",RUNTIME_ERROR:"RUNTIME_ERROR",FRESHNESS_TIMEOUT:"FRESHNESS_TIMEOUT",SERVER_ERROR:"SERVER_ERROR",CAMERA_FRAMERATE_ERROR:"CAMERA_FRAMERATE_ERROR",CAMERA_ACCESS_ERROR:"CAMERA_ACCESS_ERROR",FACE_DISTANCE_ERROR:"FACE_DISTANCE_ERROR",MOBILE_LANDSCAPE_ERROR:"MOBILE_LANDSCAPE_ERROR",MULTIPLE_FACES_ERROR:"MULTIPLE_FACES_ERROR"},zE=.32,VE=.4,HE=.37,uo={SUCCESS_CODE:1e3,DEFAULT_ERROR_CODE:4e3,FACE_FIT_TIMEOUT:4001,USER_CANCEL:4003,RUNTIME_ERROR:4005,USER_ERROR_DURING_CONNECTION:4007},Cr;function Ry(t,e,n){return t*(n-e)+e}function O0(t){var e=t.flippedCenterX-t.width/2,n=t.flippedCenterX+t.width/2,r=t.centerY-t.height/2,a=t.centerY+t.height/2,s={left:e,top:r,right:n,bottom:a};return{ovalBoundingBox:s,minOvalX:e,maxOvalX:n,minOvalY:r,maxOvalY:a}}function F0(t,e){var n=Math.max(t.left,e.left),r=Math.max(t.top,e.top),a=Math.min(t.right,e.right),s=Math.min(t.bottom,e.bottom),o=Math.abs(Math.max(0,a-n)*Math.max(0,s-r));if(o===0)return 0;var i=Math.abs((t.right-t.left)*(t.bottom-t.top)),c=Math.abs((e.right-e.left)*(e.bottom-e.top));return o/(i+c-o)}function jE(t){var e,n,r=t.sessionInformation,a=t.videoWidth,s=(n=(e=r?.Challenge)===null||e===void 0?void 0:e.FaceMovementAndLightChallenge)===null||n===void 0?void 0:n.OvalParameters;if(!s||!s.CenterX||!s.CenterY||!s.Width||!s.Height)throw new Error("Oval parameters not returned from session information.");return{flippedCenterX:a-s.CenterX,centerX:s.CenterX,centerY:s.CenterY,width:s.Width,height:s.Height}}function Op(t){var e=t.width,n=t.height,r=t.widthSeed,a=r===void 0?1:r,s=t.centerXSeed,o=s===void 0?.5:s,i=t.centerYSeed,c=i===void 0?.5:i,l=t.ratioMultiplier,u=l===void 0?.8:l,d=n,f=e,p=a*u,h=Math.floor(7*e/16),m=Math.floor(9*e/16),g=Math.floor(7*n/16),v=Math.floor(9*n/16),b=Ry(o,h,m),w=Ry(c,g,v);e>=n&&(f=3/4*d);var S=p*f,I=1.618*S;return{flippedCenterX:Math.floor(f-b),centerX:Math.floor(b),centerY:Math.floor(w),width:Math.floor(S),height:Math.floor(I)}}function Fp(t,e,n){var r=n.getTracks()[0].getSettings(),a=r.width,s=r.height,o=e.getBoundingClientRect(),i=o.width,c=o.height;t.width=Math.ceil(i),t.height=Math.ceil(c);var l=Op({width:a,height:s,ratioMultiplier:.5});l.flippedCenterX=a-l.centerX;var u=i/e.videoWidth;M0({canvas:t,oval:l,scaleFactor:u,videoEl:e,isStartScreen:!0})}function M0(t){var e=t.canvas,n=t.oval,r=t.scaleFactor,a=t.videoEl,s=t.isStartScreen,o=n.flippedCenterX,i=n.centerY,c=n.width,l=n.height,u=e.getBoundingClientRect(),d=u.width,f=u.height,p=e.getContext("2d");if(p){p.restore(),p.clearRect(0,0,d,f),p.fillStyle=s?getComputedStyle(e).getPropertyValue("--amplify-colors-background-primary"):"#fff",p.fillRect(0,0,d,f);var h={width:a.videoWidth,height:a.videoHeight},m={x:(d-h.width*r)/2,y:(f-h.height*r)/2};p.setTransform(r,0,0,r,m.x,m.y),p.beginPath(),p.ellipse(o,i,c/2,l/2,0,0,2*Math.PI),p.strokeStyle=getComputedStyle(e).getPropertyValue("--amplify-colors-border-secondary"),p.lineWidth=3,p.stroke(),p.save(),p.clip(),p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,d,f)}else throw new Error("Cannot find Canvas.")}function UE(t){var e=t.canvas,n=e.getContext("2d");if(n)n.restore(),n.clearRect(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);else throw new Error("Cannot find Canvas.")}function GE(t,e,n,r){var a,s,o,i=(s=(a=r?.Challenge)===null||a===void 0?void 0:a.FaceMovementAndLightChallenge)===null||s===void 0?void 0:s.ChallengeConfig;if(!i||!i.OvalIouThreshold||!i.OvalIouHeightThreshold||!i.OvalIouWidthThreshold||!i.FaceIouHeightThreshold||!i.FaceIouWidthThreshold)throw new Error("Challenge information not returned from session information.");var c=i.OvalIouThreshold,l=i.OvalIouHeightThreshold,u=i.OvalIouWidthThreshold,d=i.FaceIouHeightThreshold,f=i.FaceIouWidthThreshold,p=Mp(t,e),h=p.left,m=p.right,g=p.top,v=p.bottom,b=O0(e),w=b.ovalBoundingBox,S=b.minOvalX,I=b.minOvalY,E=b.maxOvalX,T=b.maxOvalY,R=F0(p,w),$=c,D=e.width*u,M=e.height*l,z=e.width*f,F=e.height*d,V=Math.max(Math.min(1,.75*(R-n)/($-n)+.25),0)*100,H=S>h&&E>m,U=h>S&&m>E;return R>$&&Math.abs(S-h)<D&&Math.abs(E-m)<D&&Math.abs(T-v)<M?o=nt.MATCHED:H||U?o=nt.OFF_CENTER:I-g>F||v-T>F||S-h>z&&m-E>z?o=nt.TOO_CLOSE:o=nt.TOO_FAR,{faceMatchState:o,faceMatchPercentage:V}}function P0(t){var e=t.leftEye,n=t.rightEye,r=t.mouth,a=[];a[0]=(e[0]+n[0])/2,a[1]=(e[1]+n[1])/2;var s=Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)),o=Math.sqrt(Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2));return{pupilDistance:s,faceHeight:o}}function Mp(t,e){var n=t.leftEye,r=t.rightEye,a=t.nose,s=t.leftEar,o=t.rightEar,i=t.top,c=t.height,l=e.height,u=e.centerY,d=u-l/2,f=[];f[0]=(n[0]+r[0])/2,f[1]=(n[1]+r[1])/2;var p=P0(t),h=p.pupilDistance,m=p.faceHeight,g=2,v=1.8,b=(g*h+v*m)/2,w=1.618*b,S;f[1]<=(d+l)/2?S=(f[0]+a[0])/2:S=f[0];var I=i+c,E=I-w,T=Math.min(S-b/2,o[0]),R=Math.max(S+b/2,s[0]);return{left:T,top:E,right:R,bottom:I}}function $y(t){var e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight;var n=e.getContext("2d");if(n){n.drawImage(t,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height).data,a=8,s=new Array(a).fill(0),o=0;o<r.length;o++){var i=Math.round(r[o++]*.2126+r[o++]*.7152+r[o++]*.0722);s[i%32]++}for(var c=-1,l=0,o=0;o<a;o++)s[o]>l&&(l=s[o],c=o);return e.remove(),c===0?fa.DARK:c===a?fa.BRIGHT:fa.NORMAL}else throw new Error("Cannot find Video Element.")}function qE(t){return t.label.toLowerCase().includes("virtual")}Cr={},Cr[lt.RUNTIME_ERROR]="RUNTIME_ERROR",Cr[lt.SERVER_ERROR]="SERVER_ERROR",Cr[lt.TIMEOUT]="TIMEOUT",Cr[lt.FACE_DISTANCE_ERROR]="FACE_DISTANCE_ERROR",Cr[lt.MULTIPLE_FACES_ERROR]="MULTIPLE_FACES_ERROR",Cr[lt.CAMERA_FRAMERATE_ERROR]="CAMERA_FRAMERATE_ERROR",Cr[lt.CAMERA_ACCESS_ERROR]="CAMERA_ACCESS_ERROR",Cr[lt.MOBILE_LANDSCAPE_ERROR]="MOBILE_LANDSCAPE_ERROR",Cr[lt.FRESHNESS_TIMEOUT]="FRESHNESS_TIMEOUT";var KE=.9,XE=.75;function zf(t){var e=t.ctx,n=t.prevColor,r=t.nextColor,a=t.fraction,s=e.canvas.width,o=e.canvas.height;e.fillStyle=r,e.fillRect(0,0,s,o*a),a!==1&&(e.fillStyle=n,e.fillRect(0,o*a,s,o*(1-a)))}function YE(t){var e=t.overlayCanvas,n=t.prevColor,r=t.nextColor,a=t.videoEl,s=t.ovalDetails,o=t.heightFraction,i=t.scaleFactor,c=a.getBoundingClientRect(),l=c.x,u=c.y,d=s.flippedCenterX,f=s.centerY,p=s.width,h=s.height,m=d*i+l,g=f*i+u,v=e.width,b=e.height,w=e.getContext("2d");if(w)w.canvas.width=window.innerWidth,w.canvas.height=window.innerHeight,w.clearRect(0,0,v,b),zf({ctx:w,prevColor:n,nextColor:r,fraction:o}),w.save(),w.beginPath(),w.rect(0,0,v,b),w.clip(),w.clearRect(0,0,v,b),w.globalAlpha=KE,zf({ctx:w,prevColor:n,nextColor:r,fraction:o}),w.beginPath(),w.ellipse(m,g,p*i/2,h*i/2,0,0,2*Math.PI),w.strokeStyle="white",w.lineWidth=8,w.stroke(),w.clip(),w.clearRect(0,0,v,b),w.globalAlpha=XE,zf({ctx:w,prevColor:n,nextColor:r,fraction:o}),w.restore();else throw new Error("Cannot find Overlay Canvas.")}var ZE=function(t){return!!t};function JE(t){var e=t.Challenge.FaceMovementAndLightChallenge.ColorSequences||[],n=e.map(function(r){var a=r.FreshnessColor,s=r.DownscrollDuration,o=r.FlatDisplayDuration,i=a.RGB,c="rgb(".concat(i[0],",").concat(i[1],",").concat(i[2],")");return typeof c<"u"&&typeof s<"u"&&typeof o<"u"?{color:c,downscrollDuration:s,flatDisplayDuration:o}:void 0});return n.filter(ZE)}function Dy(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(e){return parseInt(e)})}function QE(t,e){return ot(this,void 0,void 0,function(){var n,r;return tt(this,function(a){switch(a.label){case 0:return[4,t.detectFaces(e)];case 1:switch(n=a.sent(),n.length){case 0:{r=nt.CANT_IDENTIFY;break}case 1:{r=nt.FACE_IDENTIFIED;break}default:{r=nt.TOO_MANY;break}}return[2,r]}})})}function Oy(t){var e=t.faceDetector,n=t.videoEl,r=t.ovalDetails,a=t.reduceThreshold,s=a===void 0?!1:a,o=t.isMobile,i=o===void 0?!1:o;return ot(this,void 0,void 0,function(){var c,l,u,d,f,p,h,m,g,v,b;return tt(this,function(w){switch(w.label){case 0:return[4,e.detectFaces(n)];case 1:switch(c=w.sent(),u=!1,c.length){case 0:{d=lt.FACE_DISTANCE_ERROR;break}case 1:{l=c[0],f=r.width,p=P0(l),h=p.pupilDistance,m=p.faceHeight,g=2,v=1.8,b=(g*h+v*m)/2/g,f&&(u=b/f<(s?i?HE:VE:zE),u||(d=lt.FACE_DISTANCE_ERROR));break}default:{d=lt.MULTIPLE_FACES_ERROR;break}}return[2,{isDistanceBelowThreshold:u,error:d}]}})})}function Vf(t){var e=t.deviceHeight,n=t.deviceWidth,r=t.height,a=t.width,s=t.top,o=t.left;return{Height:r/e,Width:a/n,Top:s/e,Left:o/n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eT=1e-7,tT=1e-4;class B0{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Qh{refCount(e){return er("refCount")}incRef(e){return er("incRef")}timerAvailable(){return!0}time(e){return er("time")}read(e){return er("read")}readSync(e){return er("readSync")}readToGPU(e,n){return er("readToGPU")}numDataIds(){return er("numDataIds")}disposeData(e,n){return er("disposeData")}write(e,n,r){return er("write")}move(e,n,r,a,s){return er("move")}createTensorFromGPUData(e,n,r){return er("createTensorFromGPUData")}memory(){return er("memory")}floatPrecision(){return er("floatPrecision")}epsilon(){return this.floatPrecision()===32?eT:tT}dispose(){return er("dispose")}}function er(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function em(t,e,n){return Math.max(t,Math.min(e,n))}function fi(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function A(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ar(t,e,n=""){A(Ir(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Mo(t){A(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Y(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function nT(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Ir(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Xi(t){return t%1===0}function mc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function L0(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Vt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),A(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),A(t.every(r=>Xi(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function rT(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||a?null:Vt(e,t).sort();let o=0;for(let i=0;i<t.length;++i){if(s!=null){if(s[o]===i&&t[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${t[i]}' is not 1`);(s[o]==null||s[o]>i)&&t[i]===1&&(n.push(t[i]),r.push(i)),s[o]<=i&&o++}t[i]!==1&&(n.push(t[i]),r.push(i))}return{newShape:n,keptDims:r}}function Dn(t,e){return tn(t,e)}function tn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function aT(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function sT(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function oT(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Yi(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function iT(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ul(t){return typeof t=="string"||t instanceof String}function uT(t){return typeof t=="boolean"}function cT(t){return typeof t=="number"}function _u(t){return Array.isArray(t)?_u(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":cT(t)?"float32":ul(t)?"string":uT(t)?"bool":"float32"}function Pp(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ie(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function W0(t,e,n,r=!1){const a=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)a[o]=n[t+o]}else{const s=e[0],o=e.slice(1),i=o.reduce((c,l)=>c*l)*(r?2:1);for(let c=0;c<s;c++)a[c]=W0(t+c*i,o,n,r)}return a}function xr(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,s)=>a*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return W0(0,t,e,n)}function lT(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function tm(t,e){const n=In(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function In(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function z0(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return xr(t,new Float32Array(n));if(e==="int32")return xr(t,new Int32Array(n));if(e==="bool")return xr(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function fr(t){t.forEach(e=>{A(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Zr(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Po(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Rs(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fy="tfjsflags";class dT{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=fT,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Xe().getBool("IS_TEST")||Xe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];Xe().getBool("IS_TEST")||Xe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Rs(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Fy in e&&e[Fy].split(",").forEach(r=>{const[a,s]=r.split(":");this.urlFlags[a]=hT(a,s)})}}function fT(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(pT(e,r[0],r[1]),r.join("="))),e}function pT(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function hT(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Xe(){return V0}let V0=null;function mT(t){V0=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Hf;function H0(){if(Hf==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Hf=t}return Hf}function gT(){const t=H0();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function nm(t,e){const n=gT();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const rm="Abs",cl="Acos",ll="Acosh",xu="Add",dl="AddN",fl="All",pl="Any",am="ArgMax",sm="ArgMin",hl="Asin",ml="Asinh",gl="Atan",yl="Atanh",vl="Atan2",bl="AvgPool",j0="AvgPoolGrad",om="AvgPool3D",U0="AvgPool3DGrad",wl="BatchMatMul",im="BatchToSpaceND",Sl="Bincount",_l="BitwiseAnd",um="BroadcastArgs",xl="Cast",Il="Ceil",Iu="ClipByValue",G0="Complex",q0="ComplexAbs",cm="Concat",kl="Conv2D",K0="Conv2DBackpropFilter",El="Conv2DBackpropInput",Tl="Conv3D",lm="Conv3DBackpropFilterV2",Cl="Conv3DBackpropInputV2",Nl="Cos",Al="Cosh",Rl="Cumprod",$l="Cumsum",Dl="CropAndResize",dm="DenseBincount",Ol="DepthToSpace",Fl="DepthwiseConv2dNative",X0="DepthwiseConv2dNativeBackpropFilter",Y0="DepthwiseConv2dNativeBackpropInput",fm="Diag",Ml="Dilation2D",Cc="Dilation2DBackpropInput",Nc="Dilation2DBackpropFilter",Z0="Draw",Pl="RealDiv",J0="Einsum",Bl="Elu",pm="EluGrad",Ll="Erf",Wl="Equal",zl="Exp",hm="ExpandDims",Vl="Expm1",Q0="FFT",mm="Fill",Hl="FlipLeftRight",jl="Floor",Ul="FloorDiv",Gl="FusedBatchNorm",gm="GatherV2",ql="GatherNd",Kl="Greater",Xl="GreaterEqual",Yl="Identity",e1="IFFT",t1="Imag",Zl="IsFinite",Jl="IsInf",Ql="IsNan",ed="LeakyRelu",td="Less",nd="LessEqual",rd="LinSpace",ad="Log",sd="Log1p",od="LogicalAnd",id="LogicalNot",ud="LogicalOr",yT="LogicalXor",cd="LRN",ym="LRNGrad",ld="Max",dd="Maximum",fd="MaxPool",n1="MaxPoolGrad",vm="MaxPool3D",r1="MaxPool3DGrad",bm="MaxPoolWithArgmax",pd="Mean",hd="Min",md="Minimum",gd="MirrorPad",yd="Mod",vd="Multinomial",bd="Multiply",wm="Neg",wd="NotEqual",Sd="NonMaxSuppressionV3",_d="NonMaxSuppressionV4",xd="NonMaxSuppressionV5",Sm="OnesLike",Id="OneHot",_m="Pack",kd="PadV2",Ed="Pow",Td="Prelu",Cd="Prod",a1="RaggedGather",s1="RaggedRange",o1="RaggedTensorToTensor",xm="Range",i1="Real",Nd="Reciprocal",Ad="Relu",Im="Reshape",Rd="ResizeNearestNeighbor",km="ResizeNearestNeighborGrad",$d="ResizeBilinear",Em="ResizeBilinearGrad",Dd="Relu6",Od="Reverse",Fd="Round",Md="Rsqrt",Pd="ScatterNd",Bd="TensorScatterUpdate",Ld="SearchSorted",Tm="Select",Wd="Selu",Cm="Slice",zd="Sin",Vd="Sinh",Hd="Sign",jd="Sigmoid",Ud="Softplus",Gd="Sqrt",qd="Sum",Nm="SpaceToBatchND",Am="SplitV",Kd="Softmax",Rm="SparseFillEmptyRows",Xd="SparseReshape",$m="SparseSegmentMean",Dm="SparseSegmentSum",Yd="SparseToDense",Zd="SquaredDifference",u1="Square",Om="StaticRegexReplace",Jd="StridedSlice",Fm="StringNGrams",Mm="StringSplit",Pm="StringToHashBucketFast",Qd="Sub",ef="Tan",tf="Tanh",ku="Tile",nf="TopK",rf="Transform",yo="Transpose",Bm="Unique",Lm="Unpack",c1="UnsortedSegmentSum",Wm="ZerosLike",Eu="Step",My="FromPixels",af="RotateWithOffset",Zi="_FusedMatMul",Ji="FusedConv2D",Qi="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(...t){Xe().getBool("IS_TEST")||Xe().getBool("PROD")||console.warn(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ac=nm("kernelRegistry",()=>new Map),vT=nm("gradRegistry",()=>new Map);function Rc(t,e){const n=d1(t,e);return Ac.get(n)}function Py(t){return vT.get(t)}function By(t){const e=Ac.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[s,o]=a,[i]=s.split("_");i===t&&n.push(o)}return n}function l1(t){const{kernelName:e,backendName:n}=t,r=d1(e,n);Ac.has(r)&&ys(`The kernel '${e}' for backend '${n}' is already registered`),Ac.set(r,t)}function d1(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var p1=Ot,wr=null;try{wr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ot(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Ot.prototype.__isLong__;Object.defineProperty(Ot.prototype,"__isLong__",{value:!0});function sr(t){return(t&&t.__isLong__)===!0}Ot.isLong=sr;var Ly={},Wy={};function zs(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=Wy[t],r)?r:(n=Ft(t,(t|0)<0?-1:0,!0),a&&(Wy[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=Ly[t],r)?r:(n=Ft(t,t<0?-1:0,!1),a&&(Ly[t]=n),n))}Ot.fromInt=zs;function Sr(t,e){if(isNaN(t))return e?Ss:_r;if(e){if(t<0)return Ss;if(t>=h1)return y1}else{if(t<=-Vy)return rr;if(t+1>=Vy)return g1}return t<0?Sr(-t,e).neg():Ft(t%Io|0,t/Io|0,e)}Ot.fromNumber=Sr;function Ft(t,e,n){return new Ot(t,e,n)}Ot.fromBits=Ft;var $c=Math.pow;function zm(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return _r;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return zm(t.substring(1),e,n).neg();for(var a=Sr($c(n,8)),s=_r,o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+i),n);if(i<8){var l=Sr($c(n,i));s=s.mul(l).add(Sr(c))}else s=s.mul(a),s=s.add(Sr(c))}return s.unsigned=e,s}Ot.fromString=zm;function Wr(t,e){return typeof t=="number"?Sr(t,e):typeof t=="string"?zm(t,e):Ft(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Ot.fromValue=Wr;var zy=65536,bT=1<<24,Io=zy*zy,h1=Io*Io,Vy=h1/2,Hy=zs(bT),_r=zs(0);Ot.ZERO=_r;var Ss=zs(0,!0);Ot.UZERO=Ss;var ho=zs(1);Ot.ONE=ho;var m1=zs(1,!0);Ot.UONE=m1;var Bp=zs(-1);Ot.NEG_ONE=Bp;var g1=Ft(-1,2147483647,!1);Ot.MAX_VALUE=g1;var y1=Ft(-1,-1,!0);Ot.MAX_UNSIGNED_VALUE=y1;var rr=Ft(0,-2147483648,!1);Ot.MIN_VALUE=rr;var ye=Ot.prototype;ye.toInt=function(){return this.unsigned?this.low>>>0:this.low};ye.toNumber=function(){return this.unsigned?(this.high>>>0)*Io+(this.low>>>0):this.high*Io+(this.low>>>0)};ye.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(rr)){var n=Sr(e),r=this.div(n),a=r.mul(n).sub(this);return r.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Sr($c(e,6),this.unsigned),o=this,i="";;){var c=o.div(s),l=o.sub(c.mul(s)).toInt()>>>0,u=l.toString(e);if(o=c,o.isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}};ye.getHighBits=function(){return this.high};ye.getHighBitsUnsigned=function(){return this.high>>>0};ye.getLowBits=function(){return this.low};ye.getLowBitsUnsigned=function(){return this.low>>>0};ye.getNumBitsAbs=function(){if(this.isNegative())return this.eq(rr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ye.isZero=function(){return this.high===0&&this.low===0};ye.eqz=ye.isZero;ye.isNegative=function(){return!this.unsigned&&this.high<0};ye.isPositive=function(){return this.unsigned||this.high>=0};ye.isOdd=function(){return(this.low&1)===1};ye.isEven=function(){return(this.low&1)===0};ye.equals=function(e){return sr(e)||(e=Wr(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ye.eq=ye.equals;ye.notEquals=function(e){return!this.eq(e)};ye.neq=ye.notEquals;ye.ne=ye.notEquals;ye.lessThan=function(e){return this.comp(e)<0};ye.lt=ye.lessThan;ye.lessThanOrEqual=function(e){return this.comp(e)<=0};ye.lte=ye.lessThanOrEqual;ye.le=ye.lessThanOrEqual;ye.greaterThan=function(e){return this.comp(e)>0};ye.gt=ye.greaterThan;ye.greaterThanOrEqual=function(e){return this.comp(e)>=0};ye.gte=ye.greaterThanOrEqual;ye.ge=ye.greaterThanOrEqual;ye.compare=function(e){if(sr(e)||(e=Wr(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ye.comp=ye.compare;ye.negate=function(){return!this.unsigned&&this.eq(rr)?rr:this.not().add(ho)};ye.neg=ye.negate;ye.add=function(e){sr(e)||(e=Wr(e));var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,s=this.low&65535,o=e.high>>>16,i=e.high&65535,c=e.low>>>16,l=e.low&65535,u=0,d=0,f=0,p=0;return p+=s+l,f+=p>>>16,p&=65535,f+=a+c,d+=f>>>16,f&=65535,d+=r+i,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Ft(f<<16|p,u<<16|d,this.unsigned)};ye.subtract=function(e){return sr(e)||(e=Wr(e)),this.add(e.neg())};ye.sub=ye.subtract;ye.multiply=function(e){if(this.isZero())return _r;if(sr(e)||(e=Wr(e)),wr){var n=wr.mul(this.low,this.high,e.low,e.high);return Ft(n,wr.get_high(),this.unsigned)}if(e.isZero())return _r;if(this.eq(rr))return e.isOdd()?rr:_r;if(e.eq(rr))return this.isOdd()?rr:_r;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Hy)&&e.lt(Hy))return Sr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,s=this.low>>>16,o=this.low&65535,i=e.high>>>16,c=e.high&65535,l=e.low>>>16,u=e.low&65535,d=0,f=0,p=0,h=0;return h+=o*u,p+=h>>>16,h&=65535,p+=s*u,f+=p>>>16,p&=65535,p+=o*l,f+=p>>>16,p&=65535,f+=a*u,d+=f>>>16,f&=65535,f+=s*l,d+=f>>>16,f&=65535,f+=o*c,d+=f>>>16,f&=65535,d+=r*u+a*l+s*c+o*i,d&=65535,Ft(p<<16|h,d<<16|f,this.unsigned)};ye.mul=ye.multiply;ye.divide=function(e){if(sr(e)||(e=Wr(e)),e.isZero())throw Error("division by zero");if(wr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?wr.div_u:wr.div_s)(this.low,this.high,e.low,e.high);return Ft(n,wr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ss:_r;var r,a,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ss;if(e.gt(this.shru(1)))return m1;s=Ss}else{if(this.eq(rr)){if(e.eq(ho)||e.eq(Bp))return rr;if(e.eq(rr))return ho;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(_r)?e.isNegative()?ho:Bp:(a=this.sub(e.mul(r)),s=r.add(a.div(e)),s)}else if(e.eq(rr))return this.unsigned?Ss:_r;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=_r}for(a=this;a.gte(e);){r=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(r)/Math.LN2),c=i<=48?1:$c(2,i-48),l=Sr(r),u=l.mul(e);u.isNegative()||u.gt(a);)r-=c,l=Sr(r,this.unsigned),u=l.mul(e);l.isZero()&&(l=ho),s=s.add(l),a=a.sub(u)}return s};ye.div=ye.divide;ye.modulo=function(e){if(sr(e)||(e=Wr(e)),wr){var n=(this.unsigned?wr.rem_u:wr.rem_s)(this.low,this.high,e.low,e.high);return Ft(n,wr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ye.mod=ye.modulo;ye.rem=ye.modulo;ye.not=function(){return Ft(~this.low,~this.high,this.unsigned)};ye.and=function(e){return sr(e)||(e=Wr(e)),Ft(this.low&e.low,this.high&e.high,this.unsigned)};ye.or=function(e){return sr(e)||(e=Wr(e)),Ft(this.low|e.low,this.high|e.high,this.unsigned)};ye.xor=function(e){return sr(e)||(e=Wr(e)),Ft(this.low^e.low,this.high^e.high,this.unsigned)};ye.shiftLeft=function(e){return sr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ft(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ft(0,this.low<<e-32,this.unsigned)};ye.shl=ye.shiftLeft;ye.shiftRight=function(e){return sr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ft(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ft(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ye.shr=ye.shiftRight;ye.shiftRightUnsigned=function(e){if(sr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Ft(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Ft(n,0,this.unsigned):Ft(n>>>e-32,0,this.unsigned)};ye.shru=ye.shiftRightUnsigned;ye.shr_u=ye.shiftRightUnsigned;ye.toSigned=function(){return this.unsigned?Ft(this.low,this.high,!1):this};ye.toUnsigned=function(){return this.unsigned?this:Ft(this.low,this.high,!0)};ye.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ye.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ye.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Ot.fromBytes=function(e,n,r){return r?Ot.fromBytesLE(e,n):Ot.fromBytesBE(e,n)};Ot.fromBytesLE=function(e,n){return new Ot(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Ot.fromBytesBE=function(e,n){return new Ot(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const v1=Ws(p1),wT=Vh({__proto__:null,default:v1},[p1]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vs=v1||wT;function sf(t){return vs.fromString(t,!0,16)}const b1=sf("c3a5c85c97cb3127"),ms=sf("b492b66fbe98f273"),Rn=sf("9ae16a3b2f90404f");function Lp(t){return t.xor(t.shru(47))}function w1(t,e,n){const r=t.slice(e,e+n);return vs.fromBytes(Array.from(r),!0,!0)}function Nt(t,e){return w1(t,e,8)}function jy(t,e){return w1(t,e,4)}function dn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ba(t,e,n=sf("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function ST(t,e,n,r,a,s){a=a.add(t),s=dn(s.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),s=s.add(dn(a,44)),[a.add(r),s.add(o)]}function rc(t,e,n,r){return ST(Nt(t,e),Nt(t,e+8),Nt(t,e+16),Nt(t,e+24),n,r)}function _T(t,e=t.length){if(e>=8){const n=Rn.add(e*2),r=Nt(t,0).add(Rn),a=Nt(t,e-8),s=dn(a,37).mul(n).add(r),o=dn(r,25).add(a).mul(n);return Ba(s,o,n)}if(e>=4){const n=Rn.add(e*2),r=jy(t,0);return Ba(r.shl(3).add(e),jy(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],s=n+(r<<8),o=e+(a<<2);return Lp(Rn.mul(s).xor(b1.mul(o))).mul(Rn)}return Rn}function xT(t,e=t.length){const n=Rn.add(e*2),r=Nt(t,0).mul(ms),a=Nt(t,8),s=Nt(t,e-8).mul(n),o=Nt(t,e-16).mul(Rn);return Ba(dn(r.add(a),43).add(dn(s,30)).add(o),r.add(dn(a.add(Rn),18)).add(s),n)}function IT(t,e=t.length){const n=Rn.add(e*2),r=Nt(t,0).mul(Rn),a=Nt(t,8),s=Nt(t,e-8).mul(n),o=Nt(t,e-16).mul(Rn),i=dn(r.add(a),43).add(dn(s,30)).add(o),c=Ba(i,r.add(dn(a.add(Rn),18)).add(s),n),l=Nt(t,16).mul(n),u=Nt(t,24),d=i.add(Nt(t,e-32)).mul(n),f=c.add(Nt(t,e-24)).mul(n);return Ba(dn(l.add(u),43).add(dn(d,30)).add(f),l.add(dn(u.add(r),18)).add(d),n)}function kT(t,e=t.length){const n=vs.fromNumber(81,!0);if(e<=32)return e<=16?_T(t,e):xT(t,e);if(e<=64)return IT(t,e);let r=n,a=n.mul(ms).add(113),s=Lp(a.mul(Rn).add(113)).mul(Rn),o=[vs.UZERO,vs.UZERO],i=[vs.UZERO,vs.UZERO];r=r.mul(Rn).add(Nt(t,0));let c=0;const l=(e-1>>6)*64,u=l+(e-1&63)-63;do r=dn(r.add(a).add(o[0]).add(Nt(t,c+8)),37).mul(ms),a=dn(a.add(o[1]).add(Nt(t,c+48)),42).mul(ms),r=r.xor(i[1]),a=a.add(o[0]).add(Nt(t,c+40)),s=dn(s.add(i[0]),33).mul(ms),o=rc(t,c,o[1].mul(ms),r.add(i[0])),i=rc(t,c+32,s.add(i[1]),a.add(Nt(t,c+16))),[s,r]=[r,s],c+=64;while(c!==l);const d=ms.add(s.and(255).shl(1));return c=u,i[0]=i[0].add(e-1&63),o[0]=o[0].add(i[0]),i[0]=i[0].add(o[0]),r=dn(r.add(a).add(o[0]).add(Nt(t,c+8)),37).mul(d),a=dn(a.add(o[1]).add(Nt(t,c+48)),42).mul(d),r=r.xor(i[1].mul(9)),a=a.add(o[0].mul(9).add(Nt(t,c+40))),s=dn(s.add(i[0]),33).mul(d),o=rc(t,c,o[1].mul(d),r.add(i[0])),i=rc(t,c+32,s.add(i[1]),a.add(Nt(t,c+16))),[s,r]=[r,s],Ba(Ba(o[0],i[0],d).add(Lp(a).mul(b1)).add(s),Ba(o[1],i[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vm(t,e){return e==="string"?ks(t):Vs([t],e)}function ET(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Vs(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=tu(t)),Xe().getBool("DEBUG")&&aT(t,e),ET(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function za(){return Xe().platform.now()}function TT(t,e){return Xe().platform.fetch(t,e)}function ks(t,e="utf-8"){return e=e||"utf-8",Xe().platform.encode(t,e)}function eu(t,e="utf-8"){return e=e||"utf-8",Xe().platform.decode(t,e)}function kr(t){return Xe().platform.isTypedArray!=null?Xe().platform.isTypedArray(t):f1(t)}function tu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Rs(t)||t==null||kr(t)&&n)e.push(t);else if(Array.isArray(t)||kr(t))for(let r=0;r<t.length;++r)tu(t[r],e,n);else{let r=-1;for(const a of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)tu(t[a],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CT{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new AT)}profileKernel(e,n,r){let a;const s=()=>{a=r()};let o;const i=za();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:za()-i})}if(Xe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(d=>{NT(d,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:s,extraInfo:o}=e;r.forEach(i=>{Promise.all([i.data(),a,o]).then(c=>{this.logger.logKernelProfile(n,i,c[0],c[1],s,c[2])})})}}function NT(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class AT{logKernelProfile(e,n,r,a,s,o){const i=typeof a=="number"?mc(`${a}ms`,9):a.error,c=mc(e,25),l=n.rank,u=n.size,d=mc(n.shape.toString(),14);let f="";for(const p in s){const h=s[p];if(h!=null){const m=h.shape||n.shape,g=m.length;f+=`${p}: ${g}D ${g>0?m:""} `}}console.log(`%c${c}	%c${i}	%c${l}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RT(t,e,n){const r={},a={};for(let c=0;c<e.length;c++)r[e[c].id]=!0;for(let c=0;c<t.length;c++){const l=t[c],u=l.inputs;for(const d in u){const f=u[d];let p=!1;for(let h=0;h<e.length;h++)if(r[f.id]){l.outputs.forEach(m=>r[m.id]=!0),p=!0,a[l.id]=!0;break}if(p)break}}const s={};s[n.id]=!0;const o={};for(let c=t.length-1;c>=0;c--){const l=t[c],u=l.inputs;for(let d=0;d<l.outputs.length;d++)if(s[l.outputs[d].id]){for(const f in u)s[u[f].id]=!0,o[l.id]=!0;break}}const i=[];for(let c=0;c<t.length;c++){const l=t[c];if(a[l.id]&&o[l.id]){const u={};for(const f in l.inputs){const p=l.inputs[f];r[p.id]&&(u[f]=p)}const d=Object.assign({},l);d.inputs=u,d.outputs=l.outputs,i.push(d)}}return i}function $T(t,e,n,r){for(let a=e.length-1;a>=0;a--){const s=e[a],o=[];if(s.outputs.forEach(c=>{const l=t[c.id];l!=null?o.push(l):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const i=s.gradient(o);for(const c in s.inputs){if(!(c in i))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(i)}.`);const l=n(()=>i[c]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${l.dtype}'`);const u=s.inputs[c];if(!Ir(l.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${c}' has shape '${l.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=l;else{const d=t[u.id];t[u.id]=r(d,l),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uy=20,pi=3,jf=7;function DT(t,e,n,r){const a=Ie(e),s=OT(t,e,n,a),o=e.length,i=gc(t,e,n,a,s),c=["Tensor"];return r&&(c.push(`  dtype: ${n}`),c.push(`  rank: ${o}`),c.push(`  shape: [${e}]`),c.push("  values:")),c.push(i.map(l=>"    "+l).join(`
`)),c.join(`
`)}function OT(t,e,n,r){const a=Y(e),s=r[r.length-1],o=new Array(s).fill(0),i=e.length,c=n==="complex64"?Ri(t):t;if(i>1)for(let l=0;l<a/s;l++){const u=l*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],Ai(c[u+d],0,n).length)}return o}function Ai(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(jf))} + ${parseFloat(t[1].toFixed(jf))}j`:ul(t)?r=`'${t}'`:n==="bool"?r=S1(t):r=parseFloat(t.toFixed(jf)).toString(),mc(r,e)}function S1(t){return t===0?"false":"true"}function gc(t,e,n,r,a,s=!0){const o=n==="complex64"?2:1,i=e[0],c=e.length;if(c===0){if(n==="complex64"){const m=Ri(t);return[Ai(m[0],0,n)]}return n==="bool"?[S1(t[0])]:[t[0].toString()]}if(c===1){if(i>Uy){const g=pi*o;let v=Array.from(t.slice(0,g)),b=Array.from(t.slice((i-pi)*o,i*o));return n==="complex64"&&(v=Ri(v),b=Ri(b)),["["+v.map((w,S)=>Ai(w,a[S],n)).join(", ")+", ..., "+b.map((w,S)=>Ai(w,a[i-pi+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?Ri(t):Array.from(t)).map((g,v)=>Ai(g,a[v],n)).join(", ")+"]"]}const l=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(i>Uy){for(let m=0;m<pi;m++){const g=m*d,v=g+d;f.push(...gc(t.slice(g,v),l,n,u,a,!1))}f.push("...");for(let m=i-pi;m<i;m++){const g=m*d,v=g+d;f.push(...gc(t.slice(g,v),l,n,u,a,m===i-1))}}else for(let m=0;m<i;m++){const g=m*d,v=g+d;f.push(...gc(t.slice(g,v),l,n,u,a,m===i-1))}const p=c===2?",":"";f[0]="["+(i>0?f[0]+p:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+p;let h=`,
`;for(let m=2;m<c;m++)h+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":h),f}function Ri(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class on{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Y(e),r!=null){const a=r.length;A(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||tn(n,this.size),this.strides=Ie(e)}set(e,...n){n.length===0&&(n=[0]),A(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Fr().makeTensor(this.values,this.shape,this.dtype)}}let Fr=null,co=null;function FT(t){Fr=t}function MT(t){co=t}class en{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Y(e),this.strides=Ie(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return co.buffer(this.shape,this.dtype,e)}bufferSync(){return co.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return xr(this.shape,e,this.dtype==="complex64")}arraySync(){return xr(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Fr().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>eu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Fr().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Fr().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>eu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Fr().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Fr().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return co.print(this,e)}clone(){return this.throwIfDisposed(),co.clone(this)}toString(e=!1){const n=this.dataSync();return DT(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),co.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Fr().makeVariable(this,e,n,r)}}Object.defineProperty(en,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function PT(){return nm("Tensor",()=>en)}PT();class Dc extends en{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ir(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Fr().disposeTensor(this),this.dataId=e.dataId,Fr().incRef(this,null)}dispose(){Fr().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Dc,Symbol.hasInstance,{value:t=>t instanceof en&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Gy;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Gy||(Gy={}));var Wp;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Wp||(Wp={}));var zp;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(zp||(zp={}));var Vp;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Vp||(Vp={}));var Hp;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Hp||(Hp={}));const BT={float32:Vp,int32:Wp,bool:zp,complex64:Hp};function Bo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return BT[t][e]}function _1(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function x1(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t,e){if(t.dtype===e.dtype)return[t,e];const n=Bo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function LT(t,e){A(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function I1(t){const e=[];return k1(t,e,new Set),e}function k1(t,e,n){if(t==null)return;if(t instanceof en){e.push(t);return}if(!WT(t))return;const r=t;for(const a in r){const s=r[a];n.has(s)||(n.add(s),k1(s,e,n))}}function WT(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t){return t.kernelName!=null}class qy{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ko{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qy}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ys(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new CT(this.backendInstance),!0}setupRegisteredKernels(){By(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){By(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Qh)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,s=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,ys(`Initialization of backend ${e} failed`),ys(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ys(`Initialization of backend ${e} failed`),ys(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:s}=this.initializeBackend(r);if(s||a)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,s=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return ko.nextTensorId++}nextVariableId(){return ko.nextVariableId++}clone(e){const n=W.runKernel(Yl,{x:e}),r={x:e},a=o=>({x:()=>{const i="float32",c={x:o},l={dtype:i};return W.runKernel(xl,c,l)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Rc(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let s=0;r.forEach(c=>{s+=c.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=a-n-s-o;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let i;this.backendName==null&&this.backend;let c;const l=Uf(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Uf(e)){const{kernelName:h,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const v=Rc(h,this.backendName);A(v!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),i=()=>{const b=this.backend.numDataIds();c=v.kernelFunc({inputs:m,attrs:g,backend:this.backend});const w=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,b,w);const S=w.map(I=>I.rank!=null?I:this.makeTensorFromTensorInfo(I));if(a){const I=this.getTensorsForGradient(h,m,S);r=this.saveTensorsForBackwardMode(I)}return S}}else{const{forwardFunc:h}=e,m=g=>{a&&(r=g.map(v=>this.keep(this.clone(v))))};i=()=>{const g=this.backend.numDataIds();c=this.tidy(()=>h(this.backend,m));const v=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,g,v),v}}const{inputs:u,attrs:d}=e,f=Uf(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=i():(p=this.profiler.profileKernel(l,u,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),a&&this.addTapeNode(l,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(h=>u[h]!=null?u[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(c)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const a=Py(e);if(a!=null){const s=a.inputsToSave||[],o=a.outputsToSave||[];let i;a.saveAllInputs?(A(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(n).map(l=>n[l])):i=s.map(l=>n[l]);const c=r.filter((l,u)=>o[u]);return i.concat(c)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let s=e;r==="string"&&ul(e[0])&&(s=e.map(c=>ks(c)));const o=a.write(s,n,r),i=new en(n,r,o,this.nextTensorId());if(this.trackTensor(i,a),r==="string"){const c=this.state.tensorInfo.get(o),l=iT(s);this.state.numBytes+=l-c.bytes,c.bytes=l}return i}makeTensorFromDataId(e,n,r,a){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:s}=e,o=new en(a,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const s=new Dc(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Yi(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Dc||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Yi(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,s,o){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},c=Py(e);c!=null&&(a=c.gradFunc),a!=null&&(i.gradient=l=>(l=l.map((u,d)=>{if(u==null){const f=r[d],p=In(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return u}),a(l.length>1?l:l[0],s,o))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=I1(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===a.id&&this.track(s)})}gradients(e,n,r,a=!1){if(A(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));A(s instanceof en,()=>"The result y returned by f() must be a tensor.");const o=RT(this.state.activeTape,n,s);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const i={};i[s.id]=r??zT(s.shape),$T(i,o,l=>this.tidy(l),VT);const c=n.map(l=>i[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const u of l.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return A(Pp(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{A(n.every(i=>i instanceof en),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((i,c)=>{a[c]=i});const s=(i,c)=>(r=e(...n,c),A(r.value instanceof en,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),A(Pp(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(i,c)=>{const l=r.gradFunc(i,c),u=Array.isArray(l)?l:[l];A(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),A(u.every(f=>f instanceof en),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,p)=>{d[p]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=za(),r=await this.backend.time(e);return r.wallMs=za()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qy;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}ko.nextTensorId=0;ko.nextVariableId=0;function zT(t){const e=tm(Y(t),"float32");return W.makeTensor(e,t,"float32")}function E1(){const t=H0();if(t._tfengine==null){const e=new dT(t);t._tfengine=new ko(e)}return mT(t._tfengine.ENV),FT(()=>t._tfengine),t._tfengine}const W=E1();function VT(t,e){const n={a:t,b:e};return W.runKernel(xu,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Un=Xe();Un.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Un.registerFlag("IS_BROWSER",()=>HT());Un.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Un.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Un.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Un.registerFlag("PROD",()=>!1);Un.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Un.getBool("DEBUG"));Un.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Un.registerFlag("IS_TEST",()=>!1);Un.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Un.getBool("DEBUG"));Un.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Un.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Un.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(t,e){let n=t;if(kr(t))return e==="string"?[]:[t.length];if(_1(t)){const a=t.channels||"RGBA";return[t.height,t.width*a.length]}else if(x1(t))return[t.buffer.size/(e==null?4:Yi(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||kr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Xe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&T1(t,r,[]),r}function T1(t,e,n){if(n=n||[],!Array.isArray(t)&&!kr(t)){A(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}A(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),A(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)T1(t[a],r,n.concat(a))}function Ky(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function C(t,e,n,r="numeric"){if(t instanceof en)return Ky(r,t.dtype,e,n),t;let a=_u(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Ky(r,a,e,n),t==null||!kr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const c=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${c}'`)}const s=Ka(t,a);!kr(t)&&!Array.isArray(t)&&(t=[t]);const i=a!=="string"?Vs(t,a):tu(t,[],!0);return W.makeTensor(i,s,a)}function Oc(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>C(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1="__op";function B(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+C1;const a=(...s)=>{W.startScope(n);try{const o=r(...s);return Rs(o)&&console.error("Cannot return a Promise inside of tidy."),W.endScope(o),o}catch(o){throw W.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(t,e){const n=C(t,"real","complex"),r=C(e,"imag","complex");ar(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return W.runKernel(G0,a)}const Va=B({complex_:jT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(t,e,n,r){if(r==null)r=_u(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(x1(t)||_1(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return W.backend.createTensorFromGPUData(t,e||n,r)}if(!kr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){fr(e);const a=Y(e),s=Y(n);A(a===s,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${s}`);for(let o=0;o<n.length;++o){const i=n[o],c=o===n.length-1?i!==Y(e.slice(o)):!0;A(n[o]===e[o]||!c,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!kr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Vs(t,r):tu(t,[],!0),W.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(t,e,n){const r=Ka(t,n);return Xa(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jp={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class zr{static join(e){return new zr(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>kr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const a=e[r];r!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+a.byteLength;this.shards.push({buffer:a,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const a=n-e,s=new ArrayBuffer(a),o=new Uint8Array(s);let i=0;for(let c=r;c<this.shards.length;c++){const l=this.shards[c],d=e+i-l.start,f=i,h=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,d,h-d);if(o.set(m,f),i+=m.length,n<l.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(a){return e<a.start?-1:e>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=UT(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function UT(t,e){let n=0,r=t.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,s=e(t[a]);if(s===0)return a;s<0?r=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fc=4;async function GT(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const i=a[o],c=Array.isArray(t)?t[o].tensor:t[i];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${i}': ${c.dtype}`);const l={name:i,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){const u=new Promise(async d=>{const f=await c.bytes(),p=f.reduce((g,v)=>g+v.length,0)+Fc*f.length,h=new Uint8Array(p);let m=0;for(let g=0;g<f.length;g++){const v=f[g],b=new Uint8Array(new Uint32Array([v.length]).buffer);h.set(b,m),m+=Fc,h.set(v,m),m+=v.length}d(h)});r.push(u)}else r.push(c.data());e!=null&&(l.group=e),n.push(l)}const s=await Promise.all(r);return{data:qT(s),specs:n}}function N1(t,e){const n=new zr(t),r={};let a,s=0;for(const o of e){const i=o.name,c=o.dtype,l=o.shape,u=Y(l);let d;if("quantization"in o){const f=o.quantization;if(f.dtype==="uint8"||f.dtype==="uint16"){if(!("min"in f&&"scale"in f))throw new Error(`Weight ${o.name} with quantization ${f.dtype} doesn't have corresponding metadata min and scale.`)}else if(f.dtype==="float16"){if(c!=="float32")throw new Error(`Weight ${o.name} is quantized with ${f.dtype} which only supports weights of type float32 not ${c}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${f.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=jp[f.dtype],h=n.slice(s,s+u*p),m=f.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(c==="float32")if(f.dtype==="uint8"||f.dtype==="uint16"){d=new Float32Array(m.length);for(let g=0;g<m.length;g++){const v=m[g];d[g]=v*f.scale+f.min}}else if(f.dtype==="float16")a===void 0&&(a=eC()),d=a(m);else throw new Error(`Unsupported quantization type ${f.dtype} for weight type float32.`);else if(c==="int32"){if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error(`Unsupported quantization type ${f.dtype} for weight type int32.`);d=new Int32Array(m.length);for(let g=0;g<m.length;g++){const v=m[g];d[g]=Math.round(v*f.scale+f.min)}}else throw new Error(`Unsupported dtype in weight '${i}': ${c}`);s+=u*p}else if(c==="string"){const f=Y(o.shape);d=[];for(let p=0;p<f;p++){const h=new Uint32Array(n.slice(s,s+Fc))[0];s+=Fc;const m=new Uint8Array(n.slice(s,s+h));d.push(m),s+=h}}else{const f=jp[c],p=n.slice(s,s+u*f);if(c==="float32")d=new Float32Array(p);else if(c==="int32")d=new Int32Array(p);else if(c==="bool")d=new Uint8Array(p);else if(c==="complex64"){d=new Float32Array(p);const h=new Float32Array(d.length/2),m=new Float32Array(d.length/2);for(let b=0;b<h.length;b++)h[b]=d[b*2],m[b]=d[b*2+1];const g=Mr(h,l,"float32"),v=Mr(m,l,"float32");r[i]=Va(g,v),g.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${i}': ${c}`);s+=u*f}c!=="complex64"&&(r[i]=Mr(d,l,c))}return r}function qT(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),a),a+=s.byteLength}),r.buffer}const Hm=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Xy(t){return Hm?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function KT(t){if(Hm)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function XT(t){if(Hm){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function YT(t){return zr.join(t)}function Yy(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function A1(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function R1(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function jm(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),R1(t,n,r)}function Tu(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Xy(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Xy(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new zr(t.weightData).byteLength}}function $1(t){const e=[];for(const n of t)e.push(...n.weights);return e}function ZT(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function JT(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function QT(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function eC(){const t=ZT(),e=JT(),n=QT();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let o=0;o<r.length;o++){const i=r[o],c=t[n[i>>10]+(i&1023)]+e[i>>10];s[o]=c}return new Float32Array(a)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wt{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Wt.instance==null&&(Wt.instance=new Wt),Wt.instance}static registerSaveRouter(e){Wt.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Wt.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Wt.getHandlers(e,"save")}static getLoadHandlers(e,n){return Wt.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Wt.getInstance().loadRouters:Wt.getInstance().saveRouters).forEach(o=>{const i=o(e,r);i!==null&&a.push(i)}),a}}const tC=t=>Wt.registerSaveRouter(t),nC=t=>Wt.registerLoadRouter(t),rC=t=>Wt.getSaveHandlers(t),aC=(t,e)=>Wt.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Up="tensorflowjs",Gp=1,_s="models_store",Pa="model_info_store";function D1(){if(!Xe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function qp(t){const e=t.result;e.createObjectStore(_s,{keyPath:"modelPath"}),e.createObjectStore(Pa,{keyPath:"modelPath"})}class $s{constructor(e){if(this.indexedDB=D1(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const s=this.indexedDB.open(Up,Gp);s.onupgradeneeded=()=>qp(s),s.onsuccess=()=>{const o=s.result;if(n==null){const i=o.transaction(_s,"readonly"),l=i.objectStore(_s).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),i.oncomplete=()=>o.close()}else{n.weightData=zr.join(n.weightData);const i=Tu(n),c=o.transaction(Pa,"readwrite");let l=c.objectStore(Pa),u;try{u=l.put({modelPath:this.modelPath,modelArtifactsInfo:i})}catch(f){return a(f)}let d;u.onsuccess=()=>{d=o.transaction(_s,"readwrite");const f=d.objectStore(_s);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:i})}catch(h){return a(h)}p.onsuccess=()=>r({modelArtifactsInfo:i}),p.onerror=h=>{l=c.objectStore(Pa);const m=l.delete(this.modelPath);m.onsuccess=()=>(o.close(),a(p.error)),m.onerror=g=>(o.close(),a(p.error))}},u.onerror=f=>(o.close(),a(u.error)),c.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>a(s.error)})}}$s.URL_SCHEME="indexeddb://";const O1=t=>Xe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($s.URL_SCHEME)?sC(t.slice($s.URL_SCHEME.length)):null;Wt.registerSaveRouter(O1);Wt.registerLoadRouter(O1);function sC(t){return new $s(t)}function oC(t){return t.startsWith($s.URL_SCHEME)?t.slice($s.URL_SCHEME.length):t}class iC{constructor(){this.indexedDB=D1()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Up,Gp);r.onupgradeneeded=()=>qp(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Pa,"readonly"),i=s.objectStore(Pa).getAll();i.onsuccess=()=>{const c={};for(const l of i.result)c[l.modelPath]=l.modelArtifactsInfo;e(c)},i.onerror=c=>(a.close(),n(i.error)),s.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=oC(e),new Promise((n,r)=>{const a=this.indexedDB.open(Up,Gp);a.onupgradeneeded=()=>qp(a),a.onsuccess=()=>{const s=a.result,o=s.transaction(Pa,"readwrite"),i=o.objectStore(Pa),c=i.get(e);let l;c.onsuccess=()=>{if(c.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=i.delete(e),d=()=>{l=s.transaction(_s,"readwrite");const p=l.objectStore(_s).delete(e);p.onsuccess=()=>n(c.result.modelArtifactsInfo),p.onerror=h=>r(c.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(c.error))}},c.onerror=u=>(s.close(),r(c.error)),o.oncomplete=()=>{l==null?s.close():l.oncomplete=()=>s.close()}},a.onerror=s=>r(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const da="/",lo="tensorflowjs_models",F1="info",uC="model_topology",cC="weight_specs",lC="weight_data",dC="model_metadata";function M1(t){return{info:[lo,t,F1].join(da),topology:[lo,t,uC].join(da),weightSpecs:[lo,t,cC].join(da),weightData:[lo,t,lC].join(da),modelMetadata:[lo,t,dC].join(da)}}function P1(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function fC(t){const e=t.split(da);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(da)}function pC(t){return t.startsWith(Ds.URL_SCHEME)?t.slice(Ds.URL_SCHEME.length):t}class Ds{constructor(e){if(!Xe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=M1(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Tu(e),s=zr.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,KT(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}}catch{throw P1(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const i=JSON.parse(s);n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,i.signature!=null&&(n.signature=i.signature),i.userDefinedMetadata!=null&&(n.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(n.modelInitializer=i.modelInitializer),i.initializerSignature!=null&&(n.initializerSignature=i.initializerSignature),i.trainingConfig!=null&&(n.trainingConfig=i.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=XT(o),n}}Ds.URL_SCHEME="localstorage://";const B1=t=>Xe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ds.URL_SCHEME)?hC(t.slice(Ds.URL_SCHEME.length)):null;Wt.registerSaveRouter(B1);Wt.registerLoadRouter(B1);function hC(t){return new Ds(t)}class mC{constructor(){A(Xe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),A(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=lo+da,r=da+F1;for(let a=0;a<this.LS.length;++a){const s=this.LS.key(a);if(s.startsWith(n)&&s.endsWith(r)){const o=fC(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=pC(e);const n=M1(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return P1(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vo="://";class An{constructor(){this.managers={}}static getInstance(){return An.instance==null&&(An.instance=new An),An.instance}static registerManager(e,n){A(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(vo)&&(e=e.slice(0,e.indexOf(vo))),A(e.length>0,()=>"scheme must not be an empty string.");const r=An.getInstance();A(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=An.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(An.getInstance().managers)}}function yc(t){if(t.indexOf(vo)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${An.getSchemes().join(",")}`);return{scheme:t.split(vo)[0],path:t.split(vo)[1]}}async function L1(t,e,n=!1){A(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Wt.getLoadHandlers(t);A(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),A(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],s=Wt.getSaveHandlers(e);A(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),A(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=s[0],i=yc(t).scheme,c=yc(t).path,l=i===yc(t).scheme,u=await a.load();n&&l&&await An.getManager(i).removeModel(c);const d=await o.save(u);return n&&!l&&await An.getManager(i).removeModel(c),d.modelArtifactsInfo}async function gC(){const t=An.getSchemes(),e={};for(const n of t){const r=await An.getManager(n).listModels();for(const a in r){const s=n+vo+a;e[s]=r[a]}}return e}async function yC(t){const e=yc(t);return An.getManager(e.scheme).removeModel(e.path)}async function vC(t,e){return L1(t,e,!1)}async function bC(t,e){return L1(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wC{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Xe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return f1(e)}}if(Xe().get("IS_BROWSER")){Xe().setPlatform("browser",new wC);try{An.registerManager(Ds.URL_SCHEME,new mC)}catch{}try{An.registerManager($s.URL_SCHEME,new iC)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SC={importFetch:()=>require("node-fetch")};let Gf;class _C{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Xe().global.fetch!=null?Xe().global.fetch(e,n):(Gf==null&&(Gf=SC.importFetch()),Gf(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Xe().get("IS_NODE")&&!Xe().get("IS_BROWSER")&&Xe().setPlatform("node",new _C);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qe(t,e="float32",n){return e=e||"float32",fr(t),new on(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xC(t,e){const n=C(t,"x","cast");if(!sT(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return W.runKernel(xl,r,a)}const zt=B({cast_:xC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IC(t){const n={x:C(t,"x","clone","string_or_numeric")};return W.runKernel(Yl,n)}const La=B({clone_:IC});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */E1();const kC={buffer:Qe,cast:zt,clone:La,print:W1};MT(kC);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kp(){return W}function Je(t,e){return W.tidy(t,e)}function un(t){I1(t).forEach(n=>n.dispose())}function Yr(t){return W.keep(t)}function Zy(t){return W.setBackend(t)}function EC(){return W.ready()}function z1(t,e,n=1){return W.registerBackend(t,e,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TC(t,e){let n=C(t,"a","add"),r=C(e,"b","add");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(xu,a)}const Ae=B({add_:TC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CC(t,e){let n=C(t,"a","floorDiv"),r=C(e,"b","floorDiv");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(Ul,a)}const V1=B({floorDiv_:CC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NC(t,e){let n=C(t,"a","div"),r=C(e,"b","div");if([n,r]=Kt(n,r),n.dtype==="int32"&&r.dtype==="int32")return V1(n,r);const a={a:n,b:r},s={};return W.runKernel(Pl,a,s)}const Ze=B({div_:NC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AC(t,e){let n=C(t,"a","mul"),r=C(e,"b","mul");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(bd,a)}const he=B({mul_:AC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RC(t){const e=C(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return W.runKernel(q0,n)}else{const n={x:e};return W.runKernel(rm,n)}}const cr=B({abs_:RC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $C(t){const n={x:C(t,"x","acos")};return W.runKernel(cl,n)}const DC=B({acos_:$C});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OC(t){const n={x:C(t,"x","acosh")};return W.runKernel(ll,n)}const FC=B({acosh_:OC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MC(t){A(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),A(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,s)=>C(a,`tensors${s}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!Ir(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return W.runKernel(dl,r)}const PC=B({addN_:MC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(t,e=null,n=!1){const a={x:C(t,"x","all","bool")},s={axis:e,keepDims:n};return W.runKernel(fl,a,s)}const LC=B({all_:BC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(t,e=null,n=!1){const a={x:C(t,"x","any","bool")},s={axis:e,keepDims:n};return W.runKernel(pl,a,s)}const zC=B({any_:WC});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VC(t,e=0){const r={x:C(t,"x","argMax")},a={axis:e};return W.runKernel(am,r,a)}const HC=B({argMax_:VC});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jC(t,e=0){const r={x:C(t,"x","argMin")},a={axis:e};return W.runKernel(sm,r,a)}const UC=B({argMin_:jC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GC(t){const n={x:C(t,"x","asin")};return W.runKernel(hl,n)}const qC=B({asin_:GC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KC(t){const n={x:C(t,"x","asinh")};return W.runKernel(ml,n)}const XC=B({asinh_:KC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YC(t){const n={x:C(t,"x","atan")};return W.runKernel(gl,n)}const ZC=B({atan_:YC});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JC(t,e){let n=C(t,"a","atan2"),r=C(e,"b","atan2");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(vl,a)}const QC=B({atan2_:JC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eN(t){const n={x:C(t,"x","atanh")};return W.runKernel(yl,n)}const tN=B({atanh_:eN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lo(t,e,n,r,a="NHWC",s){const o=t[3],i=[...e,o],c=Wo(a);return Kn(t,i,n,s,r,null,null,c)}function Vr(t,e,n,r,a,s,o="channelsLast"){const[i,c]=nu(e);let l;if(o==="channelsLast")l=[i,c,t[3],t[3]];else if(o==="channelsFirst")l=[i,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Kn(t,l,n,r,a,s,!1,o)}function Ya(t,e,n,r,a,s,o="NDHWC"){const[i,c,l]=Xp(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[i,c,l,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[i,c,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Hs(t,u,n,r,a,!1,d,s)}function Kn(t,e,n,r,a,s,o=!1,i="channelsLast"){let[c,l,u,d]=[-1,-1,-1,-1];if(i==="channelsLast")[c,l,u,d]=t;else if(i==="channelsFirst")[c,d,l,u]=t;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,,h]=e,[m,g]=nu(n),[v,b]=nu(r),w=bo(f,v),S=bo(p,b),{padInfo:I,outHeight:E,outWidth:T}=aN(a,l,u,m,g,w,S,s,i),R=o?h*d:h;let $;return i==="channelsFirst"?$=[c,R,E,T]:i==="channelsLast"&&($=[c,E,T,R]),{batchSize:c,dataFormat:i,inHeight:l,inWidth:u,inChannels:d,outHeight:E,outWidth:T,outChannels:R,padInfo:I,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:p,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:v,dilationWidth:b,inShape:t,outShape:$,filterShape:e}}function Hs(t,e,n,r,a,s=!1,o="channelsLast",i){let[c,l,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[c,l,u,d,f]=t;else if(o==="channelsFirst")[c,f,l,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,h,m,,g]=e,[v,b,w]=Xp(n),[S,I,E]=Xp(r),T=bo(p,S),R=bo(h,I),$=bo(m,E),{padInfo:D,outDepth:M,outHeight:z,outWidth:F}=sN(a,l,u,d,v,b,w,T,R,$,i),V=s?g*f:g;let H;return o==="channelsFirst"?H=[c,V,M,z,F]:o==="channelsLast"&&(H=[c,M,z,F,V]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:u,inWidth:d,inChannels:f,outDepth:M,outHeight:z,outWidth:F,outChannels:V,padInfo:D,strideDepth:v,strideHeight:b,strideWidth:w,filterDepth:p,filterHeight:h,filterWidth:m,effectiveFilterDepth:T,effectiveFilterHeight:R,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:I,dilationWidth:E,inShape:t,outShape:H,filterShape:e}}function nN(t,e,n,r,a){r==null&&(r=H1(t,e,n));const s=t[0],o=t[1],i=ru((s-e+2*r)/n+1,a),c=ru((o-e+2*r)/n+1,a);return[i,c]}function rN(t,e,n,r,a,s){a==null&&(a=H1(t,e[0],r[0]));const o=[0,0,0,n];for(let i=0;i<3;i++)t[i]+2*a>=e[i]&&(o[i]=ru((t[i]-e[i]+2*a)/r[i]+1,s));return o}function H1(t,e,n,r=1){const a=bo(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function nu(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Xp(t){return typeof t=="number"?[t,t,t]:t}function bo(t,e){return e<=1?t:t+(t-1)*(e-1)}function aN(t,e,n,r,a,s,o,i,c){let l,u,d;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=nN([e,n],s,r,t,i);u=p[0],d=p[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/a);const f=Math.max(0,(u-1)*r+s-e),p=Math.max(0,(d-1)*a+o-n),h=Math.floor(f/2),m=f-h,g=Math.floor(p/2),v=p-g;l={top:h,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const f=c==="channelsLast"?t[1][0]:t[2][0],p=c==="channelsLast"?t[1][1]:t[2][1],h=c==="channelsLast"?t[2][0]:t[3][0],m=c==="channelsLast"?t[2][1]:t[3][1];l={top:f,bottom:p,left:h,right:m,type:f===0&&p===0&&h===0&&m===0?"VALID":"EXPLICIT"},u=ru((e-s+f+p)/r+1,i),d=ru((n-o+h+m)/a+1,i)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:u,outWidth:d}}function sN(t,e,n,r,a,s,o,i,c,l,u){let d,f,p,h;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=rN([e,n,r,1],[i,c,l],1,[a,s,o],t,u);f=g[0],p=g[1],h=g[2]}else if(t==="same"){f=Math.ceil(e/a),p=Math.ceil(n/s),h=Math.ceil(r/o);const m=(f-1)*a+i-e,g=(p-1)*s+c-n,v=(h-1)*o+l-r,b=Math.floor(m/2),w=m-b,S=Math.floor(g/2),I=g-S,E=Math.floor(v/2),T=v-E;d={top:S,bottom:I,left:E,right:T,front:b,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}function ru(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Mc(t){const[e,n,r]=nu(t);return e===1&&n===1&&r===1}function Er(t,e){return Mc(t)||Mc(e)}function Eo(t){return nu(t).every(e=>e>0)}function Wo(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")A(Xi(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{A(Xi(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oN(t,e){const r={x:C(t,"x","reshape","string_or_numeric")},a={shape:e};return W.runKernel(Im,r,a)}const ae=B({reshape_:oN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iN(t,e,n,r,a){const s=C(t,"x","avgPool","float32"),o=1;A(Er(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let i=s,c=!1;s.rank===3&&(c=!0,i=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),A(i.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),Hr("avgPool",r,a);const l={x:i},u={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=W.runKernel(bl,l,u);return d=zt(d,s.dtype),c?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const j1=B({avgPool_:iN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uN(t,e,n,r,a,s="NDHWC"){const o=C(t,"x","avgPool3d","float32");let i=o,c=!1;o.rank===4&&(c=!0,i=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),A(i.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`),A(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),A(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Hr("avgPool3d",r,a);const l={x:i},u={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:s};let d=W.runKernel(om,l,u);return d=zt(d,i.dtype),c?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const cN=B({avgPool3d_:uN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(t,e=0){A(t.length>=1,()=>"Pass at least one tensor to concat");const n=Oc(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return La(n[0]);const r=n,a={axis:e};return W.runKernel(cm,r,a)}const yn=B({concat_:lN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dN(t,e,n=!1,r=!1){let a=C(t,"a","matMul"),s=C(e,"b","matMul");[a,s]=Kt(a,s);const o={a,b:s},i={transposeA:n,transposeB:r};return W.runKernel(wl,o,i)}const wt=B({matMul_:dN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fN(t){const n={x:C(t,"x","sigmoid","float32")};return W.runKernel(jd,n)}const Es=B({sigmoid_:fN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pN(t,e,n){const r=C(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},s={begin:e,size:n};return W.runKernel(Cm,a,s)}const qe=B({slice_:pN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hN(t){const n={x:C(t,"x","tanh","float32")};return W.runKernel(tf,n)}const Yp=B({tanh_:hN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mN(t,e,n,r,a,s){const o=C(t,"forgetBias","basicLSTMCell"),i=C(e,"lstmKernel","basicLSTMCell"),c=C(n,"lstmBias","basicLSTMCell"),l=C(r,"data","basicLSTMCell"),u=C(a,"c","basicLSTMCell"),d=C(s,"h","basicLSTMCell"),f=yn([l,d],1),p=wt(f,i),h=Ae(p,c),m=h.shape[0],g=h.shape[1]/4,v=[m,g],b=qe(h,[0,0],v),w=qe(h,[0,g],v),S=qe(h,[0,g*2],v),I=qe(h,[0,g*3],v),E=Ae(he(Es(b),Yp(w)),he(u,Es(Ae(o,S)))),T=he(Yp(E),Es(I));return[E,T]}const gN=B({basicLSTMCell_:mN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yN(t,e,n){const r=C(t,"x","batchToSpaceND"),a=e.reduce((i,c)=>i*c);A(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),A(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),A(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const s={x:r},o={blockShape:e,crops:n};return W.runKernel(im,s,o)}const U1=B({batchToSpaceND_:yN});function vN(t){let e;return t.rank===0||t.rank===1?e=ae(t,[1,1,1,t.size]):t.rank===2?e=ae(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(t,e,n,r,a,s){s==null&&(s=.001);const o=C(t,"x","batchNorm"),i=C(e,"mean","batchNorm"),c=C(n,"variance","batchNorm");let l;a!=null&&(l=C(a,"scale","batchNorm"));let u;r!=null&&(u=C(r,"offset","batchNorm")),A(i.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(u==null||i.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(l==null||i.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:vN(o),scale:l,offset:u,mean:i,variance:c},p={varianceEpsilon:s},h=W.runKernel(Gl,f,p);return ae(h,o.shape)}const of=B({batchNorm_:bN});function wN(t,e,n,r,a,s){const o=C(t,"x","batchNorm"),i=C(e,"mean","batchNorm"),c=C(n,"variance","batchNorm");let l;a!=null&&(l=C(a,"scale","batchNorm"));let u;return r!=null&&(u=C(r,"offset","batchNorm")),A(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),A(i.rank===2||i.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`),A(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),of(o,i,c,u,l,s)}const SN=B({batchNorm2d_:wN});function _N(t,e,n,r,a,s){const o=C(t,"x","batchNorm"),i=C(e,"mean","batchNorm"),c=C(n,"variance","batchNorm");let l;a!=null&&(l=C(a,"scale","batchNorm"));let u;return r!=null&&(u=C(r,"offset","batchNorm")),A(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),A(i.rank===3||i.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`),A(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),of(o,i,c,u,l,s)}const xN=B({batchNorm3d_:_N});function IN(t,e,n,r,a,s){const o=C(t,"x","batchNorm"),i=C(e,"mean","batchNorm"),c=C(n,"variance","batchNorm");let l;a!=null&&(l=C(a,"scale","batchNorm"));let u;return r!=null&&(u=C(r,"offset","batchNorm")),A(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),A(i.rank===4||i.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`),A(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),of(o,i,c,u,l,s)}const kN=B({batchNorm4d_:IN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EN(t,e,n){const r=C(t,"x","bincount"),a=C(e,"weights","bincount");A(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),A(n>=0,()=>`size must be non-negative, but got ${n}.`),A(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const s={x:r,weights:a},o={size:n};return W.runKernel(Sl,s,o)}const G1=B({bincount_:EN});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TN(t,e){const n=C(t,"x","bitwiseAnd"),r=C(e,"y","bitwiseAnd");if(!Ir(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const a={a:n,b:r};return W.runKernel(_l,a)}const CN=B({bitwiseAnd_:TN});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NN(t,e){const n=C(t,"s0","broadcastArgs","int32"),r=C(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return W.runKernel(um,a)}const AN=B({broadcastArgs_:NN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RN(t,e){let n=C(t,"broadcastTo","x");const r=n.shape;if(fr(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=ae(n,l)}const a=n.shape,s=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])s[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return La(n);const i={x:n},c={reps:s};return W.runKernel(ku,i,c)}const Li=B({broadcastTo_:RN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(t){const n={x:C(t,"x","ceil","float32")};return W.runKernel(Il,n)}const DN=B({ceil_:$N});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cu(t,e,n){fr(t),n=n||_u(e);const r={shape:t,value:e,dtype:n};return W.runKernel(mm,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ON(t,e,n){const r=C(t,"x","clipByValue");if(A(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Cu(r.shape,e,r.dtype);const a={x:r},s={clipValueMin:e,clipValueMax:n};return W.runKernel(Iu,a,s)}const q1=B({clipByValue_:ON});function FN(t){return yn(t,0)}const MN=B({concat1d_:FN});function PN(t,e){return yn(t,e)}const BN=B({concat2d_:PN});function LN(t,e){return yn(t,e)}const WN=B({concat3d_:LN});function zN(t,e){return yn(t,e)}const VN=B({concat4d_:zN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HN(t,e,n,r,a="NHWC",s=[1,1],o){const i=C(t,"x","conv2d","float32"),c=C(e,"filter","conv2d","float32");let l=i,u=!1;i.rank===3&&(u=!0,l=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),A(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),Hr("conv2d",r,o);const d=a==="NHWC"?l.shape[3]:l.shape[1];A(d===c.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${c.shape[2]}.`),A(Er(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),A(Eo(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),A(Eo(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:l,filter:c},p={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o},h=W.runKernel(kl,f,p);return u?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const uf=B({conv2d_:HN});function jN(t,e,n,r,a="NWC",s=1,o){const i=C(t,"x","conv1d"),c=C(e,"filter","conv1d");let l=i,u=!1;i.rank===2&&(u=!0,l=ae(i,[1,i.shape[0],i.shape[1]])),A(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),A(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),Hr("conv1d",r,o),A(l.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${c.shape[1]}.`),A(Er(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),A(Eo(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),A(Eo(n),()=>"Error in conv1D: Stride should be larger than 0."),A(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=ae(c,[1,c.shape[0],c.shape[1],c.shape[2]]),f=ae(l,[l.shape[0],1,l.shape[1],l.shape[2]]),g=uf(f,d,[1,n],r,"NHWC",[1,s],o);return u?ae(g,[g.shape[2],g.shape[3]]):ae(g,[g.shape[0],g.shape[2],g.shape[3]])}const UN=B({conv1d_:jN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GN(t,e,n,r,a,s="NHWC",o){A(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,c=e,l=!1;e.rank===3&&(l=!0,c=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]),i=[1,t[0],t[1],t[2]]),A(i.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`),A(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),A(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?i[3]:i[1],d=s==="NHWC"?c.shape[3]:c.shape[1];A(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),A(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Hr("conv2dDerInput",a,o);const f={dy:c,filter:n},p={strides:r,pad:a,dataFormat:s,dimRoundingMode:o,inputShape:i},h=W.runKernel(El,f,p);return l?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const K1=B({conv2DBackpropInput_:GN});function qN(t,e,n,r,a,s){const o=C(t,"x","conv2dTranspose"),i=C(e,"filter","conv2dTranspose");return K1(n,o,i,r,a,"NHWC",s)}const KN=B({conv2dTranspose_:qN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XN(t,e,n,r,a="NDHWC",s=[1,1,1]){const o=C(t,"x","conv3d"),i=C(e,"filter","conv3d");let c=o,l=!1;o.rank===4&&(l=!0,c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),A(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),A(i.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`),A(c.shape[4]===i.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${i.shape[3]}.`),A(Er(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),A(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),A(Eo(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),A(Eo(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:c,filter:i},d={strides:n,pad:r,dataFormat:a,dilations:s},f=W.runKernel(Tl,u,d);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const YN=B({conv3d_:XN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZN(t,e,n,r,a){A(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,i=!1;e.rank===4&&(i=!0,o=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const c=s[4],l=o.shape[4];A(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),A(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),A(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),A(c===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`),A(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:a,strides:r,inputShape:s},f=W.runKernel(Cl,u,d);return i?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const JN=B({conv3DBackpropInput_:ZN});function QN(t,e,n,r,a){const s=C(t,"x","conv3dTranspose"),o=C(e,"filter","conv3dTranspose");return JN(n,s,o,r,a)}const eA=B({conv3dTranspose_:QN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tA(t){const n={x:C(t,"x","cos","float32")};return W.runKernel(Nl,n)}const nA=B({cos_:tA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rA(t){const n={x:C(t,"x","cosh","float32")};return W.runKernel(Al,n)}const aA=B({cosh_:rA});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sA(t,e=0,n=!1,r=!1){const s={x:C(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return W.runKernel(Rl,s,o)}const oA=B({cumprod_:sA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iA(t,e=0,n=!1,r=!1){const s={x:C(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return W.runKernel($l,s,o)}const uA=B({cumsum_:iA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cA(t,e,n,r=!1){const a=C(t,"x","denseBincount"),s=C(e,"weights","denseBincount");A(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),A(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),A(n>=0,()=>`size must be non-negative, but got ${n}.`),A(s.size===a.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`);const o={x:a,weights:s},i={size:n,binaryOutput:r};return W.runKernel(dm,o,i)}const lA=B({denseBincount_:cA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dA(t,e,n="NHWC"){const r=C(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];A(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),A(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),A(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),A(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const i={x:r},c={blockSize:e,dataFormat:n};return W.runKernel(Ol,i,c)}const fA=B({depthToSpace_:dA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pA(t,e,n,r,a="NHWC",s=[1,1],o){const i=C(t,"x","depthwiseConv2d","float32"),c=C(e,"filter","depthwiseConv2d","float32");let l=i,u=!1;i.rank===3&&(u=!0,l=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),A(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);const d=a==="NHWC"?l.shape[3]:l.shape[1];A(d===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${c.shape[2]}.`),Hr("depthwiseConv2d",r,o);const f={x:l,filter:c},p={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o},h=W.runKernel(Fl,f,p);return u?ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Um=B({depthwiseConv2d_:pA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hA(t){const n={x:C(t,"x","diag")};return W.runKernel(fm,n)}const mA=B({diag_:hA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gA(t,e,n,r,a=[1,1],s="NHWC"){const o=C(t,"x","dilation2d"),i=C(e,"filter","dilation2d");A(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),A(i.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`),A(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let c=o,l=!1;o.rank===3&&(c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),A(c.shape[3]===i.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${i.shape[2]}`);const u={x:c,filter:i},d={strides:n,pad:r,dilations:a},f=W.runKernel(Ml,u,d);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const yA=B({dilation2d_:gA});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,o=t[s]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(s)}return r}function vA(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],s=e.length-r-1,o=e[s];(a==null||a===1&&o>1)&&n.unshift(s)}return n}function At(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let a=0;a<n;a++){let s=t[t.length-a-1];s==null&&(s=1);let o=e[e.length-a-1];if(o==null&&(o=1),s===1)r[n-a-1]=o;else if(o===1)r[n-a-1]=s;else if(s!==o){const i=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(i)}else r[n-a-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bA(t,e){let n=C(t,"a","equal","string_or_numeric"),r=C(e,"b","equal","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(Wl,a)}const X1=B({equal_:bA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wA(t,e,n){const r=C(e,"a","where"),a=C(n,"b","where"),s=C(t,"condition","where","bool"),o=At(At(s.shape,r.shape),a.shape),i=Li(s,o),c=Li(r,o),l=Li(a,o),u={condition:i,t:c,e:l};return W.runKernel(Tm,u)}const Wa=B({where_:wA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SA(t){const n={x:C(t,"x","zerosLike")};return W.runKernel(Wm,n)}const lr=B({zerosLike_:SA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _A(t,e){let n=C(t,"a","div"),r=C(e,"b","div");[n,r]=Kt(n,r);const a=Ze(n,r),s=lr(a),o=X1(r,s);return Wa(o,s,a)}const xA=B({divNoNan_:_A});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IA(t,e){const n=C(t,"t1","dot"),r=C(e,"t2","dot");A((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(A(a===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`),n.rank===1&&r.rank===1){const o=ae(n,[1,-1]),i=ae(r,[-1,1]),c=wt(o,i);return ae(c,[])}else if(n.rank===1&&r.rank===2){const o=ae(n,[1,-1]),i=ae(r,[r.shape[0],r.shape[1]]),c=wt(o,i);return ae(c,[c.size])}else if(n.rank===2&&r.rank===1){const o=ae(r,[-1,1]),i=wt(n,o);return ae(i,[i.size])}else{const o=ae(r,[r.shape[0],r.shape[1]]);return wt(n,o)}}const kA=B({dot_:IA});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EA(t,...e){const n=e.map((a,s)=>C(a,`tensors${s}`,"einsum")),r={equation:t};return W.runKernel(J0,n,r)}const fo=B({einsum_:EA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TA(t){const n={x:C(t,"x","elu","float32")};return W.runKernel(Bl,n)}const Y1=B({elu_:TA});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CA(t,e){const n=C(t,"x","ensureShape","string_or_numeric");if(!nT(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const NA=B({ensureShape_:CA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AA(t){let e=C(t,"x","erf");A(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=zt(e,"float32"));const n={x:e};return W.runKernel(Ll,n)}const RA=B({erf_:AA});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function $A(t,e,n){const r=t.length+e.length,a=[];let s=0,o=0;for(let i=0;i<r;i++)n.indexOf(i)===-1?a.push(t[s++]):a.push(e[o++]);return a}function On(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const a=e.map(s=>t[s]);return[n,a]}function vn(t,e){const n=e.map(r=>1);return $A(t,n,e)}function Fn(t,e,n){A(Z1(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function pr(t,e){if(Z1(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function cf(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Mn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DA(t,e=null,n=!1){const a={x:C(t,"x","max")},s={reductionIndices:e,keepDims:n};return W.runKernel(ld,a,s)}const wo=B({max_:DA});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OA(t,e=null,n=!1){const a={x:C(t,"x","min")},s={axis:e,keepDims:n};return W.runKernel(hd,a,s)}const Zp=B({min_:OA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FA(t,e){let n=C(t,"base","pow"),r=C(e,"exp","pow");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(Ed,a)}const au=B({pow_:FA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ut(t,e){if((kr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&kr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Xa(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MA(t){const n={x:C(t,"x","sqrt","float32")};return W.runKernel(Gd,n)}const ga=B({sqrt_:MA});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PA(t){const e=C(t,"x","square"),n={};return W.runKernel("Square",{x:e},n)}const Pr=B({square_:PA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(t,e=null,n=!1){let r=C(t,"x","sum");r.dtype==="bool"&&(r=zt(r,"int32"));const a={x:r},s={axis:e,keepDims:n};return W.runKernel(qd,a,s)}const Dt=B({sum_:BA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LA(t,e="euclidean",n=null,r=!1){t=C(t,"x","norm");const a=J1(t,e,n);let s=a.shape;if(r){const o=Vt(n,t.shape);s=vn(a.shape,o)}return ae(a,s)}function J1(t,e,n=null){if(t.rank===0)return cr(t);if(t.rank!==1&&n===null)return J1(ae(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Dt(cr(t),n);if(e===1/0)return wo(cr(t),n);if(e===-1/0)return Zp(cr(t),n);if(e==="euclidean"||e===2)return ga(Dt(au(cr(t),ut(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return wo(Dt(cr(t),n[0]),n[1]-1);if(e===1/0)return wo(Dt(cr(t),n[1]),n[0]);if(e===-1/0)return Zp(Dt(cr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ga(Dt(Pr(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const lf=B({norm_:LA});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WA(t,e=null,n=!1){return lf(t,"euclidean",e,n)}const zA=B({euclideanNorm_:WA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VA(t){const n={x:C(t,"x","exp")};return W.runKernel(zl,n)}const ya=B({exp_:VA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HA(t,e=0){const n=C(t,"x","expandDims","string_or_numeric");A(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return W.runKernel(hm,r,a)}const Kr=B({expandDims_:HA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jA(t){const n={x:C(t,"x","expm1")};return W.runKernel(Vl,n)}const UA=B({expm1_:jA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(t,e){const n=C(t,"x","tile","string_or_numeric");A(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return W.runKernel(ku,r,a)}const Wi=B({tile_:GA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qA(t,e,n,r="float32"){e==null&&(e=t);const a=Qe([t,e],r),s=t<=e?t:e;for(let i=0;i<s;++i)a.set(1,i,i);const o=ae(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Wi(Kr(o,0),[n[0],1,1]);if(n.length===2)return Wi(Kr(Kr(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Wi(Kr(Kr(Kr(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Q1=B({eye_:qA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KA(t){const n={x:C(t,"x","floor","float32")};return W.runKernel(jl,n)}const ew=B({floor_:KA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XA(t,e,n=0,r=0){const a=C(t,"x","gather"),s=C(e,"indices","gather","int32"),o={x:a,indices:s},i={axis:n,batchDims:r};return W.runKernel(gm,o,i)}const tw=B({gather_:XA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YA(t,e){let n=C(t,"a","greater","string_or_numeric"),r=C(e,"b","greater","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(Kl,a)}const df=B({greater_:YA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZA(t,e){let n=C(t,"a","greaterEqual","string_or_numeric"),r=C(e,"b","greaterEqual","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(Xl,a)}const nw=B({greaterEqual_:ZA});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JA(t){const n={input:C(t,"input","imag")};return W.runKernel(t1,n)}const ff=B({imag_:JA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QA(t){const n={x:C(t,"x","isFinite")};return W.runKernel(Zl,n)}const e4=B({isFinite_:QA});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4(t){const n={x:C(t,"x","isInf")};return W.runKernel(Jl,n)}const n4=B({isInf_:t4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4(t){const n={x:C(t,"x","isNaN")};return W.runKernel(Ql,n)}const a4=B({isNaN_:r4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4(t,e=.2){const r={x:C(t,"x","leakyRelu")},a={alpha:e};return W.runKernel(ed,r,a)}const rw=B({leakyRelu_:s4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4(t,e){let n=C(t,"a","less","string_or_numeric"),r=C(e,"b","less","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(td,a)}const Jp=B({less_:o4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4(t,e){let n=C(t,"a","lessEqual","string_or_numeric"),r=C(e,"b","lessEqual","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(nd,a)}const Gm=B({lessEqual_:i4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return W.runKernel(rd,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4(t,e=5,n=1,r=1,a=.5){const s=C(t,"x","localResponseNormalization");A(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),A(Xi(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,i=!1;s.rank===3&&(i=!0,o=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const c={x:o},l={depthRadius:e,bias:n,alpha:r,beta:a},u=W.runKernel(cd,c,l);return i?ae(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const l4=B({localResponseNormalization_:c4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4(t){const n={x:C(t,"x","log","float32")};return W.runKernel(ad,n)}const su=B({log_:d4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(t){const n={x:C(t,"x","log1p")};return W.runKernel(sd,n)}const aw=B({log1p_:f4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4(t,e){A(Pp(t),()=>"The f passed in variableGrads(f) must be a function"),A(e==null||Array.isArray(e)&&e.every(l=>l instanceof Dc),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in W.registeredVariables)e.push(W.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,a=e.length;e=e.filter(l=>l.trainable),A(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const s=!0,{value:o,grads:i}=W.gradients(t,e,null,s);A(i.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),A(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const c={};return e.forEach((l,u)=>{i[u]!=null&&(c[l.name]=i[u])}),r?.forEach(l=>c[l.name]=null),{value:o,grads:c}}function va(t){return W.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4(t){const n={x:C(t,"x","neg")};return W.runKernel(wm,n)}const Jr=B({neg_:h4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(t){const n={x:C(t,"x","softplus")};return W.runKernel(Ud,n)}const sw=B({softplus_:m4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(t){const e=C(t,"x","logSigmoid");return va(r=>({value:Jr(sw(Jr(r))),gradFunc:o=>he(o,Es(Jr(r)))}))(e)}const y4=B({logSigmoid_:g4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(t,e){let n=C(t,"a","sub"),r=C(e,"b","sub");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(Qd,a)}const Ke=B({sub_:v4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4(t,e=-1){const n=C(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return va((a,s)=>{const i=wo(a,e,!0),c=Ke(a,i),l=Ke(zt(c,"float32"),su(Dt(ya(c),e,!0)));return s([l]),{value:l,gradFunc:(d,f)=>{const[p]=f,h=!0,m=ya(p);return Ke(d,he(Dt(d,e,h),m))}}})(n)}const w4=B({logSoftmax_:b4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(t,e=null,n=!1){const r=C(t,"x","logSumExp"),a=Vt(e,r.shape),s=wo(r,a,!0),o=Ke(r,s),i=ya(o),c=Dt(i,a),l=su(c),u=Ae(ae(s,l.shape),l);if(n){const d=vn(u.shape,a);return ae(u,d)}return u}const ow=B({logSumExp_:S4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4(t,e){const n=C(t,"a","logicalAnd","bool"),r=C(e,"b","logicalAnd","bool");At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(od,a)}const Bc=B({logicalAnd_:_4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4(t){const n={x:C(t,"x","logicalNot","bool")};return W.runKernel(id,n)}const iw=B({logicalNot_:x4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4(t,e){const n=C(t,"a","logicalOr","bool"),r=C(e,"b","logicalOr","bool");At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(ud,a)}const uw=B({logicalOr_:I4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4(t,e){const n=C(t,"a","logicalXor","bool"),r=C(e,"b","logicalXor","bool");return At(n.shape,r.shape),Bc(uw(t,e),iw(Bc(t,e)))}const E4=B({logicalXor_:k4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ac=2147483648;function T4(t,e,n="left"){const r=C(t,"sortedSequence","searchSorted"),a=C(e,"values","searchSorted"),s=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],i=ae(r,[-1,s]),c=ae(a,[-1,o]);if(i.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(i.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Y(c.shape)>=ac)throw new Error(`values tensor size must less than ${ac}`);if(i.shape[1]>=ac)throw new Error(`trailing dim_size must less than ${ac} for int32 output type, was ${i.shape[1]}`);const l={sortedSequence:i,values:c},u={side:n};return W.runKernel(Ld,l,u)}const qm=B({searchSorted_:T4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4(t,e){return qm(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4(t,e,n,r,a){const s=C(t,"x","maxPool"),o=1;let i=s,c=!1;s.rank===3&&(c=!0,i=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),A(i.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),A(Er(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Hr("maxPool",r,a);const l={x:i},u={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=W.runKernel(fd,l,u);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const cw=B({maxPool_:N4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4(t,e=[1,1,1],n,r,a,s="NDHWC"){const o=C(t,"x","maxPool3d");let i=o,c=!1;o.rank===4&&(c=!0,i=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),A(i.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`),A(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Hr("maxPool3d",r,a);const l={x:i},u={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:s},d=W.runKernel(vm,l,u);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const R4=B({maxPool3d_:A4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4(t,e,n,r,a=!1){const o={x:C(t,"x","maxPoolWithArgmax")},i={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},c=W.runKernel(bm,o,i);return{result:c[0],indexes:c[1]}}const D4=B({maxPoolWithArgmax_:$4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4(t,e){let n=C(t,"a","maximum"),r=C(e,"b","maximum");[n,r]=Kt(n,r),n.dtype==="bool"&&(n=zt(n,"int32"),r=zt(r,"int32")),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(dd,a)}const lw=B({maximum_:O4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4(t,e=null,n=!1){const a={x:C(t,"x","mean")},s={axis:e,keepDims:n};return W.runKernel(pd,a,s)}const Lc=B({mean_:F4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function To(t,e="float32"){if(fr(t),e==="complex64"){const r=To(t,"float32"),a=To(t,"float32");return Va(r,a)}const n=In(Y(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(t,e="float32"){if(fr(t),e==="complex64"){const r=xs(t,"float32"),a=To(t,"float32");return Va(r,a)}const n=tm(Y(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=C(t,"x","meshgrid",t instanceof en?t.dtype:"float32");if(e===void 0)return[r];let a=C(e,"y","meshgrid",e instanceof en?e.dtype:"float32");const s=Y(r.shape),o=Y(a.shape);return n==="xy"?(r=ae(r,[1,-1]),a=ae(a,[-1,1]),[wt(xs([o,1],r.dtype),r),wt(a,xs([1,s],a.dtype))]):(r=ae(r,[-1,1]),a=ae(a,[1,-1]),[wt(r,xs([1,o],r.dtype)),wt(xs([s,1],a.dtype),a)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4(t,e){let n=C(t,"a","minimum"),r=C(e,"b","minimum");[n,r]=Kt(n,r),n.dtype==="bool"&&(n=zt(n,"int32"),r=zt(r,"int32")),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(md,a)}const Wc=B({minimum_:P4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4(t,e,n){A(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=C(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");A(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let i=0;i<r.rank;i++)A(e[i].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),A(e[i][0]>=0&&e[i][0]<=r.shape[i]-a&&e[i][1]>=0&&e[i][1]<=r.shape[i]-a,()=>`Padding in dimension ${i} cannot be greater than or equal to ${r.shape[i]-a} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return W.runKernel(gd,o,s)}const L4=B({mirrorPad_:B4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4(t,e){let n=C(t,"a","mod"),r=C(e,"b","mod");[n,r]=Kt(n,r);const a={a:n,b:r};return W.runKernel(yd,a)}const z4=B({mod_:W4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4(t,e=null,n=!1){t=C(t,"x","moments");const r=Vt(e,t.shape),a=Lc(t,r,n);let s=a.shape;n||(s=vn(a.shape,r));const o=Pr(Ke(zt(t,"float32"),ae(a,s))),i=Lc(o,r,n);return{mean:a,variance:i}}const H4=B({moments_:V4});function j4(t,e,n,r){const a=C(e,"data","multiRNNCell"),s=Oc(n,"c","multiRNNCell"),o=Oc(r,"h","multiRNNCell");let i=a;const c=[];for(let d=0;d<t.length;d++){const f=t[d](i,s[d],o[d]);c.push(f[0]),c.push(f[1]),i=f[1]}const l=[],u=[];for(let d=0;d<c.length;d+=2)l.push(c[d]),u.push(c[d+1]);return[l,u]}const U4=B({multiRNNCell_:j4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4(t,e,n,r=!1){const a=C(t,"logits","multinomial"),s=a.size,o=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const c={logits:o===1?ae(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=W.runKernel(vd,c,l);return o===1?ae(u,[u.size]):u}const q4=B({multinomial_:G4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K4(t,e){let n=C(t,"a","notEqual","string_or_numeric"),r=C(e,"b","notEqual","string_or_numeric");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r};return W.runKernel(wd,a)}const dw=B({notEqual_:K4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:C(t,"indices","oneHot","int32")},i={dtype:a,depth:e,onValue:n,offValue:r};return W.runKernel(Id,o,i)}const Y4=B({oneHot_:X4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4(t){const n={x:C(t,"x","onesLike")};return W.runKernel(Sm,n)}const J4=B({onesLike_:Z4});function Q4(t,e){const n=C(t,"v1","outerProduct"),r=C(e,"v2","outerProduct");A(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=ae(n,[-1,1]),s=ae(r,[1,-1]);return wt(a,s)}const eR=B({outerProduct_:Q4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tR(t,e,n=0){const r=C(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},s={x:r};return W.runKernel(kd,s,a)}const Nu=B({pad_:tR});function nR(t,e,n=0){return A(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Nu(t,[e],n)}const rR=B({pad1d_:nR});function aR(t,e,n=0){return A(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(t,e,n)}const sR=B({pad2d_:aR});function oR(t,e,n=0){return A(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(t,e,n)}const iR=B({pad3d_:oR});function uR(t,e,n=0){return A(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(t,e,n)}const cR=B({pad4d_:uR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(t,e,n){const r=C(t,"x","spaceToBatchND");A(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),A(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),A(r.shape.reduce((o,i,c)=>c>0&&c<=e.length?o&&(i+n[c-1][0]+n[c-1][1])%e[c-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},s={blockShape:e,paddings:n};return W.runKernel(Nm,a,s)}const fw=B({spaceToBatchND_:lR});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dR(t,e,n,r,a,s,o){a==null&&(a=[1,1]),s==null&&(s=1),r===0&&(r="valid");const i=C(t,"x","maxPool");let c=i,l=!1;i.rank===3&&(l=!0,c=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),A(Er(s,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`);const u=Vr(c.shape,e,s,a,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=pR([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[h,m]=fR([u.inHeight,u.inWidth],d,f),g=p?r:"valid",v=p?c:fw(c,d,h),w=(n==="avg"?()=>j1(v,e,s,g,o):()=>cw(v,e,s,g,o))(),S=p?w:U1(w,d,m);return l?ae(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function fR(t,e,n){const r=n.map(u=>u[0]),a=n.map(u=>u[1]),s=t.concat(r,a),o=e.map((u,d)=>(u-s[d]%u)%u),i=a.map((u,d)=>u+o[d]),c=e.map((u,d)=>[r[d],i[d]]),l=e.map((u,d)=>[0,o[d]]);return[c,l]}function pR(t,e){const r=t.map((o,i)=>o+(o-1)*(e[i]-1)).map(o=>o-1),a=r.map(o=>Math.floor(o/2)),s=r.map((o,i)=>o-a[i]);return r.map((o,i)=>[a[i],s[i]])}const hR=B({pool_:dR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mR(t,e){const n=C(t,"x","prelu"),r=C(e,"alpha","prelu"),a={x:n,alpha:r};return W.runKernel(Td,a)}const pw=B({prelu_:mR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gR(t,e=null,n=!1){let r=C(t,"x","prod");r.dtype==="bool"&&(r=zt(r,"int32"));const a={x:r},s={axis:e,keepDims:n};return W.runKernel(Cd,a,s)}const yR=B({prod_:gR});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vR(t,e,n,r){const a=t.map((u,d)=>C(u,`tensors${d}`,"raggedGather","int32")),s=C(e,"paramsDenseValues","raggedGather"),o=C(n,"indices","raggedGather","int32"),i={paramsNestedSplits:a,paramsDenseValues:s,indices:o},c={outputRaggedRank:r},l=W.runKernel(a1,i,c);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const bR=B({raggedGather_:vR});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wR(t,e,n){const r=C(t,"starts","raggedRange"),a=C(e,"limits","raggedRange",r.dtype),s=C(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:a,deltas:s},i=W.runKernel(s1,o);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}const SR=B({raggedRange_:wR});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _R(t,e,n,r,a){const s=C(t,"shape","raggedTensorToTensor","int32"),o=C(e,"values","raggedTensorToTensor"),i=C(n,"defaultValue","raggedTensorToTensor",o.dtype),c=r.map((d,f)=>C(d,`tensors${f}`,"raggedTensorToTensor","int32")),l={shape:s,values:o,defaultValue:i,rowPartitionTensors:c},u={rowPartitionTypes:a};return W.runKernel(o1,l,u)}const xR=B({raggedTensorToTensor_:_R});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IR(t,e,n){fr(t);const r=Y(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)a[s]=e();return W.makeTensor(a,t,n)}const kR=B({rand_:IR});var Km={exports:{}};Km.exports;(function(t){(function(e,n,r){function a(c){var l=this,u=i();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(c),l.s0<0&&(l.s0+=1),l.s1-=u(c),l.s1<0&&(l.s1+=1),l.s2-=u(c),l.s2<0&&(l.s2+=1),u=null}function s(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function o(c,l){var u=new a(c),d=l&&l.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function i(){var c=4022871197,l=function(u){u=String(u);for(var d=0;d<u.length;d++){c+=u.charCodeAt(d);var f=.02519603282416938*c;c=f>>>0,f-=c,f*=c,c=f>>>0,f-=c,c+=f*4294967296}return(c>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})($n,t,!1)})(Km);var ER=Km.exports,Xm={exports:{}};Xm.exports;(function(t){(function(e,n,r){function a(i){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},i===(i|0)?c.x=i:l+=i;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,c.next()}function s(i,c){return c.x=i.x,c.y=i.y,c.z=i.z,c.w=i.w,c}function o(i,c){var l=new a(i),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&s(u,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})($n,t,!1)})(Xm);var TR=Xm.exports,Ym={exports:{}};Ym.exports;(function(t){(function(e,n,r){function a(i){var c=this,l="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(d^d<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,i===(i|0)?c.x=i:l+=i;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,u==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function s(i,c){return c.x=i.x,c.y=i.y,c.z=i.z,c.w=i.w,c.v=i.v,c.d=i.d,c}function o(i,c){var l=new a(i),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&s(u,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})($n,t,!1)})(Ym);var CR=Ym.exports,Zm={exports:{}};Zm.exports;(function(t){(function(e,n,r){function a(i){var c=this;c.next=function(){var u=c.x,d=c.i,f,p;return f=u[d],f^=f>>>7,p=f^f<<24,f=u[d+1&7],p^=f^f>>>10,f=u[d+3&7],p^=f^f>>>3,f=u[d+4&7],p^=f^f<<7,f=u[d+7&7],f=f^f<<13,p^=f^f<<9,u[d]=p,c.i=d+1&7,p};function l(u,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],u.x=p,u.i=0,f=256;f>0;--f)u.next()}l(c,i)}function s(i,c){return c.x=i.x.slice(),c.i=i.i,c}function o(i,c){i==null&&(i=+new Date);var l=new a(i),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,u&&(u.x&&s(u,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})($n,t,!1)})(Zm);var NR=Zm.exports,Jm={exports:{}};Jm.exports;(function(t){(function(e,n,r){function a(i){var c=this;c.next=function(){var u=c.w,d=c.X,f=c.i,p,h;return c.w=u=u+1640531527|0,h=d[f+34&127],p=d[f=f+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=d[f]=h^p,c.i=f,h+(u^u>>>16)|0};function l(u,d){var f,p,h,m,g,v=[],b=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,b=Math.max(b,d.length)),h=0,m=-32;m<b;++m)d&&(p^=d.charCodeAt((m+32)%d.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=p+g,h=f==0?h+1:0);for(h>=128&&(v[(d&&d.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=v[h+34&127],f=v[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,v[h]=p^f;u.w=g,u.X=v,u.i=h}l(c,i)}function s(i,c){return c.i=i.i,c.w=i.w,c.X=i.X.slice(),c}function o(i,c){i==null&&(i=+new Date);var l=new a(i),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,u&&(u.X&&s(u,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})($n,t,!1)})(Jm);var AR=Jm.exports,Qm={exports:{}};Qm.exports;(function(t){(function(e,n,r){function a(i){var c=this,l="";c.next=function(){var d=c.b,f=c.c,p=c.d,h=c.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,c.b=d=d<<20^d>>>12^f,c.c=f=f-p|0,c.d=p<<16^f>>>16^h,c.a=h-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,i===Math.floor(i)?(c.a=i/4294967296|0,c.b=i|0):l+=i;for(var u=0;u<l.length+20;u++)c.b^=l.charCodeAt(u)|0,c.next()}function s(i,c){return c.a=i.a,c.b=i.b,c.c=i.c,c.d=i.d,c}function o(i,c){var l=new a(i),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&s(u,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})($n,t,!1)})(Qm);var RR=Qm.exports,hw={exports:{}};const $R={},DR=Object.freeze(Object.defineProperty({__proto__:null,default:$R},Symbol.toStringTag,{value:"Module"})),Ma=_a(DR);(function(t){(function(e,n,r){var a=256,s=6,o=52,i="random",c=r.pow(a,s),l=r.pow(2,o),u=l*2,d=a-1,f;function p(S,I,E){var T=[];I=I==!0?{entropy:!0}:I||{};var R=v(g(I.entropy?[S,w(n)]:S??b(),3),T),$=new h(T),D=function(){for(var M=$.g(s),z=c,F=0;M<l;)M=(M+F)*a,z*=a,F=$.g(1);for(;M>=u;)M/=2,z/=2,F>>>=1;return(M+F)/z};return D.int32=function(){return $.g(4)|0},D.quick=function(){return $.g(4)/4294967296},D.double=D,v(w($.S),n),(I.pass||E||function(M,z,F,V){return V&&(V.S&&m(V,$),M.state=function(){return m($,{})}),F?(r[i]=M,z):M})(D,R,"global"in I?I.global:this==r,I.state)}function h(S){var I,E=S.length,T=this,R=0,$=T.i=T.j=0,D=T.S=[];for(E||(S=[E++]);R<a;)D[R]=R++;for(R=0;R<a;R++)D[R]=D[$=d&$+S[R%E]+(I=D[R])],D[$]=I;(T.g=function(M){for(var z,F=0,V=T.i,H=T.j,U=T.S;M--;)z=U[V=d&V+1],F=F*a+U[d&(U[V]=U[H=d&H+z])+(U[H]=z)];return T.i=V,T.j=H,F})(a)}function m(S,I){return I.i=S.i,I.j=S.j,I.S=S.S.slice(),I}function g(S,I){var E=[],T=typeof S,R;if(I&&T=="object")for(R in S)try{E.push(g(S[R],I-1))}catch{}return E.length?E:T=="string"?S:S+"\0"}function v(S,I){for(var E=S+"",T,R=0;R<E.length;)I[d&R]=d&(T^=I[d&R]*19)+E.charCodeAt(R++);return w(I)}function b(){try{var S;return f&&(S=f.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var I=e.navigator,E=I&&I.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(v(r.random(),n),t.exports){t.exports=p;try{f=Ma}catch{}}else r["seed"+i]=p})(typeof self<"u"?self:$n,[],Math)})(hw);var OR=hw.exports,FR=ER,MR=TR,PR=CR,BR=NR,LR=AR,WR=RR,js=OR;js.alea=FR;js.xor128=MR;js.xorwow=PR;js.xorshift7=BR;js.xor4096=LR;js.tychei=WR;var pf=js;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eg{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=pf.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,s,o;do a=2*this.random()-1,s=2*this.random()-1,o=a*a+s*s;while(o>=1||o===0);const i=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*i,n=this.mean+this.stdDev*s*i,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class zR{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const s=a||Math.random();this.randu=pf.alea(s.toString()),this.randn=new eg(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,s,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),s=this.randu(),s<n||Math.log(s)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class VR{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=pf.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HR(t,e,n=1,r="float32",a){if(fr(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new zR(e,n,r,a),o=Qe(t,r);for(let i=0;i<o.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}const jR=B({randomGamma_:HR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UR(t,e=0,n=1,r,a){if(fr(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new eg(e,n,r,!1,a),o=Qe(t,r);for(let i=0;i<o.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}const mw=B({randomNormal_:UR});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GR(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return mw(t,0,1,e,n)}const qR=B({randomStandardNormal_:GR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KR(t,e=0,n=1,r="float32",a){fr(t);const s=Qe(t,r),o=new VR(e,n,null,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}const tg=B({randomUniform_:KR});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XR(t,e,n,r){return tg(t,e,n,"int32",r)}const YR=B({randomUniformInt_:XR});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ou(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return W.runKernel(xm,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZR(t){const n={input:C(t,"input","real")};return W.runKernel(i1,n)}const iu=B({real_:ZR});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JR(t){const n={x:C(t,"x","reciprocal")};return W.runKernel(Nd,n)}const QR=B({reciprocal_:JR});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$(t){const n={x:C(t,"x","relu")};return W.runKernel(Ad,n)}const hf=B({relu_:e$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$(t){const n={x:C(t,"x","relu6")};return W.runKernel(Dd,n)}const gw=B({relu6_:t$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$(t,e){const r={x:C(t,"x","reverse")},a={dims:e};return W.runKernel(Od,r,a)}const Os=B({reverse_:n$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$(t){const e=C(t,"x","reverse");return A(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Os(e,0)}const a$=B({reverse1d_:r$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$(t,e){const n=C(t,"x","reverse");return A(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Os(n,e)}const o$=B({reverse2d_:s$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$(t,e){const n=C(t,"x","reverse");return A(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Os(n,e)}const u$=B({reverse3d_:i$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$(t,e){const n=C(t,"x","reverse");return A(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Os(n,e)}const l$=B({reverse4d_:c$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$(t){const n={x:C(t,"x","round")};return W.runKernel(Fd,n)}const yw=B({round_:d$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$(t){const n={x:C(t,"x","rsqrt","float32")};return W.runKernel(Md,n)}const p$=B({rsqrt_:f$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$(t){const n={x:C(t,"x","selu")};return W.runKernel(Wd,n)}const m$=B({selu_:h$});function g$(t,e,n,r,a,s=[1,1],o="NHWC"){const i=C(t,"x","separableConv2d"),c=C(e,"depthwiseFilter","separableConv2d"),l=C(n,"pointwiseFilter","separableConv2d");let u=i,d=!1;if(i.rank===3&&(d=!0,u=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),A(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),A(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),A(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const f=c.shape[2],p=c.shape[3];A(l.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${l.shape[2]}.`);const h=Um(u,c,r,a,o,s),g=uf(h,l,1,"valid",o);return d?ae(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const y$=B({separableConv2d_:g$});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function v$(t,e){const n=C(t,"x","setdiff1d"),r=C(e,"y","setdiff1d");A(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),A(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),A(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),s=await r.data(),o=new Set(s);let i=0;for(let u=0;u<a.length;u++)o.has(a[u])||i++;const c=new on([i],n.dtype),l=new on([i],"int32");for(let u=0,d=0;u<a.length;u++)o.has(a[u])||(c.values[d]=a[u],l.values[d]=u,d++);return[c.toTensor(),l.toTensor()]}const b$=v$;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(t){const n={x:C(t,"x","sign")};return W.runKernel(Hd,n)}const S$=B({sign_:w$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$(t){const n={x:C(t,"x","sin","float32")};return W.runKernel(zd,n)}const x$=B({sin_:_$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$(t){const n={x:C(t,"x","sinh")};return W.runKernel(Vd,n)}const k$=B({sinh_:I$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$(t,e,n){const r=C(t,"x","slice1d");return A(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),qe(r,[e],[n])}const T$=B({slice1d_:E$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$(t,e,n){const r=C(t,"x","slice2d");return A(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),qe(r,e,n)}const N$=B({slice2d_:C$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$(t,e,n){const r=C(t,"x","slice3d");return A(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),qe(r,e,n)}const R$=B({slice3d_:A$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$(t,e,n){const r=C(t,"x","slice4d");return A(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),qe(r,e,n)}const D$=B({slice4d_:$$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$(t,e=-1){const n=C(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return W.runKernel(Kd,r,a)}const F$=B({softmax_:O$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(Q0,e)}const ng=B({fft_:M$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(e1,e)}const zc=B({ifft_:P$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=ae(t,[n,e]);r=zc(a)}else{const a=[n,2*(e-1)],s=ae(iu(t),[n,e]),o=ae(ff(t),[n,e]),i=Os(qe(s,[0,1],[n,e-2]),1),c=he(Os(qe(o,[0,1],[n,e-2]),1),ut(-1)),l=yn([s,i],1),u=yn([o,c],1),d=ae(Va(l,u),[a[0],a[1]]);r=zc(d)}if(r=iu(r),t.rank===3&&t.shape[0]!==0){const a=r,s=t.shape[0];r=ae(r,[s,r.shape[0]/s,r.shape[1]]),a.dispose()}return r}const vw=B({irfft_:B$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$(t,e,n=0){const a={x:C(t,"x","split")},s={numOrSizeSplits:e,axis:n};return W.runKernel(Am,a,s)}const uu=B({split_:L$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$(t,e){A(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const h=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,a=qe(t,h,m),n=e}else if(e!=null&&e>n){const h=t.shape.map(m=>m);h[t.shape.length-1]=e-n,a=yn([t,To(h)],t.shape.length-1),n=e}else a=t;const s=lr(a),o=ae(Va(a,s),[r,n]),i=ng(o),c=Math.floor(n/2)+1,l=iu(i),u=ff(i),d=uu(l,[c,n-c],l.shape.length-1),f=uu(u,[c,n-c],u.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=c,ae(Va(d[0],f[0]),p)}const rg=B({rfft_:W$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$(t,e){let n=C(t,"a","squaredDifference"),r=C(e,"b","squaredDifference");[n,r]=Kt(n,r),At(n.shape,r.shape);const a={a:n,b:r},s={};return W.runKernel(Zd,a,s)}const bw=B({squaredDifference_:z$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$(t,e){const n=C(t,"x","squeeze","string_or_numeric");return ae(n,rT(n.shape,e).newShape)}const hn=B({squeeze_:V$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$(t,e=0){const n=Oc(t,"tensors","stack","string_or_numeric");A(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&A(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return W.runKernel(_m,r,a)}const ba=B({stack_:H$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$(t,e=0){const r={x:C(t,"x","step")},a={alpha:e};return W.runKernel(Eu,r,a)}const ww=B({step_:j$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$(t,e,n,r,a=0,s=0,o=0,i=0,c=0){const u={x:C(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:i,shrinkAxisMask:c};return W.runKernel(Jd,u,d)}const G$=B({stridedSlice_:U$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$(t){const n={x:C(t,"x","tan","float32")};return W.runKernel(ef,n)}const K$=B({tan_:q$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t,e){Mo(t);const n=Ka(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Xa(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ts(t,e,n){if(Mo(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ka(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Xa(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sw(t,e,n){if(Mo(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ka(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Xa(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$(t,e,n){if(Mo(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ka(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Xa(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$(t,e,n){if(Mo(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ka(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Xa(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$(t,e,n){if(Mo(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ka(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Xa(t,e,r,n)}function J$(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(s+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(s+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(s+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function _w(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}J$(n,e,t)}function zo(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let d=a;d<s;++d)o*=n[d];const i=a<1?1:a,c=Y(e.shape)/i,l=[...Ie(n.slice(0,a)),1],u=Y(n);return{sliceRank:a,numUpdates:c,sliceSize:o,strides:l,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$(t,e,n){const r=C(t,"tensor","tensorScatterupdate"),a=C(e,"indices","tensorScatterupdate","int32"),s=C(n,"updates","tensorScatterupdate");if(_w(s,a,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const o={tensor:r,indices:a,updates:s},i={};return W.runKernel(Bd,o,i)}const eD=B({tensorScatterUpdate_:Q$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tD(t,e=1,n=!0){const r=C(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[i,c]=W.runKernel(nf,s,o);return{values:i,indices:c}}const nD=B({topk_:tD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(t,e=0,n=1,r,a){if(fr(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new eg(e,n,r,!0,a),o=Qe(t,r);for(let i=0;i<o.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}const aD=B({truncatedNormal_:rD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sD(t,e=0){const n=C(t,"x","unique","string_or_numeric");A(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[s,o]=W.runKernel(Bm,r,a);return{values:s,indices:o}}const oD=B({unique_:sD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iD(t,e,n){const r=C(t,"x","unsortedSegmentSum"),a=C(e,"segmentIds","unsortedSegmentSum","int32");A(Xi(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:a},o={numSegments:n};return W.runKernel(c1,s,o)}const uD=B({unsortedSegmentSum_:iD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cD(t,e=0){const n=C(t,"x","unstack","string_or_numeric");A(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return W.runKernel(Lm,r,a)}const Us=B({unstack_:cD});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lD(t,e){return qm(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dD(t,e=!0,n,r){return W.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xw(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Qe(t,"int32"),a=Qe([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),i=s*t.length;a.values.set(o,i)}return a.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fD(t){const e=C(t,"condition","whereAsync","bool"),n=await e.data(),r=xw(e.shape,n);return t!==e&&e.dispose(),r}const Iw=fD;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pD(t,e,n){const r=C(t,"tensor","boolMask"),a=C(e,"mask","boolMask","bool"),s=n??0,o=a.rank,i=r.shape;A(o>0,()=>"mask cannot be scalar"),ar(i.slice(s,s+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let m=s;m<s+o;m++)c*=i[m];const l=i.slice(0,s).concat([c],i.slice(s+o)),u=ae(r,l),d=ae(a,[-1]),f=await Iw(d),p=hn(f,[1]),h=tw(u,p,s);return t!==r&&r.dispose(),e!==a&&a.dispose(),p.dispose(),u.dispose(),d.dispose(),f.dispose(),h}const hD=pD;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(t,e,n){const r=C(t,"x","transpose");if(e==null&&(e=r.shape.map((o,i)=>i).reverse()),A(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{A(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},s={perm:e};return r.dtype==="complex64"?Je(()=>{let o=iu(r),i=ff(r);return o=W.runKernel(yo,{x:o},s),i=W.runKernel(yo,{x:i},s),n&&(i=Jr(i)),Va(o,i)}):W.runKernel(yo,a,s)}const Qp=B({transpose_:mD});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gD(t,e,n,r,a=!0){const s=C(t,"v","movingAverage"),o=C(e,"x","movingAverage"),i=C(n,"decay","movingAverage");LT(s,o),A(Ir(s.shape,o.shape),()=>"Shape mismatch in v and x");const c=ut(1),l=Ke(c,i);let u=he(Ke(o,s),l);if(a){A(r!=null,()=>"When using zeroDebias: true, step is required.");const d=C(r,"step","movingAverage");u=Ze(u,Ke(c,au(i,d)))}return Ae(s,u)}const yD=B({movingAverage_:gD});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vD(t,e,n){fr(n);const r=C(t,"indices","scatterND","int32"),a=C(e,"updates","scatterND");_w(a,r,n);const s={indices:r,updates:a},o={shape:n};return W.runKernel(Pd,s,o)}const bD=B({scatterND_:vD});function wD(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SD(t,e,n,r=0){fr(n);const a=C(t,"sparseIndices","sparseToDense","int32"),s=C(e,"sparseValues","sparseToDense","string_or_numeric"),o=C(r,"defaultValue","sparseToDense",s.dtype);wD(a,s,n,o);const i={sparseIndices:a,sparseValues:s,defaultValue:o},c={outputShape:n};return W.runKernel(Yd,i,c)}const _D=B({sparseToDense_:SD});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(t,e){const n=C(e,"indices","gatherND","int32"),a={params:C(t,"x","gatherND","string_or_numeric"),indices:n};return W.runKernel(ql,a)}const ID=B({gatherND_:xD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kD(t,e){if(e==null)return t.shape.slice();if(Ir(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ED(t,e,n,r){const a=C(t,"x","dropout");if(A(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),A(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof en?a.clone():a;const s=kD(a,n),o=1-e,i=Ze(ew(Ae(tg(s,0,1,"float32",r),o)),o);return he(a,i)}const TD=B({dropout_:ED});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function ag(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let s=0;s<t;++s){const o=2*Math.PI*s/(t+r-1);a[s]=e-n*Math.cos(o)}return xn(a,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function CD(t,e,n=1){const r=C(t,"predictions","inTopK"),a=C(e,"targets","inTopK");A(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),A(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),ar(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];A(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const o=await r.data(),i=await a.data(),[c,l]=[o.length/s,s],u=Dn("bool",c);for(let d=0;d<c;d++){const f=d*l,p=o.subarray(f,f+l),h=[];for(let m=0;m<p.length;m++)h.push({value:p[m],index:m});h.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<n;m++)if(h[m].index===i[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Mr(u,a.shape,"bool")}const ND=CD;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AD(t,e,n,r,a,s="NHWC",o){let i=t;t.rank===3&&(i=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]])),A(i.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`),A(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),A(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=s==="NHWC"?i.shape[3]:i.shape[1],u=s==="NHWC"?c.shape[3]:c.shape[1];A(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),A(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Hr("conv2dDerFilter",a,o);const d={x:i,dy:c},f={strides:r,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:n};return W.runKernel(K0,d,f)}const RD=B({conv2DBackpropFilter_:AD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sg(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return he(t,ww(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function og(t,e){let n=e;const r=vA(t.shape,e.shape);return r.length>0&&(n=Dt(n,r)),ae(n,t.shape)}function ig(t,e,n,r){if(e==="linear")return t;if(e==="relu")return hf(t);if(e==="elu")return Y1(t);if(e==="relu6")return gw(t);if(e==="prelu")return pw(t,n);if(e==="leakyrelu")return rw(t,r);if(e==="sigmoid")return Es(t);throw new Error(`Unknown fused activation ${e}.`)}const ug=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:i,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:u}){if(c=c||"linear",ug(W.state.gradientDepth,c)===!1){A(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=uf(t,e,n,r,a,s,o);return i!=null&&(E=Ae(E,i)),ig(E,c,l,u)}const d=C(t,"x","conv2d","float32"),f=C(e,"filter","conv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=ae(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),A(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Hr("fused conv2d",r,o);const m=a==="NHWC"?p.shape[3]:p.shape[1];A(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),A(Er(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=Kn(p.shape,f.shape,n,s,r,o);let v;i!=null&&(v=C(i,"bias","fused conv2d"),[v]=Kt(v,d),a==="NHWC"?At(g.outShape,v.shape):(A(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),A(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(l!=null){const E=l.shape;if(A(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)A(E[0]===1||E[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${g.outChannels}).`);else if(E.length===3)try{At(E,g.outShape)}catch{const R=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(R)}b=C(l,"prelu weights","fused conv2d")}const w=(E,T)=>{A(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[R,$,D,M]=T,z=sg(E,D,c);A(Mc(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const F=K1($.shape,z,R,n,r),V=RD($,z,R.shape,n,r),H=[F,V];if(M!=null){const U=og(M,z);H.push(U)}return H},S={x:p,filter:f,bias:v,preluActivationWeights:b},I={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:u};return i==null?va((T,R,$)=>{let D=W.runKernel(Ji,S,I);return $([R,T,D]),h&&(D=ae(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:w}})(p,f):va((T,R,$,D)=>{let M=W.runKernel(Ji,S,I);return D([R,T,M,$]),h&&(M=ae(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:w}})(p,f,v)}const DD=B({fusedConv2d_:$D});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OD(t,e,n,r,a,s=[1,1],o){let i=t;t.rank===3&&(i=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:i,dy:c},u={strides:r,pad:a,dimRoundingMode:o,dilations:s,filterShape:n};return W.runKernel(X0,l,u)}const FD=B({depthwiseConv2dNativeBackpropFilter_:OD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MD(t,e,n,r,a,s=[1,1],o){let i=e,c=!1;e.rank===3&&(c=!0,i=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:i,filter:n},u={strides:r,pad:a,dimRoundingMode:o,dilations:s,inputShape:t},d=W.runKernel(Y0,l,u);return c?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const PD=B({depthwiseConv2dNativeBackpropInput_:MD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BD({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:i,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:u}){if(ug(W.state.gradientDepth,c)===!1){let I=Um(t,e,n,r,a,s,o);return i!=null&&(I=Ae(I,i)),ig(I,c,l,u)}const d=C(t,"x","depthwiseConv2d","float32"),f=C(e,"filter","depthwiseConv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=ae(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),A(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),A(p.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),s==null&&(s=[1,1]),A(Er(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Hr("fused depthwiseConv2d",r,o);const m=Kn(p.shape,f.shape,n,s,r,o,!0);let g;i!=null&&(g=C(i,"bias","fused conv2d"),[g]=Kt(g,d),At(m.outShape,g.shape));let v;l!=null&&(v=C(l,"prelu weights","fused depthwiseConv2d"));const b=(I,E)=>{A(Mc(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[T,R,$,D]=E,M=sg(I,$,c),z=PD(R.shape,M,T,n,r,s,o),F=FD(R,M,T.shape,n,r,s,o);if(D!=null){const V=og(g,M);return[z,F,V]}return[z,F]},w={x:p,filter:f,bias:g,preluActivationWeights:v},S={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:u};return i==null?va((E,T,R)=>{let $=W.runKernel(Qi,w,S);return R([T,E,$]),h&&($=ae($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(p,f):va((E,T,R,$)=>{let D=W.runKernel(Qi,w,S);return $([T,E,D,R]),h&&(D=ae(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:b}})(p,f,g)}const LD=B({fusedDepthwiseConv2d_:BD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WD({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:i=.2}){if(ug(W.state.gradientDepth,s)===!1){let M=wt(t,e,n,r);return a!=null&&(M=Ae(M,a)),ig(M,s,o,i)}let c=C(t,"a","fused matMul"),l=C(e,"b","fused matMul");[c,l]=Kt(c,l);const u=n?c.shape[c.rank-2]:c.shape[c.rank-1],d=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=n?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?l.shape[l.rank-2]:l.shape[l.rank-1],h=c.shape.slice(0,-2),m=l.shape.slice(0,-2),g=Y(h),v=Y(m);A(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${c.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=At(c.shape.slice(0,-2),l.shape.slice(0,-2)).concat([f,p]),S=n?ae(c,[g,u,f]):ae(c,[g,f,u]),I=r?ae(l,[v,p,d]):ae(l,[v,d,p]);let E;a!=null&&(E=C(a,"bias","fused matMul"),[E]=Kt(E,c),At(w,E.shape));let T;o!=null&&(T=C(o,"prelu weights","fused matMul"));const R=(M,z)=>{const[F,V,H,U]=z,Z=sg(ae(M,H.shape),H,s);let q,X;if(!n&&!r?(q=wt(Z,V,!1,!0),X=wt(F,Z,!0,!1)):!n&&r?(q=wt(Z,V,!1,!1),X=wt(Z,F,!0,!1)):n&&!r?(q=wt(V,Z,!1,!0),X=wt(F,Z,!1,!1)):(q=wt(V,Z,!0,!0),X=wt(Z,F,!0,!0)),a!=null){const se=og(U,Z);return[q,X,se]}else return[q,X]},$={a:S,b:I,bias:E,preluActivationWeights:T},D={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:i};return a==null?va((z,F,V)=>{const H=W.runKernel(Zi,$,D);return V([z,F,H]),{value:ae(H,w),gradFunc:R}})(S,I):va((z,F,V,H)=>{const U=W.runKernel(Zi,$,D);return H([z,F,U,V]),{value:ae(U,w),gradFunc:R}})(S,I,E)}const zD=B({fusedMatMul_:WD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD=Object.freeze(Object.defineProperty({__proto__:null,conv2d:DD,depthwiseConv2d:LD,matMul:zD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HD(t){return ag(t,.54,.46)}const jD=B({hammingWindow_:HD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UD(t){return ag(t,.5,.5)}const Ew=B({hannWindow_:UD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GD(t,e,n,r=!1,a=0){let s=0;const o=[];for(;s+e<=t.size;)o.push(qe(t,s,e)),s+=n;if(r)for(;s<t.size;){const i=s+e-t.size,c=yn([qe(t,s,e-i),Cu([i],a)]);o.push(c),s+=n}return o.length===0?Ts([],[0,e]):ae(yn(o),[o.length,e])}const Tw=B({frame_:GD});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qD(t,e,n,r,a=Ew){r==null&&(r=kw(e));const s=Tw(t,e,n),o=he(s,a(e));return rg(o,r)}const KD=B({stft_:qD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XD(t,e,n,r,a="bilinear",s=0){const o=C(t,"image","cropAndResize"),i=C(e,"boxes","cropAndResize","float32"),c=C(n,"boxInd","cropAndResize","int32"),l=i.shape[0];A(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),A(i.rank===2&&i.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${i.shape}.`),A(c.rank===1&&c.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${i.shape}.`),A(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),A(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),A(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const u={image:o,boxes:i,boxInd:c},d={method:a,extrapolationValue:s,cropSize:r};return W.runKernel(Dl,u,d)}const YD=B({cropAndResize_:XD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZD(t){const e=C(t,"image","flipLeftRight","float32");A(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return W.runKernel(Hl,n,{})}const JD=B({flipLeftRight_:ZD});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QD(t){const e=C(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];A(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),A(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Wi(e,a)}const eO=B({grayscaleToRGB_:QD});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tO(t){const e=C(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];A(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),A(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const a=e.dtype,s=zt(e,"float32"),o=xn([.2989,.587,.114]);let i;switch(e.rank){case 2:i=fo("ij,j->i",s,o);break;case 3:i=fo("ijk,k->ij",s,o);break;case 4:i=fo("ijkl,l->ijk",s,o);break;case 5:i=fo("ijklm,m->ijkl",s,o);break;case 6:i=fo("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return i=Kr(i,-1),zt(i,a)}const nO=B({rgbToGrayscale_:tO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rO(t,e,n=0,r=.5){const a=C(t,"image","rotateWithOffset","float32");A(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const s={image:a},o={radians:e,fillValue:n,center:r};return W.runKernel(af,s,o)}const aO=B({rotateWithOffset_:rO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vo(t,e,n,r,a,s){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),A(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),A(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),A(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),A(e.rank===1,()=>"scores must be a 1D tensor"),A(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),A(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=C(t,"boxes","nonMaxSuppression","float32"),o=C(e,"scores","nonMaxSuppression","float32"),i=Vo(s,o,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return W.runKernel(Sd,{boxes:s,scores:o},c)}const oO=B({nonMaxSuppression_:sO});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iO(t,e,n){const r=uO(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function uO(t,e,n){return lO(t,e,n||cO)}function cO(t,e){return t>e?1:t<e?-1:0}function lO(t,e,n){let r=0,a=t.length,s=0,o=!1;for(;r<a;){s=r+(a-r>>>1);const i=n(e,t[s]);i>0?r=s+1:(a=s,o=!i)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cw(t,e,n,r,a){return cg(t,e,n,r,a,0)}function Nw(t,e,n,r,a,s){return cg(t,e,n,r,a,0,!1,s,!0)}function Aw(t,e,n,r,a,s){return cg(t,e,n,r,a,s,!0)}function cg(t,e,n,r,a,s,o=!1,i=!1,c=!1){const l=[];for(let g=0;g<e.length;g++)e[g]>a&&l.push({score:e[g],boxIndex:g,suppressBeginIndex:0});l.sort(Jy);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&l.length>0;){const g=l.pop(),{score:v,boxIndex:b,suppressBeginIndex:w}=g;if(v<a)break;let S=!1;for(let I=d.length-1;I>=w;--I){const E=dO(t,b,d[I]);if(E>=r){S=!0;break}if(g.score=g.score*fO(r,u,E),g.score<=a)break}g.suppressBeginIndex=d.length,S||(g.score===v?(d.push(b),f.push(g.score)):g.score>a&&iO(l,g,Jy))}const p=d.length,h=n-p;i&&h>0&&(d.push(...new Array(h).fill(0)),f.push(...new Array(h).fill(0)));const m={selectedIndices:d};return o&&(m.selectedScores=f),c&&(m.validOutputs=p),m}function dO(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(i-s)*(c-o),h=(d-l)*(f-u);if(p<=0||h<=0)return 0;const m=Math.max(s,l),g=Math.max(o,u),v=Math.min(i,d),b=Math.min(c,f),w=Math.max(v-m,0)*Math.max(b-g,0);return w/(p+h-w)}function fO(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function Jy(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=C(t,"boxes","nonMaxSuppressionAsync"),o=C(e,"scores","nonMaxSuppressionAsync"),i=Vo(s,o,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const c=await Promise.all([s.data(),o.data()]),l=c[0],u=c[1],{selectedIndices:d}=Cw(l,u,n,r,a);return s!==t&&s.dispose(),o!==e&&o.dispose(),xn(d,"int32")}const hO=pO;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=C(t,"boxes","nonMaxSuppression"),i=C(e,"scores","nonMaxSuppression"),c=Vo(o,i,n,r,a,s);n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,s=c.softNmsSigma;const l={boxes:o,scores:i},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s},d=W.runKernel(xd,l,u);return{selectedIndices:d[0],selectedScores:d[1]}}const gO=B({nonMaxSuppressionWithScore_:mO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function yO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=C(t,"boxes","nonMaxSuppressionAsync"),i=C(e,"scores","nonMaxSuppressionAsync"),c=Vo(o,i,n,r,a,s);n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,s=c.softNmsSigma;const l=await Promise.all([o.data(),i.data()]),u=l[0],d=l[1],{selectedIndices:f,selectedScores:p}=Aw(u,d,n,r,a,s);return o!==t&&o.dispose(),i!==e&&i.dispose(),{selectedIndices:xn(f,"int32"),selectedScores:xn(p)}}const vO=yO;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=C(t,"boxes","nonMaxSuppression"),i=C(e,"scores","nonMaxSuppression"),c=Vo(o,i,n,r,a,null),l=c.maxOutputSize,u=c.iouThreshold,d=c.scoreThreshold,f={boxes:o,scores:i},p={maxOutputSize:l,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},h=W.runKernel(_d,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}const wO=B({nonMaxSuppressionPadded_:bO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function SO(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=C(t,"boxes","nonMaxSuppressionAsync"),i=C(e,"scores","nonMaxSuppressionAsync"),c=Vo(o,i,n,r,a,null),l=c.maxOutputSize,u=c.iouThreshold,d=c.scoreThreshold,[f,p]=await Promise.all([o.data(),i.data()]),{selectedIndices:h,validOutputs:m}=Nw(f,p,l,u,d,s);return o!==t&&o.dispose(),i!==e&&i.dispose(),{selectedIndices:xn(h,"int32"),validOutputs:ut(m,"int32")}}const _O=SO;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xO(t,e,n=!1,r=!1){const a=C(t,"images","resizeBilinear");A(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),A(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),A(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=a,o=!1;a.rank===3&&(o=!0,s=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const i={images:s},c={alignCorners:n,halfPixelCenters:r,size:e},l=W.runKernel($d,i,c);return o?ae(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const IO=B({resizeBilinear_:xO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kO(t,e,n=!1,r=!1){const a=C(t,"images","resizeNearestNeighbor");A(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),A(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),A(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),A(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=a,o=!1;a.rank===3&&(o=!0,s=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const i={images:s},c={alignCorners:n,halfPixelCenters:r,size:e},l=W.runKernel(Rd,i,c);return o?ae(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const EO=B({resizeNearestNeighbor_:kO});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TO(t,e="binary",n=!1,r=.5){const a=C(t,"image","threshold"),s=.2989,o=.587,i=.114,c=a.shape[0]*a.shape[1];let l=he(xn([r]),255),u,d,f,p;if(A(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),A(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),A(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),A(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[u,d,f]=uu(a,[1,1,1],-1);const g=he(u,s),v=he(d,o),b=he(f,i);p=Ae(Ae(g,v),b)}else p=t;if(e==="otsu"){const g=G1(zt(yw(p),"int32"),Mr([]),256);l=CO(g,c)}const h=n?Gm(p,l):df(p,l);return zt(he(h,255),"int32")}function CO(t,e){let n=xn([-1]),r=xn([0]),a=xn([0]),s,o,i,c,l,u;for(let d=0;d<t.size-1;d++){s=qe(t,0,d+1),o=qe(t,d+1),l=Ze(Dt(s),e),u=Ze(Dt(o),e);const f=Dt(he(s,ou(0,s.size)));i=Ze(f,Dt(s));const p=Cu(o.shape,s.size),h=Ae(ou(0,o.size),p),m=he(o,h);c=Ze(Dt(m),Dt(o));const g=Ke(i,c),v=Ke(i,c),b=he(l,u);a=he(he(b,g),v);const w=df(a,r);r=Wa(w,a,r),n=Wa(w,xn([d]),n)}return n}const NO=B({threshold_:TO});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AO(t,e,n="nearest",r="constant",a=0,s){const o=C(t,"image","transform","float32"),i=C(e,"transforms","transform","float32");A(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),A(i.rank===2&&(i.shape[0]===o.shape[0]||i.shape[0]===1)&&i.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),A(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const c={image:o,transforms:i},l={interpolation:n,fillMode:r,fillValue:a,outputShape:s};return W.runKernel(rf,c,l)}const RO=B({transform_:AO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $O(t,e,n){const r=C(t,"a","bandPart");A(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[s,o]=r.shape.slice(-2);let i,c;typeof e=="number"?(A(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),A(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),i=C(e<0?s:e,"numLower","bandPart")):(A(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),i=Wa(Jp(e,0),s,Wc(e,s))),typeof n=="number"?(A(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),A(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),c=C(n<0?o:n,"numUpper","bandPart")):(A(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=Wa(Jp(n,0),o,Wc(n,o)));const l=ae(ou(0,s,1,"int32"),[-1,1]),u=ou(0,o,1,"int32"),d=Ke(l,u),f=Bc(Gm(d,i),nw(d,Jr(c))),p=To([s,o],r.dtype);return ae(ba(Us(ae(r,[-1,s,o])).map(h=>Wa(f,h,p))),a)}const DO=B({bandPart_:$O});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OO(t){let e;if(Array.isArray(t)){e=!1,A(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let s=1;s<t.length;++s)A(t[s].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${a})`)}else e=!0,t=uu(t,t.shape[0],0).map(a=>hn(a,[0]));A(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(W.tidy(()=>{let s=r[a];if(a>0)for(let o=0;o<a;++o){const i=he(Dt(he(n[o],s)),n[o]);s=Ke(s,i)}return Ze(s,lf(s,"euclidean"))}));return e?ba(n,0):n}const FO=B({gramSchmidt_:OO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(t,e=!1){if(A(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return Qy(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((c,l)=>c*l),r=Us(ae(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],s=[];r.forEach(c=>{const[l,u]=Qy(c,e);a.push(l),s.push(u)});const o=ae(ba(a,0),t.shape),i=ae(ba(s,0),t.shape);return[o,i]}}function Qy(t,e=!1){return W.tidy(()=>{A(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=Q1(n),s=La(t);const o=Ts([[1]],[1,1]);let i=La(o);const c=n>=r?r:n;for(let l=0;l<c;++l){const u=s,d=i,f=a;[i,s,a]=W.tidy(()=>{const p=qe(s,[l,l],[n-l,1]),h=lf(p),m=qe(s,[l,l],[1,1]),g=Wa(df(m,0),Ts([[-1]]),Ts([[1]])),v=Ke(m,he(g,h)),b=Ze(p,v);b.shape[0]===1?i=La(o):i=yn([o,qe(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const w=Jr(Ze(wt(g,v),h)),S=qe(s,[l,0],[n-l,r]),I=he(w,i),E=Qp(i);if(l===0)s=Ke(S,wt(I,wt(E,S)));else{const $=Ke(S,wt(I,wt(E,S)));s=yn([qe(s,[0,0],[l,r]),$],0)}const T=Qp(I),R=qe(a,[0,l],[n,a.shape[1]-l]);if(l===0)a=Ke(R,wt(wt(R,i),T));else{const $=Ke(R,wt(wt(R,i),T));a=yn([qe(a,[0,0],[n,l]),$],1)}return[i,s,a]}),un([u,d,f])}return!e&&n>r&&(a=qe(a,[0,0],[n,r]),s=qe(s,[0,0],[r,r])),[a,s]})}const PO=B({qr_:MO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hn;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Hn||(Hn={}));function BO(t,e,n=Hn.SUM_BY_NONZERO_WEIGHTS){const r=C(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=C(e,"weights","computeWeightedLoss"));const s=a==null?r:he(r,a);if(n===Hn.NONE)return s;if(n===Hn.SUM)return Dt(s);if(n===Hn.MEAN){if(a==null)return Lc(s);{const o=r.size/a.size,i=Ze(Dt(s),Dt(a));return o>1?Ze(i,ut(o)):i}}if(n===Hn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return Ze(Dt(s),ut(r.size));{const o=he(a,xs(r.shape)),i=zt(Dt(dw(o,ut(0))),"float32");return Ze(Dt(s),i)}}throw Error(`Unknown reduction: ${n}`)}const xa=B({computeWeightedLoss_:BO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t,e,n,r=Hn.SUM_BY_NONZERO_WEIGHTS){const a=C(t,"labels","absoluteDifference"),s=C(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=C(n,"weights","absoluteDifference")),ar(a.shape,s.shape,"Error in absoluteDifference: ");const i=cr(Ke(a,s));return xa(i,o,r)}const WO=B({absoluteDifference_:LO});function zO(t,e,n,r,a=Hn.SUM_BY_NONZERO_WEIGHTS){const s=C(t,"labels","cosineDistance"),o=C(e,"predictions","cosineDistance");let i=null;r!=null&&(i=C(r,"weights","cosineDistance")),ar(s.shape,o.shape,"Error in cosineDistance: ");const c=ut(1),l=Ke(c,Dt(he(s,o),n,!0));return xa(l,i,a)}const VO=B({cosineDistance_:zO});function HO(t,e,n,r=Hn.SUM_BY_NONZERO_WEIGHTS){let a=C(t,"labels","hingeLoss");const s=C(e,"predictions","hingeLoss");let o=null;n!=null&&(o=C(n,"weights","hingeLoss")),ar(a.shape,s.shape,"Error in hingeLoss: ");const i=ut(1);a=Ke(he(ut(2),a),i);const c=hf(Ke(i,he(a,s)));return xa(c,o,r)}const jO=B({hingeLoss_:HO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UO(t,e,n,r=1,a=Hn.SUM_BY_NONZERO_WEIGHTS){const s=C(t,"labels","huberLoss"),o=C(e,"predictions","huberLoss");let i=null;n!=null&&(i=C(n,"weights","huberLoss")),ar(s.shape,o.shape,"Error in huberLoss: ");const c=ut(r),l=cr(Ke(o,s)),u=Wc(l,c),d=Ke(l,u),f=Ae(he(ut(.5),Pr(u)),he(c,d));return xa(f,i,a)}const GO=B({huberLoss_:UO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qO(t,e,n,r=1e-7,a=Hn.SUM_BY_NONZERO_WEIGHTS){const s=C(t,"labels","logLoss"),o=C(e,"predictions","logLoss");let i=null;n!=null&&(i=C(n,"weights","logLoss")),ar(s.shape,o.shape,"Error in logLoss: ");const c=ut(1),l=ut(r),u=Jr(he(s,su(Ae(o,l)))),d=he(Ke(c,s),su(Ae(Ke(c,o),l))),f=Ke(u,d);return xa(f,i,a)}const KO=B({logLoss_:qO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XO(t,e,n,r=Hn.SUM_BY_NONZERO_WEIGHTS){const a=C(t,"labels","meanSquaredError"),s=C(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=C(n,"weights","meanSquaredError")),ar(a.shape,s.shape,"Error in meanSquaredError: ");const i=bw(a,s);return xa(i,o,r)}const YO=B({meanSquaredError_:XO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZO(t,e){const n=C(t,"labels","sigmoidCrossEntropyWithLogits"),r=C(e,"logits","sigmoidCrossEntropyWithLogits");ar(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=hf(r),s=he(r,n),o=aw(ya(Jr(cr(r))));return Ae(Ke(a,s),o)}function JO(t,e,n,r=0,a=Hn.SUM_BY_NONZERO_WEIGHTS){let s=C(t,"multiClassLabels","sigmoidCrossEntropy");const o=C(e,"logits","sigmoidCrossEntropy");let i=null;if(n!=null&&(i=C(n,"weights","sigmoidCrossEntropy")),ar(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=ut(r),u=ut(1),d=ut(.5);s=Ae(he(s,Ke(u,l)),he(d,l))}const c=ZO(s,o);return xa(c,i,a)}const QO=B({sigmoidCrossEntropy_:JO});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eF(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return va((a,s,o)=>{const c=ow(s,[n],!0),l=Ke(zt(s,"float32"),c);o([a,l]);const u=Jr(he(l,a));return{value:Dt(u,[n]),gradFunc:(p,h)=>{const[m,g]=h,v=vn(p.shape,[n]);return[he(ae(p,v),Ke(zt(m,"float32"),ya(g))),he(ae(p,v),Ke(ya(g),zt(m,"float32")))]}}})(t,e)}function tF(t,e,n,r=0,a=Hn.SUM_BY_NONZERO_WEIGHTS){let s=C(t,"onehotLabels","softmaxCrossEntropy");const o=C(e,"logits","softmaxCrossEntropy");let i=null;if(n!=null&&(i=C(n,"weights","softmaxCrossEntropy")),ar(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=ut(r),u=ut(1),d=ut(s.shape[1]);s=Ae(he(s,Ke(u,l)),Ze(l,d))}const c=eF(s,o);return xa(c,i,a)}const nF=B({softmaxCrossEntropy_:tF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rF(t,e,n,r){const a=C(t,"indices","sparseFillEmptyRows","int32"),s=C(e,"values","sparseFillEmptyRows"),o=C(n,"denseShape","sparseFillEmptyRows","int32"),i=C(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==0)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const c={indices:a,values:s,denseShape:o,defaultValue:i},l=W.runKernel(Rm,c);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const aF=B({sparseFillEmptyRows_:rF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sF(t,e,n){const r=C(t,"inputIndices","sparseReshape","int32"),a=C(e,"inputShape","sparseReshape","int32"),s=C(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const o={inputIndices:r,inputShape:a,newShape:s},i=W.runKernel(Xd,o);return{outputIndices:i[0],outputShape:i[1]}}const oF=B({sparseReshape_:sF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iF(t,e,n){const r=C(t,"data","sparseSegmentMean"),a=C(e,"indices","sparseSegmentMean","int32"),s=C(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return W.runKernel($m,o)}const uF=B({sparseSegmentMean_:iF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cF(t,e,n){const r=C(t,"data","sparseSegmentSum"),a=C(e,"indices","sparseSegmentSum","int32"),s=C(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return W.runKernel(Dm,o)}const lF=B({sparseSegmentSum_:cF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dF(t,e,n,r,a,s,o,i){const c=C(t,"data","stringNGrams","string");if(c.dtype!=="string")throw new Error("Data must be of datatype string");if(c.shape.length!==1)throw new Error(`Data must be a vector, saw: ${c.shape}`);const l=C(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:o,preserveShortSequences:i},d={data:c,dataSplits:l},f=W.runKernel(Fm,d,u);return{nGrams:f[0],nGramsSplits:f[1]}}const fF=B({stringNGrams_:dF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pF(t,e,n=!0){const r=C(t,"input","stringSplit","string"),a=C(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const s={skipEmpty:n},o={input:r,delimiter:a},i=W.runKernel(Mm,o,s);return{indices:i[0],values:i[1],shape:i[2]}}const hF=B({stringSplit_:pF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mF(t,e){const n=C(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return W.runKernel(Pm,a,r)}const gF=B({stringToHashBucketFast_:mF});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yF(t,e,n,r=!0){const a=C(t,"input","staticRegexReplace","string"),s={pattern:e,rewrite:n,replaceGlobal:r};return W.runKernel(Om,{x:a},s)}const vF=B({staticRegexReplace_:yF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bF={fft:ng,ifft:zc,rfft:rg,irfft:vw},wF={hammingWindow:jD,hannWindow:Ew,frame:Tw,stft:KD},mf={flipLeftRight:JD,grayscaleToRGB:eO,resizeNearestNeighbor:EO,resizeBilinear:IO,rgbToGrayscale:nO,rotateWithOffset:aO,cropAndResize:YD,nonMaxSuppression:oO,nonMaxSuppressionAsync:hO,nonMaxSuppressionWithScore:gO,nonMaxSuppressionWithScoreAsync:vO,nonMaxSuppressionPadded:wO,nonMaxSuppressionPaddedAsync:_O,threshold:NO,transform:RO},SF={bandPart:DO,gramSchmidt:FO,qr:PO},_F={absoluteDifference:WO,computeWeightedLoss:xa,cosineDistance:VO,hingeLoss:jO,huberLoss:GO,logLoss:KO,meanSquaredError:YO,sigmoidCrossEntropy:QO,softmaxCrossEntropy:nF},xF={sparseFillEmptyRows:aF,sparseReshape:oF,sparseSegmentMean:uF,sparseSegmentSum:lF},IF={stringNGrams:fF,stringSplit:hF,stringToHashBucketFast:gF,staticRegexReplace:vF};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kF=new Map,EF=new Map;class TF{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class bs{constructor(){this.classNameMap={}}static getMap(){return bs.instance==null&&(bs.instance=new bs),bs.instance}static register(e){bs.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function CF(t,e,n){A(t.className!=null,()=>"Class being registered does not have the static className property defined."),A(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),A(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,a=e+">"+r;return bs.register(t),kF.set(a,t),EF.set(t,a),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gs extends TF{minimize(e,n=!1,r){const{value:a,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(i=>({name:i.name,tensor:s[i.name]}));this.applyGradients(o)}else this.applyGradients(s);return un(s),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return p4(e,n)}dispose(){this.iterations_!=null&&un(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ut(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Gs,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NF extends Gs{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=W.registeredVariables[r],o=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accum_grad`,variable:Je(()=>lr(s).variable(o))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${r}/accum_var`,variable:Je(()=>lr(s).variable(o))});const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const c=this.accumulatedGrads[a].variable,l=this.accumulatedUpdates[a].variable;Je(()=>{const u=Ae(he(c,this.rho),he(Pr(i),1-this.rho)),d=he(Ze(ga(Ae(l,this.epsilon)),ga(Ae(c,this.epsilon))),i),f=Ae(he(l,this.rho),he(Pr(d),1-this.rho));c.assign(u),l.assign(f);const p=Ae(he(d,-this.learningRate),s);s.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(un(this.accumulatedGrads.map(e=>e.variable)),un(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AF extends Gs{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=W.registeredVariables[r];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accumulator`,variable:Je(()=>Cu(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const i=this.accumulatedGrads[a].variable;Je(()=>{const c=Ae(i,Pr(o));i.assign(c);const l=Ae(he(Ze(o,ga(Ae(c,W.backend.epsilon()))),-this.learningRate),s);s.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&un(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RF extends Gs{static get className(){return"Adam"}constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Je(()=>{this.accBeta1=ut(n).variable(),this.accBeta2=ut(r).variable()}),a==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Je(()=>{const r=Ke(1,this.accBeta1),a=Ke(1,this.accBeta2);n.forEach((s,o)=>{const i=W.registeredVariables[s],c=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Je(()=>lr(i).variable(c))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:Je(()=>lr(i).variable(c))});const l=Array.isArray(e)?e[o].tensor:e[s];if(l==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=Ae(he(u,this.beta1),he(l,1-this.beta1)),p=Ae(he(d,this.beta2),he(Pr(l),1-this.beta2)),h=Ze(f,r),m=Ze(p,a);u.assign(f),d.assign(p);const g=Ae(he(Ze(h,Ae(ga(m),this.epsilon)),-this.learningRate),i);i.assign(g)}),this.accBeta1.assign(he(this.accBeta1,this.beta1)),this.accBeta2.assign(he(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&un(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&un(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Je(()=>{this.accBeta1.assign(au(this.beta1,this.iterations_+1)),this.accBeta2.assign(au(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $F extends Gs{static get className(){return"Adamax"}constructor(e,n,r,a=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Je(()=>{this.iteration=ut(0).variable(),this.accBeta1=ut(n).variable()}),a==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Je(()=>{const r=Ke(1,this.accBeta1),a=Ze(-this.learningRate,Ae(he(this.iteration,this.decay),1));n.forEach((s,o)=>{const i=W.registeredVariables[s],c=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:lr(i).variable(c)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:lr(i).variable(c)});const l=Array.isArray(e)?e[o].tensor:e[s];if(l==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=Ae(he(u,this.beta1),he(l,1-this.beta1)),p=he(d,this.beta2),h=cr(l),m=lw(p,h);u.assign(f),d.assign(m);const g=Ae(he(Ze(a,r),Ze(f,Ae(m,this.epsilon))),i);i.assign(g)}),this.iteration.assign(Ae(this.iteration,1)),this.accBeta1.assign(he(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&un(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&un(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rw extends Gs{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=Array.isArray(e)?e[a].tensor:e[r];if(s==null)return;const o=W.registeredVariables[r];Je(()=>{const i=Ae(he(this.c,s),o);o.assign(i)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Yr(ut(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DF extends Rw{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ut(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=W.registeredVariables[r];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${r}/momentum`,variable:Je(()=>lr(s).variable(!1))});const o=this.accumulations[a].variable,i=Array.isArray(e)?e[a].tensor:e[r];i!=null&&Je(()=>{let c;const l=Ae(he(this.m,o),i);this.useNesterov?c=Ae(he(this.c,Ae(i,he(l,this.m))),s):c=Ae(he(this.c,l),s),o.assign(l),s.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&un(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OF extends Gs{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,a=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,a==null&&(this.epsilon=W.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=W.registeredVariables[r],o=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${r}/rms`,variable:Je(()=>lr(s).variable(o))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${r}/momentum`,variable:Je(()=>lr(s).variable(o))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${r}/mg`,variable:Je(()=>lr(s).variable(o))});const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const c=this.accumulatedMeanSquares[a].variable,l=this.accumulatedMoments[a].variable;Je(()=>{const u=Ae(he(c,this.decay),he(Pr(i),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[a].variable,f=Ae(he(d,this.decay),he(i,1-this.decay)),p=Ze(he(i,this.learningRate),ga(Ke(u,Ae(Pr(f),this.epsilon)))),h=Ae(he(l,this.momentum),p);c.assign(u),d.assign(f),l.assign(h);const m=Ke(s,h);s.assign(m)}else{const d=Ae(he(c,this.decay),he(Pr(i),1-this.decay)),f=Ae(he(l,this.momentum),Ze(he(i,this.learningRate),ga(Ae(d,this.epsilon))));c.assign(d),l.assign(f);const p=Ke(s,f);s.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&un(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&un(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&un(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FF=[NF,AF,RF,$F,DF,OF,Rw];function MF(){for(const t of FF)CF(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PF="model",BF=".json",LF=".weights.bin";function ev(t){return new Promise(e=>setTimeout(e)).then(t)}class Fs{constructor(e){if(!Xe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Fs.URL_SCHEME)&&(e=e.slice(Fs.URL_SCHEME.length)),(e==null||e.length===0)&&(e=PF),this.modelJsonFileName=e+BF,this.weightDataFileName=e+LF}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=zr.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=A1(e,a),o=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=o,await ev(()=>i.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=r,await ev(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Tu(e)}}}}Fs.URL_SCHEME="downloads://";class WF{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const s=JSON.parse(a.target.result),o=s.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const c=jm(s,l=>this.loadWeights(l));e(c)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),s=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(s).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,a)=>{const s=new FileReader;s.onload=o=>{const i=o.target.result;r(i)},s.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(s=>Yy(s.name)),a={};for(const s of e)s.paths.forEach(o=>{const i=Yy(o);if(n.indexOf(i)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(n.push(i),r.indexOf(i)===-1)throw new Error(`Weight file with basename '${i}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(i)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const zF=t=>Xe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Fs.URL_SCHEME)?VF(t.slice(Fs.URL_SCHEME.length)):null;Wt.registerSaveRouter(zF);function VF(t="model"){return new Fs(t)}function HF(t){return new WF(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tv(t,e,n,r){o(t),n=n??0,r=r??1,i(n,r);let a=0;const s=c=>(c.then(l=>{const u=n+ ++a/t.length*(r-n);return e(u),l}),c);function o(c){A(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function i(c,l){A(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),A(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),A(l>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${l}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $w(t,e){e==null&&(e={});const n=e.fetchFunc==null?Xe().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=0,s=.5,i=(e.onProgress==null?await Promise.all(r):await tv(r,e.onProgress,a,s)).map(d=>d.arrayBuffer()),c=.5,l=1;return e.onProgress==null?await Promise.all(i):await tv(i,e.onProgress,c,l)}async function jF(t,e="",n,r){return Dw(o=>$w(o,{requestInit:r}))(t,e,n)}function Dw(t){return async(e,n="",r)=>{const a=e.map(()=>!1),s={},o=r!=null?r.map(()=>!1):[],i=[];if(e.forEach((p,h)=>{let m=0;p.weights.forEach(g=>{const v="quantization"in g?g.quantization.dtype:g.dtype,b=jp[v]*Y(g.shape),w=()=>{a[h]=!0,s[h]==null&&(s[h]=[]),s[h].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};r!=null?r.forEach((S,I)=>{S===g.name&&(w(),o[I]=!0)}):w(),i.push(g.name),m+=b})}),!o.every(p=>p)){const p=r.filter((h,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${i.join(", ")}.`)}const c=a.reduce((p,h,m)=>(h&&p.push(m),p),[]),l=[];c.forEach(p=>{e[p].paths.forEach(h=>{const m=n+(n.endsWith("/")?"":"/")+h;l.push(m)})});const u=await t(l),d={};let f=0;return c.forEach(p=>{const h=e[p].paths.length,m=new zr(u.slice(f,f+h));s[p].forEach(v=>{const b=m.slice(v.groupOffset,v.groupOffset+v.sizeBytes),w=N1(b,[v.manifestEntry]);for(const S in w)d[S]=w[S]}),f+=h}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UF="application/octet-stream",GF="application/json";class lg{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(A(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Xe().platform.fetch,A(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&A(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=A1(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:GF}),"model.json"),e.weightData!=null){const o=zr.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:UF}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:Tu(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return jm(n,s=>this.loadWeights(s))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=qF(n),s=this.weightPathPrefix||r,o=$1(e),i=[],c=[];for(const u of e)for(const d of u.paths)this.weightUrlConverter!=null?c.push(this.weightUrlConverter(d)):i.push(s+d+a);this.weightUrlConverter&&i.push(...await Promise.all(c));const l=await $w(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,l]}}lg.URL_SCHEME_REGEX=/^https?:\/\//;function qF(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function eh(t){return t.match(lg.URL_SCHEME_REGEX)!=null}const Ow=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>eh(r)):n=eh(t),n)return dg(t,e)}return null};Wt.registerSaveRouter(Ow);Wt.registerLoadRouter(Ow);function dg(t,e){return new lg(t,e)}function KF(t,e){return dg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qf{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Fw{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class XF{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function YF(t,e,n,r){const a=arguments;return new XF(Mw(...a))}function Mw(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new qf(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qf({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qf({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function ZF(t){return new Fw(t)}function JF(t){return new Fw(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pw=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:zr,browserFiles:HF,browserHTTPRequest:KF,concatenateArrayBuffers:YT,copyModel:vC,decodeWeights:N1,encodeWeights:GT,fromMemory:YF,fromMemorySync:Mw,getLoadHandlers:aC,getModelArtifactsForJSON:jm,getModelArtifactsForJSONSync:R1,getModelArtifactsInfoForJSON:Tu,getSaveHandlers:rC,getWeightSpecs:$1,http:dg,isHTTPScheme:eh,listModels:gC,loadWeights:jF,moveModel:bC,registerLoadRouter:nC,registerSaveRouter:tC,removeModel:yC,weightsLoaderFactory:Dw,withSaveHandler:ZF,withSaveHandlerSync:JF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ps,nv=!1;function QF(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,o=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)i=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Rc(My,W.backendName)!=null){const h={pixels:t},m={numChannels:e};return W.runKernel(My,h,m)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)d=t.data;else if(s||a||i){if(ps==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")ps=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ps=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ps.canvas.width=l,ps.canvas.height=u,ps.drawImage(t,0,0,l,u),d=ps.getImageData(0,0,l,u).data}let f;if(e===4)f=new Int32Array(d);else{const h=l*u;f=new Int32Array(h*e);for(let m=0;m<h;m++)for(let g=0;g<e;++g)f[m*e+g]=d[m*4+g]}return Sw(f,[u,l,e],"int32")}function eM(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function tM(t,e){let n=C(t,"img","toPixels");if(!(t instanceof en)){const l=n;n=zt(l,"int32"),l.dispose()}eM(n);const[r,a]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],o=await n.data(),i=n.dtype==="float32"?255:1,c=new Uint8ClampedArray(a*r*4);for(let l=0;l<r*a;++l){const u=[0,0,0,255];for(let f=0;f<s;f++){const p=o[l*s+f];if(n.dtype==="float32"){if(p<0||p>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${p}.`)}else if(n.dtype==="int32"&&(p<0||p>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${p}.`);s===1?(u[0]=p*i,u[1]=p*i,u[2]=p*i):u[f]=p*i}const d=l*4;c[d+0]=Math.round(u[0]),c[d+1]=Math.round(u[1]),c[d+2]=Math.round(u[2]),c[d+3]=Math.round(u[3])}if(e!=null){nv||Rc(Z0,W.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),nv=!0),e.width=a,e.height=r;const l=e.getContext("2d"),u=new ImageData(c,a,r);l.putImageData(u,0,0)}return n!==t&&n.dispose(),c}const nM=B({fromPixels_:QF});function Bw(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Y(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,s=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const i=t.shape,c=a.slice();c.pop();let l=1;for(let d=s;d<n;++d)l*=i[d],c.push(i[d]);const u=[...Ie(t.shape).map(d=>d/l),1].slice(0,s);return[c,o,l,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const th=-2,rM=-1;function aM(t,e,n){const r=t.shape.length;A(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),A(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)A(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function Lw(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function Ww(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function zw(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Vw(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{A(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(a).fill(-1):typeof n=="number"?s=[n,...new Array(a-1).fill(-1)]:n.length<a?s=n.concat(new Array(a-n.length).fill(-1)):s=n,s=s.map((o,i)=>o>=0?o:(A(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${i}.`),t.shape[i]-r[i])),[r,s]}function Hw(t,e,n,r,a,s,o,i,c){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:i,shrinkAxisMask:c};for(let w=0;w<d.dims;w++)u&&1<<w&i&&d.numAddAxisAfterEllipsis++,1<<w&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};sM(d,f);let p=!0,h=!0,m=!0;const g=[],v=[];for(let w=0;w<t.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const S=!!(f.shrinkAxisMask&1<<w),I=t[w];if(I===-1){g.push(S?1:-1);continue}const E=[f.beginMask&1<<w,f.endMask&1<<w],T=[f.strides[w]>0?0:-1,f.strides[w]>0?I:I-1];if(S&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[w]===1;const R=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(S){const z=f.begin[w]<0?I+f.begin[w]:f.begin[w];if(f.begin[w]=z,f.end[w]=f.begin[w]+1,z<0||z>=I)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=rv(f.begin[w],0,f.strides[w],I,E,T),f.end[w]=rv(f.end[w],1,f.strides[w],I,E,T);const M=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===I;p=p&&M,h=h&&(w===0&&f.strides[w]===1||M)}else p=p&&f.strides[w]===1&&R,h=h&&(w===0&&f.strides[w]===1||R);let $,D=!1;if(f.beginValid&&f.endValid?($=f.end[w]-f.begin[w],D=!0):S?($=1,D=!0):R&&I>=0&&(f.strides[w]<0?$=-I:$=I,D=!0),D){let M;$===0||$<0!=f.strides[w]<0?M=0:M=Math.trunc($/f.strides[w])+($%f.strides[w]!==0?1:0),g.push(M)}else g.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){const S=f.finalShapeGatherIndices[w];S>=0?v.push(g[S]):S===th&&v.push(1)}return{finalShapeSparse:v.filter((w,S)=>f.finalShapeGatherIndices[S]!==th),finalShape:v,isIdentity:p,sliceDim0:h,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function sM(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(th),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(rM),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function rv(t,e,n,r,a,s){if(a[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jw(t,e){const n=t[0].length;t.forEach((a,s)=>{A(a.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),A(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,s)=>{for(let o=0;o<n;o++)A(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function So(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xr;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Xr||(Xr={}));function oM(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const s=n[a],o=r[r.length-n.length+a],i=r[o];if(s>=0)if(i>=0){if(i!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${s} but shape[${a+t}] = ${i}`)}else r[o]=s}return r}function iM(t){const e={FIRST_DIM_SIZE:Xr.FIRST_DIM_SIZE,VALUE_ROWIDS:Xr.VALUE_ROWIDS,ROW_LENGTHS:Xr.ROW_LENGTHS,ROW_SPLITS:Xr.ROW_SPLITS,ROW_LIMITS:Xr.ROW_LIMITS,ROW_STARTS:Xr.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function uM(t){return t.length===0?0:t[0]===Xr.FIRST_DIM_SIZE?t.length-1:t.length}function cM(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const s=t[a],o=e[a+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${s} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uw(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gf(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(s+1))}return a}function yf(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):a.push(o);r.push(...a),r.push(0),r.push(...s)}return r}function vf(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?a.push(e[s-1]*t[s]):a.push(t[s]/e[s-1]):a.push(t[s]);return a}function Gw(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function qw(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lM=1.7580993408473768,dM=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fM=.3275911,pM=.254829592,hM=-.284496736,mM=1.421413741,gM=-1.453152027,yM=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function vM(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function bM(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function wM(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function Kw(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function SM(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function _M(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const s=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function xM(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),s=Math.sin(r);return{real:a,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kf="->",IM=/->/g,av=",",sv="...";function kM(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(IM,"").length)/Kf.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Kf}").`);const[r,a]=t.split(Kf);A(r.indexOf(sv)===-1,()=>`The ellipsis notation ("${sv}") is not supported yet.`);const s=r.split(av),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let f=0;f<a.length;++f){const p=a[f];if(!s.some(h=>h.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);i.indexOf(p)===-1&&i.push(p)}for(let f=0;f<r.length;++f){const p=r[f];i.indexOf(p)===-1&&p!==av&&i.push(p)}const c=new Array(s.length);for(let f=0;f<o;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);c[f]=[];for(let p=0;p<s[f].length;++p)c[f].push(i.indexOf(s[f][p]))}const l=i.length,u=a.length,d=[];for(let f=u;f<l;++f)d.push(f);return{allDims:i,summedDims:d,idDims:c}}function EM(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function TM(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const s=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=s[o]:A(r[e[a][o]]===s[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function CM(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const i=n[o],c=AM(e,i);for(const l of c)s.indexOf(l)===-1&&(r[o].push(l),s.push(l))}return{path:n,steps:r}}function NM(t){return t.every((e,n)=>e===n)}function AM(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function Xw(t,e,n=0){let r=[];if(typeof e=="number")A(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,i)=>(i===-1&&(o+=1),o),0);A(a<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((i,c)=>c>0?i+c:i);e[s]=t.shape[n]-o}A(t.shape[n]===e.reduce((o,i)=>o+i),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Zw(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Jw(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qw(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function e2(t,e){return`size ${t} must be non-negative, not ${e}`}function t2(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function n2(t,e){const n=Y(t),r=Y(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function r2(t,e){const n=Y(t),r=Y(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vc(){return"segment ids must be >= 0"}function a2(){return"segment ids are not increasing"}function s2(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function o2(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2(t,e,n,r){const a=e.shape.length,s=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],i=[];let c=1,l=1,u=1;for(let d=0;d<r;++d)i.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<n;d++)i.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<a;d++)i.push(e.shape[d]);for(let d=n+1;d<s;d++)i.push(t.shape[d]),u*=t.shape[d];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:o,outputShape:i}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cu(t){try{return t.map(e=>eu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function u2(t){return t.map(e=>ks(e))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */MF();var RM={};(function(){var t;function e(y){var x=0;return function(){return x<y.length?{done:!1,value:y[x++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,x,k){return y==Array.prototype||y==Object.prototype||(y[x]=k.value),y};function r(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof $n=="object"&&$n];for(var x=0;x<y.length;++x){var k=y[x];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var a=r(this);function s(y,x){if(x)e:{var k=a;y=y.split(".");for(var N=0;N<y.length-1;N++){var P=y[N];if(!(P in k))break e;k=k[P]}y=y[y.length-1],N=k[y],x=x(N),x!=N&&x!=null&&n(k,y,{configurable:!0,writable:!0,value:x})}}s("Symbol",function(y){function x(j){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return new k(N+(j||"")+"_"+P++,j)}function k(j,L){this.g=j,n(this,"description",{configurable:!0,writable:!0,value:L})}if(y)return y;k.prototype.toString=function(){return this.g};var N="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",P=0;return x}),s("Symbol.iterator",function(y){if(y)return y;y=Symbol("Symbol.iterator");for(var x="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),k=0;k<x.length;k++){var N=a[x[k]];typeof N=="function"&&typeof N.prototype[y]!="function"&&n(N.prototype,y,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return y});function o(y){return y={next:y},y[Symbol.iterator]=function(){return this},y}function i(y){var x=typeof Symbol<"u"&&Symbol.iterator&&y[Symbol.iterator];return x?x.call(y):{next:e(y)}}function c(y){if(!(y instanceof Array)){y=i(y);for(var x,k=[];!(x=y.next()).done;)k.push(x.value);y=k}return y}var l=typeof Object.create=="function"?Object.create:function(y){function x(){}return x.prototype=y,new x},u;if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var d;e:{var f={a:!0},p={};try{p.__proto__=f,d=p.a;break e}catch{}d=!1}u=d?function(y,x){if(y.__proto__=x,y.__proto__!==x)throw new TypeError(y+" is not extensible");return y}:null}var h=u;function m(y,x){if(y.prototype=l(x.prototype),y.prototype.constructor=y,h)h(y,x);else for(var k in x)if(k!="prototype")if(Object.defineProperties){var N=Object.getOwnPropertyDescriptor(x,k);N&&Object.defineProperty(y,k,N)}else y[k]=x[k];y.na=x.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function v(y){if(y.l)throw new TypeError("Generator is already running");y.l=!0}g.prototype.s=function(y){this.h=y};function b(y,x){y.j={da:x,ea:!0},y.g=y.o||y.u}g.prototype.return=function(y){this.j={return:y},this.g=this.u};function w(y,x,k){return y.g=k,{value:x}}function S(y){this.g=new g,this.h=y}function I(y,x){v(y.g);var k=y.g.i;return k?E(y,"return"in k?k.return:function(N){return{value:N,done:!0}},x,y.g.return):(y.g.return(x),T(y))}function E(y,x,k,N){try{var P=x.call(y.g.i,k);if(!(P instanceof Object))throw new TypeError("Iterator result "+P+" is not an object");if(!P.done)return y.g.l=!1,P;var j=P.value}catch(L){return y.g.i=null,b(y.g,L),T(y)}return y.g.i=null,N.call(y.g,j),T(y)}function T(y){for(;y.g.g;)try{var x=y.h(y.g);if(x)return y.g.l=!1,{value:x.value,done:!1}}catch(k){y.g.h=void 0,b(y.g,k)}if(y.g.l=!1,y.g.j){if(x=y.g.j,y.g.j=null,x.ea)throw x.da;return{value:x.return,done:!0}}return{value:void 0,done:!0}}function R(y){this.next=function(x){return v(y.g),y.g.i?x=E(y,y.g.i.next,x,y.g.s):(y.g.s(x),x=T(y)),x},this.throw=function(x){return v(y.g),y.g.i?x=E(y,y.g.i.throw,x,y.g.s):(b(y.g,x),x=T(y)),x},this.return=function(x){return I(y,x)},this[Symbol.iterator]=function(){return this}}function $(y){function x(N){return y.next(N)}function k(N){return y.throw(N)}return new Promise(function(N,P){function j(L){L.done?N(L.value):Promise.resolve(L.value).then(x,k).then(j,P)}j(y.next())})}function D(y){return $(new R(new S(y)))}s("Promise",function(y){function x(L){this.h=0,this.i=void 0,this.g=[],this.s=!1;var K=this.j();try{L(K.resolve,K.reject)}catch(Q){K.reject(Q)}}function k(){this.g=null}function N(L){return L instanceof x?L:new x(function(K){K(L)})}if(y)return y;k.prototype.h=function(L){if(this.g==null){this.g=[];var K=this;this.i(function(){K.l()})}this.g.push(L)};var P=a.setTimeout;k.prototype.i=function(L){P(L,0)},k.prototype.l=function(){for(;this.g&&this.g.length;){var L=this.g;this.g=[];for(var K=0;K<L.length;++K){var Q=L[K];L[K]=null;try{Q()}catch(fe){this.j(fe)}}}this.g=null},k.prototype.j=function(L){this.i(function(){throw L})},x.prototype.j=function(){function L(fe){return function(Ee){Q||(Q=!0,fe.call(K,Ee))}}var K=this,Q=!1;return{resolve:L(this.D),reject:L(this.l)}},x.prototype.D=function(L){if(L===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(L instanceof x)this.H(L);else{e:switch(typeof L){case"object":var K=L!=null;break e;case"function":K=!0;break e;default:K=!1}K?this.A(L):this.o(L)}},x.prototype.A=function(L){var K=void 0;try{K=L.then}catch(Q){this.l(Q);return}typeof K=="function"?this.I(K,L):this.o(L)},x.prototype.l=function(L){this.u(2,L)},x.prototype.o=function(L){this.u(1,L)},x.prototype.u=function(L,K){if(this.h!=0)throw Error("Cannot settle("+L+", "+K+"): Promise already settled in state"+this.h);this.h=L,this.i=K,this.h===2&&this.G(),this.B()},x.prototype.G=function(){var L=this;P(function(){if(L.C()){var K=a.console;typeof K<"u"&&K.error(L.i)}},1)},x.prototype.C=function(){if(this.s)return!1;var L=a.CustomEvent,K=a.Event,Q=a.dispatchEvent;return typeof Q>"u"?!0:(typeof L=="function"?L=new L("unhandledrejection",{cancelable:!0}):typeof K=="function"?L=new K("unhandledrejection",{cancelable:!0}):(L=a.document.createEvent("CustomEvent"),L.initCustomEvent("unhandledrejection",!1,!0,L)),L.promise=this,L.reason=this.i,Q(L))},x.prototype.B=function(){if(this.g!=null){for(var L=0;L<this.g.length;++L)j.h(this.g[L]);this.g=null}};var j=new k;return x.prototype.H=function(L){var K=this.j();L.M(K.resolve,K.reject)},x.prototype.I=function(L,K){var Q=this.j();try{L.call(K,Q.resolve,Q.reject)}catch(fe){Q.reject(fe)}},x.prototype.then=function(L,K){function Q(Le,Te){return typeof Le=="function"?function(Ge){try{fe(Le(Ge))}catch(ft){Ee(ft)}}:Te}var fe,Ee,Be=new x(function(Le,Te){fe=Le,Ee=Te});return this.M(Q(L,fe),Q(K,Ee)),Be},x.prototype.catch=function(L){return this.then(void 0,L)},x.prototype.M=function(L,K){function Q(){switch(fe.h){case 1:L(fe.i);break;case 2:K(fe.i);break;default:throw Error("Unexpected state: "+fe.h)}}var fe=this;this.g==null?j.h(Q):this.g.push(Q),this.s=!0},x.resolve=N,x.reject=function(L){return new x(function(K,Q){Q(L)})},x.race=function(L){return new x(function(K,Q){for(var fe=i(L),Ee=fe.next();!Ee.done;Ee=fe.next())N(Ee.value).M(K,Q)})},x.all=function(L){var K=i(L),Q=K.next();return Q.done?N([]):new x(function(fe,Ee){function Be(Ge){return function(ft){Le[Ge]=ft,Te--,Te==0&&fe(Le)}}var Le=[],Te=0;do Le.push(void 0),Te++,N(Q.value).M(Be(Le.length-1),Ee),Q=K.next();while(!Q.done)})},x});function M(y,x){y instanceof String&&(y+="");var k=0,N=!1,P={next:function(){if(!N&&k<y.length){var j=k++;return{value:x(j,y[j]),done:!1}}return N=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}var z=typeof Object.assign=="function"?Object.assign:function(y,x){for(var k=1;k<arguments.length;k++){var N=arguments[k];if(N)for(var P in N)Object.prototype.hasOwnProperty.call(N,P)&&(y[P]=N[P])}return y};s("Object.assign",function(y){return y||z}),s("Object.is",function(y){return y||function(x,k){return x===k?x!==0||1/x===1/k:x!==x&&k!==k}}),s("Array.prototype.includes",function(y){return y||function(x,k){var N=this;N instanceof String&&(N=String(N));var P=N.length;for(k=k||0,0>k&&(k=Math.max(k+P,0));k<P;k++){var j=N[k];if(j===x||Object.is(j,x))return!0}return!1}}),s("String.prototype.includes",function(y){return y||function(x,k){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(x instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(x,k||0)!==-1}}),s("Array.prototype.keys",function(y){return y||function(){return M(this,function(x){return x})}});var F=this||self;function V(y,x){y=y.split(".");var k=F;y[0]in k||typeof k.execScript>"u"||k.execScript("var "+y[0]);for(var N;y.length&&(N=y.shift());)y.length||x===void 0?k[N]&&k[N]!==Object.prototype[N]?k=k[N]:k=k[N]={}:k[N]=x}function H(){throw Error("Invalid UTF8")}function U(y,x){return x=String.fromCharCode.apply(null,x),y==null?x:y+x}var Z,q=typeof TextDecoder<"u",X,se=typeof TextEncoder<"u",te={},ce=null;function ee(y){var x;x===void 0&&(x=0),ge(),x=te[x];for(var k=Array(Math.floor(y.length/3)),N=x[64]||"",P=0,j=0;P<y.length-2;P+=3){var L=y[P],K=y[P+1],Q=y[P+2],fe=x[L>>2];L=x[(L&3)<<4|K>>4],K=x[(K&15)<<2|Q>>6],Q=x[Q&63],k[j++]=fe+L+K+Q}switch(fe=0,Q=N,y.length-P){case 2:fe=y[P+1],Q=x[(fe&15)<<2]||N;case 1:y=y[P],k[j]=x[y>>2]+x[(y&3)<<4|fe>>4]+Q+N}return k.join("")}function ne(y){var x=y.length,k=3*x/4;k%3?k=Math.floor(k):"=.".indexOf(y[x-1])!=-1&&(k="=.".indexOf(y[x-2])!=-1?k-2:k-1);var N=new Uint8Array(k),P=0;return ie(y,function(j){N[P++]=j}),P!==k?N.subarray(0,P):N}function ie(y,x){function k(Q){for(;N<y.length;){var fe=y.charAt(N++),Ee=ce[fe];if(Ee!=null)return Ee;if(!/^[\s\xa0]*$/.test(fe))throw Error("Unknown base64 encoding at char: "+fe)}return Q}ge();for(var N=0;;){var P=k(-1),j=k(0),L=k(64),K=k(64);if(K===64&&P===-1)break;x(P<<2|j>>4),L!=64&&(x(j<<4&240|L>>2),K!=64&&x(L<<6&192|K))}}function ge(){if(!ce){ce={};for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),x=["+/=","+/","-_=","-_.","-_"],k=0;5>k;k++){var N=y.concat(x[k].split(""));te[k]=N;for(var P=0;P<N.length;P++){var j=N[P];ce[j]===void 0&&(ce[j]=P)}}}}var be=typeof Uint8Array=="function";function pe(y){return be&&y!=null&&y instanceof Uint8Array}var we;function Re(y){if(this.L=y,y!==null&&y.length===0)throw Error("ByteString should be constructed with non-empty values")}var $e=typeof Uint8Array.prototype.slice=="function",Oe=0,We=0;function Ue(y,x){if(y.constructor===Uint8Array)return y;if(y.constructor===ArrayBuffer)return new Uint8Array(y);if(y.constructor===Array)return new Uint8Array(y);if(y.constructor===String)return ne(y);if(y.constructor===Re)return!x&&(x=y.L)&&x.constructor===Uint8Array?x:(x=y.L,x=x==null||pe(x)?x:typeof x=="string"?ne(x):null,(y=y.L=x)?new Uint8Array(y):we||(we=new Uint8Array(0)));if(y instanceof Uint8Array)return new Uint8Array(y.buffer,y.byteOffset,y.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function je(y,x){return Error("Invalid wire type: "+y+" (at position "+x+")")}function Ne(){return Error("Failed to read varint, encoding is invalid.")}function et(y,x){x=x===void 0?{}:x,x=x.v===void 0?!1:x.v,this.h=null,this.g=this.i=this.j=0,this.v=x,y&&Ye(this,y)}function Ye(y,x){y.h=Ue(x,y.v),y.j=0,y.i=y.h.length,y.g=y.j}et.prototype.reset=function(){this.g=this.j};function ct(y){if(y.g>y.i)throw Error("Tried to read past the end of the data "+y.g+" > "+y.i)}function at(y){var x=y.h,k=x[y.g],N=k&127;if(128>k)return y.g+=1,ct(y),N;if(k=x[y.g+1],N|=(k&127)<<7,128>k)return y.g+=2,ct(y),N;if(k=x[y.g+2],N|=(k&127)<<14,128>k)return y.g+=3,ct(y),N;if(k=x[y.g+3],N|=(k&127)<<21,128>k)return y.g+=4,ct(y),N;if(k=x[y.g+4],y.g+=5,N|=(k&15)<<28,128>k)return ct(y),N;if(128<=x[y.g++]&&128<=x[y.g++]&&128<=x[y.g++]&&128<=x[y.g++]&&128<=x[y.g++])throw Ne();return ct(y),N}var Ht=[];function st(){this.g=[]}st.prototype.length=function(){return this.g.length},st.prototype.end=function(){var y=this.g;return this.g=[],y};function St(y,x){for(;127<x;)y.g.push(x&127|128),x>>>=7;y.g.push(x)}function Mt(y){var x={},k=x.W===void 0?!1:x.W;this.l={v:x.v===void 0?!1:x.v},this.W=k,x=this.l,Ht.length?(k=Ht.pop(),x&&(k.v=x.v),y&&Ye(k,y),y=k):y=new et(y,x),this.g=y,this.j=this.g.g,this.h=this.i=-1}Mt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Zt(y){var x=y.g;if(x.g==x.i)return!1;y.j=y.g.g;var k=at(y.g)>>>0;if(x=k>>>3,k&=7,!(0<=k&&5>=k))throw je(k,y.j);if(1>x)throw Error("Invalid field number: "+x+" (at position "+y.j+")");return y.i=x,y.h=k,!0}function rn(y){switch(y.h){case 0:if(y.h!=0)rn(y);else e:{y=y.g;for(var x=y.g,k=x+10;x<k;)if(!(y.h[x++]&128)){y.g=x,ct(y);break e}throw Ne()}break;case 1:y=y.g,y.g+=8,ct(y);break;case 2:y.h!=2?rn(y):(x=at(y.g)>>>0,y=y.g,y.g+=x,ct(y));break;case 5:y=y.g,y.g+=4,ct(y);break;case 3:x=y.i;do{if(!Zt(y))throw Error("Unmatched start-group tag: stream EOF");if(y.h==4){if(y.i!=x)throw Error("Unmatched end-group tag");break}rn(y)}while(1);break;default:throw je(y.h,y.j)}}var jt=[];function pn(){this.i=[],this.h=0,this.g=new st}function kn(y,x){x.length!==0&&(y.i.push(x),y.h+=x.length)}function aa(y,x){if(x=x.ba){kn(y,y.g.end());for(var k=0;k<x.length;k++)kn(y,x[k])}}var En=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Ia(y,x){Object.isFrozen(y)||(En?y[En]|=x:y.N!==void 0?y.N|=x:Object.defineProperties(y,{N:{value:x,configurable:!0,writable:!0,enumerable:!1}}))}function or(y){var x;return En?x=y[En]:x=y.N,x??0}function Xn(y){return Ia(y,1),y}function Lt(y){return Array.isArray(y)?!!(or(y)&2):!1}function ka(y){if(!Array.isArray(y))throw Error("cannot mark non-array as immutable");Ia(y,2)}function as(y){return y!==null&&typeof y=="object"&&!Array.isArray(y)&&y.constructor===Object}var sa=Object.freeze(Xn([]));function ss(y){if(Lt(y.m))throw Error("Cannot mutate an immutable Message")}var hr=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function oa(y){return{value:y,configurable:!1,writable:!1,enumerable:!1}}function Tn(y,x,k){return x===-1?null:x>=y.i?y.g?y.g[x]:void 0:k!==void 0&&k&&y.g&&(k=y.g[x],k!=null)?k:y.m[x+y.h]}function Et(y,x,k,N){N=N===void 0?!1:N,ss(y),x<y.i&&!N?y.m[x+y.h]=k:(y.g||(y.g=y.m[y.i+y.h]={}))[x]=k}function jr(y,x,k,N){k=k===void 0?!0:k,N=N===void 0?!1:N;var P=Tn(y,x,N);return P==null&&(P=sa),Lt(y.m)?k&&(ka(P),Object.freeze(P)):(P===sa||Lt(P))&&(P=Xn(P.slice()),Et(y,x,P,N)),P}function Pn(y,x,k){return y=Tn(y,x),y=y==null?y:+y,y??(k===void 0?0:k)}function J(y,x,k,N){y.j||(y.j={});var P=Lt(y.m),j=y.j[k];if(!j){N=jr(y,k,!0,N===void 0?!1:N),j=[],P=P||Lt(N);for(var L=0;L<N.length;L++)j[L]=new x(N[L]),P&&ka(j[L].m);P&&(ka(j),Object.freeze(j)),y.j[k]=j}return j}function le(y,x,k,N,P){var j=j===void 0?!1:j;return ss(y),j=J(y,k,x,j),k=N||new k,y=jr(y,x),P!=null?(j.splice(P,0,k),y.splice(P,0,k.m)):(j.push(k),y.push(k.m)),k}function Ce(y,x){return y=Tn(y,x),y??0}function ve(y,x){return y=Tn(y,x),y??""}function bt(y){switch(typeof y){case"number":return isFinite(y)?y:String(y);case"object":if(y&&!Array.isArray(y)){if(pe(y))return ee(y);if(y instanceof Re){var x=y.L;return x=x==null||typeof x=="string"?x:be&&x instanceof Uint8Array?ee(x):null,(y.L=x)||""}}}return y}function _t(y){var x=Ut;return x=x===void 0?Bn:x,Pe(y,x)}function He(y,x){if(y!=null){if(Array.isArray(y))y=Pe(y,x);else if(as(y)){var k={},N;for(N in y)k[N]=He(y[N],x);y=k}else y=x(y);return y}}function Pe(y,x){for(var k=y.slice(),N=0;N<k.length;N++)k[N]=He(k[N],x);return Array.isArray(y)&&or(y)&1&&Xn(k),k}function Ut(y){return y&&typeof y=="object"&&y.toJSON?y.toJSON():(y=bt(y),Array.isArray(y)?_t(y):y)}function Bn(y){return pe(y)?new Uint8Array(y):y}function Yn(y,x,k){y||(y=os),os=null;var N=this.constructor.h;y||(y=N?[N]:[]),this.h=(N?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=y;e:{if(N=this.m.length,y=N-1,N&&(N=this.m[y],as(N))){this.i=y-this.h,this.g=N;break e}x!==void 0&&-1<x?(this.i=Math.max(x,y+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(k)for(x=0;x<k.length;x++)if(y=k[x],y<this.i)y+=this.h,(N=this.m[y])?Array.isArray(N)&&Xn(N):this.m[y]=sa;else{N=this.g||(this.g=this.m[this.i+this.h]={});var P=N[y];P?Array.isArray(P)&&Xn(P):N[y]=sa}}Yn.prototype.toJSON=function(){return _t(this.m)},Yn.prototype.toString=function(){return this.m.toString()};var os;function Ur(){Yn.apply(this,arguments)}if(m(Ur,Yn),hr){var is={};Object.defineProperties(Ur,(is[Symbol.hasInstance]=oa(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),is))}function an(y,x,k){if(k){var N={},P;for(P in k){var j=k[P],L=j.ha;L||(N.F=j.la||j.fa.P,j.aa?(N.U=Ea(j.aa),L=function(K){return function(Q,fe,Ee){return K.F(Q,fe,Ee,K.U)}}(N)):j.ca?(N.T=Mu(j.X.g,j.ca),L=function(K){return function(Q,fe,Ee){return K.F(Q,fe,Ee,K.T)}}(N)):L=N.F,j.ha=L),L(x,y,j.X),N={F:N.F,U:N.U,T:N.T}}}aa(x,y)}var ir=Symbol();function us(y,x,k){return y[ir]||(y[ir]=function(N,P){return x(N,P,k)})}function Ou(y){var x=y[ir];if(!x){var k=zu(y);x=function(N,P){return Vu(N,P,k)},y[ir]=x}return x}function Go(y){var x=y.aa;if(x)return Ou(x);if(x=y.ka)return us(y.X.g,x,y.ca)}function Cf(y){var x=Go(y),k=y.X,N=y.fa.O;return x?function(P,j){return N(P,j,k,x)}:function(P,j){return N(P,j,k)}}function Fu(y,x,k,N,P,j){y=y();var L=0;for(y.length&&typeof y[0]!="number"&&(k(x,y[0]),L++);L<y.length;){k=y[L++];for(var K=L+1;K<y.length&&typeof y[K]!="number";)K++;var Q=y[L++];switch(K-=L,K){case 0:N(x,k,Q);break;case 1:N(x,k,Q,y[L++]);break;case 2:P(x,k,Q,y[L++],y[L++]);break;case 3:K=y[L++];var fe=y[L++],Ee=y[L++];Array.isArray(Ee)?P(x,k,Q,K,fe,Ee):j(x,k,Q,K,fe,Ee);break;case 4:j(x,k,Q,y[L++],y[L++],y[L++],y[L++]);break;default:throw Error("unexpected number of binary field arguments: "+K)}}return x}var Ks=Symbol();function Ea(y){var x=y[Ks];if(!x){var k=Lu(y);x=function(N,P){return Xo(N,P,k)},y[Ks]=x}return x}function Mu(y,x){var k=y[Ks];return k||(k=function(N,P){return an(N,P,x)},y[Ks]=k),k}var Pu=Symbol();function Bu(y,x){y.push(x)}function Nf(y,x,k){y.push(x,k.P)}function qo(y,x,k,N,P){var j=Ea(P),L=k.P;y.push(x,function(K,Q,fe){return L(K,Q,fe,N,j)})}function Af(y,x,k,N,P,j){var L=Mu(N,j),K=k.P;y.push(x,function(Q,fe,Ee){return K(Q,fe,Ee,N,L)})}function Lu(y){var x=y[Pu];return x||Fu(y,y[Pu]=[],Bu,Nf,qo,Af)}var Wu=Symbol();function Ta(y,x){y[0]=x}function Ko(y,x,k,N){var P=k.O;y[x]=N?function(j,L,K){return P(j,L,K,N)}:P}function Rf(y,x,k,N,P,j){var L=k.O,K=Ou(P);y[x]=function(Q,fe,Ee){return L(Q,fe,Ee,N,K,j)}}function $f(y,x,k,N,P,j,L){var K=k.O,Q=us(N,P,j);y[x]=function(fe,Ee,Be){return K(fe,Ee,Be,N,Q,L)}}function zu(y){var x=y[Wu];return x||Fu(y,y[Wu]={},Ta,Ko,Rf,$f)}function Vu(y,x,k){for(;Zt(x)&&x.h!=4;){var N=x.i,P=k[N];if(!P){var j=k[0];j&&(j=j[N])&&(P=k[N]=Cf(j))}if((!P||!P(x,y,N))&&(P=x,N=y,j=P.j,rn(P),!P.W)){var L=P.g.h;P=P.g.g,P=j===P?we||(we=new Uint8Array(0)):$e?L.slice(j,P):new Uint8Array(L.subarray(j,P)),(j=N.ba)?j.push(P):N.ba=[P]}}return y}function Xs(y,x,k){if(jt.length){var N=jt.pop();y&&(Ye(N.g,y),N.i=-1,N.h=-1),y=N}else y=new Mt(y);try{return Vu(new x,y,zu(k))}finally{x=y.g,x.h=null,x.j=0,x.i=0,x.g=0,x.v=!1,y.i=-1,y.h=-1,100>jt.length&&jt.push(y)}}function Xo(y,x,k){for(var N=k.length,P=N%2==1,j=P?1:0;j<N;j+=2)(0,k[j+1])(x,y,k[j]);an(y,x,P?k[0]:void 0)}function Yo(y,x){var k=new pn;Xo(y,k,Lu(x)),kn(k,k.g.end()),y=new Uint8Array(k.h),x=k.i;for(var N=x.length,P=0,j=0;j<N;j++){var L=x[j];y.set(L,P),P+=L.length}return k.i=[y],y}function cs(y,x){return{O:y,P:x}}var Zn=cs(function(y,x,k){if(y.h!==5)return!1;y=y.g;var N=y.h[y.g],P=y.h[y.g+1],j=y.h[y.g+2],L=y.h[y.g+3];return y.g+=4,ct(y),P=(N<<0|P<<8|j<<16|L<<24)>>>0,y=2*(P>>31)+1,N=P>>>23&255,P&=8388607,Et(x,k,N==255?P?NaN:1/0*y:N==0?y*Math.pow(2,-149)*P:y*Math.pow(2,N-150)*(P+Math.pow(2,23))),!0},function(y,x,k){if(x=Tn(x,k),x!=null){St(y.g,8*k+5),y=y.g;var N=x;N=(k=0>N?1:0)?-N:N,N===0?0<1/N?Oe=We=0:(We=0,Oe=2147483648):isNaN(N)?(We=0,Oe=2147483647):34028234663852886e22<N?(We=0,Oe=(k<<31|2139095040)>>>0):11754943508222875e-54>N?(N=Math.round(N/Math.pow(2,-149)),We=0,Oe=(k<<31|N)>>>0):(x=Math.floor(Math.log(N)/Math.LN2),N*=Math.pow(2,-x),N=Math.round(8388608*N),16777216<=N&&++x,We=0,Oe=(k<<31|x+127<<23|N&8388607)>>>0),k=Oe,y.g.push(k>>>0&255),y.g.push(k>>>8&255),y.g.push(k>>>16&255),y.g.push(k>>>24&255)}}),Hu=cs(function(y,x,k){if(y.h!==0)return!1;for(var N=y.g,P=128,j=0,L=y=0;4>L&&128<=P;L++)P=N.h[N.g++],ct(N),j|=(P&127)<<7*L;if(128<=P&&(P=N.h[N.g++],ct(N),j|=(P&127)<<28,y|=(P&127)>>4),128<=P)for(L=0;5>L&&128<=P;L++)P=N.h[N.g++],ct(N),y|=(P&127)<<7*L+3;if(128>P)N=j>>>0,P=y>>>0,(y=P&2147483648)&&(N=~N+1>>>0,P=~P>>>0,N==0&&(P=P+1>>>0)),N=4294967296*P+(N>>>0);else throw Ne();return Et(x,k,y?-N:N),!0},function(y,x,k){if(x=Tn(x,k),x!=null&&x!=null){St(y.g,8*k),y=y.g;var N=x;for(k=0>N,N=Math.abs(N),x=N>>>0,N=Math.floor((N-x)/4294967296),N>>>=0,k&&(N=~N>>>0,x=(~x>>>0)+1,4294967295<x&&(x=0,N++,4294967295<N&&(N=0))),Oe=x,We=N,k=Oe,x=We;0<x||127<k;)y.g.push(k&127|128),k=(k>>>7|x<<25)>>>0,x>>>=7;y.g.push(k)}}),Df=cs(function(y,x,k){return y.h!==0?!1:(Et(x,k,at(y.g)),!0)},function(y,x,k){if(x=Tn(x,k),x!=null&&x!=null)if(St(y.g,8*k),y=y.g,k=x,0<=k)St(y,k);else{for(x=0;9>x;x++)y.g.push(k&127|128),k>>=7;y.g.push(1)}}),ju=cs(function(y,x,k){if(y.h!==2)return!1;var N=at(y.g)>>>0;y=y.g;var P=y.g;y.g+=N,ct(y),y=y.h;var j;if(q)(j=Z)||(j=Z=new TextDecoder("utf-8",{fatal:!0})),j=j.decode(y.subarray(P,P+N));else{N=P+N;for(var L=[],K=null,Q,fe,Ee;P<N;)Q=y[P++],128>Q?L.push(Q):224>Q?P>=N?H():(fe=y[P++],194>Q||(fe&192)!==128?(P--,H()):L.push((Q&31)<<6|fe&63)):240>Q?P>=N-1?H():(fe=y[P++],(fe&192)!==128||Q===224&&160>fe||Q===237&&160<=fe||((j=y[P++])&192)!==128?(P--,H()):L.push((Q&15)<<12|(fe&63)<<6|j&63)):244>=Q?P>=N-2?H():(fe=y[P++],(fe&192)!==128||(Q<<28)+(fe-144)>>30||((j=y[P++])&192)!==128||((Ee=y[P++])&192)!==128?(P--,H()):(Q=(Q&7)<<18|(fe&63)<<12|(j&63)<<6|Ee&63,Q-=65536,L.push((Q>>10&1023)+55296,(Q&1023)+56320))):H(),8192<=L.length&&(K=U(K,L),L.length=0);j=U(K,L)}return Et(x,k,j),!0},function(y,x,k){if(x=Tn(x,k),x!=null){var N=!1;if(N=N===void 0?!1:N,se){if(N&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(x))throw Error("Found an unpaired surrogate");x=(X||(X=new TextEncoder)).encode(x)}else{for(var P=0,j=new Uint8Array(3*x.length),L=0;L<x.length;L++){var K=x.charCodeAt(L);if(128>K)j[P++]=K;else{if(2048>K)j[P++]=K>>6|192;else{if(55296<=K&&57343>=K){if(56319>=K&&L<x.length){var Q=x.charCodeAt(++L);if(56320<=Q&&57343>=Q){K=1024*(K-55296)+Q-56320+65536,j[P++]=K>>18|240,j[P++]=K>>12&63|128,j[P++]=K>>6&63|128,j[P++]=K&63|128;continue}else L--}if(N)throw Error("Found an unpaired surrogate");K=65533}j[P++]=K>>12|224,j[P++]=K>>6&63|128}j[P++]=K&63|128}}x=j.subarray(0,P)}St(y.g,8*k+2),St(y.g,x.length),kn(y,y.g.end()),kn(y,x)}}),Uu=cs(function(y,x,k,N,P){if(y.h!==2)return!1;x=le(x,k,N),k=y.g.i,N=at(y.g)>>>0;var j=y.g.g+N,L=j-k;if(0>=L&&(y.g.i=j,P(x,y),L=j-y.g.g),L)throw Error("Message parsing ended unexpectedly. Expected to read "+(N+" bytes, instead read "+(N-L)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return y.g.g=j,y.g.i=k,!0},function(y,x,k,N,P){if(x=J(x,N,k),x!=null)for(N=0;N<x.length;N++){var j=y;St(j.g,8*k+2);var L=j.g.end();kn(j,L),L.push(j.h),j=L,P(x[N],y),L=y;var K=j.pop();for(K=L.h+L.g.length()-K;127<K;)j.push(K&127|128),K>>>=7,L.h++;j.push(K),L.h++}});function Jn(){Ur.apply(this,arguments)}if(m(Jn,Ur),hr){var Zo={};Object.defineProperties(Jn,(Zo[Symbol.hasInstance]=oa(Object[Symbol.hasInstance]),Zo))}function Gr(y){Jn.call(this,y)}m(Gr,Jn);function Jo(){return[1,Df,2,Zn,3,ju,4,ju]}function Ys(y){Jn.call(this,y,-1,Qo)}m(Ys,Jn),Ys.prototype.addClassification=function(y,x){return le(this,1,Gr,y,x),this};function Gu(){return[1,Uu,Gr,Jo]}var Qo=[1];function ls(y){Jn.call(this,y)}m(ls,Jn);function ei(){return[1,Zn,2,Zn,3,Zn,4,Zn,5,Zn]}function Zs(y){Jn.call(this,y,-1,Qs)}m(Zs,Jn);function Js(){return[1,Uu,ls,ei]}var Qs=[1];function Ca(y){Jn.call(this,y)}m(Ca,Jn);function ti(){return[1,Zn,2,Zn,3,Zn,4,Zn,5,Zn,6,Hu]}var ds=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],fs=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],qu=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],O=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],G=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],de=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],De=[].concat(c(ds),c(fs),c(qu),c(O),c(G),c(de));function Me(y,x,k){if(k=y.createShader(k===0?y.VERTEX_SHADER:y.FRAGMENT_SHADER),y.shaderSource(k,x),y.compileShader(k),!y.getShaderParameter(k,y.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+y.getShaderInfoLog(k));return k}function ze(y){return J(y,Gr,1).map(function(x){return{index:Ce(x,1),ga:Pn(x,2),label:Tn(x,3)!=null?ve(x,3):void 0,displayName:Tn(x,4)!=null?ve(x,4):void 0}})}function Se(y){return{x:Pn(y,1),y:Pn(y,2),z:Pn(y,3),visibility:Tn(y,4)!=null?Pn(y,4):void 0}}function ke(y,x){this.h=y,this.g=x,this.l=0}function Tt(y,x,k){return Ln(y,x),typeof y.g.canvas.transferToImageBitmap=="function"?Promise.resolve(y.g.canvas.transferToImageBitmap()):k?Promise.resolve(y.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(y.g.canvas):(y.i===void 0&&(y.i=document.createElement("canvas")),new Promise(function(N){y.i.height=y.g.canvas.height,y.i.width=y.g.canvas.width,y.i.getContext("2d",{}).drawImage(y.g.canvas,0,0,y.g.canvas.width,y.g.canvas.height),N(y.i)}))}function Ln(y,x){var k=y.g;if(y.o===void 0){var N=Me(k,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),P=Me(k,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),j=k.createProgram();if(k.attachShader(j,N),k.attachShader(j,P),k.linkProgram(j),!k.getProgramParameter(j,k.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+k.getProgramInfoLog(j));N=y.o=j,k.useProgram(N),P=k.getUniformLocation(N,"sampler0"),y.j={K:k.getAttribLocation(N,"aVertex"),J:k.getAttribLocation(N,"aTex"),ma:P},y.u=k.createBuffer(),k.bindBuffer(k.ARRAY_BUFFER,y.u),k.enableVertexAttribArray(y.j.K),k.vertexAttribPointer(y.j.K,2,k.FLOAT,!1,0,0),k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),k.STATIC_DRAW),k.bindBuffer(k.ARRAY_BUFFER,null),y.s=k.createBuffer(),k.bindBuffer(k.ARRAY_BUFFER,y.s),k.enableVertexAttribArray(y.j.J),k.vertexAttribPointer(y.j.J,2,k.FLOAT,!1,0,0),k.bufferData(k.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),k.STATIC_DRAW),k.bindBuffer(k.ARRAY_BUFFER,null),k.uniform1i(P,0)}N=y.j,k.useProgram(y.o),k.canvas.width=x.width,k.canvas.height=x.height,k.viewport(0,0,x.width,x.height),k.activeTexture(k.TEXTURE0),y.h.bindTexture2d(x.glName),k.enableVertexAttribArray(N.K),k.bindBuffer(k.ARRAY_BUFFER,y.u),k.vertexAttribPointer(N.K,2,k.FLOAT,!1,0,0),k.enableVertexAttribArray(N.J),k.bindBuffer(k.ARRAY_BUFFER,y.s),k.vertexAttribPointer(N.J,2,k.FLOAT,!1,0,0),k.bindFramebuffer(k.DRAW_FRAMEBUFFER?k.DRAW_FRAMEBUFFER:k.FRAMEBUFFER,null),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),k.colorMask(!0,!0,!0,!0),k.drawArrays(k.TRIANGLE_FAN,0,4),k.disableVertexAttribArray(N.K),k.disableVertexAttribArray(N.J),k.bindBuffer(k.ARRAY_BUFFER,null),y.h.bindTexture2d(0)}function Tr(y){this.g=y}var Ku=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ni(y,x){return x+y}function Xu(y,x){window[y]=x}function Cn(y){var x=document.createElement("script");return x.setAttribute("src",y),x.setAttribute("crossorigin","anonymous"),new Promise(function(k){x.addEventListener("load",function(){k()},!1),x.addEventListener("error",function(){k()},!1),document.body.appendChild(x)})}function Na(){return D(function(y){switch(y.g){case 1:return y.o=2,w(y,WebAssembly.instantiate(Ku),4);case 4:y.g=3,y.o=0;break;case 2:return y.o=0,y.j=null,y.return(!1);case 3:return y.return(!0)}})}function eo(y){if(this.g=y,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=y&&y.locateFile||ni,typeof window=="object")var x=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")x=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=x,y.options){x=i(Object.keys(y.options));for(var k=x.next();!k.done;k=x.next()){k=k.value;var N=y.options[k].default;N!==void 0&&(this.j[k]=typeof N=="function"?N():N)}}}t=eo.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Y3(y){var x,k,N,P,j,L,K,Q,fe,Ee,Be;return D(function(Le){switch(Le.g){case 1:return y.Z?(x=y.g.files===void 0?[]:typeof y.g.files=="function"?y.g.files(y.j):y.g.files,w(Le,Na(),2)):Le.return();case 2:if(k=Le.h,typeof window=="object")return Xu("createMediapipeSolutionsWasm",{locateFile:y.locateFile}),Xu("createMediapipeSolutionsPackedAssets",{locateFile:y.locateFile}),L=x.filter(function(Te){return Te.data!==void 0}),K=x.filter(function(Te){return Te.data===void 0}),Q=Promise.all(L.map(function(Te){var Ge=Yu(y,Te.url);if(Te.path!==void 0){var ft=Te.path;Ge=Ge.then(function(Pt){return y.overrideFile(ft,Pt),Promise.resolve(Pt)})}return Ge})),fe=Promise.all(K.map(function(Te){return Te.simd===void 0||Te.simd&&k||!Te.simd&&!k?Cn(y.locateFile(Te.url,y.$)):Promise.resolve()})).then(function(){var Te,Ge,ft;return D(function(Pt){if(Pt.g==1)return Te=window.createMediapipeSolutionsWasm,Ge=window.createMediapipeSolutionsPackedAssets,ft=y,w(Pt,Te(Ge),2);ft.h=Pt.h,Pt.g=0})}),Ee=function(){return D(function(Te){return y.g.graph&&y.g.graph.url?Te=w(Te,Yu(y,y.g.graph.url),0):(Te.g=0,Te=void 0),Te})}(),w(Le,Promise.all([fe,Q,Ee]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return N=x.filter(function(Te){return Te.simd===void 0||Te.simd&&k||!Te.simd&&!k}).map(function(Te){return y.locateFile(Te.url,y.$)}),importScripts.apply(null,c(N)),P=y,w(Le,createMediapipeSolutionsWasm(Module),6);case 6:P.h=Le.h,y.l=new OffscreenCanvas(1,1),y.h.canvas=y.l,j=y.h.GL.createContext(y.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),y.h.GL.makeContextCurrent(j),Le.g=4;break;case 7:if(y.l=document.createElement("canvas"),Be=y.l.getContext("webgl2",{}),!Be&&(Be=y.l.getContext("webgl",{}),!Be))return alert("Failed to create WebGL canvas context when passing video frame."),Le.return();y.G=Be,y.h.canvas=y.l,y.h.createContext(y.l,!0,!0,{});case 4:y.i=new y.h.SolutionWasm,y.Z=!1,Le.g=0}})}function Z3(y){var x,k,N,P,j,L,K,Q;return D(function(fe){if(fe.g==1){if(y.g.graph&&y.g.graph.url&&y.Y===y.g.graph.url)return fe.return();if(y.s=!0,!y.g.graph||!y.g.graph.url){fe.g=2;return}return y.Y=y.g.graph.url,w(fe,Yu(y,y.g.graph.url),3)}for(fe.g!=2&&(x=fe.h,y.i.loadGraph(x)),k=i(Object.keys(y.C)),N=k.next();!N.done;N=k.next())P=N.value,y.i.overrideFile(P,y.C[P]);if(y.C={},y.g.listeners)for(j=i(y.g.listeners),L=j.next();!L.done;L=j.next())K=L.value,tI(y,K);Q=y.j,y.j={},y.setOptions(Q),fe.g=0})}t.reset=function(){var y=this;return D(function(x){y.i&&(y.i.reset(),y.o={},y.u={}),x.g=0})},t.setOptions=function(y,x){var k=this;if(x=x||this.g.options){for(var N=[],P=[],j={},L=i(Object.keys(y)),K=L.next();!K.done;j={R:j.R,S:j.S},K=L.next()){var Q=K.value;Q in this.j&&this.j[Q]===y[Q]||(this.j[Q]=y[Q],K=x[Q],K!==void 0&&(K.onChange&&(j.R=K.onChange,j.S=y[Q],N.push(function(fe){return function(){var Ee;return D(function(Be){if(Be.g==1)return w(Be,fe.R(fe.S),2);Ee=Be.h,Ee===!0&&(k.s=!0),Be.g=0})}}(j))),K.graphOptionXref&&(Q={valueNumber:K.type===1?y[Q]:0,valueBoolean:K.type===0?y[Q]:!1,valueString:K.type===2?y[Q]:""},K=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),K.graphOptionXref),Q),P.push(K))))}(N.length!==0||P.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(P),this.A=(this.A===void 0?[]:this.A).concat(N))}};function J3(y){var x,k,N,P,j,L,K;return D(function(Q){switch(Q.g){case 1:if(!y.s)return Q.return();if(!y.A){Q.g=2;break}x=i(y.A),k=x.next();case 3:if(k.done){Q.g=5;break}return N=k.value,w(Q,N(),4);case 4:k=x.next(),Q.g=3;break;case 5:y.A=void 0;case 2:if(y.B){for(P=new y.h.GraphOptionChangeRequestList,j=i(y.B),L=j.next();!L.done;L=j.next())K=L.value,P.push_back(K);y.i.changeOptions(P),P.delete(),y.B=void 0}y.s=!1,Q.g=0}})}t.initialize=function(){var y=this;return D(function(x){return x.g==1?w(x,Y3(y),2):x.g!=3?w(x,Z3(y),3):w(x,J3(y),0)})};function Yu(y,x){var k,N;return D(function(P){return x in y.H?P.return(y.H[x]):(k=y.locateFile(x,""),N=fetch(k).then(function(j){return j.arrayBuffer()}),y.H[x]=N,P.return(N))})}t.overrideFile=function(y,x){this.i?this.i.overrideFile(y,x):this.C[y]=x},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(y,x){var k=this,N,P,j,L,K,Q,fe,Ee,Be;return D(function(Le){switch(Le.g){case 1:return k.g.inputs?(N=1e3*(x??performance.now()),w(Le,k.D,2)):Le.return();case 2:return w(Le,k.initialize(),3);case 3:for(P=new k.h.PacketDataList,j=i(Object.keys(y)),L=j.next();!L.done;L=j.next())if(K=L.value,Q=k.g.inputs[K]){e:{var Te=y[K];switch(Q.type){case"video":var Ge=k.o[Q.stream];if(Ge||(Ge=new ke(k.h,k.G),k.o[Q.stream]=Ge),Ge.l===0&&(Ge.l=Ge.h.createTexture()),typeof HTMLVideoElement<"u"&&Te instanceof HTMLVideoElement)var ft=Te.videoWidth,Pt=Te.videoHeight;else typeof HTMLImageElement<"u"&&Te instanceof HTMLImageElement?(ft=Te.naturalWidth,Pt=Te.naturalHeight):(ft=Te.width,Pt=Te.height);Pt={glName:Ge.l,width:ft,height:Pt},ft=Ge.g,ft.canvas.width=Pt.width,ft.canvas.height=Pt.height,ft.activeTexture(ft.TEXTURE0),Ge.h.bindTexture2d(Ge.l),ft.texImage2D(ft.TEXTURE_2D,0,ft.RGBA,ft.RGBA,ft.UNSIGNED_BYTE,Te),Ge.h.bindTexture2d(0),Ge=Pt;break e;case"detections":for(Ge=k.o[Q.stream],Ge||(Ge=new Tr(k.h),k.o[Q.stream]=Ge),Ge.data||(Ge.data=new Ge.g.DetectionListData),Ge.data.reset(Te.length),Pt=0;Pt<Te.length;++Pt){ft=Te[Pt];var $t=Ge.data,wn=$t.setBoundingBox,mr=Pt,Qn=ft.boundingBox,ht=new Ca;if(Et(ht,1,Qn.xCenter),Et(ht,2,Qn.yCenter),Et(ht,3,Qn.height),Et(ht,4,Qn.width),Et(ht,5,Qn.rotation),Et(ht,6,Qn.rectId),Qn=Yo(ht,ti),wn.call($t,mr,Qn),ft.landmarks)for($t=0;$t<ft.landmarks.length;++$t){ht=ft.landmarks[$t];var ln=!!ht.visibility;wn=Ge.data,mr=wn.addNormalizedLandmark,Qn=Pt,ht=Object.assign(Object.assign({},ht),{visibility:ln?ht.visibility:0}),ln=new ls,Et(ln,1,ht.x),Et(ln,2,ht.y),Et(ln,3,ht.z),ht.visibility&&Et(ln,4,ht.visibility),ht=Yo(ln,ei),mr.call(wn,Qn,ht)}if(ft.V)for($t=0;$t<ft.V.length;++$t)wn=Ge.data,mr=wn.addClassification,Qn=Pt,ht=ft.V[$t],ln=new Gr,Et(ln,2,ht.ga),ht.index&&Et(ln,1,ht.index),ht.label&&Et(ln,3,ht.label),ht.displayName&&Et(ln,4,ht.displayName),ht=Yo(ln,Jo),mr.call(wn,Qn,ht)}Ge=Ge.data;break e;default:Ge={}}}switch(fe=Ge,Ee=Q.stream,Q.type){case"video":P.pushTexture2d(Object.assign(Object.assign({},fe),{stream:Ee,timestamp:N}));break;case"detections":Be=fe,Be.stream=Ee,Be.timestamp=N,P.pushDetectionList(Be);break;default:throw Error("Unknown input config type: '"+Q.type+"'")}}return k.i.send(P),w(Le,k.D,4);case 4:P.delete(),Le.g=0}})};function Q3(y,x,k){var N,P,j,L,K,Q,fe,Ee,Be,Le,Te,Ge,ft,Pt;return D(function($t){switch($t.g){case 1:if(!k)return $t.return(x);for(N={},P=0,j=i(Object.keys(k)),L=j.next();!L.done;L=j.next())K=L.value,Q=k[K],typeof Q!="string"&&Q.type==="texture"&&x[Q.stream]!==void 0&&++P;1<P&&(y.I=!1),fe=i(Object.keys(k)),L=fe.next();case 2:if(L.done){$t.g=4;break}if(Ee=L.value,Be=k[Ee],typeof Be=="string")return ft=N,Pt=Ee,w($t,eI(y,Ee,x[Be]),14);if(Le=x[Be.stream],Be.type==="detection_list"){if(Le){for(var wn=Le.getRectList(),mr=Le.getLandmarksList(),Qn=Le.getClassificationsList(),ht=[],ln=0;ln<wn.size();++ln){var Aa=Xs(wn.get(ln),Ca,ti);Aa={boundingBox:{xCenter:Pn(Aa,1),yCenter:Pn(Aa,2),height:Pn(Aa,3),width:Pn(Aa,4),rotation:Pn(Aa,5,0),rectId:Ce(Aa,6)},landmarks:J(Xs(mr.get(ln),Zs,Js),ls,1).map(Se),V:ze(Xs(Qn.get(ln),Ys,Gu))},ht.push(Aa)}wn=ht}else wn=[];N[Ee]=wn,$t.g=7;break}if(Be.type==="proto_list"){if(Le){for(wn=Array(Le.size()),mr=0;mr<Le.size();mr++)wn[mr]=Le.get(mr);Le.delete()}else wn=[];N[Ee]=wn,$t.g=7;break}if(Le===void 0){$t.g=3;break}if(Be.type==="float_list"){N[Ee]=Le,$t.g=7;break}if(Be.type==="proto"){N[Ee]=Le,$t.g=7;break}if(Be.type!=="texture")throw Error("Unknown output config type: '"+Be.type+"'");return Te=y.u[Ee],Te||(Te=new ke(y.h,y.G),y.u[Ee]=Te),w($t,Tt(Te,Le,y.I),13);case 13:Ge=$t.h,N[Ee]=Ge;case 7:Be.transform&&N[Ee]&&(N[Ee]=Be.transform(N[Ee])),$t.g=3;break;case 14:ft[Pt]=$t.h;case 3:L=fe.next(),$t.g=2;break;case 4:return $t.return(N)}})}function eI(y,x,k){var N;return D(function(P){return typeof k=="number"||k instanceof Uint8Array||k instanceof y.h.Uint8BlobList?P.return(k):k instanceof y.h.Texture2dDataOut?(N=y.u[x],N||(N=new ke(y.h,y.G),y.u[x]=N),P.return(Tt(N,k,y.I))):P.return(void 0)})}function tI(y,x){for(var k=x.name||"$",N=[].concat(c(x.wants)),P=new y.h.StringList,j=i(x.wants),L=j.next();!L.done;L=j.next())P.push_back(L.value);j=y.h.PacketListener.implement({onResults:function(K){for(var Q={},fe=0;fe<x.wants.length;++fe)Q[N[fe]]=K.get(fe);var Ee=y.listeners[k];Ee&&(y.D=Q3(y,Q,x.outs).then(function(Be){Be=Ee(Be);for(var Le=0;Le<x.wants.length;++Le){var Te=Q[N[Le]];typeof Te=="object"&&Te.hasOwnProperty&&Te.hasOwnProperty("delete")&&Te.delete()}Be&&(y.D=Be)}))}}),y.i.attachMultiListener(P,j),P.delete()}t.onResults=function(y,x){this.listeners[x||"$"]=y},V("Solution",eo),V("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function qg(y){var x=this;y=y||{};var k={url:"face_detection_short.binarypb"},N={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new eo({locateFile:y.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:k,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(P){var j,L,K,Q,fe,Ee;return D(function(Be){switch(Be.g){case 1:j=P==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],L=i(j),K=L.next();case 2:if(K.done){Be.g=4;break}return Q=K.value,fe="third_party/mediapipe/modules/face_detection/"+Q,w(Be,Yu(x.g,Q),5);case 5:Ee=Be.h,x.g.overrideFile(fe,Ee),K=L.next(),Be.g=2;break;case 4:return k.url=P==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",N.graphOptionXref.calculatorName=P==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Be.return(!0)}})}},minDetectionConfidence:N}})}t=qg.prototype,t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(y){this.g.onResults(y)},t.initialize=function(){var y=this;return D(function(x){return w(x,y.g.initialize(),0)})},t.reset=function(){this.g.reset()},t.send=function(y){var x=this;return D(function(k){return w(k,x.g.send(y),0)})},t.setOptions=function(y){this.g.setOptions(y)},V("FaceDetection",qg),V("FACEDETECTION_LIPS",ds),V("FACEDETECTION_LEFT_EYE",fs),V("FACEDETECTION_LEFT_EYEBROW",qu),V("FACEDETECTION_RIGHT_EYE",O),V("FACEDETECTION_RIGHT_EYEBROW",G),V("FACEDETECTION_FACE_OVAL",de),V("FACEDETECTION_CONTOURS",De),V("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),V("VERSION","0.4.1646425229")}).call($n);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $M=Xe();$M.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var yr;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(yr||(yr={}));var ov;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(ov||(ov={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DM={};function c2(t){return DM[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _(t,e,n,r,a){const s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){const i=s.inputIndexStart,c=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?i+1:s.inputIndexEnd,l=i<0?e.inputNames.length+i:i;if(s.type==="tensor")return gn(e.inputNames[l],n,r,a);if(s.type==="tensors"){const f=e.inputs.slice(i,c);return e.inputNames.slice(i,c).filter((h,m)=>{var g;return((g=f[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(h=>gn(h,n,r,a))}const u=gn(e.inputNames[l],n,r,a),d=u.dataSync();return s.type==="number"?d[0]:xr(u.shape,d)}const o=e.attrParams[t];return o&&o.value}function gn(t,e,n,r){const[a,s]=tr(t,n);if(r!=null){const i=r.getHashTableHandleByName(a);if(i!=null)return i}const o=n.currentContextIds.find(i=>!!e[Hc(a,i)]);return o!==void 0?e[Hc(a,o)][s]:void 0}function iv(t,e,n){return e[Hc(t,n.currentContextId)]}function ca(t,e){const[n,r,a]=tr(t,e);return[Hc(n,e&&e.currentContextId),r,a]}function Hc(t,e){return e?`${t}-${e}`:t}function tr(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const s=e.parseNodeNameCache.get(t);if(s!=null)return s}const r=t.split(":");let a;if(r.length===1)a=[t,0,void 0];else{const s=r[0],o=r.length===3?r[1]:void 0,i=Number(r[r.length-1]);a=[s,i,o]}return n&&e.parseNodeNameCache.set(t,a),a}function vc(t,e,n){let r=_("pad",t,e,n);if(r==="explicit"){r=_("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)a[s][0]=r[s*2],a[s][1]=r[s*2+1];return a}return r}function la(t){return t.kept?t:La(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OM=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],FM=Object.freeze(Object.defineProperty({__proto__:null,json:OM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MM=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],PM=Object.freeze(Object.defineProperty({__proto__:null,json:MM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BM=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],LM=Object.freeze(Object.defineProperty({__proto__:null,json:BM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WM=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],zM=Object.freeze(Object.defineProperty({__proto__:null,json:WM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VM=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],HM=Object.freeze(Object.defineProperty({__proto__:null,json:VM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jM=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],UM=Object.freeze(Object.defineProperty({__proto__:null,json:jM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GM=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],qM=Object.freeze(Object.defineProperty({__proto__:null,json:GM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KM=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],XM=Object.freeze(Object.defineProperty({__proto__:null,json:KM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YM=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],ZM=Object.freeze(Object.defineProperty({__proto__:null,json:YM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JM=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],QM=Object.freeze(Object.defineProperty({__proto__:null,json:JM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],t6=Object.freeze(Object.defineProperty({__proto__:null,json:e6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],r6=Object.freeze(Object.defineProperty({__proto__:null,json:n6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],s6=Object.freeze(Object.defineProperty({__proto__:null,json:a6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],i6=Object.freeze(Object.defineProperty({__proto__:null,json:o6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],c6=Object.freeze(Object.defineProperty({__proto__:null,json:u6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],d6=Object.freeze(Object.defineProperty({__proto__:null,json:l6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],p6=Object.freeze(Object.defineProperty({__proto__:null,json:f6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h6=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],m6=Object.freeze(Object.defineProperty({__proto__:null,json:h6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],y6=Object.freeze(Object.defineProperty({__proto__:null,json:g6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uv{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[FM,PM,LM,zM,HM,UM,qM,XM,ZM,QM,t6,r6,s6,i6,c6,d6,p6,m6,y6],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],s=[],o=[],i=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?a.push(m[g.name]):g.op==="Const"?s.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let c=[];const l=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(i);f.forEach(m=>{const g=i[m];g.inputNames.forEach((v,b)=>{const[w,,S]=ca(v),I=i[w];if(I.outputs!=null){const E=I.outputs.indexOf(S);if(E!==-1){const T=`${w}:${E}`;g.inputNames[b]=T}}g.inputs.push(I),I.children.push(g)})}),Object.keys(d).length===0?f.forEach(m=>{const g=i[m];g.children.length===0&&l.push(g)}):Object.keys(d).forEach(m=>{const[g]=ca(m),v=i[g];v!=null&&(v.signatureKey=d[m],l.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{const[g]=ca(m),v=i[g];v&&(v.signatureKey=u[m],c.push(v))}):c=a;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const h={nodes:i,inputs:c,outputs:l,weights:s,placeholders:a,signature:n,functions:p};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=c2(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,s)=>(a[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,s)=>{const o=s.type;let i;switch(s.type){case"string":i=nh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=nh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":i=ch(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=ch(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":i=ah(e.attr,s.tfName,s.defaultValue||0),i===void 0&&s.tfDeprecatedName&&(i=ah(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":i=uh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=uh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":i=rh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=rh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":i=dh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=dh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":i=ih(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=ih(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":i=lh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=lh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":i=sh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=sh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":i=oh(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=oh(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":i=cv(e.attr,s.tfName,s.defaultValue),i===void 0&&s.tfDeprecatedName&&(i=cv(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return a[s.name]={value:i,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let s={};n!=null&&(s=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&a.push(d[f.name]),d),{}));const o=[],i=[];e.signature.inputArg.forEach(d=>{const[f]=ca(d.name),p={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:fg(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,o.push(p),s[f]=p}),Object.keys(s).forEach(d=>{const f=s[d];f.inputNames.forEach((p,h)=>{const[m,,g]=ca(p),v=s[m];if(v.outputs!=null){const b=v.outputs.indexOf(g);if(b!==-1){const w=`${m}:${b}`;f.inputNames[h]=w}}f.inputs.push(v),v.children.push(f)})});const l=e.ret;e.signature.outputArg.forEach(d=>{const[f,p]=ca(l[d.name]),h=s[f];h!=null&&(h.defaultOutput=p,i.push(h))});const u=this.mapArgsToSignature(e);return{nodes:s,inputs:o,outputs:i,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function v6(t){const e=Xe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function l2(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):v6(t);return e?n:n.toLowerCase()}function nh(t,e,n,r=!1){const a=t[e];return a!=null?l2(a.s,r):n}function rh(t,e,n){const r=t[e];return r?r.b:n}function ah(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function fg(t){switch(typeof t=="string"&&(t=yr[t]),t){case yr.DT_FLOAT:case yr.DT_HALF:return"float32";case yr.DT_INT32:case yr.DT_INT64:case yr.DT_INT8:case yr.DT_UINT8:return"int32";case yr.DT_BOOL:return"bool";case yr.DT_DOUBLE:return"float32";case yr.DT_STRING:return"string";default:return null}}function cv(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function sh(t,e,n){const r=t[e];return r&&r.type?fg(r.type):n}function oh(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>fg(a)):n}function d2(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function ih(t,e,n){const r=t[e];return r&&r.shape?d2(r.shape):n}function uh(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function ch(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(s=>l2(s,r)):n}function lh(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>d2(a)):n}function dh(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b6{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,s)=>(a[s]=this.getAttr(s),a),{}))}getInput(e){return gn(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return gn(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return ah(this.node.rawAttrs,e,n);if(r.s!=null)return nh(this.node.rawAttrs,e,n);if(r.b!=null)return rh(this.node.rawAttrs,e,n);if(r.shape!=null)return ih(this.node.rawAttrs,e,n);if(r.type!=null)return sh(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return uh(this.node.rawAttrs,e,n);if(r.list.s!=null)return ch(this.node.rawAttrs,e,n);if(r.list.shape!=null)return lh(this.node.rawAttrs,e,n);if(r.list.b!=null)return dh(this.node.rawAttrs,e,n);if(r.list.type!=null)return oh(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:C1,abs:cr,acos:DC,acosh:FC,add:Ae,addN:PC,all:LC,any:zC,argMax:HC,argMin:UC,asin:qC,asinh:XC,atan:ZC,atan2:QC,atanh:tN,avgPool:j1,avgPool3d:cN,basicLSTMCell:gN,batchNorm:of,batchNorm2d:SN,batchNorm3d:xN,batchNorm4d:kN,batchToSpaceND:U1,bincount:G1,bitwiseAnd:CN,booleanMaskAsync:hD,broadcastArgs:AN,broadcastTo:Li,buffer:Qe,cast:zt,ceil:DN,clipByValue:q1,clone:La,complex:Va,concat:yn,concat1d:MN,concat2d:BN,concat3d:WN,concat4d:VN,conv1d:UN,conv2d:uf,conv2dTranspose:KN,conv3d:YN,conv3dTranspose:eA,cos:nA,cosh:aA,cosineWindow:ag,cumprod:oA,cumsum:uA,denseBincount:lA,depthToSpace:fA,depthwiseConv2d:Um,diag:mA,dilation2d:yA,div:Ze,divNoNan:xA,dot:kA,dropout:TD,einsum:fo,elu:Y1,enclosingPowerOfTwo:kw,ensureShape:NA,equal:X1,erf:RA,euclideanNorm:zA,exp:ya,expandDims:Kr,expm1:UA,eye:Q1,fft:ng,fill:Cu,floor:ew,floorDiv:V1,fused:VD,gather:tw,gatherND:ID,greater:df,greaterEqual:nw,ifft:zc,imag:ff,image:mf,inTopKAsync:ND,irfft:vw,isFinite:e4,isInf:n4,isNaN:a4,leakyRelu:rw,less:Jp,lessEqual:Gm,linalg:SF,linspace:u4,localResponseNormalization:l4,log:su,log1p:aw,logSigmoid:y4,logSoftmax:w4,logSumExp:ow,logicalAnd:Bc,logicalNot:iw,logicalOr:uw,logicalXor:E4,losses:_F,lowerBound:C4,matMul:wt,max:wo,maxPool:cw,maxPool3d:R4,maxPoolWithArgmax:D4,maximum:lw,mean:Lc,meshgrid:M4,min:Zp,minimum:Wc,mirrorPad:L4,mod:z4,moments:H4,movingAverage:yD,mul:he,multiRNNCell:U4,multinomial:q4,neg:Jr,norm:lf,notEqual:dw,oneHot:Y4,ones:xs,onesLike:J4,op:B,outerProduct:eR,pad:Nu,pad1d:rR,pad2d:sR,pad3d:iR,pad4d:cR,pool:hR,pow:au,prelu:pw,print:W1,prod:yR,raggedGather:bR,raggedRange:SR,raggedTensorToTensor:xR,rand:kR,randomGamma:jR,randomNormal:mw,randomStandardNormal:qR,randomUniform:tg,randomUniformInt:YR,range:ou,real:iu,reciprocal:QR,relu:hf,relu6:gw,reshape:ae,reverse:Os,reverse1d:a$,reverse2d:o$,reverse3d:u$,reverse4d:l$,rfft:rg,round:yw,rsqrt:p$,scalar:ut,scatterND:bD,searchSorted:qm,selu:m$,separableConv2d:y$,setdiff1dAsync:b$,sigmoid:Es,sign:S$,signal:wF,sin:x$,sinh:k$,slice:qe,slice1d:T$,slice2d:N$,slice3d:R$,slice4d:D$,softmax:F$,softplus:sw,spaceToBatchND:fw,sparse:xF,sparseToDense:_D,spectral:bF,split:uu,sqrt:ga,square:Pr,squaredDifference:bw,squeeze:hn,stack:ba,step:ww,stridedSlice:G$,string:IF,sub:Ke,sum:Dt,tan:K$,tanh:Yp,tensor:Mr,tensor1d:xn,tensor2d:Ts,tensor3d:Sw,tensor4d:X$,tensor5d:Y$,tensor6d:Z$,tensorScatterUpdate:eD,tile:Wi,topk:nD,transpose:Qp,truncatedNormal:aD,unique:oD,unsortedSegmentSum:uD,unstack:Us,upperBound:lD,variable:dD,where:Wa,whereAsync:Iw,zeros:To,zerosLike:lr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6=(t,e,n,r=bn)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(_("a",t,e,n),_("b",t,e,n))];case"AddN":return[r.addN(_("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(_("a",t,e,n),_("b",t,e,n))];case"Mul":return[r.mul(_("a",t,e,n),_("b",t,e,n))];case"RealDiv":case"Div":return[r.div(_("a",t,e,n),_("b",t,e,n))];case"DivNoNan":return[r.divNoNan(_("a",t,e,n),_("b",t,e,n))];case"FloorDiv":return[r.floorDiv(_("a",t,e,n),_("b",t,e,n))];case"Sub":return[r.sub(_("a",t,e,n),_("b",t,e,n))];case"Minimum":return[r.minimum(_("a",t,e,n),_("b",t,e,n))];case"Maximum":return[r.maximum(_("a",t,e,n),_("b",t,e,n))];case"Pow":return[r.pow(_("a",t,e,n),_("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(_("a",t,e,n),_("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6=(t,e,n,r=bn)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(_("x",t,e,n))];case"Acos":return[r.acos(_("x",t,e,n))];case"Acosh":return[r.acosh(_("x",t,e,n))];case"Asin":return[r.asin(_("x",t,e,n))];case"Asinh":return[r.asinh(_("x",t,e,n))];case"Atan":return[r.atan(_("x",t,e,n))];case"Atan2":return[r.atan2(_("x",t,e,n),_("y",t,e,n))];case"Atanh":return[r.atanh(_("x",t,e,n))];case"Ceil":return[r.ceil(_("x",t,e,n))];case"Complex":return[r.complex(_("real",t,e,n),_("imag",t,e,n))];case"Cos":return[r.cos(_("x",t,e,n))];case"Cosh":return[r.cosh(_("x",t,e,n))];case"Elu":return[r.elu(_("x",t,e,n))];case"Erf":return[r.erf(_("x",t,e,n))];case"Exp":return[r.exp(_("x",t,e,n))];case"Expm1":return[r.expm1(_("x",t,e,n))];case"Floor":return[r.floor(_("x",t,e,n))];case"Log":return[r.log(_("x",t,e,n))];case"Log1p":return[r.log1p(_("x",t,e,n))];case"Imag":return[r.imag(_("x",t,e,n))];case"Neg":return[r.neg(_("x",t,e,n))];case"Reciprocal":return[r.reciprocal(_("x",t,e,n))];case"Real":return[r.real(_("x",t,e,n))];case"Relu":return[r.relu(_("x",t,e,n))];case"Round":return[r.round(_("x",t,e,n))];case"Selu":return[r.selu(_("x",t,e,n))];case"Sigmoid":return[r.sigmoid(_("x",t,e,n))];case"Sin":return[r.sin(_("x",t,e,n))];case"Sign":return[r.sign(_("x",t,e,n))];case"Sinh":return[r.sinh(_("x",t,e,n))];case"Softplus":return[r.softplus(_("x",t,e,n))];case"Sqrt":return[r.sqrt(_("x",t,e,n))];case"Square":return[r.square(_("x",t,e,n))];case"Tanh":return[r.tanh(_("x",t,e,n))];case"Tan":return[r.tan(_("x",t,e,n))];case"ClipByValue":return[r.clipByValue(_("x",t,e,n),_("clipValueMin",t,e,n),_("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(_("x",t,e,n))];case"Rsqrt":return[r.rsqrt(gn(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(_("x",t,e,n),_("alpha",t,e,n))];case"Prelu":return[r.prelu(_("x",t,e,n),_("alpha",t,e,n))];case"IsNan":return[r.isNaN(gn(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(gn(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(gn(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){A(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],s=e[r];A(a<0||s<0||a===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function lv(t){return!(typeof t=="number"||t.some(e=>e<0))}function hi(t,e,n){let r=fh(t,n);const a=!lv(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(s=>{r=fh(s.shape,r)}),!lv(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function fh(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],s=e[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6{constructor(e,n,r,a,s,o,i){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=ut(0),Yr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),vr(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Yr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Mr([],[0].concat(this.elementShape));const r=this.readMany(e);return vr(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ba(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Mr([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return vr(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),yn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Us(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(c=>(r+=c,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,o=[];Je(()=>{n=ae(n,[1,r,s]);for(let c=0;c<e.length;++c){const u=[0,c===0?0:a[c-1],0],d=[1,e[c],s];o[c]=ae(qe(n,u,d),this.elementShape)}return o});const i=[];for(let c=0;c<e.length;c++)i[c]=c;this.writeMany(i,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ms{get id(){return this.idTensor.id}constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);vr(n,s.shape,"TensorList shape mismatch: "),Yr(s)}),this.idTensor=ut(0),this.maxNumElements=a,Yr(this.idTensor)}copy(){return new Ms([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);vr(e,this.elementShape,"TensorList shape mismatch: ");const a=hi(this.elementShape,this.tensors,e);return Je(()=>{const s=this.tensors.map(o=>ae(o,a));return ba(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=hi(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,vr(a.shape,e,"TensorList shape mismatch: "),ae(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(vr(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Yr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Ms([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);vr(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=hi(this.elementShape,this.tensors,n);return ae(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);vr(this.elementShape,n.shape,"TensorList shape mismatch: "),Yr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);vr(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=hi(this.elementShape,this.tensors,r);return e.length===0?Mr([],[0].concat(a)):Je(()=>{const s=e.map(o=>ae(this.tensors[o],a));return ba(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);vr(this.elementShape,n,"TensorList shape mismatch: ");const r=hi(this.elementShape,this.tensors,n);return this.size()===0?Mr([],[0].concat(r)):Je(()=>{const a=this.tensors.map(s=>ae(s,r));return yn(a,0)})}}function x6(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);vr(a,e,"TensorList shape mismatch: ");const s=Us(t);return new Ms(s,e,r)}function I6(t,e,n,r){return new Ms([],t,e,r)}function k6(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const s=new Ms([],n,t.dtype,r),o=Us(t,0);return e.forEach((i,c)=>{s.setItem(i,o[c])}),s}function E6(t,e,n){let r=0;const a=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const s=t.shape.slice(1),o=fh(s,n),i=r===0?0:t.size/r,c=Je(()=>{const u=[];t=ae(t,[1,r,i]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],h=[1,e[d],i];u[d]=ae(qe(t,p,h),o)}return t.dispose(),u}),l=new Ms([],n,t.dtype,e.length);for(let u=0;u<c.length;u++)l.setItem(u,c[u]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=_("thenBranch",t,e,n),a=_("elseBranch",t,e,n),s=_("cond",t,e,n),o=_("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=_("body",t,e,n),a=_("cond",t,e,n),s=_("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),i=s.map(u=>u.id);let c=await o[0].data();o.forEach(u=>{!u.kept&&i.indexOf(u.id)===-1&&u.dispose()});let l=s;for(;c[0];){const u=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const d=l.map(p=>p.id);u.forEach(p=>{!p.kept&&i.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const f=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);c=await f[0].data(),f.forEach(p=>{!p.kept&&i.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return l}case"LoopCond":{const r=_("pred",t,e,n);return[la(r)]}case"Switch":{const r=_("pred",t,e,n);let a=_("data",t,e,n);return a.kept||(a=la(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>gn(a,e,n)!==void 0);if(r){const a=gn(r,e,n);return[la(a)]}return}case"Enter":{const r=_("frameName",t,e,n),a=_("tensor",t,e,n);return n.enterFrame(r),[la(a)]}case"Exit":{const r=_("tensor",t,e,n);return n.exitFrame(),[la(r)]}case"NextIteration":{const r=_("tensor",t,e,n);return n.nextIteration(),[la(r)]}case"TensorArrayV3":{const r=_("size",t,e,n),a=_("dtype",t,e,n),s=_("elementShape",t,e,n),o=_("dynamicSize",t,e,n),i=_("clearAfterRead",t,e,n),c=_("identicalElementShapes",t,e,n),l=_("name",t,e,n),u=new _6(l,a,r,s,c,o,i);return n.addTensorArray(u),[u.idTensor,ut(1)]}case"TensorArrayWriteV3":{const r=_("tensorArrayId",t,e,n),a=_("index",t,e,n),s=_("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,s),[o.idTensor]}case"TensorArrayReadV3":{const r=_("tensorArrayId",t,e,n),a=_("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=_("tensorArrayId",t,e,n),a=_("indices",t,e,n),s=_("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=_("tensorArrayId",t,e,n),a=_("indices",t,e,n),s=_("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=_("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),s=_("dtype",t,e,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=_("tensorArrayId",t,e,n),a=_("tensor",t,e,n),s=_("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(s,a),[o.idTensor]}case"TensorArraySizeV3":{const r=_("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[ut(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=_("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=_("tensorListId",t,e,n),a=_("index",t,e,n),s=_("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,s),[o.idTensor]}case"TensorListGetItem":{const r=_("tensorListId",t,e,n),a=_("index",t,e,n),s=_("elementShape",t,e,n),o=_("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=_("indices",t,e,n),a=_("tensor",t,e,n),s=_("elementShape",t,e,n),o=_("numElements",t,e,n),i=k6(a,r,s,o);return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=_("elementShape",t,e,n),a=_("elementDType",t,e,n);let s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";const o=_(s,t,e,n),i=t.op==="TensorListReserve"?-1:o,c=I6(r,a,o,i);return n.addTensorList(c),[c.idTensor]}case"TensorListGather":{const r=_("tensorListId",t,e,n),a=_("indices",t,e,n),s=_("elementShape",t,e,n),o=_("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,s)]}case"TensorListStack":{const r=_("tensorListId",t,e,n),a=_("elementShape",t,e,n),s=_("elementDType",t,e,n),o=_("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,s,o)]}case"TensorListFromTensor":{const r=_("tensor",t,e,n),a=_("elementShape",t,e,n),s=_("elementDType",t,e,n),o=x6(r,a,s);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=_("tensorListId",t,e,n),a=n.getTensorList(r.id),s=_("dtype",t,e,n),o=_("elementShape",t,e,n);return[a.concat(s,o)]}case"TensorListPushBack":{const r=_("tensorListId",t,e,n),a=_("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=_("tensorListId",t,e,n),a=_("elementShape",t,e,n),s=_("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=_("tensor",t,e,n),a=_("elementShape",t,e,n),s=_("lengths",t,e,n),o=E6(r,s,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=_("tensorListId",t,e,n),a=n.getTensorList(r.id);return[ut(a.size(),"int32")]}case"TensorListResize":{const r=_("tensorListId",t,e,n),a=_("size",t,e,n),o=n.getTensorList(r.id).resize(a);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dv(t,e,n){const[r,a]=_("fusedOps",t,e,n),s=r==="biasadd",o=!s,i=a==="prelu",c=r==="fusedbatchnorm",l=_("numArgs",t,e,n);if(s){if(i&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&s&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=_("strides",t,e,n),d=vc(t,e,n),f=_("dataFormat",t,e,n).toUpperCase(),p=_("dilations",t,e,n);let[h,m]=_("args",t,e,n);o&&(m=h,h=void 0);const g=_("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:f,dilations:p,biasArg:h,preluArg:m,activationFunc:a,leakyreluAlpha:g}}const C6=(t,e,n,r=bn)=>{switch(t.op){case"Conv1D":{const a=_("stride",t,e,n),s=_("pad",t,e,n),o=_("dataFormat",t,e,n).toUpperCase(),i=_("dilation",t,e,n);return[r.conv1d(_("x",t,e,n),_("filter",t,e,n),a,s,o,i)]}case"Conv2D":{const a=_("strides",t,e,n),s=vc(t,e,n),o=_("dataFormat",t,e,n).toUpperCase(),i=_("dilations",t,e,n);return[r.conv2d(_("x",t,e,n),_("filter",t,e,n),[a[1],a[2]],s,o,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:a,pad:s,dataFormat:o,dilations:i,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:d}=dv(t,e,n);return[r.fused.conv2d({x:_("x",t,e,n),filter:_("filter",t,e,n),strides:[a[1],a[2]],pad:s,dataFormat:o,dilations:[i[1],i[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:s,dataFormat:o,dilations:i,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:d}=dv(t,e,n);return[r.fused.depthwiseConv2d({x:_("x",t,e,n),filter:_("filter",t,e,n),strides:[a[1],a[2]],pad:s,dataFormat:o,dilations:[i[1],i[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=_("outputShape",t,e,n),s=_("strides",t,e,n),o=vc(t,e,n);return[r.conv2dTranspose(_("x",t,e,n),_("filter",t,e,n),a,[s[1],s[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=_("strides",t,e,n),s=vc(t,e,n),o=_("dilations",t,e,n),i=_("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(_("input",t,e,n),_("filter",t,e,n),[a[1],a[2]],s,i,[o[1],o[2]])]}case"Conv3D":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("dataFormat",t,e,n).toUpperCase(),i=_("dilations",t,e,n);return[r.conv3d(_("x",t,e,n),_("filter",t,e,n),[a[1],a[2],a[3]],s,o,[i[1],i[2],i[3]])]}case"AvgPool":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("kernelSize",t,e,n);return[r.avgPool(_("x",t,e,n),[o[1],o[2]],[a[1],a[2]],s)]}case"MaxPool":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("kernelSize",t,e,n);return[r.maxPool(_("x",t,e,n),[o[1],o[2]],[a[1],a[2]],s)]}case"MaxPoolWithArgmax":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("kernelSize",t,e,n),i=_("includeBatchInIndex",t,e,n),{result:c,indexes:l}=r.maxPoolWithArgmax(_("x",t,e,n),[o[1],o[2]],[a[1],a[2]],s,i);return[c,l]}case"AvgPool3D":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("kernelSize",t,e,n);return[r.avgPool3d(_("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],s)]}case"MaxPool3D":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("kernelSize",t,e,n);return[r.maxPool3d(_("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],s)]}case"Dilation2D":{const a=_("strides",t,e,n),s=_("pad",t,e,n),o=_("dilations",t,e,n),i=a[1],c=a[2],l=o[1],u=o[2];return[r.dilation2d(_("x",t,e,n),_("filter",t,e,n),[i,c],s,[l,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6=(t,e,n,r=bn)=>{switch(t.op){case"Fill":{const a=_("shape",t,e,n),s=_("dtype",t,e,n),o=_("value",t,e,n);return[r.fill(a,o,s)]}case"LinSpace":{const a=_("start",t,e,n),s=_("stop",t,e,n),o=_("num",t,e,n);return[r.linspace(a,s,o)]}case"Multinomial":{const a=_("logits",t,e,n),s=_("numSamples",t,e,n),o=_("seed",t,e,n);return[r.multinomial(a,s,o)]}case"OneHot":{const a=_("indices",t,e,n),s=_("depth",t,e,n),o=_("onValue",t,e,n),i=_("offValue",t,e,n),c=_("dtype",t,e,n);return[r.oneHot(a,s,o,i,c)]}case"Ones":return[r.ones(_("shape",t,e,n),_("dtype",t,e,n))];case"OnesLike":return[r.onesLike(_("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(_("shape",t,e,n),_("dtype",t,e,n),_("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(_("shape",t,e,n),_("minval",t,e,n),_("maxval",t,e,n),_("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(_("shape",t,e,n),_("minval",t,e,n),_("maxval",t,e,n),_("seed",t,e,n))];case"Range":{const a=_("start",t,e,n),s=_("stop",t,e,n),o=_("step",t,e,n);return[r.range(a,s,o,_("dtype",t,e,n))]}case"TruncatedNormal":{const a=_("shape",t,e,n),s=_("mean",t,e,n),o=_("stdDev",t,e,n),i=_("seed",t,e,n);return[r.truncatedNormal(a,s,o,_("dtype",t,e,n),i)]}case"Zeros":return[r.zeros(_("shape",t,e,n),_("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(_("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xf(t,e,n){const r=_("boxes",t,e,n),a=_("scores",t,e,n),s=_("maxOutputSize",t,e,n),o=_("iouThreshold",t,e,n),i=_("scoreThreshold",t,e,n),c=_("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i,softNmsSigma:c}}const A6=async(t,e,n,r,a=bn)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:o,maxOutputSize:i,iouThreshold:c,scoreThreshold:l,softNmsSigma:u}=Xf(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(s,o,i,c,l,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:o,maxOutputSize:i,iouThreshold:c,scoreThreshold:l}=Xf(t,e,n),u=_("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(s,o,i,c,l,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:o,maxOutputSize:i,iouThreshold:c,scoreThreshold:l}=Xf(t,e,n);return[await a.image.nonMaxSuppressionAsync(s,o,i,c,l)]}case"Where":{const s=a.cast(_("condition",t,e,n),"bool"),o=[await a.whereAsync(s)];return s.dispose(),o}case"ListDiff":return a.setdiff1dAsync(_("x",t,e,n),_("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6=(t,e,n,r=bn)=>{switch(t.op){case"LowerBound":{const a=_("sortedSequence",t,e,n),s=_("values",t,e,n);return[r.lowerBound(a,s)]}case"TopKV2":{const a=_("x",t,e,n),s=_("k",t,e,n),o=_("sorted",t,e,n),i=r.topk(a,s,o);return[i.values,i.indices]}case"UpperBound":{const a=_("sortedSequence",t,e,n),s=_("values",t,e,n);return[r.upperBound(a,s)]}case"Unique":{const a=_("x",t,e,n),s=r.unique(a);return[s.values,s.indices]}case"UniqueV2":{const a=_("x",t,e,n),s=_("axis",t,e,n),o=r.unique(a,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $6=(t,e,n,r=bn)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=_("default",t,e,n);return[gn(t.name,e,n)||a];case"Placeholder":return[gn(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=_("x",t,e,n);return[la(u)]}case"IdentityN":return _("x",t,e,n).map(u=>la(u));case"Snapshot":const s=_("x",t,e,n);return[la(s)];case"Shape":return[r.tensor1d(_("x",t,e,n).shape,"int32")];case"ShapeN":return _("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(_("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(_("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=_("x",t,e,n),i=_("data",t,e,n),c=_("message",t,e,n),l=_("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ut(0),this.tensorMap=new Map,Yr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ut(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Je(()=>{const a=Us(n),s=r.length,o=a.length;A(s===o,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${o} elements.`);for(let i=0;i<s;i++){const c=r[i],l=a[i];Yr(l),this.tensorMap.set(c,l)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Je(()=>{const a=[];for(let s=0;s<r.length;s++){const o=r[s],i=this.findWithDefault(o,n);a.push(i)}return ba(a)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(t.name);if(a!=null)return[a];{const s=_("keyDType",t,e,n),o=_("valueDType",t,e,n),i=new D6(s,o);return r.addHashTable(t.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=_("tableHandle",t,e,n,r),s=_("keys",t,e,n),o=_("values",t,e,n);return[await r.getHashTableById(a.id).import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=_("tableHandle",t,e,n,r),s=_("keys",t,e,n),o=_("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=_("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6=(t,e,n,r=bn)=>{switch(t.op){case"ResizeBilinear":{const a=_("images",t,e,n),s=_("size",t,e,n),o=_("alignCorners",t,e,n),i=_("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[s[0],s[1]],o,i)]}case"ResizeNearestNeighbor":{const a=_("images",t,e,n),s=_("size",t,e,n),o=_("alignCorners",t,e,n),i=_("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[s[0],s[1]],o,i)]}case"CropAndResize":{const a=_("image",t,e,n),s=_("boxes",t,e,n),o=_("boxInd",t,e,n),i=_("cropSize",t,e,n),c=_("method",t,e,n),l=_("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,s,o,i,c,l)]}case"ImageProjectiveTransformV3":{const a=_("images",t,e,n),s=_("transforms",t,e,n),o=_("outputShape",t,e,n),i=_("fillValue",t,e,n),c=_("interpolation",t,e,n),l=_("fillMode",t,e,n);return[r.image.transform(a,s,c.toLowerCase(),l.toLowerCase(),i,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6=(t,e,n,r=bn)=>{switch(t.op){case"Equal":return[r.equal(_("a",t,e,n),_("b",t,e,n))];case"NotEqual":return[r.notEqual(_("a",t,e,n),_("b",t,e,n))];case"Greater":return[r.greater(_("a",t,e,n),_("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(_("a",t,e,n),_("b",t,e,n))];case"Less":return[r.less(_("a",t,e,n),_("b",t,e,n))];case"LessEqual":return[r.lessEqual(_("a",t,e,n),_("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(_("a",t,e,n),_("b",t,e,n))];case"LogicalNot":return[r.logicalNot(_("a",t,e,n))];case"LogicalOr":return[r.logicalOr(_("a",t,e,n),_("b",t,e,n))];case"Select":case"SelectV2":return[r.where(_("condition",t,e,n),_("a",t,e,n),_("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(_("a",t,e,n),_("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6=(t,e,n,r=bn)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(_("a",t,e,n),_("b",t,e,n),_("transposeA",t,e,n),_("transposeB",t,e,n))];case"Einsum":return[r.einsum(_("equation",t,e,n),..._("tensors",t,e,n))];case"Transpose":return[r.transpose(_("x",t,e,n),_("perm",t,e,n))];case"_FusedMatMul":const[a,s]=_("fusedOps",t,e,n),o=a==="biasadd",i=s==="prelu",c=_("numArgs",t,e,n),l=_("leakyreluAlpha",t,e,n);if(o){if(i&&c!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&c!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=_("args",t,e,n);return[r.fused.matMul({a:_("a",t,e,n),b:_("b",t,e,n),transposeA:_("transposeA",t,e,n),transposeB:_("transposeB",t,e,n),bias:u,activation:s,preluActivationWeights:d,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(_("a",t,e,n),_("numLower",t,e,n),_("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6=(t,e,n,r=bn)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(_("x",t,e,n),_("axis",t,e,n),_("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(_("x",t,e,n),_("mean",t,e,n),_("variance",t,e,n),_("offset",t,e,n),_("scale",t,e,n),_("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(_("x",t,e,n),_("mean",t,e,n),_("variance",t,e,n),_("offset",t,e,n),_("scale",t,e,n),_("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(_("x",t,e,n),_("radius",t,e,n),_("bias",t,e,n),_("alpha",t,e,n),_("beta",t,e,n))];case"Softmax":return[r.softmax(_("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(_("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L6=(t,e,n,r=bn)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:s}=r.raggedGather(_("paramsNestedSplits",t,e,n),_("paramsDenseValues",t,e,n),_("indices",t,e,n),_("outputRaggedRank",t,e,n));return a.concat(s)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:s}=r.raggedRange(_("starts",t,e,n),_("limits",t,e,n),_("splits",t,e,n));return[a,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(_("shape",t,e,n),_("values",t,e,n),_("defaultValue",t,e,n),_("rowPartitionTensors",t,e,n),_("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6=(t,e,n,r=bn)=>{switch(t.op){case"Max":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.max(_("x",t,e,n),i,c)]}case"Mean":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.mean(_("x",t,e,n),i,c)]}case"Min":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.min(_("x",t,e,n),i,c)]}case"Sum":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.sum(_("x",t,e,n),i,c)]}case"All":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.all(_("x",t,e,n),i,c)]}case"Any":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.any(_("x",t,e,n),i,c)]}case"ArgMax":{const i=_("axis",t,e,n);return[r.argMax(_("x",t,e,n),i)]}case"ArgMin":{const i=_("axis",t,e,n);return[r.argMin(_("x",t,e,n),i)]}case"Prod":{const i=_("axis",t,e,n),c=_("keepDims",t,e,n);return[r.prod(_("x",t,e,n),i,c)]}case"Cumprod":{const i=_("axis",t,e,n),c=_("exclusive",t,e,n),l=_("reverse",t,e,n);return[r.cumprod(_("x",t,e,n),i,c,l)]}case"Cumsum":{const i=_("axis",t,e,n),c=_("exclusive",t,e,n),l=_("reverse",t,e,n);return[r.cumsum(_("x",t,e,n),i,c,l)]}case"Bincount":const a=_("x",t,e,n),s=_("weights",t,e,n),o=_("size",t,e,n);return[r.bincount(a,s,o)];case"DenseBincount":{const i=_("x",t,e,n),c=_("weights",t,e,n),l=_("size",t,e,n),u=_("binaryOutput",t,e,n);return[r.denseBincount(i,c,l,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6=(t,e,n,r=bn)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=_("n",t,e,n),s=_("axis",t,e,n);let o=_("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,s)]}case"Gather":{const a=_("x",t,e,n),s=_("indices",t,e,n);return[r.gather(a,r.cast(s,"int32"),0)]}case"GatherV2":{const a=_("axis",t,e,n),s=_("batchDims",t,e,n),o=_("x",t,e,n),i=_("indices",t,e,n);return[r.gather(o,r.cast(i,"int32"),a,s)]}case"Reverse":{const a=_("dims",t,e,n),s=[];for(let i=0;i<a.length;i++)a[i]&&s.push(i);const o=_("x",t,e,n);return[r.reverse(o,s)]}case"ReverseV2":{const a=_("axis",t,e,n),s=_("x",t,e,n);return[r.reverse(s,a)]}case"Slice":{const a=_("begin",t,e,n),s=_("size",t,e,n);return[r.slice(_("x",t,e,n),a,s)]}case"StridedSlice":{const a=_("begin",t,e,n),s=_("end",t,e,n),o=_("strides",t,e,n),i=_("beginMask",t,e,n),c=_("endMask",t,e,n),l=_("ellipsisMask",t,e,n),u=_("newAxisMask",t,e,n),d=_("shrinkAxisMask",t,e,n),f=_("x",t,e,n);return[r.stridedSlice(f,a,s,o,i,c,l,u,d)]}case"Pack":return Je(()=>{const a=_("axis",t,e,n),s=_("tensors",t,e,n),o=s[0].shape,i=r.squeeze(s[0]).shape,c=s.map(l=>{const u=Ir(l.shape,o);if(!u&&!Ir(r.squeeze(l).shape,i))throw new Error("the input tensors shape does not match");return u?l:r.reshape(l,o)});return[r.stack(c,a)]});case"Unpack":{const a=_("axis",t,e,n),s=_("tensor",t,e,n);return r.unstack(s,a)}case"Tile":{const a=_("reps",t,e,n);return[r.tile(_("x",t,e,n),a)]}case"Split":case"SplitV":{const a=_("axis",t,e,n),s=_("numOrSizeSplits",t,e,n),o=_("x",t,e,n);return r.split(o,s,a)}case"ScatterNd":{const a=_("indices",t,e,n),s=_("values",t,e,n),o=_("shape",t,e,n);return[r.scatterND(a,s,o)]}case"GatherNd":{const a=_("x",t,e,n),s=_("indices",t,e,n);return[r.gatherND(a,s)]}case"SparseToDense":{const a=_("sparseIndices",t,e,n),s=_("outputShape",t,e,n),o=_("sparseValues",t,e,n),i=_("defaultValue",t,e,n);return[r.sparseToDense(a,o,s,o.dtype===i.dtype?i:r.cast(i,o.dtype))]}case"TensorScatterUpdate":{const a=_("indices",t,e,n),s=_("values",t,e,n),o=_("tensor",t,e,n);return[r.tensorScatterUpdate(o,a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6=(t,e,n,r=bn)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:s,emptyRowIndicator:o,reverseIndexMap:i}=r.sparse.sparseFillEmptyRows(_("indices",t,e,n),_("values",t,e,n),_("denseShape",t,e,n),_("defaultValue",t,e,n));return[a,s,o,i]}case"SparseReshape":{const{outputIndices:a,outputShape:s}=r.sparse.sparseReshape(_("inputIndices",t,e,n),_("inputShape",t,e,n),_("newShape",t,e,n));return[a,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(_("data",t,e,n),_("indices",t,e,n),_("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(_("data",t,e,n),_("indices",t,e,n),_("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6=(t,e,n,r=bn)=>{switch(t.op){case"FFT":return[r.fft(_("x",t,e,n))];case"IFFT":return[r.ifft(_("x",t,e,n))];case"RFFT":return[r.rfft(_("x",t,e,n))];case"IRFFT":return[r.irfft(_("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6=(t,e,n,r=bn)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(_("input",t,e,n),_("pattern",t,e,n),_("rewrite",t,e,n),_("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:s}=r.string.stringNGrams(_("data",t,e,n),_("dataSplits",t,e,n),_("separator",t,e,n),_("nGramWidths",t,e,n),_("leftPad",t,e,n),_("rightPad",t,e,n),_("padWidth",t,e,n),_("preserveShortSequences",t,e,n));return[a,s]}case"StringSplit":{const{indices:a,values:s,shape:o}=r.string.stringSplit(_("input",t,e,n),_("delimiter",t,e,n),_("skipEmpty",t,e,n));return[a,s,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(_("input",t,e,n),_("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6=(t,e,n,r=bn)=>{switch(t.op){case"Cast":return[r.cast(_("x",t,e,n),_("dtype",t,e,n))];case"ExpandDims":{const a=_("axis",t,e,n);return[r.expandDims(_("x",t,e,n),a)]}case"Squeeze":{const a=_("axis",t,e,n);return[r.squeeze(_("x",t,e,n),a)]}case"Reshape":return[r.reshape(_("x",t,e,n),_("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(_("x",t,e,n),_("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(_("x",t,e,n),_("padding",t,e,n),_("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(_("x",t,e,n),_("padding",t,e,n),_("constantValue",t,e,n))];case"SpaceToBatchND":{const a=_("blockShape",t,e,n),s=_("paddings",t,e,n);return[r.spaceToBatchND(_("x",t,e,n),a,s)]}case"BatchToSpaceND":{const a=_("blockShape",t,e,n),s=_("crops",t,e,n);return[r.batchToSpaceND(_("x",t,e,n),a,s)]}case"DepthToSpace":{const a=_("blockSize",t,e,n),s=_("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(_("x",t,e,n),a,s)]}case"BroadcastTo":return[r.broadcastTo(_("x",t,e,n),_("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(_("s0",t,e,n),_("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fv(t,e,n,r,a=Je){const s=((o,i,c)=>{switch(o.category){case"arithmetic":return a(()=>w6(o,i,c));case"basic_math":return a(()=>S6(o,i,c));case"control":return T6(o,i,c);case"convolution":return a(()=>C6(o,i,c));case"creation":return a(()=>N6(o,i,c));case"dynamic":return A6(o,i,c);case"evaluation":return a(()=>R6(o,i,c));case"image":return a(()=>F6(o,i,c));case"graph":return a(()=>$6(o,i,c));case"logical":return a(()=>M6(o,i,c));case"matrices":return a(()=>P6(o,i,c));case"normalization":return a(()=>B6(o,i,c));case"ragged":return a(()=>L6(o,i,c));case"reduction":return a(()=>W6(o,i,c));case"slice_join":return a(()=>z6(o,i,c));case"sparse":return a(()=>V6(o,i,c));case"spectral":return a(()=>H6(o,i,c));case"string":return a(()=>j6(o,i,c));case"transformation":return a(()=>U6(o,i,c));case"hash_table":return O6(o,i,c,r);case"custom":const l=c2(o.op);if(l&&l.customExecutor)return l.customExecutor(new b6(o,i,c));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Rs(s)?s.then(o=>[].concat(o)):[].concat(s)}class pv{constructor(e={},n={},r={},a={},s){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hv(t,e,n,r){const a=new Set,s=[];let o=null,i=null;const c=new Set,l=new Set(Object.keys(t).map(f=>tr(f)[0]));r=r||[];const u=new Set(r.map(f=>tr(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((ws(f)||Q6(f)||e5(f))&&o==null&&(o=f,i=o.children.map(p=>p.name).filter(p=>a.has(p))),a.add(f.name),n[f.name]==null&&!l.has(f.name)&&!u.has(f.name)){if(f.inputs.length===0){s.push(f.name);continue}f.inputs.forEach(p=>{c.has(p.name)||(c.add(p.name),d.push(p))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:s,dynamicNode:o,syncInputs:i}}function G6(t,e){const{usedNodes:n,inputs:r}=e,a=Object.keys(r).map(g=>tr(g)[0]).map(g=>t.nodes[g]),s=t.initNodes||[],o=g=>n.has(typeof g=="string"?g:g.name);function i(g){return[...new Map(g.map(v=>[v.name,v])).values()]}const c=i([...a,...t.weights,...s]).filter(o),l=i([...c,...Object.values(t.nodes)]).filter(o),u=new Map(l.map(g=>[g.name,g])),d={};for(const g of l){d[g.name]=d[g.name]||0;for(const v of g.children)o(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}const f=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),p=[...f];for(;f.length>0;){const g=f.pop(),v=u.get(g);for(const b of v.children.filter(o))--d[b.name]===0&&(p.push(b.name),f.push(b.name))}const h=p.map(g=>u.get(g)),m=q6(h,c);return K6(m,c),m}function q6(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),a=new Set(r);for(;r.length>0;){const o=r.pop(),i=n.get(o);for(const c of i.children)!n.has(c.name)||a.has(c.name)||(a.add(c.name),r.push(c.name))}return t.filter(o=>a.has(o.name))}class sc extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function K6(t,e){const n=new Map(t.map((i,c)=>[i.name,c])),r=new Set(e.map(i=>i.name)),a=i=>r.has(typeof i=="string"?i:i.name),s=new Set(t.map(i=>i.name)),o=i=>s.has(typeof i=="string"?i:i.name);for(const i of t){for(const c of i.children.filter(o)){if(!n.has(c.name))throw new sc(`Child ${c.name} of node ${i.name} is unreachable.`);if(n.get(i.name)>n.get(c.name))throw new sc(`Node ${i.name} is scheduled to run after its child ${c.name}.`)}if(!a(i))for(const c of i.inputs){if(!n.has(c.name))throw new sc(`Input ${c.name} of node ${i.name} is unreachable.`);if(n.get(c.name)>n.get(i.name))throw new sc(`Node ${i.name} is scheduled to run before its input ${c.name}.`)}}}function X6(t){const e=new Map(t.map((i,c)=>[i.name,c])),n=Number.MAX_SAFE_INTEGER,r=t.map((i,c)=>ws(i)?n:c),a=i=>{const c=r[e.get(i.name)];return c??-1},s=t.map((i,c)=>i.children.map(a).reduce((l,u)=>Math.max(l,u),r[c])),o=new Map;for(let i=0;i<t.length;++i){const c=s[i];if(c===n)continue;const l=t[i],u=t[c];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(l)}return o}const Y6=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Z6=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),J6=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ws(t){return Y6.has(t.op)}function Q6(t){return Z6.has(t.op)}function e5(t){return J6.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jc{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new jc(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),a=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)}compile(e,n){const r=hv(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:s,syncInputs:o}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const l=n.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${u}]. Missing the following inputs: [${a}]`)}const i=G6(this.graph,r),c=X6(i);return{orderedNodes:i,nodeLiveUntilMap:c}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Yr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(f=>this.graph.nodes[tr(f)[0]]),s=n.map(f=>tr(f)[0]),o=new Set(s);let i=s.map(f=>this.graph.nodes[f]);i.length===0&&(i=this._outputs);const c=this.getCompilationKey(a,i);let l=this.compiledMap.get(c);l==null&&(l=this.compile(e,i),this.compiledMap.set(c,l));try{this.keepIntermediateTensors=Xe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const u={},d={};return Je(()=>{const f=new pv(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(v=>{const[b,w]=tr(v,f),S=[];S[w]=e[v],p[b]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(S))});const h=this.getFrozenTensorIds(p),{orderedNodes:m,nodeLiveUntilMap:g}=l;for(const v of m){if(p[v.name])continue;const b=fv(v,p,f,this._resourceManager);if(Rs(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,p,f,h,o,g.get(v.name))}return this.parent==null&&f.dispose(h),n.map(v=>gn(v,p,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,s,o,i){if(!(ws(n)||o.has(e))){for(const c of r[e])c!=null&&(i[c.id]=(i[c.id]||0)+n.children.length);for(const c of n.inputs){if(ws(c))continue;const l=iv(c.name,r,a);if(l!=null)for(const u of l){if(!u||u.kept||s.has(u.id))continue;const d=i[u.id];d===1?(u.dispose(),delete i[u.id]):d!=null&&i[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,a,s,o){function i(c){return ws(c)||s.has(c.name)}if(!(ws(e)||o==null))for(const c of o){if(i(c))continue;const l=iv(c.name,n,r);for(const u of l)!u||u.kept||a.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,a={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Xe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new pv(this.weightMap,a,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,o,n,r),c=n.map(f=>gn(f,i,o)),l=c.map(f=>f.id),u=Object.keys(e).map(f=>e[f].id),d=new Set([...l,...u,...this.weightIds]);return Object.values(i).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&o.dispose(d),c}async executeFunctionAsync(e,n,r){const a=e.reduce((s,o,i)=>(s[this.inputs[i].name]=o,s),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const s=Object.keys(e),o=s.map(S=>this.graph.nodes[tr(S)[0]]),i=r.map(S=>tr(S)[0]),c=new Set(i);let l=i.map(S=>this.graph.nodes[S]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:f,syncInputs:p}=hv(e,l,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(S=>{const[I,E]=tr(S),T=[];T[E]=e[S],m[I]=T});const g={},v=this.getFrozenTensorIds(m),b={};for(;h.length>0;){const S=this.processStack(o,h,n,m,b,v,c,g,u);await Promise.all(S)}f==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=l.filter(S=>!ws(S)&&!gn(S.name,m,n)).map(S=>S.name);if(w.length>0){let S="";throw f!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${S}`)}return m}processStack(e,n,r,a,s,o,i,c,l){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&_("isConstant",d.node,a,r)&&([f]=ca(d.node.name,r)),a[d.node.name]==null){const p=fv(d.node,a,r,this._resourceManager);f||([f]=ca(d.node.name,r));const h=r.currentContext;Rs(p)?u.push(p.then(m=>(a[f]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(m)),r.currentContext=h,this.checkTensorForDisposal(f,d.node,a,r,o,i,c),this.processChildNodes(d.node,n,r,a,s,l),m))):(a[f]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(p)),this.checkTensorForDisposal(f,d.node,a,r,o,i,c),this.processChildNodes(d.node,n,r,a,s,l))}else this.processChildNodes(d.node,n,r,a,s,l)}return u}processChildNodes(e,n,r,a,s,o){e.children.forEach(i=>{const[c]=ca(i.name,r);s[c]||!o.has(i.name)||(i.op==="Merge"?i.inputNames.some(l=>!!gn(l,a,r))&&(s[c]=!0,n.push({contexts:r.currentContext,node:i})):i.inputNames.every(l=>!!gn(l,a,r))&&(s[c]=!0,n.push({contexts:r.currentContext,node:i})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=tr(n),s=this.graph.nodes[a];if(s.attrParams.shape&&s.attrParams.shape.value){const o=s.attrParams.shape.value,i=o.length===r.shape.length&&r.shape.every((c,l)=>o[l]===-1||o[l]===c);A(i,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&A(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const a={};for(const s in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];o!=null?a[o.name]=e[s]:a[s]=e[s]}return a}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=tr(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,a;const s=(a=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||a===void 0?void 0:a[n];return s!=null?s.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=tr(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class t5{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5="?tfjs-format=file",r5="model.json";class a5{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=Pw){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new t5}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Rs(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(r=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new jc(uv.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=uv.Instance.transformGraph(e.modelInitializer);this.initializer=new jc(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof en?[e]:e,r={};return n.forEach((a,s)=>r[this.structuredOutputKeys[s]]=a),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof en)&&!Array.isArray(e)){const s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(const o in s){const i=s[o];i.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[i.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let a=0;return this.inputNodes.reduce((s,o)=>{var i,c,l;const u=(l=(c=(i=this.signature)===null||i===void 0?void 0:i.inputs)===null||c===void 0?void 0:c[o])===null||l===void 0?void 0:l.resourceId;return u!=null?s[o]=this.resourceIdToCapturedInput[u]:s[o]=e[a++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let a=0;a<r.length;a++){const s=r[a],o=n[s];this.resourceIdToCapturedInput[o.resourceId]=e[a]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&un(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function s5(t,e={},n=Pw){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=o5(t));const r=new a5(t,e,n);return await r.load(),r}function o5(t){return t.endsWith("/")||(t=t+"/"),`${t}${r5}${n5}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Ha=function(){return Ha=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},Ha.apply(this,arguments)};function wa(t,e,n,r){return new(n||(n=Promise))(function(a,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function i(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?a(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(o,i)}c((r=r.apply(t,e||[])).next())})}function Sa(t,e){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(c){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(u[0]===6&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,l])}}}var f2=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],Yf={modelType:"short",runtime:"mediapipe",maxFaces:1},i5=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new RM.FaceDetection({locateFile:function(r,a){if(e.solutionPath){var s=e.solutionPath.replace(/\/+$/,"");return"".concat(s,"/").concat(r)}return"".concat(a,"/").concat(r)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.detections!==null)for(var a=0,s=r.detections;a<s.length;a++){var o=s[a];n.faces.push(n.normalizedToAbsolute(o.landmarks,(i=o.boundingBox,c=void 0,l=void 0,u=void 0,c=i.xCenter-i.width/2,l=c+i.width,u=i.yCenter-i.height/2,{xMin:c,xMax:l,yMin:u,yMax:u+i.height,width:i.width,height:i.height})))}var i,c,l,u})}return t.prototype.normalizedToAbsolute=function(e,n){var r=this;return{keypoints:e.map(function(a,s){return{x:a.x*r.width,y:a.y*r.height,name:f2[s]}}),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},t.prototype.estimateFaces=function(e,n){return wa(this,void 0,void 0,function(){var r,a;return Sa(this,function(s){switch(s.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof en?(a=ImageData.bind,[4,tM(e)]):[3,2];case 1:return r=new(a.apply(ImageData,[void 0,s.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,s.label=3;case 3:return e=r,[4,this.faceDetectorSolution.send({image:e})];case 4:return s.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t}();function u5(t){return wa(this,void 0,void 0,function(){var e,n;return Sa(this,function(r){switch(r.label){case 0:return e=function(a){if(a==null)return Ha({},Yf);var s=Ha({},a);return s.runtime="mediapipe",s.modelType==null&&(s.modelType=Yf.modelType),s.maxFaces==null&&(s.maxFaces=Yf.maxFaces),s}(t),[4,(n=new i5(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function c5(t,e,n,r){var a=t.width,s=t.height,o=r?-1:1,i=Math.cos(t.rotation),c=Math.sin(t.rotation),l=t.xCenter,u=t.yCenter,d=1/e,f=1/n,p=new Array(16);return p[0]=a*i*o*d,p[1]=-s*c*d,p[2]=0,p[3]=(-.5*a*i*o+.5*s*c+l)*d,p[4]=a*c*o*f,p[5]=s*i*f,p[6]=0,p[7]=(-.5*s*i-.5*a*c*o+u)*f,p[8]=0,p[9]=0,p[10]=a*d,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(h){if(h.length!==16)throw new Error("Array length must be 16 but got ".concat(h.length));return[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}(p)}function p2(t){return t instanceof en?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function h2(t){return t instanceof en?t:nM(t)}function Zf(t,e){A(t.width!==0,function(){return"".concat(e," width cannot be 0.")}),A(t.height!==0,function(){return"".concat(e," height cannot be 0.")})}function l5(t,e){var n=function(r,a,s,o){var i=a-r,c=o-s;if(i===0)throw new Error("Original min and max are both ".concat(r,", range cannot be 0."));var l=c/i;return{scale:l,offset:s-r*l}}(0,255,e[0],e[1]);return Je(function(){return Ae(he(t,n.scale),n.offset)})}function d5(t,e,n){var r=e.outputTensorSize,a=e.keepAspectRatio,s=e.borderMode,o=e.outputTensorFloatRange,i=p2(t),c=function(f,p){return p?{xCenter:p.xCenter*f.width,yCenter:p.yCenter*f.height,width:p.width*f.width,height:p.height*f.height,rotation:p.rotation}:{xCenter:.5*f.width,yCenter:.5*f.height,width:f.width,height:f.height,rotation:0}}(i,n),l=function(f,p,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var m=p.height,g=p.width;Zf(p,"targetSize"),Zf(f,"roi");var v,b,w=m/g,S=f.height/f.width,I=0,E=0;return w>S?(v=f.width,b=f.width*w,E=(1-S/w)/2):(v=f.height/w,b=f.height,I=(1-w/S)/2),f.width=v,f.height=b,{top:E,left:I,right:I,bottom:E}}(c,r,a),u=c5(c,i.width,i.height,!1),d=Je(function(){var f=h2(t),p=Ts(function(g,v,b){return Zf(b,"inputResolution"),[1/b.width*g[0][0]*v.width,1/b.height*g[0][1]*v.width,g[0][3]*v.width,1/b.width*g[1][0]*v.height,1/b.height*g[1][1]*v.height,g[1][3]*v.height,0,0]}(u,i,r),[1,8]),h=s==="zero"?"constant":"nearest",m=mf.transform(Kr(zt(f,"float32")),p,"bilinear",h,0,[r.height,r.width]);return o!=null?l5(m,o):m});return{imageTensor:d,padding:l,transformationMatrix:u}}function mv(t){t.reduceBoxesInLowestLayer==null&&(t.reduceBoxesInLowestLayer=!1),t.interpolatedScaleAspectRatio==null&&(t.interpolatedScaleAspectRatio=1),t.fixedAnchorSize==null&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var r=[],a=[],s=[],o=[],i=n;i<t.strides.length&&t.strides[i]===t.strides[n];){var c=gv(t.minScale,t.maxScale,i,t.strides.length);if(i===0&&t.reduceBoxesInLowestLayer)s.push(1),s.push(2),s.push(.5),o.push(.1),o.push(c),o.push(c);else{for(var l=0;l<t.aspectRatios.length;++l)s.push(t.aspectRatios[l]),o.push(c);if(t.interpolatedScaleAspectRatio>0){var u=i===t.strides.length-1?1:gv(t.minScale,t.maxScale,i+1,t.strides.length);o.push(Math.sqrt(c*u)),s.push(t.interpolatedScaleAspectRatio)}}i++}for(var d=0;d<s.length;++d){var f=Math.sqrt(s[d]);r.push(o[d]/f),a.push(o[d]*f)}var p=0,h=0;if(t.featureMapHeight.length>0)p=t.featureMapHeight[n],h=t.featureMapWidth[n];else{var m=t.strides[n];p=Math.ceil(t.inputSizeHeight/m),h=Math.ceil(t.inputSizeWidth/m)}for(var g=0;g<p;++g)for(var v=0;v<h;++v)for(var b=0;b<r.length;++b){var w={xCenter:(v+t.anchorOffsetX)/h,yCenter:(g+t.anchorOffsetY)/p,width:0,height:0};t.fixedAnchorSize?(w.width=1,w.height=1):(w.width=a[b],w.height=r[b]),e.push(w)}n=i}return e}function gv(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function yv(t,e){var n=e[0],r=e[1];return[n*t[0]+r*t[1]+t[3],n*t[4]+r*t[5]+t[7]]}function f5(t){return Je(function(){var e=function(a){return Je(function(){return[qe(a,[0,0,0],[1,-1,1]),qe(a,[0,0,1],[1,-1,-1])]})}(t),n=e[0],r=e[1];return{boxes:hn(r),logits:hn(n)}})}function p5(t,e,n,r){return wa(this,void 0,void 0,function(){var a,s,o,i,c;return Sa(this,function(l){switch(l.label){case 0:return t.sort(function(u,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,u.score)}),a=Ts(t.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),s=xn(t.map(function(u){return u.score[0]})),[4,mf.nonMaxSuppressionAsync(a,s,e,n)];case 1:return[4,(o=l.sent()).array()];case 2:return i=l.sent(),c=t.filter(function(u,d){return i.indexOf(d)>-1}),un([a,s,o]),[2,c]}})})}function h5(t,e,n){return wa(this,void 0,void 0,function(){var r,a,s,o,i;return Sa(this,function(c){switch(c.label){case 0:return r=t[0],a=t[1],s=function(l,u,d){return Je(function(){var f,p,h,m;d.reverseOutputOrder?(p=hn(qe(l,[0,d.boxCoordOffset+0],[-1,1])),f=hn(qe(l,[0,d.boxCoordOffset+1],[-1,1])),m=hn(qe(l,[0,d.boxCoordOffset+2],[-1,1])),h=hn(qe(l,[0,d.boxCoordOffset+3],[-1,1]))):(f=hn(qe(l,[0,d.boxCoordOffset+0],[-1,1])),p=hn(qe(l,[0,d.boxCoordOffset+1],[-1,1])),h=hn(qe(l,[0,d.boxCoordOffset+2],[-1,1])),m=hn(qe(l,[0,d.boxCoordOffset+3],[-1,1]))),p=Ae(he(Ze(p,d.xScale),u.w),u.x),f=Ae(he(Ze(f,d.yScale),u.h),u.y),d.applyExponentialOnBoxSize?(h=he(ya(Ze(h,d.hScale)),u.h),m=he(ya(Ze(m,d.wScale)),u.w)):(h=he(Ze(h,d.hScale),u.h),m=he(Ze(m,d.wScale),u.h));var g=Ke(f,Ze(h,2)),v=Ke(p,Ze(m,2)),b=Ae(f,Ze(h,2)),w=Ae(p,Ze(m,2)),S=yn([ae(g,[d.numBoxes,1]),ae(v,[d.numBoxes,1]),ae(b,[d.numBoxes,1]),ae(w,[d.numBoxes,1])],1);if(d.numKeypoints)for(var I=0;I<d.numKeypoints;++I){var E=d.keypointCoordOffset+I*d.numValuesPerKeypoint,T=void 0,R=void 0;d.reverseOutputOrder?(T=hn(qe(l,[0,E],[-1,1])),R=hn(qe(l,[0,E+1],[-1,1]))):(R=hn(qe(l,[0,E],[-1,1])),T=hn(qe(l,[0,E+1],[-1,1])));var $=Ae(he(Ze(T,d.xScale),u.w),u.x),D=Ae(he(Ze(R,d.yScale),u.h),u.y);S=yn([S,ae($,[d.numBoxes,1]),ae(D,[d.numBoxes,1])],1)}return S})}(a,e,n),o=Je(function(){var l=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(l=q1(r,-n.scoreClippingThresh,n.scoreClippingThresh)),l=Es(l)):l}),[4,m5(s,o,n)];case 1:return i=c.sent(),un([s,o]),[2,i]}})})}function m5(t,e,n){return wa(this,void 0,void 0,function(){var r,a,s,o,i,c,l,u,d,f,p,h;return Sa(this,function(m){switch(m.label){case 0:return r=[],[4,t.data()];case 1:return a=m.sent(),[4,e.data()];case 2:for(s=m.sent(),o=0;o<n.numBoxes;++o)if(!(n.minScoreThresh!=null&&s[o]<n.minScoreThresh||(i=o*n.numCoords,c=g5(a[i+0],a[i+1],a[i+2],a[i+3],s[o],n.flipVertically,o),(l=c.locationData.relativeBoundingBox).width<0||l.height<0))){if(n.numKeypoints>0)for((u=c.locationData).relativeKeypoints=[],d=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<d;f+=n.numValuesPerKeypoint)p=i+n.keypointCoordOffset+f,h={x:a[p+0],y:n.flipVertically?1-a[p+1]:a[p+1]},u.relativeKeypoints.push(h);r.push(c)}return[2,r]}})})}function g5(t,e,n,r,a,s,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:s?1-n:t,xMax:r,yMax:s?1-t:n,width:r-e,height:n-t}}}}var y5={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},v5={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},Jf={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},b5={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},w5={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},S5=.3,_5={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},x5={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},Uc,I5=function(){function t(e,n,r){this.detectorModel=n,this.maxFaces=r,e==="full"?(this.imageToTensorConfig=x5,this.tensorsToDetectionConfig=w5,this.anchors=mv(v5)):(this.imageToTensorConfig=_5,this.tensorsToDetectionConfig=b5,this.anchors=mv(y5));var a=xn(this.anchors.map(function(c){return c.width})),s=xn(this.anchors.map(function(c){return c.height})),o=xn(this.anchors.map(function(c){return c.xCenter})),i=xn(this.anchors.map(function(c){return c.yCenter}));this.anchorTensor={x:o,y:i,w:a,h:s}}return t.prototype.dispose=function(){this.detectorModel.dispose(),un([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(e,n){return n===void 0&&(n=!1),wa(this,void 0,void 0,function(){var r,a,s,o,i,c,l,u,d,f,p;return Sa(this,function(h){switch(h.label){case 0:return e==null?(this.reset(),[2,[]]):(r=Je(function(){var m=zt(h2(e),"float32");return n&&(m=hn(mf.flipLeftRight(Kr(m,0)),[0])),m}),a=d5(r,this.imageToTensorConfig),s=a.imageTensor,o=a.transformationMatrix,i=this.detectorModel.execute(s,"Identity:0"),c=f5(i),l=c.boxes,[4,h5([u=c.logits,l],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(d=h.sent()).length===0?(un([r,s,i,u,l]),[2,d]):[4,p5(d,this.maxFaces,S5)];case 2:return f=h.sent(),p=function(m,g){m===void 0&&(m=[]);var v,b=(v=g,[].concat.apply([],v));return m.forEach(function(w){var S=w.locationData;S.relativeKeypoints.forEach(function(D){var M=yv(b,[D.x,D.y]),z=M[0],F=M[1];D.x=z,D.y=F});var I=S.relativeBoundingBox,E=Number.MAX_VALUE,T=Number.MAX_VALUE,R=Number.MIN_VALUE,$=Number.MIN_VALUE;[[I.xMin,I.yMin],[I.xMin+I.width,I.yMin],[I.xMin+I.width,I.yMin+I.height],[I.xMin,I.yMin+I.height]].forEach(function(D){var M=yv(b,D),z=M[0],F=M[1];E=Math.min(E,z),R=Math.max(R,z),T=Math.min(T,F),$=Math.max($,F)}),S.relativeBoundingBox={xMin:E,xMax:R,yMin:T,yMax:$,width:R-E,height:$-T}}),m}(f,o),un([r,s,i,u,l]),[2,p]}})})},t.prototype.estimateFaces=function(e,n){return wa(this,void 0,void 0,function(){var r,a;return Sa(this,function(s){return r=p2(e),a=!!n&&n.flipHorizontal,[2,this.detectFaces(e,a).then(function(o){return o.map(function(i){for(var c=i.locationData.relativeKeypoints.map(function(h,m){return Ha(Ha({},h),{x:h.x*r.width,y:h.y*r.height,name:f2[m]})}),l=i.locationData.relativeBoundingBox,u=0,d=["width","xMax","xMin"];u<d.length;u++)l[d[u]]*=r.width;for(var f=0,p=["height","yMax","yMin"];f<p.length;f++)l[p[f]]*=r.height;return{keypoints:c,box:l}})})]})})},t}();function k5(t){return wa(this,void 0,void 0,function(){var e,n,r;return Sa(this,function(a){switch(a.label){case 0:return e=function(s){if(s==null)return Ha({},Jf);var o=Ha({},s);return o.modelType==null&&(o.modelType=Jf.modelType),o.maxFaces==null&&(o.maxFaces=Jf.maxFaces),o.detectorModelUrl==null&&(o.modelType==="full"?o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),o}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,s5(e.detectorModelUrl,{fromTFHub:n})];case 1:return r=a.sent(),[2,new I5(e.modelType,r,e.maxFaces)]}})})}function E5(t,e){return wa(this,void 0,void 0,function(){var n,r;return Sa(this,function(a){if(t===Uc.MediaPipeFaceDetector){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,k5(n)];if(n.runtime==="mediapipe")return[2,u5(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(t," is not a supported model name."))})})}(function(t){t.MediaPipeFaceDetector="MediaPipeFaceDetector"})(Uc||(Uc={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dt;(function(t){t[t.float32=0]="float32",t[t.int32=1]="int32",t[t.bool=2]="bool",t[t.string=3]="string",t[t.complex64=4]="complex64"})(dt||(dt={}));var lu;(function(t){t[t.linear=0]="linear",t[t.relu=1]="relu",t[t.relu6=2]="relu6",t[t.prelu=3]="prelu",t[t.leakyrelu=4]="leakyrelu",t[t.sigmoid=5]="sigmoid",t[t.elu=6]="elu"})(lu||(lu={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let m2;function T5(t){m2=t.wasm.cwrap(Zi,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function C5(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s,bias:o,preluActivationWeights:i}=e;if(a.dtype!=="float32"||s.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:d}=r,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(s.dataId).id;let h=0;if(o!=null){const R=n.dataIdMap.get(o.dataId);if(R.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${R.shape.length}.`);h=R.id}const m=i==null?0:n.dataIdMap.get(i.dataId).id,g=lu[u];if(g==null)throw new Error(`${u} activation not yet supported for FusedConv2D in the wasm backend.`);const v=c?a.shape[2]:a.shape[1],b=l?s.shape[1]:s.shape[2],w=At(a.shape.slice(0,-2),s.shape.slice(0,-2)),S=n.makeOutput([...w,v,b],a.dtype),I=n.dataIdMap.get(S.dataId).id,E=new Uint8Array(new Int32Array(a.shape).buffer),T=new Uint8Array(new Int32Array(s.shape).buffer);return m2(f,E,a.shape.length,p,T,s.shape.length,c,l,g,h,m,d||0,I),S}const N5={kernelName:Zi,backendName:"wasm",setupFunc:T5,kernelFunc:C5};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(t,e){let n;function r(s){n=s.wasm.cwrap(t,null,["number","number","number"])}function a(s){const{backend:o,inputs:{x:i}}=s,c=o.dataIdMap.get(i.dataId).id,l=o.makeOutput(i.shape,e||i.dtype),u=o.dataIdMap.get(l.dataId).id;return Y(l.shape)===0||n(c,dt[i.dtype],u),l}return{kernelName:t,backendName:"wasm",setupFunc:r,kernelFunc:a}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5=rt(rm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5=rt(cl);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5=rt(ll);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e,n){let r;function a(o){r=o.wasm.cwrap(t,null,["number","array","number","number","array","number","number","number"])}function s(o){const{backend:i,inputs:c}=o,{a:l,b:u}=c,d=i.dataIdMap.get(l.dataId).id,f=i.dataIdMap.get(u.dataId).id,p=n??l.dtype,h=At(l.shape,u.shape),m=i.makeOutput(h,p);if(Y(h)===0)return m;const g=new Uint8Array(new Int32Array(l.shape).buffer),v=new Uint8Array(new Int32Array(u.shape).buffer),b=i.dataIdMap.get(m.dataId).id;return(()=>r(d,g,l.shape.length,f,v,u.shape.length,dt[l.dtype],b))(),m}return{kernelName:t,backendName:"wasm",setupFunc:a,kernelFunc:s}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5=nn(xu);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g2;function O5(t){g2=t.wasm.cwrap(dl,null,["array","number","number","number"])}function F5(t){const{inputs:e,backend:n}=t,r=n.makeOutput(e[0].shape,e[0].dtype);if(Y(r.shape)===0)return r;const a=e.map(i=>n.dataIdMap.get(i.dataId).id),s=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return g2(s,a.length,dt[r.dtype],o),r}const M5={kernelName:dl,backendName:"wasm",setupFunc:O5,kernelFunc:F5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bf(t){const{inputs:{x:e},backend:n}=t;if(e.dtype==="string")return Mr(n.readSync(e.dataId),e.shape,e.dtype);const r=n.makeOutput(e.shape,e.dtype),a=n.typedArrayFromHeap(e);return n.typedArrayFromHeap(r).set(a),r}const P5={kernelName:Yl,backendName:"wasm",kernelFunc:bf};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y2;function B5(t){y2=t.wasm.cwrap(yo,null,["number","array","number","number","number","array","number"])}function ja(t){const{inputs:e,backend:n,attrs:r}=t,[a,s]=W5(e.x.shape,r.perm);let o=!0;for(let h=0;h<s.length;h++)s[h]!==h&&(o=!1);const i=L5(e.x.shape,r.perm),c={dataId:e.x.dataId,shape:a,dtype:e.x.dtype};if(o){const h=bf({inputs:e,backend:n});return h.shape=i,h}const l=n.makeOutput(i,c.dtype),u=n.dataIdMap.get(c.dataId).id,d=n.dataIdMap.get(l.dataId).id,f=new Uint8Array(new Int32Array(s).buffer),p=new Uint8Array(new Int32Array(c.shape).buffer);return y2(u,p,c.shape.length,dt[c.dtype],d,f,s.length),l}function L5(t,e){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t[e[r]];return n}function W5(t,e){const n=[],r=[];for(let a=0;a<t.length;++a)t[a]!==1&&n.push(t[a]),t[e[a]]!==1&&r.push(e[a]);for(let a=0;a<r.length;++a){let s=-1;for(let o=0;o<r.length;++o)r[o]>=a&&(s===-1||r[s]>r[o])&&(s=o);r[s]=a}return[n,r]}const z5={kernelName:yo,backendName:"wasm",kernelFunc:ja,setupFunc:B5};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Za(t,e,n){const r=t.shape,a=t.shape.length,s=Vt(e,r);let o=s;const i=pr(o,a);let c=null,l=!1;if(i!=null){const u=new Array(a);for(let p=0;p<u.length;p++)u[p]=r[i[p]];o=Mn(o.length,a),c=ja({inputs:{x:t},attrs:{perm:i},backend:n});const d=n.dataIdMap.get(t.dataId).id;n.dataIdMap.get(c.dataId).id!==d&&(l=!0)}return{transposed:c,originalAxes:s,axes:o,inputWasTransposed:l}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let v2;function V5(t){v2=t.wasm.cwrap(fl,null,["number, number, number"])}function H5(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n;let c=e.dataIdMap.get(o.dataId).id,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);if(p){const w=e.dataIdMap.get(u.dataId).id;l=u,c=w}const h=l.shape.length;Fn("all",d,h);const[m,g]=On(l.shape,d),v=Y(g),b=e.makeOutput(m,o.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;v2(c,v,w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const j5={kernelName:fl,backendName:"wasm",setupFunc:V5,kernelFunc:H5};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let b2;function U5(t){b2=t.wasm.cwrap(pl,null,["number, number, number"])}function G5(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n;let c=e.dataIdMap.get(o.dataId).id,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);if(p){const w=e.dataIdMap.get(u.dataId).id;l=u,c=w}const h=l.shape.length;Fn("any",d,h);const[m,g]=On(l.shape,d),v=Y(g),b=e.makeOutput(m,o.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;b2(c,v,w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const q5={kernelName:pl,backendName:"wasm",setupFunc:U5,kernelFunc:G5};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2(t){let e;function n(a){e=a.wasm.cwrap(t,null,["number","number","number","number","number"])}function r(a){const{backend:s,inputs:o,attrs:i}=a,{axis:c}=i,{x:l}=o,u=s.dataIdMap.get(l.dataId).id;let d=u,f=l;const{transposed:p,axes:h,inputWasTransposed:m}=Za(l,c,s);if(m){const I=s.dataIdMap.get(p.dataId).id;I!==u&&(f=p,d=I)}const g=f.shape.slice(0,-1),v=s.makeOutput(g,"int32"),b=s.dataIdMap.get(v.dataId).id,w=Y(v.shape),S=f.shape[h[0]];return e(d,dt[f.dtype],w,S,b),m&&s.disposeData(p.dataId),v}return{kernelName:t,backendName:"wasm",setupFunc:n,kernelFunc:r}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5=w2(am);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5=w2(sm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5=rt(hl);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5=rt(ml);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5=rt(gl);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5=nn(vl);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eP=rt(yl);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S2;function tP(t){S2=t.wasm.cwrap(bl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function nP(t){const{inputs:e,attrs:n,backend:r}=t,a=e.x,s=r.dataIdMap.get(a.dataId).id,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=n,u=Vr(a.shape,o,i,1,c,l),d=u.filterHeight,f=u.filterWidth,p=u.padInfo.top,h=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,v=u.strideHeight,b=u.strideWidth,w=u.inChannels;if(u.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);if(u.dilationWidth!==1||u.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${u.dilationHeight}, ${u.dilationWidth}].`);const S=r.makeOutput(u.outShape,"float32"),I=r.dataIdMap.get(S.dataId).id;return S2(s,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,b,w,I),S}const rP={kernelName:bl,backendName:"wasm",setupFunc:tP,kernelFunc:nP};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _2;function aP(t){_2=t.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function sP(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:c,dataFormat:l}=r,u=Ya(a.shape,s,o,1,i,c,l),d=n.makeOutput(u.outShape,a.dtype);return _2(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}const oP={kernelName:om,backendName:"wasm",setupFunc:aP,kernelFunc:sP};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let x2;function iP(t){x2=t.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function uP(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=r,u=Ya(s.shape,o,i,1,c,l),d=n.makeOutput(s.shape,s.dtype);return x2(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left,u.filterDepth,u.filterHeight,u.filterWidth),d}const cP={kernelName:U0,backendName:"wasm",setupFunc:iP,kernelFunc:uP};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let I2;function lP(t){I2=t.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dP(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c}=r,l=Vr(s.shape,o,i,1,c),u=n.makeOutput(s.shape,s.dtype);return I2(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left,l.filterHeight,l.filterWidth),u}const fP={kernelName:j0,backendName:"wasm",setupFunc:lP,kernelFunc:dP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jn(t){const{inputs:e,attrs:n}=t,{x:r}=e,{shape:a}=n,s=Y(r.shape),o=L0(a,s);return A(s===Y(o),()=>`new shape: ${o}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),t.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}const pP={kernelName:Im,backendName:"wasm",kernelFunc:jn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k2;function hP(t){k2=t.wasm.cwrap(wl,null,["number","array","number","number","array","number","number","number","number"])}function mP(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s}=e,{transposeA:o,transposeB:i}=r;if(a.dtype!=="float32"||s.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const c=a.shape.length,l=s.shape.length,u=o?a.shape[c-2]:a.shape[c-1],d=i?s.shape[l-1]:s.shape[l-2],f=o?a.shape[c-1]:a.shape[c-2],p=i?s.shape[l-2]:s.shape[l-1],h=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=Y(h),v=Y(m),w=At(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,p]);A(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${o} and transposeB=${i} must match.`);const S=o?[g,u,f]:[g,f,u],I=i?[v,p,d]:[v,d,p],E=jn({inputs:{x:a},backend:n,attrs:{shape:S}}),T=jn({inputs:{x:s},backend:n,attrs:{shape:I}}),R=n.dataIdMap.get(E.dataId).id,$=n.dataIdMap.get(T.dataId).id,D=o?E.shape[2]:E.shape[1],M=i?T.shape[1]:T.shape[2],z=Math.max(g,v),F=n.makeOutput([z,D,M],E.dtype),V=n.dataIdMap.get(F.dataId).id,H=new Uint8Array(new Int32Array(E.shape).buffer),U=new Uint8Array(new Int32Array(T.shape).buffer);return k2(R,H,E.shape.length,$,U,T.shape.length,o,i,V),n.disposeData(E.dataId),n.disposeData(T.dataId),F.shape=w,F}const gP={kernelName:wl,backendName:"wasm",setupFunc:hP,kernelFunc:mP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&A(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yP(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const vP=t=>{const{x:e}=t.inputs,n=t.backend;xe(e,"abs");let r=new Float32Array(Y(e.shape));const a=n.data.get(e.dataId).values;return r=yP(a),n.makeOutput(r,e.shape,e.dtype)},bP={kernelName:rm,backendName:"cpu",kernelFunc:vP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(t){return(e,n,r,a,s)=>{const o=At(e,n),i=o.length,c=Ie(o),l=Y(o),u=Dn(s,l),d=e.length,f=n.length,p=Ie(e),h=Ie(n),m=Pc(e,o),g=Pc(n,o);if(m.length+g.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],a[v%a.length]);else for(let v=0;v<u.length;++v){const b=Po(v,i,c),w=b.slice(-d);m.forEach(T=>w[T]=0);const S=Zr(w,d,p),I=b.slice(-f);g.forEach(T=>I[T]=0);const E=Zr(I,f,h);u[v]=t(r[S],a[E])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,i=n.makeTensorInfo(r.shape,"complex64"),c=n.data.get(i.dataId);return c.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",o)},i}const wP={kernelName:G0,backendName:"cpu",kernelFunc:nr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gc(t,e,n="float32"){if(n==="complex64"){const a=Gc(t,e,"float32"),s=Gc(t,e,"float32");return nr({inputs:{real:a,imag:s},backend:t})}const r=In(Y(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ea(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const SP={kernelName:Yl,backendName:"cpu",kernelFunc:ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ps(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const _P={kernelName:i1,backendName:"cpu",kernelFunc:Ps};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xP(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Vs([0],n),[s,o]=Yt((i,c)=>i!==c?1:0)(e,[],t,a,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Ua(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:s}=r;if(s==="complex64"){if(a.dtype==="complex64")return ea({inputs:{x:a},backend:n});const u=Gc(n,a.shape,a.dtype),d=Ua({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),f=nr({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(a.dtype==="complex64"){const u=Ps({inputs:{input:a},backend:n}),d=Ua({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!oT(a.dtype,s)){const u=ea({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=n.data.get(a.dataId).values,[i,c,l]=xP(o,a.shape,a.dtype,s);return n.makeTensorInfo(i,c,l)}const IP={kernelName:xl,backendName:"cpu",kernelFunc:Ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(t,e,n,r){return n==null?({inputs:a,backend:s})=>{const{a:o,b:i}=a,c=s;xe([o,i],t);const l=c.data.get(o.dataId).values,u=c.data.get(i.dataId).values,d=o.dtype==="string"?cu(l):l,f=o.dtype==="string"?cu(u):u,p=r||o.dtype,[h,m]=e(o.shape,i.shape,d,f,p);return c.makeTensorInfo(m,p,h)}:({inputs:a,backend:s})=>{const{a:o,b:i}=a,c=s;if(o.dtype==="complex64"||i.dtype==="complex64"){const l=Ua({inputs:{x:o},backend:c,attrs:{dtype:"complex64"}}),u=c.data.get(l.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,p=c.data.get(d.dataId).values,h=c.data.get(f.dataId).values,m=Ua({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),g=c.data.get(m.dataId),v=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,w=c.data.get(v.dataId).values,S=c.data.get(b.dataId).values,[I,E,T]=n(o.shape,i.shape,p,h,w,S),R=c.makeTensorInfo(T,"float32",I),$=c.makeTensorInfo(T,"float32",E),D=nr({inputs:{real:R,imag:$},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(R),c.disposeIntermediateTensorInfo($),D}else{const l=c.data.get(o.dataId).values,u=c.data.get(i.dataId).values,d=r||o.dtype,[f,p]=e(o.shape,i.shape,l,u,d);return c.makeTensorInfo(p,d,f)}}}function pg(t){return(e,n,r,a,s,o)=>{const i=At(e,n),c=Y(i),l=i.length,u=Ie(i),d=Dn("float32",c),f=Dn("float32",c),p=Pc(e,i),h=Pc(n,i),m=Co(r,a),g=Co(s,o),v=e.length,b=Ie(e),w=n.length,S=Ie(n);if(p.length+h.length===0)for(let I=0;I<d.length;I++){const E=I%m.length,T=I%g.length,R=t(m[E*2],m[E*2+1],g[T*2],g[T*2+1]);d[I]=R.real,f[I]=R.imag}else for(let I=0;I<d.length;I++){const E=Po(I,l,u),T=E.slice(-v);p.forEach(z=>T[z]=0);const R=Zr(T,v,b),$=E.slice(-w);h.forEach(z=>$[z]=0);const D=Zr($,w,S),M=t(m[R*2],m[R*2+1],g[D*2],g[D*2+1]);d[I]=M.real,f[I]=M.imag}return[d,f,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kP=Yt((t,e)=>t+e),EP=pg((t,e,n,r)=>({real:t+n,imag:e+r})),No=cn(xu,kP,EP),TP={kernelName:xu,backendName:"cpu",kernelFunc:No};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2(t,e,n,r,a){const s=Y(r),o=In(a,n);for(let i=0;i<t.length;i++){const c=t[i];if(c<0)throw new Error("Input x must be non-negative!");c>=a||(s>0?o[c]+=e[i]:o[c]+=1)}return o}function CP(t,e,n,r=!1){const a=t.shape[0],s=t.shape[1],o=Qe([a,n],e.dtype);for(let i=0;i<a;i++)for(let c=0;c<s;c++){const l=t.get(i,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,i,l):e.size>0?o.set(o.get(i,l)+e.get(i,c),i,l):o.set(o.get(i,l)+1,i,l))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NP=Yt((t,e)=>t&e),AP=cn(_l,NP),RP={kernelName:_l,backendName:"cpu",kernelFunc:AP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ja(t){return(e,n,r)=>{const a=tn(n,e.length);for(let s=0;s<e.length;++s)a[s]=t(e[s],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vt(t,e,n){const r=Ja(e);return Qa(t,r,n)}function Qa(t,e,n){return({inputs:r,attrs:a,backend:s})=>{const{x:o}=r;xe(o,t);const i=s,c=i.data.get(o.dataId).values;let l;if(o.dtype==="string"){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");l=cu(c)}else l=c;const u=n||o.dtype,d=e(l,u,a);return i.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $P=Ja(t=>Math.ceil(t)),DP=Qa(Il,$P),OP={kernelName:Il,backendName:"cpu",kernelFunc:DP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2(t,e,n,r){const a=tn(n,Y(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const i=Y(o.shape);a.set(o.vals,s),s+=i})}else{let s=0;t.forEach(o=>{const i=n==="string"?cu(o.vals):o.vals;let c=0;for(let l=0;l<o.shape[0];++l){const u=l*e[1]+s;for(let d=0;d<o.shape[1];++d)a[u+d]=i[c++]}s+=o.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FP=Yt((t,e)=>t===e?1:0),C2=cn(Wl,FP,null,"bool"),MP={kernelName:Wl,backendName:"cpu",kernelFunc:C2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PP=Ja(t=>Math.exp(t)),N2=Qa(zl,PP,"float32"),BP={kernelName:zl,backendName:"cpu",kernelFunc:N2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LP=Ja(t=>Math.expm1(t)),WP=Qa(Vl,LP),zP={kernelName:Vl,backendName:"cpu",kernelFunc:WP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VP=Ja(t=>Math.floor(t)),HP=Qa(jl,VP),jP={kernelName:jl,backendName:"cpu",kernelFunc:HP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UP=Yt((t,e)=>Math.floor(t/e)),GP=cn(Ul,UP,null,"int32"),qP={kernelName:Ul,backendName:"cpu",kernelFunc:GP};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KP(t,e,n,r,a,s,o,i,c){const l=Qe([r,s],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let p=0;p<a;p++){const h=t[u*a+p];f+=h*o[p],d.push(h)}if(f<0||f>=c/s)throw new Error(`Invalid indices: ${d} does not index into ${i}`);for(let p=0;p<s;p++)l.values[u*s+p]=e.get(...e.indexToLoc(f*s+p))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XP(t,e,n){const r=Qe(n,t.dtype);for(let a=0;a<r.size;++a){const o=r.indexToLoc(a).slice(),i=o[0],c=o[2],l=e.locToIndex([i,c]);o[2]=e.values[l];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YP=Yt((t,e)=>t>e?1:0),ZP=cn(Kl,YP,null,"bool"),JP={kernelName:Kl,backendName:"cpu",kernelFunc:ZP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP=Yt((t,e)=>t>=e?1:0),e8=cn(Xl,QP,null,"bool"),t8={kernelName:Xl,backendName:"cpu",kernelFunc:e8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8=Yt((t,e)=>t<e?1:0),r8=cn(td,n8,null,"bool"),a8={kernelName:td,backendName:"cpu",kernelFunc:r8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8=Yt((t,e)=>t<=e?1:0),o8=cn(nd,s8,null,"bool"),i8={kernelName:nd,backendName:"cpu",kernelFunc:o8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(t,e,n){const r=(e-t)/(n-1),a=In(n,"float32");a[0]=t;for(let s=1;s<a.length;s++)a[s]=a[s-1]+r;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c8=Ja(t=>Math.log(t)),l8=Qa(ad,c8),d8={kernelName:ad,backendName:"cpu",kernelFunc:l8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t,e,n,r){const a=Dn(r,Y(n));for(let s=0;s<a.length;++s){const o=s*e;let i=t[o];for(let c=0;c<e;++c){const l=t[o+c];(Number.isNaN(l)||l>i)&&(i=l)}a[s]=i}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8=Yt((t,e)=>Math.max(t,e)),h8=cn(dd,p8),m8={kernelName:dd,backendName:"cpu",kernelFunc:h8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8=Yt((t,e)=>Math.min(t,e)),y8=cn(md,g8),v8={kernelName:md,backendName:"cpu",kernelFunc:y8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2=Yt((t,e)=>t*e),b8=pg((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),wf=cn(bd,A2,b8),w8={kernelName:bd,backendName:"cpu",kernelFunc:wf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8(t,e,n){const r=Vm(-1,n);return A2([],e,r,t,n)}function _8(t){const{inputs:e,backend:n}=t,{x:r}=e;xe(r,"neg");const a=n.data.get(r.dataId).values,[s,o]=S8(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const x8={kernelName:wm,backendName:"cpu",kernelFunc:_8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8=Yt((t,e)=>t!==e?1:0),k8=cn(wd,I8,null,"bool"),E8={kernelName:wd,backendName:"cpu",kernelFunc:k8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2(t,e,n,r,a){const s=e.length,o=Y(e),i=Ie(e),c=Ie(a),l=Dn(n,Y(a));for(let u=0;u<o;++u){const d=Po(u,s,i),f=new Array(d.length);for(let h=0;h<f.length;h++)f[h]=d[r[h]];const p=Zr(f,s,c);l[p]=t[u]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gn(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:s}=n;xe(a,"transpose");const o=a.shape.length,i=new Array(o);for(let d=0;d<i.length;d++)i[d]=a.shape[s[d]];const c=r.data.get(a.dataId).values,l=R2(c,a.shape,a.dtype,s,i);return{dataId:r.write(l,i,a.dtype),shape:i,dtype:a.dtype}}const T8={kernelName:yo,backendName:"cpu",kernelFunc:Gn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(t,e,n,r){const[a,s]=On(t,r),o=Bo(e,"int32"),i=In(Y(a),o),c=Y(s);for(let l=0;l<i.length;++l){const u=l*c;let d=1;for(let f=0;f<c;++f)d*=n[u+f];i[l]=d}return{outVals:i,outShape:a,outDtype:o}}function N8(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r;xe(a,"prod");const i=a.shape.length,c=Vt(s,a.shape),l=pr(c,i);let u=c,d=a;const f=[];l!=null&&(d=Gn({inputs:{x:a},backend:n,attrs:{perm:l}}),f.push(d),u=Mn(u.length,i));const p=n.data.get(d.dataId).values,{outVals:h,outShape:m,outDtype:g}=C8(d.shape,d.dtype,p,u);let v=m;return o&&(v=vn(m,c)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,g,h)}const A8={kernelName:Cd,backendName:"cpu",kernelFunc:N8};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const s=Po(a,e.length,Ie(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function $8(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function D8(t,e,n,r){const a=[];let s=0;const o=e.length-1+n.length,i=new Array(o).fill(null).map(()=>[0]);$8(n,r);let c=1;for(let l=0;l<e.length-1;++l){c*=e[l];const u=e[l+1];for(let d=1;d<c+1;++d)i[l].push(d*u)}for(let l=0;l<t.length;++l){let u=t[l],d=t[l]+1;for(let f=0;f<n.length;++f){const p=n[f],h=f+e.length-1;if(h>=0){const m=i[h],g=m[m.length-1]-p[u];for(let v=u;v<d;++v)i[h].push(p[v+1]+g)}u=p[u],d=p[d]}d!==u&&(a.push([u,d]),s+=d-u)}return{outSplits:i,valueSlices:a,numValues:s}}function O8(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=tn("int32",r);e.push(a),t[n].forEach((s,o)=>a[o]=s)}return e}function vv(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function F8(t,e,n,r,a,s){const o=vv(e,2)[1],i=vv(s,2)[1];let c=0;for(const l of n)for(let u=l[0];u<l[1];++u){for(let d=0;d<r;++d)a[c*i+d]=t[u*o+d];++c}}function M8(t,e,n,r,a){const s=e.slice();s[0]=a;const o=tn(n,Y(s)),i=t.length,c=i===0?0:i/e[0];return F8(t,e,r,c,o,s),[o,s]}function P8(t,e,n,r,a,s,o,i){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const c=e[0][0]-1;if(R8(s,o,c),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:u,valueSlices:d,numValues:f}=D8(s,o,t,l),p=O8(u),h=M8(n,r,a,d,f);return[p,h[0],h[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bv=2147483647;function B8(t,e,n,r,a,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const i=e.length===0,c=a.length===0,l=o.length===0,u=[];i||u.push(e[0]),c||u.push(a[0]),l||u.push(o[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=tn("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const v=i?t[0]:t[g],b=c?r[0]:r[g],w=l?s[0]:s[g];if(w===0)throw new Error("Requires delta != 0");let S;if(w>0&&b<v||w<0&&b>v)S=0;else if(S=Math.ceil(Math.abs((b-v)/w)),S>bv)throw new Error(`Requires ((limit - start) / delta) <= ${bv}`);f[g+1]=f[g]+S}const p=f[d],h=tn(n,p);let m=0;for(let g=0;g<d;++g){const v=f[g+1]-f[g];let b=i?t[0]:t[g];const w=l?s[0]:s[g];for(let S=0;S<v;++S)h[m++]=b,b+=w}return[f,h]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gr=Xr;class qc{constructor(e,n,r,a,s,o,i,c,l,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=i,this.rowPartitionValues=c,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=iM(u),this.raggedRank=uM(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===gr.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===gr.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case gr.VALUE_ROWIDS:return qc.getMaxWidthValueRowID(n);case gr.ROW_SPLITS:return qc.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${gr[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const s=e[a+1]-e[a];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],s=0;for(let o=1;o<n;++o){const i=e[o];i!==a&&(a=i,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Sv(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;cM(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=oM(this.raggedRank,a,n);o[0]<0&&(o[0]=e);for(let i=1;i<=this.raggedRank;++i)o[i]<0&&(o[i]=this.getMaxWidth(i));return o}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),s=[];let o=0;for(let i=0;i<a;++i,o+=n)s.push(o);for(let i=a;i<e;++i)s.push(-1);return A(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,a){const s=e.length,o=[];for(let i=0;i<s-1;++i){const c=e[i+1]-e[i];let l=Math.min(a,c),u=n[i];u===-1&&(l=0);for(let d=0;d<l;++d)o.push(u),u+=r;for(let d=0;d<c-l;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const s=e.length,o=[];if(s===0)return[];let i=0,c=e[0];if(c>=n.length)throw new Error(`Got currentValueRowId=${c}, which is not less than ${n.length}`);let l=n[c];o.push(l);for(let u=1;u<s;++u){const d=e[u];if(d===c)l>=0&&(++i,i<a?l+=r:l=-1);else{if(i=0,c=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);l=n[d]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case gr.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,a);case gr.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,a);default:throw new Error(`Unsupported partition type: ${gr[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case gr.FIRST_DIM_SIZE:return e[0];case gr.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case gr.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${gr[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let c=a.length-2;c>=0;--c)a[c]=a[c+1]*r[c+1];const s=Sv(r,!1),o=tn(this.valuesDType,Y(s));if(a[0]*r[0]>0){let c=this.calculateFirstParentOutputIndex(n,a[0],r[0]);for(let l=1;l<=this.raggedRank;++l)c=this.calculateOutputIndex(l-1,c,a[l],r[l]);this.setOutput(this.raggedRank,c,o,s)}return[s,o]}setOutput(e,n,r,a){if(r.length===0)return;const s=this.values,o=r;let i=a.slice();i=i.slice(e+1);const c=Y(i),l=n.length;let u=this.defaultValue;if(u.length!==c&&u.length!==1){const h=this.defaultValueShape;Je(()=>{const m=ae(u,h);u=Li(m,i).dataSync()})}let d=0,f=0,p=0;for(let h=0;h<=l;++h){let m=h<l?n[h]:-1;if(m===p){++p;continue}if(f<p){const g=s.subarray(d*c),v=o.subarray(f*c),b=(p-f)*c;wv(v,g,b)}if(h>=l){const g=r.length;m=Math.floor(g/c)}if(m>p)if(this.defaultValue.length===1)o.subarray(p*c,m*c).fill(this.defaultValue[0]),p=m;else for(;m>p;){const g=o.slice(p*c);wv(g,u,c),++p}m<0?(d=h+1,f=p):(d=h,f=p,p=f+1)}}}function wv(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function Sv(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function L8(t,e,n,r,a,s,o,i,c,l){return new qc(t,e,n,r,a,s,o,i,c,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2(t,e,n,r){const a=t===e,s=t<e&&n<0,o=e<t&&n>1;if(a||s||o)return In(0,r);const i=Math.abs(Math.ceil((e-t)/n)),c=In(i,r);e<t&&n===1&&(n=-1),c[0]=t;for(let l=1;l<c.length;l++)c[l]=c[l-1]+n;return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W8=Ja(t=>1/Math.sqrt(t)),z8=Qa(Md,W8),V8={kernelName:Md,backendName:"cpu",kernelFunc:z8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mo(t,e,n,r,a,s,o,i,c,l){const u=[r/a,a],d=t.values,f=e.values;if(r===0)return Qe(n,e.dtype);const p=c instanceof on?c:Qe(u,e.dtype);typeof c=="string"||typeof c=="number"?p.values.fill(c):typeof c=="boolean"&&p.values.fill(+c);for(let h=0;h<s;h++){const m=[];let g=0;for(let v=0;v<o;v++){const b=d[h*o+v];m.push(b),g+=b*i[v]}if(g<0||g>=r/a)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let v=0;v<a;v++)l?p.values[g*a+v]+=f[h*a+v]:p.values[g*a+v]=e.rank===0?f[0]:f[h*a+v]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D2=vt(jd,t=>1/(1+Math.exp(-t))),H8={kernelName:jd,backendName:"cpu",kernelFunc:D2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ph(t,e,n,r,a){const s=Ww(r,e,n),o=Y(n),i=Ie(r);if(s){const d=zw(e,i);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const c=a==="string"?cu(t):t,l=Qe(r,a,c),u=Qe(n,a);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),p=f.map((h,m)=>h+e[m]);u.set(l.get(...p),...f)}return a==="string"?u2(u.values):u.values}function Bs(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,size:o}=r;xe(a,"slice");const[i,c]=Vw(a,s,o);aM(a,i,c);const l=n.data.get(a.dataId).values,u=ph(l,i,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,u)}const j8={kernelName:Cm,backendName:"cpu",kernelFunc:Bs};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8(t,e,n,r,a,s,o){const i=e[0],c=s[0],l=new Array(c),u=new Array(i),d=e[1];if(c===0){if(i!==0)throw new Error(Yw(i));const g=tn(n,0),v=tn(a,0);return[g,[0,d],v,l,u]}let f=!0,p=0;const h=new Array(c).fill(0);for(let g=0;g<i;++g){const v=t[g*d];if(v<0)throw new Error(Zw(g,v));if(v>=c)throw new Error(Jw(g,v,c));++h[v],f=f&&v>=p,p=v}let m=!0;for(let g=0;g<c;++g){const v=h[g]===0;l[g]=v,m=m&&!v,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(m&&f){const g=t,v=r;for(let b=0;b<i;++b)u[b]=b;return[g,[i,d],v,l,u]}else{const g=h[c-1],v=tn(n,g*d),b=tn(a,g),w=new Array(c).fill(0);for(let S=0;S<i;++S){const I=t[S*d],E=w[I],T=(I===0?0:h[I-1])+E;w[I]++;for(let R=0;R<d;++R)v[T*d+R]=t[S*d+R];b[T]=r[S],u[S]=T}for(let S=0;S<c;++S)if(w[S]===0){const E=S===0?0:h[S-1];v[E*d+0]=S;for(let T=1;T<d;++T)v[E*d+T]=0;b[E]=o}return[v,[g,d],b,l,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(t,e,n,r,a){const s=Y(r),o=e[0],i=a.length,c=[];let l=1,u=-1;for(let g=0;g<i;++g){const v=a[g];if(v===-1){if(u!==-1)throw new Error(Qw(u,g));u=g,c.push(1)}else{if(v<0)throw new Error(e2(g,v));l*=v,c.push(v)}}if(u!==-1){if(l<=0)throw new Error(t2());const g=Math.trunc(s/l);if(l*g!==s)throw new Error(n2(r,c));c[u]=g}if(Y(c)!==s)throw new Error(r2(r,c));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let g=f-2;g>=0;--g)p[g]=p[g+1]*r[g+1]}const h=[];if(i>0){h[i-1]=1;for(let g=i-2;g>=0;--g)h[g]=h[g+1]*c[g+1]}const m=tn(n,o*i);for(let g=0;g<o;++g){let v=0;for(let b=0;b<f;++b)v+=t[g*f+b]*p[b];for(let b=0;b<i;++b)m[g*i+b]=Math.trunc(v/h[b]),v%=h[b]}return[m,[o,i],c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2(t,e,n,r,a,s=!1,o=0){const i=r.length,c=[e[0],t.length/e[0]],l=c[1],d=i>0?a[i-1]+1:0;if(d<0)throw new Error(Vc());const f=e.slice();f[0]=d;const p=f.reduce((w,S)=>w*S,1),h=tn(n,p);if(i===0)return d>0&&h.fill(o),[h,f];if(d<=0)throw new Error(Vc());let m=0,g=1,v=0,b=a[m];for(;;){let w=0;if(g<i){if(w=a[g],b===w){++g;continue}if(b>=w)throw new Error(a2())}if(b<0||b>=d)throw new Error(s2(b,d));b>v&&h.fill(o,v*l,b*l);for(let S=m;S<g;++S){const I=r[S];if(I<0||I>=c[0])throw new Error(o2(S,r[S],c[0]));for(let E=0;E<l;E++)h[b*l+E]+=t[I*l+E]}if(s)for(let S=0;S<l;S++)h[b*l+S]/=g-m;if(m=g,++g,v=b+1,b=w,g>i)break}return v<d&&h.fill(o,v*l,d*l),[h,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8=vt(Gd,t=>Math.sqrt(t)),K8={kernelName:Gd,backendName:"cpu",kernelFunc:q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8=Yt((t,e)=>{const n=t-e;return n*n}),Y8=cn(Zd,X8),Z8={kernelName:Zd,backendName:"cpu",kernelFunc:Y8};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8=Ja((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=e;return t.replace(new RegExp(n,r?"g":""),a)}),Q8=Qa(Om,J8),eB={kernelName:Om,backendName:"cpu",kernelFunc:Q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tB(t,e,n,r){const a=Qe(t,e.dtype);for(let s=0;s<a.size;s++){const o=a.indexToLoc(s),i=new Array(o.length);for(let c=0;c<i.length;c++)i[c]=o[c]*n[c]+r[c];a.set(e.get(...i),...o)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nB{constructor(e,n,r,a,s,o){this.separator=ks(e),this.nGramWidths=n,this.leftPad=ks(r),this.rightPad=ks(a),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,s,o){for(let i=0;i<s;++i){const c=this.getPadWidth(o),l=Math.max(0,c-i),u=Math.max(0,c-(s-(i+1))),d=o-(l+u),f=n+(l>0?0:i-c);let p=0;p+=l*this.leftPad.length;for(let b=0;b<d;++b)p+=e[f+b].length;p+=u*this.rightPad.length;const h=l+u+d-1;p+=h*this.separator.length,r[a+i]=new Uint8Array(p);const m=r[a+i];let g=0;const v=b=>b.forEach(w=>m[g++]=w);for(let b=0;b<l;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(e[f+b]),v(this.separator);if(d>0){v(e[f+d-1]);for(let b=0;b<u;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<u-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let c=n[0];if(c!==0)throw new Error(`First split value must be 0, got ${c}`);for(let l=1;l<a;++l){let u=n[l]>=c;if(u=u&&n[l]<=r,!u)throw new Error(`Invalid split value ${n[l]}, must be in [${c}, ${r}]`);c=n[l]}if(c!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${c}`)}const s=a-1,o=tn("int32",a);if(r===0||a===0){const c=new Array(r);for(let l=0;l<=s;++l)o[l]=0;return[c,o]}o[0]=0;for(let c=1;c<=s;++c){const l=n[c]-n[c-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(l,d)}),this.preserveShort&&l>0&&u===0&&(u=1),o[c]=o[c-1]+u}const i=new Array(o[s]);for(let c=0;c<s;++c){const l=n[c];let u=o[c];if(this.nGramWidths.forEach(d=>{const f=n[c+1]-n[c],p=this.getNumNGrams(f,d);this.createNGrams(e,l,i,u,p,d),u+=p}),this.preserveShort&&u===o[c]){const d=n[c+1]-n[c];if(d===0)continue;const f=d+2*this.padWidth,p=1;this.createNGrams(e,l,i,u,p,f)}}return[i,o]}}function F2(t,e,n,r,a,s,o,i){return new nB(n,r,a,s,o,i).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rB(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const i=t.subarray(0,o);(!n||i.length!==0)&&r.push(i),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(a,s);(!n||o.length!==0)&&r.push(o),a=s+1}}function M2(t,e,n){const r=t.length,a=[];let s=0,o=0;const i=new Array(r);for(let f=0;f<r;++f){const p=a.length;rB(t[f],e,n,a);const h=a.length-p;i[f]=h,s+=h,o=Math.max(o,h)}const c=tn("int32",s*2),l=new Array(s),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let p=0;p<i[f];++p)c[d*2]=f,c[d*2+1]=p,l[d]=a[d],++d;return[c,l,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2(t,e){const n=tn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=kT(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aB=Yt((t,e)=>t-e),sB=pg((t,e,n,r)=>({real:t-n,imag:e-r})),hg=cn(Qd,aB,sB),oB={kernelName:Qd,backendName:"cpu",kernelFunc:hg};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iB(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Qe(n,t.dtype);for(let a=0;a<r.values.length;++a){const s=r.indexToLoc(a),o=new Array(t.rank);for(let c=0;c<o.length;c++)o[c]=s[c]%t.shape[c];const i=t.locToIndex(o);r.values[a]=t.values[i]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $i=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function B2(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,c=e-n+1,l=Math.log(i),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(i-u)/i)*Math.sign(c-i/2),f=Math.max(n,Math.floor(e-c*u/i+d)),p=Math.min(r,Math.floor(e+(i-c)*u/i+d));B2(t,e,f,p)}const a=t[e];let s=n,o=r;for(fi(t,n,e),$i(t[r],a)>0&&fi(t,n,r);s<o;){for(fi(t,s,o),s++,o--;$i(t[s],a)<0;)s=s+1;for(;$i(t[o],a)>0;)o=o-1}$i(t[n],a)===0?fi(t,n,o):(o=o+1,fi(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function uB(t,e,n,r,a){const s=e[e.length-1],[o,i]=[t.length/s,s],c=Dn(n,o*r),l=Dn("int32",o*r);for(let d=0;d<o;d++){const f=d*i,p=t.subarray(f,f+i);let h=new Array(p.length);p.forEach((b,w)=>h[w]={value:b,index:w}),r<h.length&&(B2(h,r),h=h.slice(0,r)),a&&h.sort($i);const m=d*r,g=c.subarray(m,m+r),v=l.subarray(m,m+r);for(let b=0;b<r;b++)g[b]=h[b].value,v[b]=h[b].index}const u=e.slice();return u[u.length-1]=r,[Qe(u,n,c),Qe(u,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2(t,e,n,r){const a=Vt(e,n)[0],s=[1,n[0],1];for(let h=0;h<a;h++)s[0]*=n[h];s[1]=n[a];for(let h=a+1;h<n.length;h++)s[2]*=n[h];const o=new Map,i=new Int32Array(n[a]),c=new on(s,r,t),l=[],u=s[0]===1&&s[2]===1;for(let h=0;h<n[a];h++){let m;if(u)m=t[h].toString();else{const v=[];for(let b=0;b<s[0];b++)for(let w=0;w<s[2];w++)v.push(c.get(b,h,w));m=v.join(",")}const g=o.get(m);if(g!=null)i[h]=g;else{const v=o.size;o.set(m,v),i[h]=v,l.push(h)}}const d=s.slice();d[1]=o.size;const f=new on(d,r);l.forEach((h,m)=>{for(let g=0;g<s[0];g++)for(let v=0;v<s[2];v++)f.set(c.get(g,h,v),g,m,v)});const p=n.slice();return p[a]=d[1],{outputValues:f.values,outputShape:p,indices:i}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(t){const{inputs:{x:e},attrs:{begin:n,size:r},backend:a}=t,[s,o]=Vw(e,n,r),i=Ww(e.shape,s,o),c=a.readSync(e.dataId),l=a.makeOutput(o,e.dtype),u=Ie(e.shape),d=a.dataIdMap.get(l.dataId);if(i){const h=zw(s,u);return e.dtype==="string"?d.stringBytes=c.slice(h,h+Y(o)):a.typedArrayFromHeap(l).set(c.subarray(h,h+Y(o))),l}if(e.dtype==="string"){const h=ph(c,s,o,e.shape,e.dtype);return d.stringBytes=h,l}const f=a.typedArrayFromHeap(l),p=e.shape.length;if(p===2)cB(c,u[0],f,s,o);else if(p===3)lB(c,u[0],u[1],f,s,o);else if(p===4)dB(c,u[0],u[1],u[2],f,s,o);else{const h=ph(c,s,o,e.shape,e.dtype);f.set(h)}return l}function cB(t,e,n,r,a){let s=0;const o=r[0],i=r[1],c=o+a[0];for(let l=o;l<c;l++){const u=l*e+i;n.set(t.subarray(u,u+a[1]),s),s+=a[1]}}function lB(t,e,n,r,a,s){let o=0;const i=a[0],c=a[1],l=a[2],u=i+s[0],d=c+s[1];for(let f=i;f<u;f++)for(let p=c;p<d;p++){const h=f*e+p*n+l;r.set(t.subarray(h,h+s[2]),o),o+=s[2]}}function dB(t,e,n,r,a,s,o){let i=0;const c=s[0],l=s[1],u=s[2],d=c+o[0],f=l+o[1],p=u+o[2],h=s[3];for(let m=c;m<d;m++)for(let g=l;g<f;g++)for(let v=u;v<p;v++){const b=m*e+g*n+v*r+h;a.set(t.subarray(b,b+o[3]),i),i+=o[3]}}const fB={kernelName:Cm,backendName:"wasm",kernelFunc:Ls};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,crops:o}=r,i=s.reduce((v,b)=>v*b),c=gf(a.shape,s,i),l=yf(c.length,s.length),u=vf(a.shape,s,i),d=Gw(o,s.length),f=qw(u,o,s.length),p=jn({inputs:{x:a},backend:n,attrs:{shape:c}}),h=ja({inputs:{x:p},backend:n,attrs:{perm:l}}),m=jn({inputs:{x:h},backend:n,attrs:{shape:u}}),g=Ls({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),g}const hB={kernelName:im,backendName:"wasm",kernelFunc:pB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let W2;function mB(t){W2=t.wasm.cwrap(Sl,null,["number","number","boolean","number","number","number"])}function gB(t){const{backend:e,inputs:n,attrs:r}=t,{x:a,weights:s}=n,{size:o}=r,i=s.shape.reduce((d,f)=>d*f,1)!==0,c=a.shape.length===1?[o]:[a.shape[0],o],l=e.makeOutput(c,s.dtype);function u(d){return e.dataIdMap.get(d.dataId).id}return W2(u(a),o,i,u(s),dt[s.dtype],u(l)),l}const yB={kernelName:Sl,backendName:"wasm",setupFunc:mB,kernelFunc:gB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vB=nn(_l);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bB(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,s=n.typedArrayFromHeap(r),o=n.typedArrayFromHeap(a),i=At(Array.from(s),Array.from(o));return n.makeOutput([i.length],"int32",void 0,new Int32Array(i))}const wB={kernelName:um,backendName:"wasm",kernelFunc:bB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function es(t){const{inputs:{x:e},attrs:{dtype:n},backend:r}=t,a=r.makeOutput(e.shape,n),s=r.typedArrayFromHeap(e);return r.typedArrayFromHeap(a).set(s),a}const SB={kernelName:xl,backendName:"wasm",kernelFunc:es};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _B=rt(Il);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z2;function xB(t){z2=t.wasm.cwrap(Iu,null,["number","number","number","number"])}function IB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:s,clipValueMax:o}=r,i=n.dataIdMap.get(a.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id;return z2(i,s,o,l),c}const kB={kernelName:Iu,backendName:"wasm",setupFunc:xB,kernelFunc:IB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2(t){const{inputs:e,backend:n}=t,r=Vt(t.attrs.axis,e[0].shape)[0],a=e.map(p=>p.shape);jw(a,r);let s=So(e.map(p=>p.shape),r);const o=e.filter(p=>Y(p.shape)>0);if(o.length===1)return bf({inputs:{x:o[0]},backend:n});const i=n.makeOutput(s,e[0].dtype);if(Y(s)===0)return i;if(o[0].dtype==="string"){const p=o.map(w=>{const I=[-1,Y(w.shape.slice(r))];return jn({inputs:{x:w},backend:n,attrs:{shape:I}})}),h=p.map(w=>({vals:n.readSync(w.dataId),shape:w.shape}));s=So(p.map(w=>w.shape),1);const m=p[0].shape[0]===1,g=T2(h,s,e[0].dtype,m),v=So(o.map(w=>w.shape),r);i.shape=v;const b=n.dataIdMap.get(i.dataId);return b.stringBytes=u2(g),p.forEach(w=>n.disposeData(w.dataId)),i}const c=Y(o[0].shape.slice(0,r));let l=0;const u=o.map(p=>{const h=Y(p.shape.slice(r));return l+=h,h}),d=o.map(p=>n.typedArrayFromHeap(p)),f=n.typedArrayFromHeap(i);for(let p=0;p<c;p++){let h=p*l;for(let m=0;m<d.length;m++){const g=u[m],v=p*g,b=d[m].subarray(v,v+g);f.set(b,h),h+=g}}return i}const EB={kernelName:cm,backendName:"wasm",kernelFunc:V2};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H2;function TB(t){H2=t.wasm.cwrap(kl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function CB(t){const{inputs:e,attrs:n,backend:r}=t,{x:a,filter:s}=e,o=r.dataIdMap.get(a.dataId).id,i=r.dataIdMap.get(s.dataId).id,{strides:c,dilations:l,pad:u,dimRoundingMode:d,dataFormat:f}=n,p=Wo(f),h=Kn(a.shape,s.shape,c,l,u,d,!1,p),m=h.filterHeight,g=h.filterWidth,v=h.padInfo.top,b=h.padInfo.right,w=h.padInfo.bottom,S=h.padInfo.left,I=h.dilationHeight,E=h.dilationWidth,T=h.strideHeight,R=h.strideWidth,$=h.inChannels,D=h.outChannels,M=h.padInfo.type==="SAME"?1:0;if(h.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const z=r.makeOutput(h.outShape,"float32"),F=r.dataIdMap.get(z.dataId).id;return H2(o,a.shape[0],a.shape[1],a.shape[2],i,m,g,v,b,w,S,M,I,E,T,R,$,D,F),z}const NB={kernelName:kl,backendName:"wasm",setupFunc:TB,kernelFunc:CB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let j2;function AB(t){j2=t.wasm.cwrap(El,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RB(t){const{backend:e,inputs:n,attrs:r}=t,{dy:a,filter:s}=n,{strides:o,pad:i,dataFormat:c,dimRoundingMode:l,inputShape:u}=r,d=1,f=Wo(c),p=Kn(u,s.shape,o,d,i,l,!1,f),{batchSize:h,filterHeight:m,filterWidth:g,inChannels:v,inHeight:b,inWidth:w,outChannels:S,outHeight:I,outWidth:E,strideHeight:T,strideWidth:R}=p,$=m-1-p.padInfo.top,D=g-1-p.padInfo.left,M=p.dataFormat==="channelsLast",z=Ie(p.inShape),F=Ie(a.shape),[V,H,U]=Ie(s.shape),Z=z[0],q=M?z[1]:z[2],X=M?z[2]:1,se=M?1:z[1],te=F[0],ce=M?F[1]:F[2],ee=M?F[2]:1,ne=M?1:F[1],ie=e.makeOutput(p.inShape,"float32"),ge=e.dataIdMap.get(ie.dataId).id,be=e.dataIdMap.get(a.dataId).id,pe=e.dataIdMap.get(s.dataId).id;return j2(be,pe,h,m,g,b,w,v,I,E,S,T,R,$,D,V,H,U,Z,q,X,se,te,ce,ee,ne,ge),ie}const $B={kernelName:El,backendName:"wasm",setupFunc:AB,kernelFunc:RB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let U2;function DB(t){U2=t.wasm.cwrap(Tl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function OB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:o,pad:i,dilations:c}=r;if(a.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${a.dtype}`);if(s.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${s.dtype}`);const l=Hs(a.shape,s.shape,o,c,i),u=n.makeOutput(l.outShape,a.dtype);return U2(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(u.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),u}const FB={kernelName:Tl,backendName:"wasm",setupFunc:DB,kernelFunc:OB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G2;function MB(t){G2=t.wasm.cwrap(lm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function PB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:o,pad:i,filterShape:c}=r;if(a.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${a.dtype}`);if(s.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${s.dtype}`);const l=Hs(a.shape,c,o,1,i),u=n.makeOutput(l.filterShape,s.dtype);return G2(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(u.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),u}const BB={kernelName:lm,backendName:"wasm",setupFunc:MB,kernelFunc:PB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q2;function LB(t){q2=t.wasm.cwrap(Cl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function WB(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{pad:o,strides:i,inputShape:c}=r;if(a.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${a.dtype}`);if(s.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${s.dtype}`);const l=Hs(c,s.shape,i,1,o),u=n.makeOutput(l.inShape,a.dtype);return q2(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,l.batchSize,l.inDepth,l.inHeight,l.inWidth,l.inChannels,l.outDepth,l.outHeight,l.outWidth,l.outChannels,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.filterDepth,l.filterHeight,l.filterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),u}const zB={kernelName:Cl,backendName:"wasm",setupFunc:LB,kernelFunc:WB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VB=rt(Nl);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HB=rt(Al);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hh;(function(t){t[t.bilinear=0]="bilinear",t[t.nearest=1]="nearest"})(hh||(hh={}));let K2;function jB(t){K2=t.wasm.cwrap(Dl,null,["number","number","number","number","array","number","number","number","number","number"])}function UB(t){const{backend:e,inputs:n,attrs:r}=t,{method:a,extrapolationValue:s,cropSize:o}=r,{image:i,boxes:c,boxInd:l}=n,u=c.shape[0],[d,f]=o,p=[u,d,f,i.shape[3]];let h=e.dataIdMap.get(i.dataId),m;i.dtype!=="float32"&&(m=es({backend:e,inputs:{x:i},attrs:{dtype:"float32"}}),h=e.dataIdMap.get(m.dataId));const g=h.id,v=e.dataIdMap.get(c.dataId).id,b=e.dataIdMap.get(l.dataId).id,w=e.makeOutput(p,"float32"),S=e.dataIdMap.get(w.dataId).id,I=new Uint8Array(new Int32Array(i.shape).buffer);return K2(g,v,b,u,I,d,f,hh[a],s,S),m!=null&&e.disposeData(m.dataId),w}const GB={kernelName:Dl,backendName:"wasm",setupFunc:jB,kernelFunc:UB};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X2;function qB(t){X2=t.wasm.cwrap(Rl,null,["number","number","number","number","number","number"])}function KB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:o,reverse:i}=r,c=a.shape.length;A(a.dtype==="float32"||a.dtype==="int32",()=>`cumprod does not support ${a.dtype} tensors in the WASM backend`);const l=pr([s],c);let u=a;l!==null&&(u=ja({inputs:{x:a},attrs:{perm:l},backend:n}));const d=Mn(1,c)[0];Fn("cumprod",[d],c);const f=n.makeOutput(u.shape,u.dtype),p=u.shape[d],h=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(f.dataId).id;X2(h,o?1:0,i?1:0,p,m,dt[a.dtype]);let g=f;if(l!==null){const v=cf(l);g=ja({inputs:{x:f},attrs:{perm:v},backend:n}),n.disposeData(u.dataId),n.disposeData(f.dataId)}return g}const XB={kernelName:Rl,backendName:"wasm",setupFunc:qB,kernelFunc:KB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y2;function YB(t){Y2=t.wasm.cwrap($l,null,["number","number","number","number","number","number"])}function ZB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:o,reverse:i}=r,c=a.shape.length;A(a.dtype==="float32"||a.dtype==="int32",()=>`cumsum does not support ${a.dtype} tensors in the WASM backend`);const l=pr([s],c);let u=a;l!==null&&(u=ja({inputs:{x:a},attrs:{perm:l},backend:n}));const d=Mn(1,c)[0];Fn("cumsum",[d],c);const f=n.makeOutput(u.shape,u.dtype),p=u.shape[d],h=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(f.dataId).id;Y2(h,o?1:0,i?1:0,p,m,dt[a.dtype]);let g=f;if(l!==null){const v=cf(l);g=ja({inputs:{x:f},attrs:{perm:v},backend:n}),n.disposeData(u.dataId),n.disposeData(f.dataId)}return g}const JB={kernelName:$l,backendName:"wasm",setupFunc:YB,kernelFunc:ZB};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z2;function QB(t){Z2=t.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function eL(t){const{backend:e,inputs:n,attrs:r}=t,{x:a,weights:s}=n,{size:o,binaryOutput:i}=r,c=s.shape.reduce((f,p)=>f*p,1)!==0,l=a.shape.length===1?[o]:[a.shape[0],o],u=e.makeOutput(l,s.dtype);function d(f){return e.dataIdMap.get(f.dataId).id}return Z2(d(a),new Uint8Array(new Int32Array(a.shape).buffer),a.shape.length,o,c,d(s),dt[s.dtype],i,d(u)),u}const tL={kernelName:dm,backendName:"wasm",setupFunc:QB,kernelFunc:eL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let J2;function nL(t){J2=t.wasm.cwrap(Ol,null,["number","number","number","array","number","array","array","number","number"])}function rL(t){const{backend:e,inputs:n,attrs:r}=t,{x:a}=n,{blockSize:s,dataFormat:o}=r,i=a.shape[0],c=o==="NHWC"?a.shape[1]:a.shape[2],l=o==="NHWC"?a.shape[2]:a.shape[3],u=o==="NHWC"?a.shape[3]:a.shape[1],d=c*s,f=l*s,p=u/(s*s),h=o==="NHWC"?[i,d,f,p]:[i,p,d,f],m=e.makeOutput(h,"float32"),v=e.dataIdMap.get(a.dataId).id,b=new Uint8Array(new Int32Array(Ie(a.shape)).buffer),w=new Uint8Array(new Int32Array(h).buffer),S=new Uint8Array(new Int32Array(Ie(h)).buffer),I=e.dataIdMap.get(m.dataId).id;return J2(v,s,o==="NHWC"?1:0,b,a.shape.length-1,w,S,h.length,I),m}const aL={kernelName:Ol,backendName:"wasm",setupFunc:nL,kernelFunc:rL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Q2;function sL(t){Q2=t.wasm.cwrap(Fl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function oL(t){const{inputs:e,attrs:n,backend:r}=t,{x:a,filter:s}=e,o=r.dataIdMap.get(a.dataId).id,i=r.dataIdMap.get(s.dataId).id,{strides:c,dilations:l,pad:u,dimRoundingMode:d}=n,f=l??[1,1],p=Kn(a.shape,s.shape,c,f,u,d,!0),h=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,b=p.padInfo.bottom,w=p.padInfo.left,S=p.dilationHeight,I=p.dilationWidth,E=p.strideHeight,T=p.strideWidth,R=p.inChannels,$=p.outChannels,D=p.padInfo.type==="SAME"?1:0;if(p.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${p.dataFormat}'. Please use 'channelsLast'.`);const M=r.makeOutput(p.outShape,"float32"),z=r.dataIdMap.get(M.dataId).id;return Q2(o,a.shape[0],a.shape[1],a.shape[2],i,h,m,g,v,b,w,D,S,I,E,T,R,$,z),M}const iL={kernelName:Fl,backendName:"wasm",setupFunc:sL,kernelFunc:oL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eS;function uL(t){eS=t.wasm.cwrap("Diag",null,["number","number","number","number"])}function cL(t){const{inputs:e,backend:n}=t,{x:r}=e,a=Y(r.shape),s=n.makeOutput([...r.shape,...r.shape],r.dtype);return eS(n.dataIdMap.get(r.dataId).id,dt[r.dtype],a,n.dataIdMap.get(s.dataId).id),s}const lL={kernelName:fm,backendName:"wasm",setupFunc:uL,kernelFunc:cL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tS;function dL(t){tS=t.wasm.cwrap(Ml,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function fL(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:o,pad:i,dilations:c}=r;if(a.dtype!==s.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${a.dtype} and ${s.dtype}`);const l=Lo(a.shape,s.shape,o,i,"NHWC",c),u=n.makeOutput(l.outShape,a.dtype);return tS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(u.dataId).id,dt[a.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),u}const pL={kernelName:Ml,backendName:"wasm",setupFunc:dL,kernelFunc:fL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nS;function hL(t){nS=t.wasm.cwrap(Nc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function mL(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,dy:o}=e,{strides:i,pad:c,dilations:l}=r;if(a.dtype!==s.dtype||a.dtype!==o.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${a.dtype}, ${s.dtype}, and ${o.dtype}`);const u=Lo(a.shape,s.shape,i,c,"NHWC",l),d=n.makeOutput(s.shape,s.dtype);return nS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(d.dataId).id,dt[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),d}const gL={kernelName:Nc,backendName:"wasm",setupFunc:hL,kernelFunc:mL};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let rS;function yL(t){rS=t.wasm.cwrap(Cc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function vL(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,dy:o}=e,{strides:i,pad:c,dilations:l}=r;if(a.dtype!==s.dtype||a.dtype!==o.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${a.dtype}, ${s.dtype}, and ${o.dtype}`);const u=Lo(a.shape,s.shape,i,c,"NHWC",l),d=n.makeOutput(a.shape,a.dtype);return rS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(d.dataId).id,dt[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),d}const bL={kernelName:Cc,backendName:"wasm",setupFunc:yL,kernelFunc:vL};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wL=rt(Bl);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aS;function SL(t){aS=t.wasm.cwrap(pm,null,["number","number","number"])}function _L(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e,s=n.makeOutput(a.shape,"float32"),o=i=>n.dataIdMap.get(i.dataId).id;return aS(o(a),o(r),o(s)),s}const xL={kernelName:pm,backendName:"wasm",setupFunc:SL,kernelFunc:_L};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IL=!1,kL=nn(Wl,IL,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EL=rt(Ll);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TL=rt(zl,"float32");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mh(t){const{inputs:e,attrs:n,backend:r}=t,{input:a}=e,{dim:s}=n,o=a.shape.length,i=a.shape.slice();let c=s;return s<0&&(A(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+s+1),i.splice(c,0,1),jn({inputs:{x:a},backend:r,attrs:{shape:i}})}const CL={kernelName:hm,backendName:"wasm",kernelFunc:mh};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NL=rt(Vl,"float32");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sS(t){const{attrs:{shape:e,value:n,dtype:r},backend:a}=t,s=a.makeOutput(e,r);return a.typedArrayFromHeap(s).fill(n),s}const AL={kernelName:mm,backendName:"wasm",kernelFunc:sS};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let oS;function RL(t){oS=t.wasm.cwrap(Hl,null,["number","number","number","number","number","number"])}function $L(t){const{inputs:e,backend:n}=t,{image:r}=e,a=n.makeOutput(r.shape,r.dtype),s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,[i,c,l,u]=r.shape;return oS(s,i,c,l,u,o),a}const DL={kernelName:Hl,backendName:"wasm",kernelFunc:$L,setupFunc:RL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OL=rt(jl);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FL=nn(Ul);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let iS;function ML(t){iS=t.wasm.cwrap(Gl,null,["number","number","number","number","number","number","number"])}function PL(t){const{backend:e,inputs:n,attrs:r}=t,{varianceEpsilon:a}=r,{x:s,mean:o,variance:i,offset:c,scale:l}=n,u=e.dataIdMap.get(s.dataId).id,d=e.dataIdMap.get(o.dataId).id,f=e.dataIdMap.get(i.dataId).id,p=c!=null?e.dataIdMap.get(c.dataId).id:0,h=l!=null?e.dataIdMap.get(l.dataId).id:0,m=e.makeOutput(s.shape,s.dtype);if(Y(s.shape)===0)return m;const g=e.dataIdMap.get(m.dataId).id;return iS(u,d,f,p,h,a,g),m}const BL={kernelName:Gl,backendName:"wasm",setupFunc:ML,kernelFunc:PL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uS;function LL(t){uS=t.wasm.cwrap(Ji,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function WL(t){const{inputs:e,attrs:n,backend:r}=t,{x:a,filter:s,bias:o,preluActivationWeights:i}=e,{strides:c,pad:l,dilations:u,dataFormat:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=n,m=Kn(a.shape,s.shape,c,u,l,f),g=lu[p];if(g==null)throw new Error(`${p} activation not yet supported for FusedConv2D in the wasm backend.`);const v=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,w=m.outChannels;let S=0;if(o!=null){const ee=r.dataIdMap.get(o.dataId);if(ee.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${ee.shape.length}.`);if(ee.shape[0]!==w)throw new Error(`FusedConv2D bias shape (${ee.shape}) does not match the number of output channels (${w})`);S=ee.id}const I=m.filterHeight,E=m.filterWidth,T=m.padInfo.top,R=m.padInfo.right,$=m.padInfo.bottom,D=m.padInfo.left,M=m.dilationHeight,z=m.dilationWidth,F=m.strideHeight,V=m.strideWidth,H=m.inChannels,U=m.padInfo.type==="SAME"?1:0,Z=m.batchSize,q=m.inHeight,X=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const se=r.makeOutput(m.outShape,"float32"),te=r.dataIdMap.get(se.dataId).id,ce=i==null?0:r.dataIdMap.get(i.dataId).id;return uS(v,Z,q,X,b,I,E,S,T,R,$,D,U,M,z,F,V,H,w,g,ce,h||0,te),se}const zL={kernelName:Ji,backendName:"wasm",setupFunc:LL,kernelFunc:WL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let cS;function VL(t){cS=t.wasm.cwrap(Qi,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function HL(t){const{inputs:e,attrs:n,backend:r}=t,{x:a,filter:s,bias:o,preluActivationWeights:i}=e,{strides:c,pad:l,dilations:u,dataFormat:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=n,m=Kn(a.shape,s.shape,c,u,l,f,!0),g=lu[p];if(g==null)throw new Error(`${p} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const v=r.dataIdMap.get(a.dataId).id,b=r.dataIdMap.get(s.dataId).id,w=m.outChannels;let S=0;if(o!=null){const ee=r.dataIdMap.get(o.dataId);if(ee.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${ee.shape.length}.`);if(ee.shape[0]!==w)throw new Error(`FusedDepthwiseConv2D bias shape (${ee.shape}) does not match the number of output channels (${w})`);S=ee.id}const I=m.filterHeight,E=m.filterWidth,T=m.padInfo.top,R=m.padInfo.right,$=m.padInfo.bottom,D=m.padInfo.left,M=m.dilationHeight,z=m.dilationWidth,F=m.strideHeight,V=m.strideWidth,H=m.inChannels,U=m.padInfo.type==="SAME"?1:0,Z=m.batchSize,q=m.inHeight,X=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const se=r.makeOutput(m.outShape,"float32"),te=r.dataIdMap.get(se.dataId).id,ce=i==null?0:r.dataIdMap.get(i.dataId).id;return cS(v,Z,q,X,b,I,E,S,T,R,$,D,U,M,z,F,V,H,w,g,ce,h||0,te),se}const jL={kernelName:Qi,backendName:"wasm",setupFunc:VL,kernelFunc:HL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lS;function UL(t){lS=t.wasm.cwrap(ql,null,["number","number","number","number","number","number","array","number"])}function GL(t){const{backend:e,inputs:n}=t,{params:r,indices:a}=n,[s,o,i,c]=Bw(r,a),l=e.makeOutput(s,r.dtype);if(o===0)return l;const u=a.shape,d=u[u.length-1],p=e.dataIdMap.get(r.dataId).id,m=e.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(c).buffer),v=e.dataIdMap.get(l.dataId).id;return lS(p,dt[r.dtype],m,o,d,i,g,v),l}const qL={kernelName:ql,backendName:"wasm",setupFunc:UL,kernelFunc:GL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let dS;function KL(t){dS=t.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function XL(t){const{backend:e,inputs:n,attrs:r}=t,{x:a,indices:s}=n,{axis:o,batchDims:i}=r,c=Vt(o,a.shape)[0],l=e.readSync(s.dataId),u=a.shape[c];for(let $=0;$<l.length;++$){const D=l[$];A(D<=u-1&&D>=0,()=>`GatherV2: the index value ${D} is not in [0, ${u-1}]`)}const d=i2(a,s,c,i),f=jn({inputs:{x:a},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:e}),p=Y(s.shape),h=jn({inputs:{x:s},attrs:{shape:[d.batchSize,p/d.batchSize]},backend:e}),m=[d.batchSize,d.outerSize,p/d.batchSize,d.sliceSize],g=e.makeOutput(m,a.dtype);if(Y(a.shape)===0)return g;const v=f.shape.length-1,w=e.dataIdMap.get(f.dataId).id,I=e.dataIdMap.get(h.dataId).id,E=e.dataIdMap.get(g.dataId).id,T=new Uint8Array(new Int32Array(Ie(f.shape)).buffer),R=new Uint8Array(new Int32Array(Ie(m)).buffer);return dS(w,dt[a.dtype],T,v,I,d.batchSize,R,E),e.disposeData(f.dataId),e.disposeData(h.dataId),g.shape=d.outputShape,g}const YL={kernelName:gm,backendName:"wasm",setupFunc:KL,kernelFunc:XL};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZL=!1,JL=nn(Kl,ZL,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QL=!1,e7=nn(Xl,QL,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t7=rt(Zl,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7=rt(Jl,"bool");/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7=rt(Ql,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let fS;function a7(t){fS=t.wasm.cwrap(ed,null,["number","number","number","number"])}function s7(t){const{inputs:{x:e},attrs:{alpha:n},backend:r}=t,a=r.dataIdMap.get(e.dataId).id,s=r.makeOutput(e.shape,"float32");if(Y(e.shape)!==0){const o=r.dataIdMap.get(s.dataId).id;fS(a,dt[e.dtype],n,o)}return s}const o7={kernelName:ed,backendName:"wasm",setupFunc:a7,kernelFunc:s7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7=!1,u7=nn(td,i7,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7=!1,l7=nn(nd,c7,"bool");/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let pS;function d7(t){pS=t.wasm.cwrap(rd,null,["number","number","number","number"])}function f7(t){const{attrs:e,backend:n}=t,{start:r,stop:a,num:s}=e,o=Math.floor(s),i=n.makeOutput([o],"float32");return pS(n.dataIdMap.get(i.dataId).id,r,a,o),i}const p7={kernelName:rd,backendName:"wasm",setupFunc:d7,kernelFunc:f7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7=rt(ad);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7=rt(sd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7=!1,y7=nn(od,g7,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v7=rt(id);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b7=!1,w7=nn(ud,b7,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S7=!1,_7=nn(yT,S7,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let hS;function x7(t){hS=t.wasm.cwrap(cd,null,["number","number","number","number","number","number","number"])}function I7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:s,bias:o,alpha:i,beta:c}=r;if(a.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");const l=n.makeOutput(a.shape,a.dtype);return hS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(l.dataId).id,a.shape[3],s,o,i,c),l}const k7={kernelName:cd,backendName:"wasm",setupFunc:x7,kernelFunc:I7};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let mS;function E7(t){mS=t.wasm.cwrap(ym,null,["number","number","number","number","number","number","number","number","number"])}function T7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:s,dy:o}=e,{depthRadius:i,bias:c,alpha:l,beta:u}=r;if(a.dtype!=="float32"||s.dtype!=="float32"||o.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const d=n.makeOutput(a.shape,a.dtype);return mS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(d.dataId).id,o.shape[3],i,c,l,u),d}const C7={kernelName:ym,backendName:"wasm",setupFunc:E7,kernelFunc:T7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gS;function N7(t){gS=t.wasm.cwrap(ld,null,["number","number","number","number"])}function A7(t){const{backend:e,inputs:n,attrs:r}=t,{reductionIndices:a,keepDims:s}=r,{x:o}=n;let c=e.dataIdMap.get(o.dataId).id,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);if(p){const w=e.dataIdMap.get(u.dataId).id;l=u,c=w}const h=l.shape.length;Fn("max",d,h);const[m,g]=On(l.shape,d),v=Y(g),b=e.makeOutput(m,o.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;gS(c,dt[o.dtype],v,w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const R7={kernelName:ld,backendName:"wasm",setupFunc:N7,kernelFunc:A7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7=nn(dd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let yS;function D7(t){yS=t.wasm.cwrap(fd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function O7(t){const{inputs:e,attrs:n,backend:r}=t,a=e.x,s=r.dataIdMap.get(a.dataId).id;A(a.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${a.dtype}.`);const{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=n,u=Vr(a.shape,o,i,1,c,l),d=u.filterHeight,f=u.filterWidth,p=u.padInfo.top,h=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,v=u.dilationHeight,b=u.dilationWidth,w=u.strideHeight,S=u.strideWidth,I=u.inChannels,E=u.outChannels;if(u.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);const T=r.makeOutput(u.outShape,"float32"),R=r.dataIdMap.get(T.dataId).id;return yS(s,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,b,w,S,I,E,R),T}const F7={kernelName:fd,backendName:"wasm",setupFunc:D7,kernelFunc:O7};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let vS;function M7(t){vS=t.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function P7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:c,dataFormat:l}=r,u=Ya(a.shape,s,o,1,i,c,l),d=n.makeOutput(u.outShape,a.dtype);return vS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}const B7={kernelName:vm,backendName:"wasm",setupFunc:M7,kernelFunc:P7};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bS;function L7(t){bS=t.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function W7(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=r,u=Ya(s.shape,o,i,1,c,l),d=n.makeOutput(s.shape,s.dtype);return bS(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}const z7={kernelName:r1,backendName:"wasm",setupFunc:L7,kernelFunc:W7};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let wS;function V7(t){wS=t.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function H7(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=r,u=Vr(s.shape,o,i,1,c,l),d=n.makeOutput(s.shape,s.dtype);return wS(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),d}const j7={kernelName:n1,backendName:"wasm",setupFunc:V7,kernelFunc:H7};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let SS;function U7(t){SS=t.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function G7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:o,pad:i,includeBatchInIndex:c}=r;A(a.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);const l=[1,1];A(Er(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const u=Vr(a.shape,s,o,[1,1],i),d=n.makeOutput(u.outShape,a.dtype),f=n.makeOutput(u.outShape,"int32");return SS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(f.dataId).id,dt[a.dtype],c,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),[d,f]}const q7={kernelName:bm,backendName:"wasm",setupFunc:U7,kernelFunc:G7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _S;function K7(t){_S=t.wasm.cwrap(pd,null,["number, number, number"])}function X7(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n,i=e.dataIdMap.get(o.dataId).id;let c=i,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);let h=d;if(p){const S=e.dataIdMap.get(u.dataId).id;S!==i&&(l=u,c=S,h=Mn(h.length,l.shape.length))}Fn("mean",h,l.shape.length);const[m,g]=On(l.shape,h),v=Y(g);let b=l;l.dtype!=="float32"&&(b=es({backend:e,inputs:{x:l},attrs:{dtype:"float32"}}),c=e.dataIdMap.get(b.dataId).id);const w=e.makeOutput(m,"float32");if(Y(l.shape)!==0){const S=e.dataIdMap.get(w.dataId).id;_S(c,v,S)}if(p&&e.disposeData(u.dataId),s){const S=vn(w.shape,f);w.shape=S}return l.dtype!=="float32"&&e.disposeData(b.dataId),w}const Y7={kernelName:pd,backendName:"wasm",setupFunc:K7,kernelFunc:X7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xS;function Z7(t){xS=t.wasm.cwrap(hd,null,["number","number","number","number"])}function J7(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n,i=e.dataIdMap.get(o.dataId).id;let c=i,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);if(p){const w=e.dataIdMap.get(u.dataId).id;w!==i&&(l=u,c=w)}const h=l.shape.length;Fn("min",d,h);const[m,g]=On(l.shape,d),v=Y(g),b=e.makeOutput(m,l.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;xS(c,dt[o.dtype],v,w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const Q7={kernelName:hd,backendName:"wasm",setupFunc:Z7,kernelFunc:J7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9=nn(md);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gh;(function(t){t[t.reflect=0]="reflect",t[t.symmetric=1]="symmetric"})(gh||(gh={}));let IS;function t9(t){IS=t.wasm.cwrap(gd,null,["number","array","number","number","array","array","number","number"])}function n9(t){const{inputs:{x:e},backend:n,attrs:{paddings:r,mode:a}}=t,s=r.map((h,m)=>h[0]+e.shape[m]+h[1]),o=n.dataIdMap.get(e.dataId).id,i=n.makeOutput(s,e.dtype),c=n.dataIdMap.get(i.dataId).id,l=new Uint8Array(new Int32Array(e.shape).buffer),u=r.map(h=>h[0]),d=r.map(h=>h[1]),f=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(d).buffer);return IS(o,l,e.shape.length,dt[e.dtype],f,p,gh[a],c),i}const r9={kernelName:gd,backendName:"wasm",kernelFunc:n9,setupFunc:t9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let kS;function a9(t){kS=t.wasm.cwrap(Kd,null,["number","number","number","number"])}function ES(t){const{backend:e,inputs:{logits:n},attrs:{dim:r}}=t,a=e.dataIdMap.get(n.dataId).id,s=e.makeOutput(n.shape,n.dtype),o=e.dataIdMap.get(s.dataId).id,i=n.shape[r],c=Y(n.shape)/i;return Y(s.shape)===0||kS(a,o,i,c),s}const s9={kernelName:Kd,backendName:"wasm",setupFunc:a9,kernelFunc:ES};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let TS;function o9(t){TS=t.wasm.cwrap(vd,null,["number","number","number","number","number","number"])}function i9(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:s,seed:o,normalized:i}=r;if(a.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${a.dtype}`);const c=i?a:ES({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),[l,u]=c.shape,d=n.makeOutput([l,s],"int32");return TS(n.dataIdMap.get(c.dataId).id,l,u,s,o,n.dataIdMap.get(d.dataId).id),i||n.disposeData(c.dataId),d}const u9={kernelName:vd,backendName:"wasm",setupFunc:o9,kernelFunc:i9};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9=nn(yd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9=nn(bd);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9=rt(wm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mg(t,e){const n=new Int32Array(t.wasm.HEAPU8.buffer,e,4),r=n[0],a=n[1],s=n[2],o=n[3];return t.wasm._free(e),{pSelectedIndices:r,selectedSize:a,pSelectedScores:s,pValidOutputs:o}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let CS;function f9(t){CS=t.wasm.cwrap(Sd,"number",["number","number","number","number","number"])}function p9(t){const{backend:e,inputs:n,attrs:r}=t,{iouThreshold:a,maxOutputSize:s,scoreThreshold:o}=r,{boxes:i,scores:c}=n,l=e.dataIdMap.get(i.dataId).id,u=e.dataIdMap.get(c.dataId).id,d=CS(l,u,s,a,o),{pSelectedIndices:f,selectedSize:p,pSelectedScores:h,pValidOutputs:m}=mg(e,d);return e.wasm._free(h),e.wasm._free(m),e.makeOutput([p],"int32",f)}const h9={kernelName:Sd,backendName:"wasm",setupFunc:f9,kernelFunc:p9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let NS;function m9(t){NS=t.wasm.cwrap(_d,"number",["number","number","number","number","number","bool"])}function g9(t){const{backend:e,inputs:n,attrs:r}=t,{iouThreshold:a,maxOutputSize:s,scoreThreshold:o,padToMaxOutputSize:i}=r,{boxes:c,scores:l}=n,u=e.dataIdMap.get(c.dataId).id,d=e.dataIdMap.get(l.dataId).id,f=NS(u,d,s,a,o,i),{pSelectedIndices:p,selectedSize:h,pSelectedScores:m,pValidOutputs:g}=mg(e,f);e.wasm._free(m);const v=e.makeOutput([h],"int32",p),b=e.makeOutput([],"int32",g);return[v,b]}const y9={kernelName:_d,backendName:"wasm",setupFunc:m9,kernelFunc:g9};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let AS;function v9(t){AS=t.wasm.cwrap(xd,"number",["number","number","number","number","number","number"])}function b9(t){const{backend:e,inputs:n,attrs:r}=t,{iouThreshold:a,maxOutputSize:s,scoreThreshold:o,softNmsSigma:i}=r,{boxes:c,scores:l}=n,u=e.dataIdMap.get(c.dataId).id,d=e.dataIdMap.get(l.dataId).id,f=AS(u,d,s,a,o,i),{pSelectedIndices:p,selectedSize:h,pSelectedScores:m,pValidOutputs:g}=mg(e,f);e.wasm._free(g);const v=e.makeOutput([h],"int32",p),b=e.makeOutput([h],"float32",m);return[v,b]}const w9={kernelName:xd,backendName:"wasm",setupFunc:v9,kernelFunc:b9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S9=!1,_9=nn(wd,S9,"bool");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let RS;function x9(t){RS=t.wasm.cwrap(Id,null,["number","number","number","number","number"])}function I9(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:s,depth:o,onValue:i,offValue:c}=r,l=n.makeOutput([...a.shape,o],s),u=n.dataIdMap.get(l.dataId).id,f=n.dataIdMap.get(a.dataId).id;return RS(f,o,i,c,u),l}const k9={kernelName:Id,backendName:"wasm",setupFunc:x9,kernelFunc:I9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(t){const{inputs:{x:e},backend:n}=t,r=n.makeOutput(e.shape,e.dtype);return n.typedArrayFromHeap(r).fill(1),r}const T9={kernelName:Sm,backendName:"wasm",kernelFunc:E9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return mh({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{ar(s,u.shape,"All tensors passed to stack must have matching shapes"),A(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],c=e.map(u=>{const d=mh({inputs:{input:u},backend:n,attrs:{dim:a}});return i.push(d),d}),l=V2({inputs:c,backend:n,attrs:{axis:a}});return i.forEach(u=>n.disposeData(u.dataId)),l}const N9={kernelName:_m,backendName:"wasm",kernelFunc:C9};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $S;function A9(t){$S=t.wasm.cwrap(kd,null,["number","array","number","number","array","array","number","number"])}function R9(t){const{inputs:{x:e},backend:n,attrs:{paddings:r,constantValue:a}}=t,s=r.map((m,g)=>m[0]+e.shape[g]+m[1]);if(Y(e.shape)===0)return sS({backend:n,attrs:{shape:s,value:a,dtype:e.dtype}});const o=n.dataIdMap.get(e.dataId).id,i=n.makeOutput(s,e.dtype),l=n.dataIdMap.get(i.dataId).id,u=new Uint8Array(new Int32Array(e.shape).buffer),d=r.map(m=>m[0]),f=r.map(m=>m[1]),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return $S(o,u,e.shape.length,dt[e.dtype],p,h,a,l),i}const DS={kernelName:kd,backendName:"wasm",kernelFunc:R9,setupFunc:A9};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9=nn(Ed);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OS;function D9(t){OS=t.wasm.cwrap(Td,null,["number","number","number"])}function O9(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id;let i=s;const c=r;let l=c;c.dtype!=="float32"&&(l=es({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),i=n.dataIdMap.get(l.dataId).id);const u=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(u.dataId).id;return OS(i,o,d),c.dtype!=="float32"&&n.disposeData(l.dataId),u}const F9={kernelName:Td,backendName:"wasm",setupFunc:D9,kernelFunc:O9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let FS;function M9(t){FS=t.wasm.cwrap(Cd,null,["number","number","number","number"])}function P9(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n,i=e.dataIdMap.get(o.dataId).id;let c=i,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);let h=d;if(p){const w=e.dataIdMap.get(u.dataId).id;w!==i&&(l=u,c=w,h=Mn(h.length,l.shape.length))}Fn("prod",h,l.shape.length);const[m,g]=On(l.shape,h),v=Y(g),b=e.makeOutput(m,l.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;FS(c,v,dt[b.dtype],w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const B9={kernelName:Cd,backendName:"wasm",setupFunc:M9,kernelFunc:P9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L9=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:s,dtype:o}=n,i=$2(r,a,s,o),c=e.makeOutput([i.length],o);return e.typedArrayFromHeap(c).set(i),c},W9={kernelName:xm,backendName:"wasm",kernelFunc:L9};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9=nn(Pl);/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V9=rt(Nd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9=rt(Ad);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9=rt(Dd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MS;function U9(t){MS=t.wasm.cwrap($d,null,["number","number","number","number","number","number","number","number","number","number"])}function G9(t){const{backend:e,inputs:n,attrs:r}=t,{images:a}=n,{alignCorners:s,halfPixelCenters:o,size:i}=r,[c,l]=i,[u,d,f,p]=a.shape,h=[u,c,l,p];let m=e.dataIdMap.get(a.dataId),g;m.dtype!=="float32"&&(g=es({backend:e,inputs:{x:a},attrs:{dtype:"float32"}}),m=e.dataIdMap.get(g.dataId));const v=m.id,b=e.makeOutput(h,"float32");if(Y(a.shape)===0)return b;const w=e.dataIdMap.get(b.dataId).id;return MS(v,u,d,f,p,c,l,s?1:0,o?1:0,w),g!=null&&e.disposeData(g.dataId),b}const q9={kernelName:$d,backendName:"wasm",setupFunc:U9,kernelFunc:G9};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let PS;function K9(t){PS=t.wasm.cwrap(Em,null,["number","number","number","array","array","boolean"])}function X9(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:o}=r,i=n.makeOutput(a.shape,"float32");let c=n.dataIdMap.get(a.dataId),l;return c.dtype!=="float32"&&(l=es({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),c=n.dataIdMap.get(l.dataId)),PS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),o),l!=null&&n.disposeData(l.dataId),i}const Y9={kernelName:Em,backendName:"wasm",setupFunc:K9,kernelFunc:X9};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let BS;function Z9(t){BS=t.wasm.cwrap(Rd,null,["number","number","number","number","number","number","number","number","number","number"])}function J9(t){const{backend:e,inputs:n,attrs:r}=t,{images:a}=n,{alignCorners:s,halfPixelCenters:o,size:i}=r,[c,l]=i,[u,d,f,p]=a.shape,h=[u,c,l,p],m=e.makeOutput(h,"float32");if(Y(a.shape)===0)return m;let g=e.dataIdMap.get(a.dataId),v;g.dtype!=="float32"&&(v=es({backend:e,inputs:{x:a},attrs:{dtype:"float32"}}),g=e.dataIdMap.get(v.dataId));const b=g.id,w=e.dataIdMap.get(m.dataId).id;return BS(b,u,d,f,p,c,l,s?1:0,o?1:0,w),v!=null&&e.disposeData(v.dataId),m}const Q9={kernelName:Rd,backendName:"wasm",setupFunc:Z9,kernelFunc:J9};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let LS;function eW(t){LS=t.wasm.cwrap(km,null,["number","number","number","array","array","boolean"])}function tW(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:o}=r,i=n.makeOutput(a.shape,"float32");let c=n.dataIdMap.get(a.dataId),l;return c.dtype!=="float32"&&(l=es({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),c=n.dataIdMap.get(l.dataId)),LS(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),o),l!=null&&n.disposeData(l.dataId),i}const nW={kernelName:km,backendName:"wasm",setupFunc:eW,kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let WS;function rW(t){WS=t.wasm.cwrap(Od,null,["number","array","number","array","number","number"])}function aW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:s}=r,o=Vt(s,a.shape);if(a.shape.length===0)return bf({inputs:{x:a},backend:n});const i=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(i.dataId).id,u=new Uint8Array(new Int32Array(o).buffer),d=new Uint8Array(new Int32Array(a.shape).buffer);WS(c,u,o.length,d,a.shape.length,l);const f=jn({inputs:{x:i},attrs:{shape:a.shape},backend:n});return n.disposeData(i.dataId),f}const sW={kernelName:Od,backendName:"wasm",kernelFunc:aW,setupFunc:rW};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let zS;function oW(t){zS=t.wasm.cwrap(af,null,["number","number","number","number","number","number","number","number","array","number","number"])}function iW(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{radians:s,fillValue:o,center:i}=r,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(c.dataId).id,[d,f,p,h]=a.shape,[m,g]=Uw(i,f,p),v=o===0,b=255,w=typeof o=="number"?[o,o,o,v?0:b]:[...o,b],S=new Uint8Array(new Int32Array(w).buffer);return zS(l,d,f,p,h,s,m,g,S,w.length,u),c}const uW={kernelName:af,backendName:"wasm",kernelFunc:iW,setupFunc:oW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cW=rt(Fd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW=rt(Md);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let VS;function dW(t){VS=t.wasm.cwrap(Pd,null,["number","number","number","number","number","number","array","number","number"])}function fW(t){const{backend:e,inputs:n,attrs:r}=t,{indices:a,updates:s}=n,{shape:o}=r,i=e.makeOutput(o,s.dtype);if(Y(o)===0)return i;const{sliceRank:c,numUpdates:l,sliceSize:u,strides:d,outputSize:f}=zo(s,a,o),h=e.dataIdMap.get(a.dataId).id,g=e.dataIdMap.get(s.dataId).id,v=new Uint8Array(new Int32Array(d).buffer),b=e.dataIdMap.get(i.dataId).id;return VS(h,g,dt[s.dtype],c,l,u,v,f,b),i}const pW={kernelName:Pd,backendName:"wasm",setupFunc:dW,kernelFunc:fW};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let HS;function hW(t){HS=t.wasm.cwrap(Ld,null,["number","number","number","number","number","number","bool","number"])}function mW(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:s}=e,{side:o}=r;if(a.dtype!==s.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${a.dtype} and ${s.dtype}`);const i=n.makeOutput(s.shape,"int32");function c(l){return n.dataIdMap.get(l.dataId).id}return HS(c(a),c(s),a.shape[0],a.shape[1],s.shape[1],dt[a.dtype],o==="left",c(i)),i}const gW={kernelName:Ld,backendName:"wasm",setupFunc:hW,kernelFunc:mW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let jS;function yW(t){jS=t.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function vW(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:s}=e,o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,c=n.dataIdMap.get(s.dataId).id,l=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(l.dataId).id,d=r.shape.length,f=a.shape.length,p=d===0||d>1||f===1?1:Y(a.shape.slice(1));return jS(o,i,c,p,u),l}const bW={kernelName:Tm,backendName:"wasm",kernelFunc:vW,setupFunc:yW};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wW=rt(Wd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let US;function SW(t){US=t.wasm.cwrap(jd,null,["number","number"])}function _W(t){const{backend:e,inputs:{x:n}}=t,r=e.dataIdMap.get(n.dataId).id,a=e.makeOutput(n.shape,n.dtype),s=e.dataIdMap.get(a.dataId).id;return Y(a.shape)===0||US(r,s),a}const xW={kernelName:"Sigmoid",backendName:"wasm",setupFunc:SW,kernelFunc:_W};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=rt(Hd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kW=rt(zd);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EW=rt(Vd);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TW=rt(Ud);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,paddings:o}=r,i=Y(s),c=[[0,0]];c.push(...o);for(let E=1+s.length;E<a.shape.length;++E)c.push([0,0]);const l=DS.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),u=gf(l.shape,s,i,!1),d=yf(u.length,s.length,!1),f=vf(l.shape,s,i,!1),m=jn({inputs:{x:l},backend:n,attrs:{shape:u}}),b=ja({inputs:{x:m},backend:n,attrs:{perm:d}}),I=jn({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeData(l.dataId),n.disposeData(m.dataId),n.disposeData(b.dataId),I}const NW={kernelName:Nm,backendName:"wasm",kernelFunc:CW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let GS;function AW(t){GS=t.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function RW(t){const{backend:e,inputs:n}=t,{indices:r,values:a,denseShape:s,defaultValue:o}=n,i=r.shape[0],c=r.shape[1],l=e.readSync(s.dataId)[0],u=[i+l,c],d=e.dataIdMap.get(r.dataId).id,f=e.dataIdMap.get(a.dataId).id,p=e.dataIdMap.get(o.dataId).id,h=e.makeOutput(u,r.dtype),m=e.dataIdMap.get(h.dataId).id,g=e.makeOutput(u.slice(0,1),a.dtype),v=e.dataIdMap.get(g.dataId).id,b=e.makeOutput([l],"bool"),w=e.dataIdMap.get(b.dataId).id,S=e.makeOutput([i],r.dtype),I=e.dataIdMap.get(S.dataId).id,E=e.makeOutput([4],"int32"),T=e.dataIdMap.get(E.dataId).id,R=GS(d,f,dt[a.dtype],i,l,c,p,m,v,w,I,T),$=e.readSync(E.dataId);let D;switch($[0]){case 1:{D=Yw($[1]);break}case 2:{D=Zw($[1],$[2]);break}case 3:D=Jw($[1],$[2],$[3]);break;default:D=""}if(e.disposeData(E.dataId),D)throw e.disposeData(h.dataId),e.disposeData(g.dataId),e.disposeData(b.dataId),e.disposeData(S.dataId),new Error(D);let M=h,z=g;return R!==u[0]&&(M=Ls({inputs:{x:h},attrs:{begin:0,size:[R,c]},backend:e}),z=Ls({inputs:{x:g},attrs:{begin:0,size:R},backend:e}),e.disposeData(h.dataId),e.disposeData(g.dataId)),[M,z,b,S]}const $W={kernelName:Rm,backendName:"wasm",setupFunc:AW,kernelFunc:RW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let qS;function DW(t){qS=t.wasm.cwrap(Xd,null,["number","number","number","number","number","number","number"])}function OW(t){const{backend:e,inputs:n}=t,{inputIndices:r,inputShape:a,newShape:s}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=e.dataIdMap.get(r.dataId).id,i=e.dataIdMap.get(a.dataId).id,c=e.dataIdMap.get(s.dataId).id,l=r.shape[0],u=Y(s.shape),d=e.makeOutput([l,u],r.dtype),f=e.dataIdMap.get(d.dataId).id,p=e.makeOutput([u],s.dtype),h=e.dataIdMap.get(p.dataId).id,m=e.makeOutput([3],"int32"),g=e.dataIdMap.get(m.dataId).id;qS(o,i,c,l,f,h,g);const v=e.readSync(m.dataId);let b;switch(v[0]){case 0:{b=Qw(v[1],v[2]);break}case 1:{b=e2(v[1],v[2]);break}case 2:b=t2();break;case 3:{const w=Array.from(e.readSync(a.dataId)),S=Array.from(e.readSync(p.dataId));b=n2(w,S);break}case 4:{const w=Array.from(e.readSync(a.dataId)),S=Array.from(e.readSync(p.dataId));b=r2(w,S);break}default:b=""}if(e.disposeData(m.dataId),b)throw e.disposeData(d.dataId),e.disposeData(p.dataId),new Error(b);return[d,p]}const FW={kernelName:Xd,backendName:"wasm",setupFunc:DW,kernelFunc:OW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let KS;function XS(t){KS=t.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function YS(t,e){const{backend:n,inputs:r}=t,{data:a,indices:s,segmentIds:o}=r,i=s.shape[0],c=n.readSync(o.dataId,i-1,i)[0],u=i>0?c+1:0;if(u<0)throw new Error(Vc());const d=a.shape.slice();d[0]=u;const f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(s.dataId).id,h=n.dataIdMap.get(o.dataId).id,m=n.makeOutput(d,a.dtype),g=n.dataIdMap.get(m.dataId).id,v=n.makeOutput([4],"int32"),b=n.dataIdMap.get(v.dataId).id;KS(f,dt[a.dtype],a.shape[0],p,h,g,b,e,0);const w=n.readSync(v.dataId);let S;switch(w[0]){case 0:{S=Vc();break}case 1:{S=a2();break}case 2:S=s2(w[1],w[2]);break;case 3:S=o2(w[1],w[2],w[3]);break;default:S=""}if(n.disposeData(v.dataId),S)throw n.disposeData(m.dataId),new Error(S);return m}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(t){return YS(t,!0)}const PW={kernelName:$m,backendName:"wasm",setupFunc:XS,kernelFunc:MW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(t){return YS(t,!1)}const LW={kernelName:Dm,backendName:"wasm",setupFunc:XS,kernelFunc:BW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ZS;function WW(t){ZS=t.wasm.cwrap(Yd,null,["number","number","number","number","number","number","number","number","array","number","number"])}function zW(t){const{backend:e,inputs:n,attrs:r}=t,{sparseIndices:a,sparseValues:s,defaultValue:o}=n,{outputShape:i}=r,c=e.makeOutput(i,o.dtype);if(Y(i)===0)return c;const{sliceRank:l,numUpdates:u,sliceSize:d,strides:f,outputSize:p}=zo(s,a,i),h=e.dataIdMap.get(a.dataId).id,m=e.dataIdMap.get(s.dataId).id,g=e.dataIdMap.get(o.dataId).id,v=new Uint8Array(new Int32Array(f).buffer),b=e.dataIdMap.get(c.dataId).id;return ZS(h,m,s.shape.length,g,dt[o.dtype],l,u,d,v,p,b),c}const VW={kernelName:Yd,backendName:"wasm",setupFunc:WW,kernelFunc:zW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HW(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{numOrSizeSplits:s,axis:o}=n,i=Vt(o,a.shape)[0],c=Xw(a,s,i),l=new Array(a.shape.length).fill(0),u=a.shape.slice();return c.map(d=>{const f=[...u];f[i]=d;const p=Ls({inputs:{x:a},attrs:{begin:l,size:f},backend:r});return l[i]+=d,p})}const jW={kernelName:Am,backendName:"wasm",kernelFunc:HW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UW=rt(Gd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GW=rt(u1);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qW=nn(Zd);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let JS;function KW(t){JS=t.wasm.cwrap(Eu,null,["number","number","number","number"])}function XW(t){const{backend:e,inputs:n,attrs:r}=t,{alpha:a}=r,{x:s}=n,o=e.dataIdMap.get(s.dataId).id,i=e.makeOutput(s.shape,s.dtype),c=e.dataIdMap.get(i.dataId).id;return JS(o,a,dt[s.dtype],c),i}const YW={kernelName:Eu,backendName:"wasm",setupFunc:KW,kernelFunc:XW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QS;function ZW(t){QS=t.wasm.cwrap(Jd,null,["number","array","number","array","array","array","array","array","number","number"])}function JW(t){const{backend:e,inputs:n,attrs:r}=t,{x:a}=n,{begin:s,end:o,strides:i,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:w,strides:S}=Hw(a.shape,s,o,i,c,l,u,d,f);let I;if(m)I=jn({inputs:{x:a},backend:e,attrs:{shape:h}});else if(g||v){A(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=Lw(b,w,S),T=Ls({inputs:{x:a},backend:e,attrs:{begin:b,size:E}});I=jn({inputs:{x:T},backend:e,attrs:{shape:h}}),e.disposeData(T.dataId)}else{const E=e.makeOutput(p,"float32"),T=e.dataIdMap.get(a.dataId).id,R=new Uint8Array(new Int32Array(Ie(a.shape)).buffer),$=new Uint8Array(new Int32Array(b).buffer),D=new Uint8Array(new Int32Array(w).buffer),M=new Uint8Array(new Int32Array(S).buffer),z=new Uint8Array(new Int32Array(p).buffer),F=new Uint8Array(new Int32Array(Ie(p)).buffer),V=e.dataIdMap.get(E.dataId).id;QS(T,R,a.shape.length,$,D,M,z,F,p.length,V),I=jn({inputs:{x:E},backend:e,attrs:{shape:h}}),e.disposeData(E.dataId)}return I}const QW={kernelName:Jd,backendName:"wasm",setupFunc:ZW,kernelFunc:JW};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ez(t){const{backend:e,inputs:n,attrs:r}=t,{data:a,dataSplits:s}=n,{separator:o,nGramWidths:i,leftPad:c,rightPad:l,padWidth:u,preserveShortSequences:d}=r,f=e.readSync(a.dataId),p=e.readSync(s.dataId),[h,m]=F2(f,p,o,i,c,l,u,d),g=e.makeOutput([h.length],"string"),v=e.dataIdMap.get(g.dataId);v.stringBytes=h;const b=e.makeOutput(s.shape,"int32");return e.typedArrayFromHeap(b).set(m),[g,b]}const tz={kernelName:Fm,backendName:"wasm",kernelFunc:ez};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nz(t){const{backend:e,inputs:n,attrs:r}=t,{input:a,delimiter:s}=n,{skipEmpty:o}=r,i=e.readSync(a.dataId),c=e.readSync(s.dataId),[l,u,d]=M2(i,c[0],o),f=u.length,p=e.makeOutput([f,2],"int32");e.typedArrayFromHeap(p).set(l);const m=e.makeOutput([f],"string"),g=e.dataIdMap.get(m.dataId);g.stringBytes=u;const v=e.makeOutput([2],"int32");return e.typedArrayFromHeap(v).set(d),[p,m,v]}const rz={kernelName:Mm,backendName:"wasm",kernelFunc:nz};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(t){const{backend:e,inputs:n,attrs:r}=t,{input:a}=n,{numBuckets:s}=r,o=e.readSync(a.dataId),i=P2(o,s),c=e.makeOutput(a.shape,"int32");return e.typedArrayFromHeap(c).set(i),c}const sz={kernelName:Pm,backendName:"wasm",kernelFunc:az};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oz=nn(Qd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e_;function iz(t){e_=t.wasm.cwrap(qd,null,["number","number","number","number"])}function uz(t){const{backend:e,inputs:n,attrs:r}=t,{axis:a,keepDims:s}=r,{x:o}=n,i=e.dataIdMap.get(o.dataId).id;let c=i,l=o;const{transposed:u,axes:d,originalAxes:f,inputWasTransposed:p}=Za(o,a,e);let h=d;if(p){const w=e.dataIdMap.get(u.dataId).id;w!==i&&(l=u,c=w,h=Mn(h.length,l.shape.length))}Fn("sum",h,l.shape.length);const[m,g]=On(l.shape,h),v=Y(g),b=e.makeOutput(m,l.dtype);if(Y(l.shape)!==0){const w=e.dataIdMap.get(b.dataId).id;e_(c,v,dt[b.dtype],w)}if(p&&e.disposeData(u.dataId),s){const w=vn(b.shape,f);b.shape=w}return b}const cz={kernelName:qd,backendName:"wasm",setupFunc:iz,kernelFunc:uz};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lz=rt(ef);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dz=rt(tf);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t_;function fz(t){t_=t.wasm.cwrap(Bd,null,["number","number","number","number","number","number","array","number","number","number"])}function pz(t){const{backend:e,inputs:n,attrs:r}=t,{tensor:a,indices:s,updates:o}=n,i=e.makeOutput(a.shape,a.dtype);if(Y(a.shape)===0)return i;const{sliceRank:c,numUpdates:l,sliceSize:u,strides:d,outputSize:f}=zo(o,s,a.shape),h=e.dataIdMap.get(s.dataId).id,g=e.dataIdMap.get(o.dataId).id,b=e.dataIdMap.get(a.dataId).id,w=new Uint8Array(new Int32Array(d).buffer),S=e.dataIdMap.get(i.dataId).id;return t_(h,g,dt[o.dtype],c,l,u,w,f,S,b),i}const hz={kernelName:Bd,backendName:"wasm",setupFunc:fz,kernelFunc:pz};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let n_;function mz(t){n_=t.wasm.cwrap(ku,null,["number","array","number","array","number","number"])}function gz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,s=n.dataIdMap.get(a.dataId).id,{reps:o}=r,i=new Array(a.shape.length);for(let f=0;f<i.length;f++)i[f]=a.shape[f]*o[f];const c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(i).buffer),u=n.makeOutput(i,a.dtype),d=n.dataIdMap.get(u.dataId).id;return n_(s,c,a.shape.length,l,i.length,dt[u.dtype],d),u}const yz={kernelName:ku,backendName:"wasm",setupFunc:mz,kernelFunc:gz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r_;function vz(t){r_=t.wasm.cwrap(nf,null,["number","array","number","number","number","bool","number","number"])}const bz=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{k:a,sorted:s}=n,o=e.dataIdMap.get(r.dataId).id,i=new Uint8Array(new Int32Array(r.shape).buffer),c=r.shape.slice();c[c.length-1]=a;const l=e.makeOutput(c,r.dtype),u=e.dataIdMap.get(l.dataId).id,d=e.makeOutput(c,"int32"),f=e.dataIdMap.get(d.dataId).id;return r_(o,i,r.shape.length,dt[r.dtype],a,s,u,f),[l,d]},wz={kernelName:nf,backendName:"wasm",setupFunc:vz,kernelFunc:bz};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a_;function Sz(t){a_=t.wasm.cwrap(rf,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function _z(t){const{backend:e,inputs:n,attrs:r}=t,{image:a,transforms:s}=n,{interpolation:o,fillMode:i,fillValue:c,outputShape:l}=r,[u,d,f,p]=a.shape,[h,m]=l??[d,f],g=[u,h,m,p],v=new Uint8Array(new Int32Array(Ie(a.shape)).buffer),b=new Uint8Array(new Int32Array(Ie(g)).buffer),w=e.makeOutput(g,a.dtype),S=e.dataIdMap.get(w.dataId).id,E=e.dataIdMap.get(a.dataId).id,R=e.dataIdMap.get(s.dataId).id,$=o==="nearest"?1:2;let D;switch(i){case"constant":D=1;break;case"reflect":D=2;break;case"wrap":D=3;break;case"nearest":D=4;break;default:D=1;break}return a_(E,R,s.shape[0]>1,u,h,m,p,f,d,v,a.shape.length-1,b,g.length-1,$,D,c,S),w}const xz={kernelName:rf,backendName:"wasm",setupFunc:Sz,kernelFunc:_z};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iz(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:s}=e,{outputValues:o,outputShape:i,indices:c}=L2(r.readSync(s.dataId),a,s.shape,s.dtype);return[r.makeOutput(i,s.dtype,void 0,o),r.makeOutput([c.length],"int32",void 0,c)]}const kz={kernelName:Bm,backendName:"wasm",kernelFunc:Iz};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ez(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a.shape[s],i=a.shape.length,c=new Array(i-1);let l=0;for(let p=0;p<i;p++)p!==s&&(c[l++]=a.shape[p]);const u=new Array(o),d=new Array(i).fill(0),f=a.shape.slice();f[s]=1;for(let p=0;p<u.length;p++)d[s]=p,u[p]=Ls({inputs:{x:a},attrs:{begin:d,size:f},backend:n});return u.map(({dataId:p,dtype:h})=>({dataId:p,dtype:h,shape:c}))}const Tz={kernelName:Lm,backendName:"wasm",kernelFunc:Ez};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cz(t){const{inputs:{x:e},backend:n}=t,r=n.makeOutput(e.shape,e.dtype);return n.typedArrayFromHeap(r).fill(0),r}const Nz={kernelName:Wm,backendName:"wasm",kernelFunc:Cz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Az=[N5,A5,R5,$5,D5,M5,j5,q5,K5,X5,Y5,Z5,J5,Q5,eP,rP,fP,oP,cP,gP,hB,yB,vB,wB,SB,_B,kB,EB,NB,$B,FB,BB,zB,VB,HB,GB,XB,JB,tL,aL,iL,lL,pL,gL,bL,wL,xL,kL,EL,TL,CL,NL,AL,DL,OL,FL,BL,zL,jL,qL,YL,JL,e7,P5,t7,n7,r7,o7,u7,l7,p7,m7,h7,y7,v7,w7,_7,k7,C7,R7,$7,F7,B7,z7,j7,q7,Y7,Q7,e9,r9,u9,c9,l9,d9,h9,y9,w9,_9,k9,T9,N9,DS,$9,F9,B9,W9,z9,V9,H9,j9,pP,q9,Y9,Q9,nW,sW,uW,cW,lW,pW,gW,bW,wW,xW,IW,kW,EW,fB,s9,TW,NW,$W,FW,PW,LW,VW,jW,UW,GW,qW,YW,QW,tz,rz,sz,oz,cz,lz,dz,hz,yz,wz,xz,z5,kz,Tz,Nz];for(const t of Az)l1(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yh=Xe();yh.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}});yh.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(yh.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var s_={exports:{}};(function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};function s(){return q.buffer!=pe&&Ue(q.buffer),we}function o(){return q.buffer!=pe&&Ue(q.buffer),Re}function i(){return q.buffer!=pe&&Ue(q.buffer),$e}function c(){return q.buffer!=pe&&Ue(q.buffer),Oe}function l(){return q.buffer!=pe&&Ue(q.buffer),We}var u=typeof a<"u"?a:{},d,f;u.ready=new Promise(function(O,G){d=O,f=G});var p;typeof process<"u"&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var h=Object.assign({},u),m=(O,G)=>{throw G},g=typeof window=="object",v=typeof importScripts=="function",b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",w=u.ENVIRONMENT_IS_PTHREAD||!1,S="";function I(O){return u.locateFile?u.locateFile(O,S):S+O}var E,T,R;function $(O){if(O instanceof hr)return;H("exiting due to exception: "+O)}if(b){var D=Ma,M=Ma;v?S=M.dirname(S)+"/":S=__dirname+"/",E=(G,de)=>(G=Xn(G)?new URL(G):M.normalize(G),D.readFileSync(G,de?void 0:"utf8")),R=G=>{var de=E(G,!0);return de.buffer||(de=new Uint8Array(de)),de},T=(G,de,De)=>{G=Xn(G)?new URL(G):M.normalize(G),D.readFile(G,function(Me,ze){Me?De(Me):de(ze.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(G){if(!(G instanceof hr))throw G}),process.on("unhandledRejection",function(G){throw G}),m=(G,de)=>{if(at())throw process.exitCode=G,de;$(de),process.exit(G)},u.inspect=function(){return"[Emscripten Module object]"};let O;try{O=Ma}catch(G){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),G}$n.Worker=O.Worker}else(g||v)&&(v?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),typeof r<"u"&&r&&(S=r),S.indexOf("blob:")!==0?S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):S="",b||(E=O=>{var G=new XMLHttpRequest;return G.open("GET",O,!1),G.send(null),G.responseText},v&&(R=O=>{var G=new XMLHttpRequest;return G.open("GET",O,!1),G.responseType="arraybuffer",G.send(null),new Uint8Array(G.response)}),T=(O,G,de)=>{var De=new XMLHttpRequest;De.open("GET",O,!0),De.responseType="arraybuffer",De.onload=()=>{if(De.status==200||De.status==0&&De.response){G(De.response);return}de()},De.onerror=de,De.send(null)}));b&&typeof performance>"u"&&($n.performance=Ma.performance);var z=console.log.bind(console),F=console.warn.bind(console);b&&(z=O=>D.writeSync(1,O+`
`),F=O=>D.writeSync(2,O+`
`));var V=u.print||z,H=u.printErr||F;Object.assign(u,h),h=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&(m=u.quit);var U;u.wasmBinary&&(U=u.wasmBinary);var Z=u.noExitRuntime||!0;typeof WebAssembly!="object"&&En("no native wasm support detected");var q,X,se=!1,te;function ce(O,G){O||En(G)}var ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ne(O,G,de){G>>>=0;for(var De=G+de,Me=G;O[Me]&&!(Me>=De);)++Me;if(Me-G>16&&O.buffer&&ee)return ee.decode(O.buffer instanceof SharedArrayBuffer?O.slice(G,Me):O.subarray(G,Me));for(var ze="";G<Me;){var Se=O[G++];if(!(Se&128)){ze+=String.fromCharCode(Se);continue}var ke=O[G++]&63;if((Se&224)==192){ze+=String.fromCharCode((Se&31)<<6|ke);continue}var Tt=O[G++]&63;if((Se&240)==224?Se=(Se&15)<<12|ke<<6|Tt:Se=(Se&7)<<18|ke<<12|Tt<<6|O[G++]&63,Se<65536)ze+=String.fromCharCode(Se);else{var Ln=Se-65536;ze+=String.fromCharCode(55296|Ln>>10,56320|Ln&1023)}}return ze}function ie(O,G){return O>>>=0,O?ne(o(),O,G):""}function ge(O,G,de,De){if(de>>>=0,!(De>0))return 0;for(var Me=de,ze=de+De-1,Se=0;Se<O.length;++Se){var ke=O.charCodeAt(Se);if(ke>=55296&&ke<=57343){var Tt=O.charCodeAt(++Se);ke=65536+((ke&1023)<<10)|Tt&1023}if(ke<=127){if(de>=ze)break;G[de++>>>0]=ke}else if(ke<=2047){if(de+1>=ze)break;G[de++>>>0]=192|ke>>6,G[de++>>>0]=128|ke&63}else if(ke<=65535){if(de+2>=ze)break;G[de++>>>0]=224|ke>>12,G[de++>>>0]=128|ke>>6&63,G[de++>>>0]=128|ke&63}else{if(de+3>=ze)break;G[de++>>>0]=240|ke>>18,G[de++>>>0]=128|ke>>12&63,G[de++>>>0]=128|ke>>6&63,G[de++>>>0]=128|ke&63}}return G[de>>>0]=0,de-Me}function be(O,G,de){return ge(O,o(),G,de)}var pe,we,Re,$e,Oe,We;w&&(pe=u.buffer);function Ue(O){pe=O,u.HEAP8=we=new Int8Array(O),u.HEAP16=new Int16Array(O),u.HEAP32=$e=new Int32Array(O),u.HEAPU8=Re=new Uint8Array(O),u.HEAPU16=new Uint16Array(O),u.HEAPU32=Oe=new Uint32Array(O),u.HEAPF32=new Float32Array(O),u.HEAPF64=We=new Float64Array(O)}var je=u.INITIAL_MEMORY||16777216;if(w)q=u.wasmMemory,pe=u.buffer;else if(u.wasmMemory)q=u.wasmMemory;else if(q=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(q.buffer instanceof SharedArrayBuffer))throw H("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&H("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");q&&(pe=q.buffer),je=pe.byteLength,Ue(pe);var Ne,et=[],Ye=[],ct=[];function at(){return Z}function Ht(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Mt(u.preRun.shift());bt(et)}function st(){w||bt(Ye)}function St(){if(!w){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)rn(u.postRun.shift());bt(ct)}}function Mt(O){et.unshift(O)}function Zt(O){Ye.unshift(O)}function rn(O){ct.unshift(O)}var jt=0,pn=null;function kn(O){jt++,u.monitorRunDependencies&&u.monitorRunDependencies(jt)}function aa(O){if(jt--,u.monitorRunDependencies&&u.monitorRunDependencies(jt),jt==0&&pn){var G=pn;pn=null,G()}}function En(O){u.onAbort&&u.onAbort(O),O="Aborted("+O+")",H(O),se=!0,te=1,O+=". Build with -sASSERTIONS for more info.";var G=new WebAssembly.RuntimeError(O);throw f(G),G}var Ia="data:application/octet-stream;base64,";function or(O){return O.startsWith(Ia)}function Xn(O){return O.startsWith("file://")}var Lt;Lt="tfjs-backend-wasm-threaded-simd.wasm",or(Lt)||(Lt=I(Lt));function ka(O){try{if(O==Lt&&U)return new Uint8Array(U);if(R)return R(O);throw"both async and sync fetching of the wasm failed"}catch(G){En(G)}}function as(){if(!U&&(g||v)){if(typeof fetch=="function"&&!Xn(Lt))return fetch(Lt,{credentials:"same-origin"}).then(function(O){if(!O.ok)throw"failed to load wasm binary file at '"+Lt+"'";return O.arrayBuffer()}).catch(function(){return ka(Lt)});if(T)return new Promise(function(O,G){T(Lt,function(de){O(new Uint8Array(de))},G)})}return Promise.resolve().then(function(){return ka(Lt)})}function sa(){var O={env:Zo,wasi_snapshot_preview1:Zo};function G(Se,ke){var Tt=Se.exports;if(u.asm=Tt,Yn(u.asm._emscripten_tls_init),Ne=u.asm.__indirect_function_table,Zt(u.asm.__wasm_call_ctors),X=ke,!w){var Ln=ve.unusedWorkers.length;ve.unusedWorkers.forEach(function(Tr){ve.loadWasmModuleToWorker(Tr,function(){--Ln||aa()})})}}w||kn();function de(Se){G(Se.instance,Se.module)}function De(Se){return as().then(function(ke){return WebAssembly.instantiate(ke,O)}).then(function(ke){return ke}).then(Se,function(ke){H("failed to asynchronously prepare wasm: "+ke),En(ke)})}function Me(){return!U&&typeof WebAssembly.instantiateStreaming=="function"&&!or(Lt)&&!Xn(Lt)&&!b&&typeof fetch=="function"?fetch(Lt,{credentials:"same-origin"}).then(function(Se){var ke=WebAssembly.instantiateStreaming(Se,O);return ke.then(de,function(Tt){return H("wasm streaming compile failed: "+Tt),H("falling back to ArrayBuffer instantiation"),De(de)})}):De(de)}if(u.instantiateWasm)try{var ze=u.instantiateWasm(O,G);return ze}catch(Se){H("Module.instantiateWasm callback failed with error: "+Se),f(Se)}return Me().catch(f),{}}var ss={};function hr(O){this.name="ExitStatus",this.message="Program terminated with exit("+O+")",this.status=O}function oa(O){var G=ve.pthreads[O];delete ve.pthreads[O],G.terminate(),Qo(O),ve.runningWorkers.splice(ve.runningWorkers.indexOf(G),1),G.pthread_ptr=0}function Tn(O){var G=ve.pthreads[O];G.postMessage({cmd:"cancel"})}function Et(O){var G=ve.pthreads[O];ce(G),ve.returnWorkerToPool(G)}function jr(O){var G=ve.getNewWorker();if(!G)return 6;ve.runningWorkers.push(G),ve.pthreads[O.pthread_ptr]=G,G.pthread_ptr=O.pthread_ptr;var de={cmd:"run",start_routine:O.startRoutine,arg:O.arg,pthread_ptr:O.pthread_ptr};return G.runPthread=()=>{b&&G.ref(),G.postMessage(de,O.transferList),delete G.runPthread},G.loaded&&G.runPthread(),0}function Pn(O){if(w)return Ta(1,1,O);te=O,at()||(ve.terminateAllThreads(),u.onExit&&u.onExit(O),se=!0),m(O,new hr(O))}function J(O,G){if(te=O,!G&&w)throw He(O),"unwind";Pn(O)}var le=J;function Ce(O){if(O instanceof hr||O=="unwind")return te;m(1,O)}var ve={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){w?ve.initWorker():ve.initMainThread()},initMainThread:function(){for(var O=8;O--;)ve.allocateUnusedWorker()},initWorker:function(){Z=!1},setExitStatus:function(O){te=O},terminateAllThreads:function(){for(var O of Object.values(ve.pthreads))ve.returnWorkerToPool(O);for(var O of ve.unusedWorkers)O.terminate();ve.unusedWorkers=[]},returnWorkerToPool:function(O){var G=O.pthread_ptr;delete ve.pthreads[G],ve.unusedWorkers.push(O),ve.runningWorkers.splice(ve.runningWorkers.indexOf(O),1),O.pthread_ptr=0,b&&O.unref(),Qo(G)},receiveObjectTransfer:function(O){},threadInitTLS:function(){ve.tlsInitFunctions.forEach(O=>O())},loadWasmModuleToWorker:function(O,G){O.onmessage=ze=>{var Se=ze.data,ke=Se.cmd;if(O.pthread_ptr&&(ve.currentProxiedOperationCallerThread=O.pthread_ptr),Se.targetThread&&Se.targetThread!=Gr()){var Tt=ve.pthreads[Se.targetThread];Tt?Tt.postMessage(Se,Se.transferList):H('Internal error! Worker sent a message "'+ke+'" to target pthread '+Se.targetThread+", but that thread no longer exists!"),ve.currentProxiedOperationCallerThread=void 0;return}ke==="processProxyingQueue"?Go(Se.queue):ke==="spawnThread"?jr(Se):ke==="cleanupThread"?Et(Se.thread):ke==="killThread"?oa(Se.thread):ke==="cancelThread"?Tn(Se.thread):ke==="loaded"?(O.loaded=!0,b&&O.unref(),G&&G(O),O.runPthread&&O.runPthread()):ke==="print"?V("Thread "+Se.threadId+": "+Se.text):ke==="printErr"?H("Thread "+Se.threadId+": "+Se.text):ke==="alert"?alert("Thread "+Se.threadId+": "+Se.text):Se.target==="setimmediate"?O.postMessage(Se):ke==="callHandler"?u[Se.handler](...Se.args):ke&&H("worker sent an unknown command "+ke),ve.currentProxiedOperationCallerThread=void 0},O.onerror=ze=>{var Se="worker sent an error!";throw H(Se+" "+ze.filename+":"+ze.lineno+": "+ze.message),ze},b&&(O.on("message",function(ze){O.onmessage({data:ze})}),O.on("error",function(ze){O.onerror(ze)}),O.on("detachedExit",function(){}));var de=[],De=["onExit","onAbort","print","printErr"];for(var Me of De)u.hasOwnProperty(Me)&&de.push(Me);O.postMessage({cmd:"load",handlers:de,urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:q,wasmModule:X})},allocateUnusedWorker:function(){var O,G=I("tfjs-backend-wasm-threaded-simd.worker.js");O=new Worker(G),ve.unusedWorkers.push(O)},getNewWorker:function(){return ve.unusedWorkers.length==0&&(ve.allocateUnusedWorker(),ve.loadWasmModuleToWorker(ve.unusedWorkers[0])),ve.unusedWorkers.pop()}};u.PThread=ve;function bt(O){for(;O.length>0;)O.shift()(u)}function _t(){var O=Gr(),G=i()[O+52>>>2],de=i()[O+56>>>2],De=G-de;ei(G,De),Js(G)}u.establishStackSpace=_t;function He(O){if(w)return Ta(2,0,O);try{le(O)}catch(G){Ce(G)}}var Pe=[];function Ut(O){var G=Pe[O];return G||(O>=Pe.length&&(Pe.length=O+1),Pe[O]=G=Ne.get(O)),G}function Bn(O,G){var de=Ut(O)(G);at()?ve.setExitStatus(de):ls(de)}u.invokeEntryPoint=Bn;function Yn(O){ve.tlsInitFunctions.push(O)}function os(O){Jo(O,!v,1,!g),ve.threadInitTLS()}function Ur(O){w?postMessage({cmd:"cleanupThread",thread:O}):Et(O)}function is(O,G,de,De){return w?Ta(3,1,O,G,de,De):an(O,G,de,De)}function an(O,G,de,De){if(typeof SharedArrayBuffer>"u")return H("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Me=[],ze=0;if(w&&(Me.length===0||ze))return is(O,G,de,De);var Se={startRoutine:de,pthread_ptr:O,arg:De,transferList:Me};return w?(Se.cmd="spawnThread",postMessage(Se,Me),0):jr(Se)}function ir(){return 65536}var us=!0;function Ou(){return us}function Go(O){Atomics.store(i(),O>>2,1),Gr()&&Gu(O),Atomics.compareExchange(i(),O>>2,1,0)}u.executeNotifiedProxyingQueue=Go;function Cf(O,G,de,De){if(O==G)setTimeout(()=>Go(De));else if(w)postMessage({targetThread:O,cmd:"processProxyingQueue",queue:De});else{var Me=ve.pthreads[O];if(!Me)return;Me.postMessage({cmd:"processProxyingQueue",queue:De})}return 1}function Fu(O,G,de){return-1}function Ks(){En("")}function Ea(O){Ea.shown||(Ea.shown={}),Ea.shown[O]||(Ea.shown[O]=1,b&&(O="warning: "+O),H(O))}function Mu(){b||v||Ea("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Pu(){return Date.now()}function Bu(){return 4294901760}function Nf(){return Bu()}var qo;b?qo=()=>{var O=process.hrtime();return O[0]*1e3+O[1]/1e6}:qo=()=>performance.timeOrigin+performance.now();function Af(O,G,de){o().copyWithin(O>>>0,G>>>0,G+de>>>0)}function Lu(){return b?Ma.cpus().length:navigator.hardwareConcurrency}function Wu(O){var G=Zs(),de=O();return Js(G),de}function Ta(O,G){var de=arguments.length-2,De=arguments;return Wu(()=>{for(var Me=de,ze=Qs(Me*8),Se=ze>>3,ke=0;ke<de;ke++){var Tt=De[2+ke];l()[Se+ke>>>0]=Tt}return Ys(O,Me,ze,G)})}var Ko=[];function Rf(O,G,de){Ko.length=G;for(var De=de>>3,Me=0;Me<G;Me++)Ko[Me]=l()[De+Me>>>0];var ze=O<0,Se=ze?ss[-O-1]:Jn[O];return Se.apply(null,Ko)}function $f(O){try{return q.grow(O-pe.byteLength+65535>>>16),Ue(q.buffer),1}catch{}}function zu(O){var G=o().length;if(O=O>>>0,O<=G)return!1;var de=Bu();if(O>de)return!1;let De=(Tt,Ln)=>Tt+(Ln-Tt%Ln)%Ln;for(var Me=1;Me<=4;Me*=2){var ze=G*(1+.2/Me);ze=Math.min(ze,O+100663296);var Se=Math.min(de,De(Math.max(O,ze),65536)),ke=$f(Se);if(ke)return!0}return!1}function Vu(){throw"unwind"}function Xs(O){return w?Ta(4,1,O):52}function Xo(O,G,de,De,Me){return w?Ta(5,1,O,G,de,De,Me):70}var Yo=[null,[],[]];function cs(O,G){var de=Yo[O];G===0||G===10?((O===1?V:H)(ne(de,0)),de.length=0):de.push(G)}function Zn(O,G,de,De){if(w)return Ta(6,1,O,G,de,De);for(var Me=0,ze=0;ze<de;ze++){var Se=c()[G>>>2],ke=c()[G+4>>>2];G+=8;for(var Tt=0;Tt<ke;Tt++)cs(O,o()[Se+Tt>>>0]);Me+=ke}return c()[De>>>2]=Me,0}function Hu(O){var G=u["_"+O];return G}function Df(O,G){s().set(O,G>>>0)}function ju(O,G,de,De,Me){var ze={string:Cn=>{var Na=0;if(Cn!=null&&Cn!==0){var eo=(Cn.length<<2)+1;Na=Qs(eo),be(Cn,Na,eo)}return Na},array:Cn=>{var Na=Qs(Cn.length);return Df(Cn,Na),Na}};function Se(Cn){return G==="string"?ie(Cn):G==="boolean"?!!Cn:Cn}var ke=Hu(O),Tt=[],Ln=0;if(De)for(var Tr=0;Tr<De.length;Tr++){var Ku=ze[de[Tr]];Ku?(Ln===0&&(Ln=Zs()),Tt[Tr]=Ku(De[Tr])):Tt[Tr]=De[Tr]}var ni=ke.apply(null,Tt);function Xu(Cn){return Ln!==0&&Js(Ln),Se(Cn)}return ni=Xu(ni),ni}function Uu(O,G,de,De){de=de||[];var Me=de.every(Se=>Se==="number"||Se==="boolean"),ze=G!=="string";return ze&&Me&&!De?Hu(O):function(){return ju(O,G,de,arguments)}}ve.init();var Jn=[null,Pn,He,is,Xs,Xo,Zn],Zo={__emscripten_init_main_thread_js:os,__emscripten_thread_cleanup:Ur,__pthread_create_js:an,_emscripten_default_pthread_stack_size:ir,_emscripten_get_now_is_monotonic:Ou,_emscripten_notify_task_queue:Cf,_emscripten_set_offscreencanvas_size:Fu,abort:Ks,emscripten_check_blocking_allowed:Mu,emscripten_date_now:Pu,emscripten_get_heap_max:Nf,emscripten_get_now:qo,emscripten_memcpy_big:Af,emscripten_num_logical_cores:Lu,emscripten_receive_on_main_thread_js:Rf,emscripten_resize_heap:zu,emscripten_unwind_to_js_event_loop:Vu,exit:le,fd_close:Xs,fd_seek:Xo,fd_write:Zn,memory:q||u.wasmMemory};sa(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},u._init=function(){return(u._init=u.asm.init).apply(null,arguments)},u._init_with_threads_count=function(){return(u._init_with_threads_count=u.asm.init_with_threads_count).apply(null,arguments)},u._get_threads_count=function(){return(u._get_threads_count=u.asm.get_threads_count).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.register_tensor).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.dispose_data).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.dispose).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.Abs).apply(null,arguments)},u._Acos=function(){return(u._Acos=u.asm.Acos).apply(null,arguments)},u._Acosh=function(){return(u._Acosh=u.asm.Acosh).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.Add).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.AddN).apply(null,arguments)},u._All=function(){return(u._All=u.asm.All).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.Any).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.ArgMax).apply(null,arguments)},u._ArgMin=function(){return(u._ArgMin=u.asm.ArgMin).apply(null,arguments)},u._Asin=function(){return(u._Asin=u.asm.Asin).apply(null,arguments)},u._Asinh=function(){return(u._Asinh=u.asm.Asinh).apply(null,arguments)},u._Atan=function(){return(u._Atan=u.asm.Atan).apply(null,arguments)},u._Atan2=function(){return(u._Atan2=u.asm.Atan2).apply(null,arguments)},u._Atanh=function(){return(u._Atanh=u.asm.Atanh).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.AvgPool).apply(null,arguments)},u._AvgPool3D=function(){return(u._AvgPool3D=u.asm.AvgPool3D).apply(null,arguments)},u._AvgPool3DGrad=function(){return(u._AvgPool3DGrad=u.asm.AvgPool3DGrad).apply(null,arguments)},u._AvgPoolGrad=function(){return(u._AvgPoolGrad=u.asm.AvgPoolGrad).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.BatchMatMul).apply(null,arguments)},u._Bincount=function(){return(u._Bincount=u.asm.Bincount).apply(null,arguments)},u._BitwiseAnd=function(){return(u._BitwiseAnd=u.asm.BitwiseAnd).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.Ceil).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.ClipByValue).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Conv2D).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.Conv2DBackpropInput).apply(null,arguments)},u._Conv3D=function(){return(u._Conv3D=u.asm.Conv3D).apply(null,arguments)},u._Conv3DBackpropFilterV2=function(){return(u._Conv3DBackpropFilterV2=u.asm.Conv3DBackpropFilterV2).apply(null,arguments)},u._Conv3DBackpropInputV2=function(){return(u._Conv3DBackpropInputV2=u.asm.Conv3DBackpropInputV2).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.Cos).apply(null,arguments)},u._Cosh=function(){return(u._Cosh=u.asm.Cosh).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.CropAndResize).apply(null,arguments)},u._Cumprod=function(){return(u._Cumprod=u.asm.Cumprod).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.Cumsum).apply(null,arguments)},u._DenseBincount=function(){return(u._DenseBincount=u.asm.DenseBincount).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.DepthToSpace).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.DepthwiseConv2dNative).apply(null,arguments)},u._Diag=function(){return(u._Diag=u.asm.Diag).apply(null,arguments)},u._Dilation2D=function(){return(u._Dilation2D=u.asm.Dilation2D).apply(null,arguments)},u._Dilation2DBackpropFilter=function(){return(u._Dilation2DBackpropFilter=u.asm.Dilation2DBackpropFilter).apply(null,arguments)},u._Dilation2DBackpropInput=function(){return(u._Dilation2DBackpropInput=u.asm.Dilation2DBackpropInput).apply(null,arguments)},u._Elu=function(){return(u._Elu=u.asm.Elu).apply(null,arguments)},u._EluGrad=function(){return(u._EluGrad=u.asm.EluGrad).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.Equal).apply(null,arguments)},u._Erf=function(){return(u._Erf=u.asm.Erf).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Exp).apply(null,arguments)},u._Expm1=function(){return(u._Expm1=u.asm.Expm1).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.FlipLeftRight).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm.Floor).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.FloorDiv).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.FusedBatchNorm).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.FusedConv2D).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.FusedDepthwiseConv2D).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.Gather).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.GatherNd).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.Greater).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.GreaterEqual).apply(null,arguments)},u._IsFinite=function(){return(u._IsFinite=u.asm.IsFinite).apply(null,arguments)},u._IsInf=function(){return(u._IsInf=u.asm.IsInf).apply(null,arguments)},u._IsNan=function(){return(u._IsNan=u.asm.IsNan).apply(null,arguments)},u._LRN=function(){return(u._LRN=u.asm.LRN).apply(null,arguments)},u._LRNGrad=function(){return(u._LRNGrad=u.asm.LRNGrad).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.LeakyRelu).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.Less).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.LessEqual).apply(null,arguments)},u._LinSpace=function(){return(u._LinSpace=u.asm.LinSpace).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.Log).apply(null,arguments)},u._Log1p=function(){return(u._Log1p=u.asm.Log1p).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.LogicalAnd).apply(null,arguments)},u._LogicalNot=function(){return(u._LogicalNot=u.asm.LogicalNot).apply(null,arguments)},u._LogicalOr=function(){return(u._LogicalOr=u.asm.LogicalOr).apply(null,arguments)},u._LogicalXor=function(){return(u._LogicalXor=u.asm.LogicalXor).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.Max).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.MaxPool).apply(null,arguments)},u._MaxPool3D=function(){return(u._MaxPool3D=u.asm.MaxPool3D).apply(null,arguments)},u._MaxPool3DGrad=function(){return(u._MaxPool3DGrad=u.asm.MaxPool3DGrad).apply(null,arguments)},u._MaxPoolGrad=function(){return(u._MaxPoolGrad=u.asm.MaxPoolGrad).apply(null,arguments)},u._MaxPoolWithArgmax=function(){return(u._MaxPoolWithArgmax=u.asm.MaxPoolWithArgmax).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.Maximum).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.Mean).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.Min).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.Minimum).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.MirrorPad).apply(null,arguments)},u._Mod=function(){return(u._Mod=u.asm.Mod).apply(null,arguments)},u._Multinomial=function(){return(u._Multinomial=u.asm.Multinomial).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.Multiply).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.Neg).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.NonMaxSuppressionV3).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.NonMaxSuppressionV4).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.NonMaxSuppressionV5).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.NotEqual).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.OneHot).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.PadV2).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Pow).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Prelu).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Prod).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.RealDiv).apply(null,arguments)},u._Reciprocal=function(){return(u._Reciprocal=u.asm.Reciprocal).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Relu).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Relu6).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.ResizeBilinear).apply(null,arguments)},u._ResizeBilinearGrad=function(){return(u._ResizeBilinearGrad=u.asm.ResizeBilinearGrad).apply(null,arguments)},u._ResizeNearestNeighbor=function(){return(u._ResizeNearestNeighbor=u.asm.ResizeNearestNeighbor).apply(null,arguments)},u._ResizeNearestNeighborGrad=function(){return(u._ResizeNearestNeighborGrad=u.asm.ResizeNearestNeighborGrad).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Reverse).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.RotateWithOffset).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Round).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.Rsqrt).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.ScatterNd).apply(null,arguments)},u._SearchSorted=function(){return(u._SearchSorted=u.asm.SearchSorted).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.SelectV2).apply(null,arguments)},u._Selu=function(){return(u._Selu=u.asm.Selu).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Sigmoid).apply(null,arguments)},u._Sign=function(){return(u._Sign=u.asm.Sign).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Sin).apply(null,arguments)},u._Sinh=function(){return(u._Sinh=u.asm.Sinh).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Softmax).apply(null,arguments)},u._Softplus=function(){return(u._Softplus=u.asm.Softplus).apply(null,arguments)},u._SparseFillEmptyRows=function(){return(u._SparseFillEmptyRows=u.asm.SparseFillEmptyRows).apply(null,arguments)},u._SparseReshape=function(){return(u._SparseReshape=u.asm.SparseReshape).apply(null,arguments)},u._SparseSegmentReduction=function(){return(u._SparseSegmentReduction=u.asm.SparseSegmentReduction).apply(null,arguments)},u._SparseToDense=function(){return(u._SparseToDense=u.asm.SparseToDense).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Sqrt).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Square).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.SquaredDifference).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Step).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.StridedSlice).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Sub).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Sum).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Tan).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Tanh).apply(null,arguments)},u._TensorScatterUpdate=function(){return(u._TensorScatterUpdate=u.asm.TensorScatterUpdate).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm.Tile).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.TopK).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.Transform).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.Transpose).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm._FusedMatMul).apply(null,arguments)},u._malloc=function(){return(u._malloc=u.asm.malloc).apply(null,arguments)},u._free=function(){return(u._free=u.asm.free).apply(null,arguments)},u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm._emscripten_tls_init).apply(null,arguments)};var Gr=u._pthread_self=function(){return(Gr=u._pthread_self=u.asm.pthread_self).apply(null,arguments)};u.___errno_location=function(){return(u.___errno_location=u.asm.__errno_location).apply(null,arguments)};var Jo=u.__emscripten_thread_init=function(){return(Jo=u.__emscripten_thread_init=u.asm._emscripten_thread_init).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm._emscripten_thread_crashed).apply(null,arguments)},u._emscripten_main_thread_process_queued_calls=function(){return(u._emscripten_main_thread_process_queued_calls=u.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},u._emscripten_main_browser_thread_id=function(){return(u._emscripten_main_browser_thread_id=u.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Ys=u._emscripten_run_in_main_runtime_thread_js=function(){return(Ys=u._emscripten_run_in_main_runtime_thread_js=u.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};u._emscripten_dispatch_to_thread_=function(){return(u._emscripten_dispatch_to_thread_=u.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var Gu=u.__emscripten_proxy_execute_task_queue=function(){return(Gu=u.__emscripten_proxy_execute_task_queue=u.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Qo=u.__emscripten_thread_free_data=function(){return(Qo=u.__emscripten_thread_free_data=u.asm._emscripten_thread_free_data).apply(null,arguments)},ls=u.__emscripten_thread_exit=function(){return(ls=u.__emscripten_thread_exit=u.asm._emscripten_thread_exit).apply(null,arguments)},ei=u._emscripten_stack_set_limits=function(){return(ei=u._emscripten_stack_set_limits=u.asm.emscripten_stack_set_limits).apply(null,arguments)},Zs=u.stackSave=function(){return(Zs=u.stackSave=u.asm.stackSave).apply(null,arguments)},Js=u.stackRestore=function(){return(Js=u.stackRestore=u.asm.stackRestore).apply(null,arguments)},Qs=u.stackAlloc=function(){return(Qs=u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)};u.dynCall_iijjiiii=function(){return(u.dynCall_iijjiiii=u.asm.dynCall_iijjiiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)},u.keepRuntimeAlive=at,u.wasmMemory=q,u.cwrap=Uu,u.ExitStatus=hr,u.PThread=ve;var Ca;pn=function O(){Ca||ti(),Ca||(pn=O)};function ti(O){if(jt>0)return;if(w){d(u),st(),startWorker(u);return}if(Ht(),jt>0)return;function G(){Ca||(Ca=!0,u.calledRun=!0,!se&&(st(),d(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),St()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),G()},1)):G()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();ti();var ds;p&&(ds={uncaughtException:process.listeners("uncaughtException").filter(function(O){return!p.uncaughtException.indexOf(O)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(O){return!p.unhandledRejection.indexOf(O)>-1})});var fs;if(typeof WasmBackendModule<"u")fs=WasmBackendModule;else if(typeof a<"u")fs=a;else throw new Error("Could not find wasm module in post.js");if(ds){var qu=fs._dispose;fs._dispose=function(){qu(),ds.uncaughtException.forEach(function(O){process.removeListener("uncaughtException",O)}),ds.unhandledRejection.forEach(function(O){process.removeListener("unhandledRejection",O)})}}return a.ready}})();t.exports=n})(s_);var o_=s_.exports;const i_=Ws(o_),Rz=Vh({__proto__:null,default:i_},[o_]);var $z=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`,u_={exports:{}};(function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var s=typeof a<"u"?a:{},o,i;s.ready=new Promise(function(J,le){o=J,i=le});var c;typeof process<"u"&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var l=Object.assign({},s),u=typeof window=="object",d=typeof importScripts=="function",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",p="";function h(J){return s.locateFile?s.locateFile(J,p):p+J}var m,g,v;if(f){var b=Ma,w=Ma;d?p=w.dirname(p)+"/":p=__dirname+"/",m=(J,le)=>(J=je(J)?new URL(J):w.normalize(J),b.readFileSync(J,le?void 0:"utf8")),v=J=>{var le=m(J,!0);return le.buffer||(le=new Uint8Array(le)),le},g=(J,le,Ce)=>{J=je(J)?new URL(J):w.normalize(J),b.readFile(J,function(ve,bt){ve?Ce(ve):le(bt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(J){if(!(J instanceof at))throw J}),process.on("unhandledRejection",function(J){throw J}),s.inspect=function(){return"[Emscripten Module object]"}}else(u||d)&&(d?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",m=J=>{var le=new XMLHttpRequest;return le.open("GET",J,!1),le.send(null),le.responseText},d&&(v=J=>{var le=new XMLHttpRequest;return le.open("GET",J,!1),le.responseType="arraybuffer",le.send(null),new Uint8Array(le.response)}),g=(J,le,Ce)=>{var ve=new XMLHttpRequest;ve.open("GET",J,!0),ve.responseType="arraybuffer",ve.onload=()=>{if(ve.status==200||ve.status==0&&ve.response){le(ve.response);return}Ce()},ve.onerror=Ce,ve.send(null)});var S=s.print||console.log.bind(console),I=s.printErr||console.warn.bind(console);Object.assign(s,l),l=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit;var E;s.wasmBinary&&(E=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&Oe("no native wasm support detected");var T,R=!1,$=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function D(J,le,Ce){le>>>=0;for(var ve=le+Ce,bt=le;J[bt]&&!(bt>=ve);)++bt;if(bt-le>16&&J.buffer&&$)return $.decode(J.subarray(le,bt));for(var _t="";le<bt;){var He=J[le++];if(!(He&128)){_t+=String.fromCharCode(He);continue}var Pe=J[le++]&63;if((He&224)==192){_t+=String.fromCharCode((He&31)<<6|Pe);continue}var Ut=J[le++]&63;if((He&240)==224?He=(He&15)<<12|Pe<<6|Ut:He=(He&7)<<18|Pe<<12|Ut<<6|J[le++]&63,He<65536)_t+=String.fromCharCode(He);else{var Bn=He-65536;_t+=String.fromCharCode(55296|Bn>>10,56320|Bn&1023)}}return _t}function M(J,le){return J>>>=0,J?D(U,J,le):""}function z(J,le,Ce,ve){if(Ce>>>=0,!(ve>0))return 0;for(var bt=Ce,_t=Ce+ve-1,He=0;He<J.length;++He){var Pe=J.charCodeAt(He);if(Pe>=55296&&Pe<=57343){var Ut=J.charCodeAt(++He);Pe=65536+((Pe&1023)<<10)|Ut&1023}if(Pe<=127){if(Ce>=_t)break;le[Ce++>>>0]=Pe}else if(Pe<=2047){if(Ce+1>=_t)break;le[Ce++>>>0]=192|Pe>>6,le[Ce++>>>0]=128|Pe&63}else if(Pe<=65535){if(Ce+2>=_t)break;le[Ce++>>>0]=224|Pe>>12,le[Ce++>>>0]=128|Pe>>6&63,le[Ce++>>>0]=128|Pe&63}else{if(Ce+3>=_t)break;le[Ce++>>>0]=240|Pe>>18,le[Ce++>>>0]=128|Pe>>12&63,le[Ce++>>>0]=128|Pe>>6&63,le[Ce++>>>0]=128|Pe&63}}return le[Ce>>>0]=0,Ce-bt}function F(J,le,Ce){return z(J,U,le,Ce)}var V,H,U,Z;function q(J){V=J,s.HEAP8=H=new Int8Array(J),s.HEAP16=new Int16Array(J),s.HEAP32=new Int32Array(J),s.HEAPU8=U=new Uint8Array(J),s.HEAPU16=new Uint16Array(J),s.HEAPU32=Z=new Uint32Array(J),s.HEAPF32=new Float32Array(J),s.HEAPF64=new Float64Array(J)}s.INITIAL_MEMORY;var X=[],se=[],te=[];function ce(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)ie(s.preRun.shift());Ht(X)}function ee(){Ht(se)}function ne(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)be(s.postRun.shift());Ht(te)}function ie(J){X.unshift(J)}function ge(J){se.unshift(J)}function be(J){te.unshift(J)}var pe=0,we=null;function Re(J){pe++,s.monitorRunDependencies&&s.monitorRunDependencies(pe)}function $e(J){if(pe--,s.monitorRunDependencies&&s.monitorRunDependencies(pe),pe==0&&we){var le=we;we=null,le()}}function Oe(J){s.onAbort&&s.onAbort(J),J="Aborted("+J+")",I(J),R=!0,J+=". Build with -sASSERTIONS for more info.";var le=new WebAssembly.RuntimeError(J);throw i(le),le}var We="data:application/octet-stream;base64,";function Ue(J){return J.startsWith(We)}function je(J){return J.startsWith("file://")}var Ne;Ne="tfjs-backend-wasm.wasm",Ue(Ne)||(Ne=h(Ne));function et(J){try{if(J==Ne&&E)return new Uint8Array(E);if(v)return v(J);throw"both async and sync fetching of the wasm failed"}catch(le){Oe(le)}}function Ye(){if(!E&&(u||d)){if(typeof fetch=="function"&&!je(Ne))return fetch(Ne,{credentials:"same-origin"}).then(function(J){if(!J.ok)throw"failed to load wasm binary file at '"+Ne+"'";return J.arrayBuffer()}).catch(function(){return et(Ne)});if(g)return new Promise(function(J,le){g(Ne,function(Ce){J(new Uint8Array(Ce))},le)})}return Promise.resolve().then(function(){return et(Ne)})}function ct(){var J={env:as,wasi_snapshot_preview1:as};function le(He,Pe){var Ut=He.exports;s.asm=Ut,T=s.asm.memory,q(T.buffer),s.asm.__indirect_function_table,ge(s.asm.__wasm_call_ctors),$e()}Re();function Ce(He){le(He.instance)}function ve(He){return Ye().then(function(Pe){return WebAssembly.instantiate(Pe,J)}).then(function(Pe){return Pe}).then(He,function(Pe){I("failed to asynchronously prepare wasm: "+Pe),Oe(Pe)})}function bt(){return!E&&typeof WebAssembly.instantiateStreaming=="function"&&!Ue(Ne)&&!je(Ne)&&!f&&typeof fetch=="function"?fetch(Ne,{credentials:"same-origin"}).then(function(He){var Pe=WebAssembly.instantiateStreaming(He,J);return Pe.then(Ce,function(Ut){return I("wasm streaming compile failed: "+Ut),I("falling back to ArrayBuffer instantiation"),ve(Ce)})}):ve(Ce)}if(s.instantiateWasm)try{var _t=s.instantiateWasm(J,le);return _t}catch(He){I("Module.instantiateWasm callback failed with error: "+He),i(He)}return bt().catch(i),{}}function at(J){this.name="ExitStatus",this.message="Program terminated with exit("+J+")",this.status=J}function Ht(J){for(;J.length>0;)J.shift()(s)}function st(){Oe("")}function St(){return 4294901760}function Mt(){return St()}function Zt(J,le,Ce){U.copyWithin(J>>>0,le>>>0,le+Ce>>>0)}function rn(J){try{return T.grow(J-V.byteLength+65535>>>16),q(T.buffer),1}catch{}}function jt(J){var le=U.length;J=J>>>0;var Ce=St();if(J>Ce)return!1;let ve=(Ut,Bn)=>Ut+(Bn-Ut%Bn)%Bn;for(var bt=1;bt<=4;bt*=2){var _t=le*(1+.2/bt);_t=Math.min(_t,J+100663296);var He=Math.min(Ce,ve(Math.max(J,_t),65536)),Pe=rn(He);if(Pe)return!0}return!1}function pn(J){return 52}function kn(J,le,Ce,ve,bt){return 70}var aa=[null,[],[]];function En(J,le){var Ce=aa[J];le===0||le===10?((J===1?S:I)(D(Ce,0)),Ce.length=0):Ce.push(le)}function Ia(J,le,Ce,ve){for(var bt=0,_t=0;_t<Ce;_t++){var He=Z[le>>>2],Pe=Z[le+4>>>2];le+=8;for(var Ut=0;Ut<Pe;Ut++)En(J,U[He+Ut>>>0]);bt+=Pe}return Z[ve>>>2]=bt,0}function or(J){var le=s["_"+J];return le}function Xn(J,le){H.set(J,le>>>0)}function Lt(J,le,Ce,ve,bt){var _t={string:an=>{var ir=0;if(an!=null&&an!==0){var us=(an.length<<2)+1;ir=hr(us),F(an,ir,us)}return ir},array:an=>{var ir=hr(an.length);return Xn(an,ir),ir}};function He(an){return le==="string"?M(an):le==="boolean"?!!an:an}var Pe=or(J),Ut=[],Bn=0;if(ve)for(var Yn=0;Yn<ve.length;Yn++){var os=_t[Ce[Yn]];os?(Bn===0&&(Bn=sa()),Ut[Yn]=os(ve[Yn])):Ut[Yn]=ve[Yn]}var Ur=Pe.apply(null,Ut);function is(an){return Bn!==0&&ss(Bn),He(an)}return Ur=is(Ur),Ur}function ka(J,le,Ce,ve){Ce=Ce||[];var bt=Ce.every(He=>He==="number"||He==="boolean"),_t=le!=="string";return _t&&bt&&!ve?or(J):function(){return Lt(J,le,Ce,arguments)}}var as={abort:st,emscripten_get_heap_max:Mt,emscripten_memcpy_big:Zt,emscripten_resize_heap:jt,fd_close:pn,fd_seek:kn,fd_write:Ia};ct(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._init=function(){return(s._init=s.asm.init).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.init_with_threads_count).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.get_threads_count).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.register_tensor).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.dispose_data).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.dispose).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.Abs).apply(null,arguments)},s._Acos=function(){return(s._Acos=s.asm.Acos).apply(null,arguments)},s._Acosh=function(){return(s._Acosh=s.asm.Acosh).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.Add).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.AddN).apply(null,arguments)},s._All=function(){return(s._All=s.asm.All).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.Any).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.ArgMax).apply(null,arguments)},s._ArgMin=function(){return(s._ArgMin=s.asm.ArgMin).apply(null,arguments)},s._Asin=function(){return(s._Asin=s.asm.Asin).apply(null,arguments)},s._Asinh=function(){return(s._Asinh=s.asm.Asinh).apply(null,arguments)},s._Atan=function(){return(s._Atan=s.asm.Atan).apply(null,arguments)},s._Atan2=function(){return(s._Atan2=s.asm.Atan2).apply(null,arguments)},s._Atanh=function(){return(s._Atanh=s.asm.Atanh).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.AvgPool).apply(null,arguments)},s._AvgPool3D=function(){return(s._AvgPool3D=s.asm.AvgPool3D).apply(null,arguments)},s._AvgPool3DGrad=function(){return(s._AvgPool3DGrad=s.asm.AvgPool3DGrad).apply(null,arguments)},s._AvgPoolGrad=function(){return(s._AvgPoolGrad=s.asm.AvgPoolGrad).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.BatchMatMul).apply(null,arguments)},s._Bincount=function(){return(s._Bincount=s.asm.Bincount).apply(null,arguments)},s._BitwiseAnd=function(){return(s._BitwiseAnd=s.asm.BitwiseAnd).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.Ceil).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.ClipByValue).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.Conv2D).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.Conv2DBackpropInput).apply(null,arguments)},s._Conv3D=function(){return(s._Conv3D=s.asm.Conv3D).apply(null,arguments)},s._Conv3DBackpropFilterV2=function(){return(s._Conv3DBackpropFilterV2=s.asm.Conv3DBackpropFilterV2).apply(null,arguments)},s._Conv3DBackpropInputV2=function(){return(s._Conv3DBackpropInputV2=s.asm.Conv3DBackpropInputV2).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.Cos).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.Cosh).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.CropAndResize).apply(null,arguments)},s._Cumprod=function(){return(s._Cumprod=s.asm.Cumprod).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.Cumsum).apply(null,arguments)},s._DenseBincount=function(){return(s._DenseBincount=s.asm.DenseBincount).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.DepthToSpace).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.DepthwiseConv2dNative).apply(null,arguments)},s._Diag=function(){return(s._Diag=s.asm.Diag).apply(null,arguments)},s._Dilation2D=function(){return(s._Dilation2D=s.asm.Dilation2D).apply(null,arguments)},s._Dilation2DBackpropFilter=function(){return(s._Dilation2DBackpropFilter=s.asm.Dilation2DBackpropFilter).apply(null,arguments)},s._Dilation2DBackpropInput=function(){return(s._Dilation2DBackpropInput=s.asm.Dilation2DBackpropInput).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.Elu).apply(null,arguments)},s._EluGrad=function(){return(s._EluGrad=s.asm.EluGrad).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.Equal).apply(null,arguments)},s._Erf=function(){return(s._Erf=s.asm.Erf).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.Exp).apply(null,arguments)},s._Expm1=function(){return(s._Expm1=s.asm.Expm1).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.FlipLeftRight).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.Floor).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.FloorDiv).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.FusedBatchNorm).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.FusedConv2D).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.FusedDepthwiseConv2D).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.Gather).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.GatherNd).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.Greater).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.GreaterEqual).apply(null,arguments)},s._IsFinite=function(){return(s._IsFinite=s.asm.IsFinite).apply(null,arguments)},s._IsInf=function(){return(s._IsInf=s.asm.IsInf).apply(null,arguments)},s._IsNan=function(){return(s._IsNan=s.asm.IsNan).apply(null,arguments)},s._LRN=function(){return(s._LRN=s.asm.LRN).apply(null,arguments)},s._LRNGrad=function(){return(s._LRNGrad=s.asm.LRNGrad).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.LeakyRelu).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Less).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.LessEqual).apply(null,arguments)},s._LinSpace=function(){return(s._LinSpace=s.asm.LinSpace).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm.Log).apply(null,arguments)},s._Log1p=function(){return(s._Log1p=s.asm.Log1p).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.LogicalAnd).apply(null,arguments)},s._LogicalNot=function(){return(s._LogicalNot=s.asm.LogicalNot).apply(null,arguments)},s._LogicalOr=function(){return(s._LogicalOr=s.asm.LogicalOr).apply(null,arguments)},s._LogicalXor=function(){return(s._LogicalXor=s.asm.LogicalXor).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.Max).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.MaxPool).apply(null,arguments)},s._MaxPool3D=function(){return(s._MaxPool3D=s.asm.MaxPool3D).apply(null,arguments)},s._MaxPool3DGrad=function(){return(s._MaxPool3DGrad=s.asm.MaxPool3DGrad).apply(null,arguments)},s._MaxPoolGrad=function(){return(s._MaxPoolGrad=s.asm.MaxPoolGrad).apply(null,arguments)},s._MaxPoolWithArgmax=function(){return(s._MaxPoolWithArgmax=s.asm.MaxPoolWithArgmax).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.Maximum).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.Mean).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.Min).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.Minimum).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.MirrorPad).apply(null,arguments)},s._Mod=function(){return(s._Mod=s.asm.Mod).apply(null,arguments)},s._Multinomial=function(){return(s._Multinomial=s.asm.Multinomial).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.Multiply).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.Neg).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.NonMaxSuppressionV3).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.NonMaxSuppressionV4).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.NonMaxSuppressionV5).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.NotEqual).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.OneHot).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.PadV2).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.Pow).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.Prelu).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.Prod).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.RealDiv).apply(null,arguments)},s._Reciprocal=function(){return(s._Reciprocal=s.asm.Reciprocal).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.Relu).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.Relu6).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.ResizeBilinear).apply(null,arguments)},s._ResizeBilinearGrad=function(){return(s._ResizeBilinearGrad=s.asm.ResizeBilinearGrad).apply(null,arguments)},s._ResizeNearestNeighbor=function(){return(s._ResizeNearestNeighbor=s.asm.ResizeNearestNeighbor).apply(null,arguments)},s._ResizeNearestNeighborGrad=function(){return(s._ResizeNearestNeighborGrad=s.asm.ResizeNearestNeighborGrad).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.Reverse).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.RotateWithOffset).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.Round).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.Rsqrt).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.ScatterNd).apply(null,arguments)},s._SearchSorted=function(){return(s._SearchSorted=s.asm.SearchSorted).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.SelectV2).apply(null,arguments)},s._Selu=function(){return(s._Selu=s.asm.Selu).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Sigmoid).apply(null,arguments)},s._Sign=function(){return(s._Sign=s.asm.Sign).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Sin).apply(null,arguments)},s._Sinh=function(){return(s._Sinh=s.asm.Sinh).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Softmax).apply(null,arguments)},s._Softplus=function(){return(s._Softplus=s.asm.Softplus).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.SparseFillEmptyRows).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.SparseReshape).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.SparseSegmentReduction).apply(null,arguments)},s._SparseToDense=function(){return(s._SparseToDense=s.asm.SparseToDense).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Sqrt).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Square).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.SquaredDifference).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Step).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.StridedSlice).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Sub).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Sum).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Tan).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Tanh).apply(null,arguments)},s._TensorScatterUpdate=function(){return(s._TensorScatterUpdate=s.asm.TensorScatterUpdate).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Tile).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.TopK).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Transform).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Transpose).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm._FusedMatMul).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.malloc).apply(null,arguments)},s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)};var sa=s.stackSave=function(){return(sa=s.stackSave=s.asm.stackSave).apply(null,arguments)},ss=s.stackRestore=function(){return(ss=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},hr=s.stackAlloc=function(){return(hr=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};s.dynCall_iijjiiii=function(){return(s.dynCall_iijjiiii=s.asm.dynCall_iijjiiii).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.dynCall_jiji).apply(null,arguments)},s.cwrap=ka;var oa;we=function J(){oa||Tn(),oa||(we=J)};function Tn(J){if(pe>0||(ce(),pe>0))return;function le(){oa||(oa=!0,s.calledRun=!0,!R&&(ee(),o(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),ne()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),le()},1)):le()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();Tn();var Et;c&&(Et={uncaughtException:process.listeners("uncaughtException").filter(function(J){return!c.uncaughtException.indexOf(J)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(J){return!c.unhandledRejection.indexOf(J)>-1})});var jr;if(typeof a<"u")jr=a;else if(typeof WasmBackendModuleThreadedSimd<"u")jr=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(Et){var Pn=jr._dispose;jr._dispose=function(){Pn(),Et.uncaughtException.forEach(function(J){process.removeListener("uncaughtException",J)}),Et.unhandledRejection.forEach(function(J){process.removeListener("unhandledRejection",J)})}}return a.ready}})();t.exports=n})(u_);var c_=u_.exports;const l_=Ws(c_),Dz=Vh({__proto__:null,default:l_},[c_]);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _v=i_||Rz,Oz=l_||Dz;class Fz extends Qh{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(Vz),this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new B0(this,Kp())}write(e,n,r){const a={id:this.dataIdNextNumber++};return this.move(a,e,n,r,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const n=za();return e(),{kernelMs:za()-n}}move(e,n,r,a,s){const o=this.dataIdNextNumber++;if(a==="string"){const u=n;this.dataIdMap.set(e,{id:o,stringBytes:u,shape:r,dtype:a,memoryOffset:null,refCount:s});return}const i=Y(r),c=i*Yi(a),l=this.wasm._malloc(c)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:l,shape:r,dtype:a,refCount:s}),this.wasm.tfjs.registerTensor(o,i,l),n!=null&&this.wasm.HEAPU8.set(new Uint8Array(n.buffer,n.byteOffset,c),l)}async read(e){return this.readSync(e)}readSync(e,n,r){const{memoryOffset:a,dtype:s,shape:o,stringBytes:i}=this.dataIdMap.get(e);if(s==="string")return(n==null||n===0)&&(r==null||r>=i.length)?i:i.slice(n,r);n=n||0,r=r||Y(o);const c=Yi(s),l=this.wasm.HEAPU8.slice(a+n*c,a+r*c);return Bz(l.buffer,s)}disposeData(e,n=!1){if(this.dataIdMap.has(e)){const r=this.dataIdMap.get(e);if(r.refCount--,!n&&r.refCount>0)return!1;this.wasm._free(r.memoryOffset),this.wasm.tfjs.disposeData(r.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const n=this.dataIdMap.get(e);n!=null&&n.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,n,r,a){let s;if(r==null)s=this.write(a??null,e,n);else{const o=this.dataIdNextNumber++;s={id:o},this.dataIdMap.set(s,{id:o,memoryOffset:r,shape:e,dtype:n,refCount:1});const i=Y(e);this.wasm.tfjs.registerTensor(o,i,r)}return{dataId:s,shape:e,dtype:n}}typedArrayFromHeap({shape:e,dtype:n,dataId:r}){const a=this.wasm.HEAPU8.buffer,{memoryOffset:s}=this.dataIdMap.get(r),o=Y(e);switch(n){case"float32":return new Float32Array(a,s,o);case"int32":return new Int32Array(a,s,o);case"bool":return new Uint8Array(a,s,o);default:throw new Error(`Unknown dtype ${n}`)}}}function Mz(t){return(e,n)=>(TT(t,{credentials:"same-origin"}).then(r=>{r.ok||e.env.a(`failed to load wasm binary file at '${t}'`),r.arrayBuffer().then(a=>{WebAssembly.instantiate(a,e).then(s=>{n(s.instance,s.module)})})}),{})}function xv(t,e,n){let r="tfjs-backend-wasm.wasm";return t&&e?r="tfjs-backend-wasm-threaded-simd.wasm":t&&(r="tfjs-backend-wasm-simd.wasm"),zi!=null&&zi[r]!=null?zi[r]:n+r}async function Pz(){const[t,e]=await Promise.all([Xe().getAsync("WASM_HAS_SIMD_SUPPORT"),Xe().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{const a={};a.locateFile=(i,c)=>{if(i.endsWith(".worker.js")){const l=$z.replace(/\n/g,"\\n"),u=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(u)}return i.endsWith(".wasm")?xv(t,e,Di??c):c+i},d_&&(a.instantiateWasm=Mz(xv(t,e,Di??"")));let s=!1;a.onAbort=()=>{if(s||bc)return;bc=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})};let o;e&&t&&Wz==null?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+_v.toString()],{type:"text/javascript"}),o=_v(a)):o=Oz(a),o.then(i=>{s=!0,bc=!1;const c=null;i.tfjs={init:i.cwrap("init",null,[]),initWithThreadsCount:i.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:i.cwrap("get_threads_count","number",[]),registerTensor:i.cwrap("register_tensor",null,["number","number","number"]),disposeData:i.cwrap("dispose_data",c,["number"]),dispose:i.cwrap("dispose",c,[])},n({wasm:i})}).catch(r)})}function Bz(t,e){switch(e){case"float32":return new Float32Array(t);case"int32":return new Int32Array(t);case"bool":return new Uint8Array(t);default:throw new Error(`Unknown dtype ${e}`)}}const Lz=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let Wz=null,Di=null,zi={},bc=!1,d_=!1;function zz(t,e=!1){if(bc)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof t=="string")Di=t;else{zi=t;const n=Lz.filter(r=>zi[r]==null);if(n.length>0)throw new Error(`There were no entries found for the following binaries: ${n.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}d_=e}let Vz=-1;/** @license See the LICENSE file. */const Hz="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jz=2;z1("wasm",async()=>{const{wasm:t}=await Pz();return new Fz(t)},jz);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uz=xw;class Sf extends Qh{nextDataId(){return Sf.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new B0(this,Kp())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Xe().get("IS_NODE")&&ys(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ul(r[0])){const s=r.map(o=>ks(o));a=this.write(s,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,s){this.data.set(e,{values:n,dtype:a,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Co(a,s)}return lT(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>eu(a));return Qe(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qe(e.shape,e.dtype,n)}makeOutput(e,n,r){return Kp().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=za();return e(),{kernelMs:za()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){xe([e],"where");const n=this.readSync(e.dataId);return Uz(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Sf.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */z1("cpu",()=>new Sf,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_=vt(Bl,t=>t>=0?t:Math.exp(t)-1),Gz={kernelName:Bl,backendName:"cpu",kernelFunc:f_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:s}=r;xe([a],"leakyRelu");const o=Y(a.shape),i=n.data.get(a.dataId).values,c=Dn("float32",o);for(let l=0;l<i.length;l++)c[l]=i[l]<0?s*i[l]:i[l];return n.makeTensorInfo(a.shape,"float32",c)}const qz={kernelName:ed,backendName:"cpu",kernelFunc:p_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kz=Yt((t,e)=>t<0?e*t:t);function h_(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;xe([r,a],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[i,c]=Kz(r.shape,a.shape,s,o,"float32");return n.makeTensorInfo(c,"float32",i)}const Xz={kernelName:Td,backendName:"cpu",kernelFunc:h_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_=vt(Ad,t=>Math.max(0,t)),Yz={kernelName:Ad,backendName:"cpu",kernelFunc:m_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g_=vt(Dd,t=>Math.min(Math.max(0,t),6)),Zz={kernelName:Dd,backendName:"cpu",kernelFunc:g_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e,n,r,a){if(n==="linear")return ea({inputs:{x:e},backend:t});if(n==="relu")return m_({inputs:{x:e},backend:t});if(n==="elu")return f_({inputs:{x:e},backend:t});if(n==="relu6")return g_({inputs:{x:e},backend:t});if(n==="prelu")return h_({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return p_({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return D2({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:s}=r,o=Y(a.shape),i=L0(s,o),c=Y(i);A(o===c,()=>`The new shape (${i}) has ${c} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const l=n.data.get(a.dataId);if(l.complexTensorInfos!=null){const u=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;u.shape=i,d.shape=i}return{dataId:a.dataId,shape:i,dtype:a.dtype}}const Jz={kernelName:Im,backendName:"cpu",kernelFunc:Rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s}=e,{transposeA:o,transposeB:i}=r;xe([a,s],"matMul");const c=a.shape.length,l=s.shape.length,u=o?a.shape[c-2]:a.shape[c-1],d=i?s.shape[l-1]:s.shape[l-2],f=o?a.shape[c-1]:a.shape[c-2],p=i?s.shape[l-2]:s.shape[l-1],h=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=Y(h),v=Y(m),w=At(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,p]);A(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${o} and transposeB=${i} must match.`);const S=o?[g,u,f]:[g,f,u],I=i?[v,p,d]:[v,d,p],E=Rt({inputs:{x:a},backend:n,attrs:{shape:S}}),T=Rt({inputs:{x:s},backend:n,attrs:{shape:I}}),R=o?E.shape[1]:E.shape[2],$=o?E.shape[2]:E.shape[1],D=i?T.shape[1]:T.shape[2],M=Math.max(g,v),z=n.data.get(E.dataId).values,F=n.data.get(T.dataId).values,V=Ie(E.shape),H=Ie(T.shape),[U,Z,q]=o?[V[0],1,V[1]]:[V[0],V[1],1],[X,se,te]=i?[1,H[1],H[0]]:[H[1],1,H[0]],ce=$*D,ee=Qe([M,$,D],E.dtype),ne=ee.values,ie=n.blockSize;for(let ge=0;ge<M;ge++){const be=ge%g,pe=ge%v;for(let we=0;we<$;we+=ie){const Re=Math.min(we+ie,$);for(let $e=0;$e<D;$e+=ie){const Oe=Math.min($e+ie,D);for(let We=0;We<R;We+=ie){const Ue=Math.min(We+ie,R);for(let je=we;je<Re;je++)for(let Ne=$e;Ne<Oe;Ne++){let et=0;for(let Ye=We;Ye<Ue;Ye++){const ct=z[be*U+je*Z+Ye*q],at=F[Ye*X+Ne*se+pe*te];et+=ct*at}ne[ge*ce+(je*D+Ne)]+=et}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(w,ee.dtype,ee.values)}const Qz={kernelName:wl,backendName:"cpu",kernelFunc:y_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eV(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s,bias:o,preluActivationWeights:i}=e,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:d}=r;let f,p,h;const m=[];f=y_({inputs:{a,b:s},attrs:{transposeA:c,transposeB:l},backend:n}),o&&(p=No({inputs:{a:f,b:o},backend:n}),m.push(f),f=p),u&&(h=Kc(n,f,u,i,d),m.push(f),f=h);for(const v of m)n.disposeIntermediateTensorInfo(v);return f}const tV={kernelName:Zi,backendName:"cpu",kernelFunc:eV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nV=vt(cl,t=>Math.acos(t)),rV={kernelName:cl,backendName:"cpu",kernelFunc:nV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aV=vt(ll,t=>Math.acosh(t)),sV={kernelName:ll,backendName:"cpu",kernelFunc:aV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oV(t){const{inputs:e,backend:n}=t,r=e;xe(e,"addN");const a=r.map(i=>n.data.get(i.dataId).values),s=Qe(r[0].shape,r[0].dtype),o=s.values;for(let i=0;i<r.length;i++){const c=a[i];for(let l=0;l<o.length;l++)o[l]+=c[l]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const iV={kernelName:dl,backendName:"cpu",kernelFunc:oV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r;xe(a,"all");const i=Vt(s,a.shape);let c=i;const l=pr(c,a.shape.length);let u=a;l!=null&&(u=Gn({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Mn(c.length,a.shape.length)),Fn("all",c,u.shape.length);const[d,f]=On(u.shape,c),p=Y(f),h=In(Y(d),u.dtype),m=n.data.get(u.dataId).values;for(let v=0;v<h.length;++v){const b=v*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];w=w&&I}h[v]=w}l!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,h);if(o){const v=vn(d,i),b=Rt({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const cV={kernelName:fl,backendName:"cpu",kernelFunc:uV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r;xe(a,"any");const i=Vt(s,a.shape);let c=i;const l=pr(c,a.shape.length);let u=a;l!=null&&(u=Gn({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Mn(c.length,a.shape.length)),Fn("any",c,u.shape.length);const[d,f]=On(u.shape,c),p=Y(f),h=In(Y(d),u.dtype),m=n.data.get(u.dataId).values;for(let v=0;v<h.length;++v){const b=v*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];w=w||I}h[v]=w}l!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,h);if(o){const v=vn(d,i),b=Rt({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const dV={kernelName:pl,backendName:"cpu",kernelFunc:lV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;xe(a,"argMax");let o=Vt(s,a.shape);const i=pr(o,a.shape.length);let c=a;const l=[];i!=null&&(c=Gn({inputs:{x:a},backend:n,attrs:{perm:i}}),l.push(c),o=Mn(o.length,c.shape.length)),o=[o[0]],Fn("argMax",o,c.shape.length);const[u,d]=On(c.shape,o),f=Y(u),p=In(f,"int32"),h=Y(d),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*h;let b=m[v],w=0;for(let S=0;S<h;++S){const I=m[v+S];I>b&&(b=I,w=S)}p[g]=w}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}const pV={kernelName:am,backendName:"cpu",kernelFunc:fV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;xe(a,"argMin");let o=Vt(s,a.shape);const i=pr(o,a.shape.length);let c=a;const l=[];i!=null&&(c=Gn({inputs:{x:a},backend:n,attrs:{perm:i}}),l.push(c),o=Mn(o.length,c.shape.length)),o=[o[0]],Fn("argMin",o,c.shape.length);const[u,d]=On(c.shape,o),f=Y(u),p=In(f,"int32"),h=Y(d),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*h;let b=m[v],w=0;for(let S=0;S<h;++S){const I=m[v+S];I<b&&(b=I,w=S)}p[g]=w}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}const mV={kernelName:sm,backendName:"cpu",kernelFunc:hV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV=vt(hl,t=>Math.asin(t)),yV={kernelName:hl,backendName:"cpu",kernelFunc:gV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV=vt(ml,t=>Math.asinh(t)),bV={kernelName:ml,backendName:"cpu",kernelFunc:vV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV=vt(gl,t=>Math.atan(t)),SV={kernelName:gl,backendName:"cpu",kernelFunc:wV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V=Yt((t,e)=>Math.atan2(t,e)),xV=cn(vl,_V),IV={kernelName:vl,backendName:"cpu",kernelFunc:xV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kV=vt(yl,t=>Math.atanh(t)),EV={kernelName:yl,backendName:"cpu",kernelFunc:kV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(t,e,n,r,a,s){const o=a.strideHeight,i=a.strideWidth,c=a.dilationHeight,l=a.dilationWidth,u=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,h=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Qe(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],b=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const I=S*v,E=S*r[0];for(let T=0;T<a.inChannels;++T)for(let R=0;R<a.outHeight;++R){const $=R*o-f,D=Math.max(0,$),M=Math.min(a.inHeight,u+$),z=I+R*b;for(let F=0;F<a.outWidth;++F){const V=F*i-p,H=Math.max(0,V),U=Math.min(a.inWidth,d+V);let Z=h,q=0,X=0;for(let te=D;te<M;te+=c){const ce=E+te*r[1];for(let ee=H;ee<U;ee+=l){const ne=ce+ee*r[2],ie=t[ne+T];s==="max"&&ie>Z?Z=ie:s==="avg"&&(q+=ie,X++)}if(isNaN(Z))break}const se=z+F*w+T;g[se]=s==="avg"?q/X:Z}}}return m}function v_(t,e,n,r,a=!1,s=!1){const o=Qe(r.outShape,"int32"),i=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=Qe(e,n,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let b=0;b<r.outHeight;++b){const w=b*i-p;let S=w;for(;S<0;)S+=l;const I=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const T=E*c-h;let R=T;for(;R<0;)R+=u;const $=Math.min(r.inWidth,f+T);let D=Number.NEGATIVE_INFINITY,M=-1;for(let z=S;z<I;z+=l){const F=z-w;for(let V=R;V<$;V+=u){const H=V-T,U=m.get(g,z,V,v);U>D&&(D=U,a?M=s?((g*r.inHeight+z)*r.inWidth+V)*r.inChannels+v:(z*r.inWidth+V)*r.inChannels+v:M=F*f+H)}}o.set(M,g,b,E,v)}}return o}function b_(t,e,n,r,a,s){const o=a.strideDepth,i=a.strideHeight,c=a.strideWidth,l=a.dilationDepth,u=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,b=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Qe(a.outShape,n),S=w.values,I=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],T=a.outShape[3]*a.outShape[4],R=a.outShape[4];for(let $=0;$<a.batchSize;++$){const D=$*I,M=$*r[0];for(let z=0;z<a.inChannels;++z)for(let F=0;F<a.outDepth;++F){const V=F*o-m;let H=V;for(;H<0;)H+=l;const U=Math.min(a.inDepth,f+V),Z=D+F*E;for(let q=0;q<a.outHeight;++q){const X=q*i-g;let se=X;for(;se<0;)se+=u;const te=Math.min(a.inHeight,p+X),ce=Z+q*T;for(let ee=0;ee<a.outWidth;++ee){const ne=ee*c-v;let ie=ne;for(;ie<0;)ie+=d;const ge=Math.min(a.inWidth,h+ne),be=ce+ee*R;let pe=b,we=0,Re=0;for(let Oe=H;Oe<U;Oe+=l){const We=M+Oe*r[1];for(let Ue=se;Ue<te;Ue+=u){const je=We+Ue*r[2];for(let Ne=ie;Ne<ge;Ne+=d){const et=je+Ne*r[3],Ye=t[et+z];if(s==="max"&&Ye>pe?pe=Ye:s==="avg"&&(we+=Ye,Re++),isNaN(pe))break}if(isNaN(pe))break}if(isNaN(pe))break}const $e=be+z;S[$e]=s==="avg"?we/Math.max(Re,1):pe}}}}return w}function TV(t,e){const n=Qe(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,h=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let v=0;v<e.outDepth;++v){const b=v*r-f;let w=b;for(;w<0;)w+=o;const S=Math.min(e.inDepth,l+b);for(let I=0;I<e.outHeight;++I){const E=I*a-p;let T=E;for(;T<0;)T+=i;const R=Math.min(e.inHeight,u+E);for(let $=0;$<e.outWidth;++$){const D=$*s-h;let M=D;for(;M<0;)M+=c;const z=Math.min(e.inWidth,d+D);let F=Number.NEGATIVE_INFINITY,V=-1;for(let H=w;H<S;H+=o){const U=H-b;for(let Z=T;Z<R;Z+=i){const q=Z-E;for(let X=M;X<z;X+=c){const se=X-D,te=t.get(m,H,Z,X,g);te>=F&&(F=te,V=U*u*d+q*u+se)}}}n.set(V,m,v,I,$,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;xe(a,"avgPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:c}=r,l=1;A(Er(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const u=Vr(a.shape,s,o,l,i,c);let d;if(u.filterWidth===1&&u.filterHeight===1&&Ir(u.inShape,u.outShape))d=ea({inputs:{x:a},backend:n});else{const f=n.data.get(a.dataId).values,p=Ie(a.shape),h=gg(f,a.shape,a.dtype,p,u,"avg");d=n.makeTensorInfo(u.outShape,a.dtype,h.values)}return d}const NV={kernelName:bl,backendName:"cpu",kernelFunc:CV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:c,dataFormat:l}=r;xe(a,"avgPool3d");const u=Ya(a.shape,s,o,1,i,c,l),d=n.data.get(a.dataId).values,f=b_(d,a.shape,a.dtype,Ie(a.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const RV={kernelName:om,backendName:"cpu",kernelFunc:AV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $V(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=r;xe([a,s],"avgPool3DGrad");const u=Ya(s.shape,o,i,1,c,l),d=u.strideDepth,f=u.strideHeight,p=u.strideWidth,h=u.filterDepth,m=u.filterHeight,g=u.filterWidth,v=u.dilationDepth,b=u.dilationHeight,w=u.dilationWidth,S=u.effectiveFilterDepth,I=u.effectiveFilterHeight,E=u.effectiveFilterWidth,T=S-1-u.padInfo.front,R=E-1-u.padInfo.left,$=I-1-u.padInfo.top,D=Qe(s.shape,"float32"),M=1/(h*m*g),z=n.bufferSync(a);for(let F=0;F<u.batchSize;++F)for(let V=0;V<u.inChannels;++V)for(let H=0;H<u.inDepth;++H)for(let U=0;U<u.inHeight;++U)for(let Z=0;Z<u.inWidth;++Z){const q=H-T,X=U-$,se=Z-R;let te=0;for(let ce=0;ce<S;ce+=v){const ee=(q+ce)/d;if(!(ee<0||ee>=u.outDepth||Math.floor(ee)!==ee))for(let ne=0;ne<I;ne+=b){const ie=(X+ne)/f;if(!(ie<0||ie>=u.outHeight||Math.floor(ie)!==ie))for(let ge=0;ge<E;ge+=w){const be=(se+ge)/p;if(be<0||be>=u.outWidth||Math.floor(be)!==be)continue;const pe=z.get(F,ee,ie,be,V);te+=pe}}}D.set(te*M,F,H,U,Z,V)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const DV={kernelName:U0,backendName:"cpu",kernelFunc:$V};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,o=s;xe([a,s],"avgPoolGrad");const{filterSize:i,strides:c,pad:l}=r,u=Vr(o.shape,i,c,1,l),d=u.strideHeight,f=u.strideWidth,p=u.filterHeight,h=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,v=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=b-1-u.padInfo.left,S=v-1-u.padInfo.top,I=Qe(o.shape,"float32"),E=1/(p*h),T=n.data.get(a.dataId).values,R=Qe(a.shape,"float32",T);for(let $=0;$<u.batchSize;++$)for(let D=0;D<u.inChannels;++D)for(let M=0;M<u.inHeight;++M)for(let z=0;z<u.inWidth;++z){const F=M-S,V=z-w;let H=0;for(let U=0;U<v;U+=m){const Z=(F+U)/d;if(!(Z<0||Z>=u.outHeight||Math.floor(Z)!==Z))for(let q=0;q<b;q+=g){const X=(V+q)/f;if(X<0||X>=u.outWidth||Math.floor(X)!==X)continue;const se=R.get($,Z,X,D);H+=se}}I.set(H*E,$,M,z,D)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const FV={kernelName:j0,backendName:"cpu",kernelFunc:OV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:s,offset:o,mean:i,variance:c}=e;A(i.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),xe([a,i,c,s,o],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=n.data.get(c.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=h.length,v=p.length,b=f.length,w=d.length;let S=0,I=0,E=0,T=0;for(let R=0;R<u.length;++R)m[R]=h[S++]+(u[R]-d[I++])*p[E++]/Math.sqrt(f[T++]+l),S>=g&&(S=0),I>=w&&(I=0),E>=v&&(E=0),T>=b&&(T=0);return n.makeTensorInfo(a.shape,a.dtype,m)}const PV={kernelName:Gl,backendName:"cpu",kernelFunc:MV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,crops:o}=r;xe([a],"batchToSpaceND");const i=s.reduce((v,b)=>v*b),c=gf(a.shape,s,i),l=yf(c.length,s.length),u=vf(a.shape,s,i),d=Gw(o,s.length),f=qw(u,o,s.length),p=Rt({inputs:{x:a},backend:n,attrs:{shape:c}}),h=Gn({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Rt({inputs:{x:h},backend:n,attrs:{shape:u}}),g=Bs({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const LV={kernelName:im,backendName:"cpu",kernelFunc:BV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:o}=r,i=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,l=E2(i,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,l)}const zV={kernelName:Sl,backendName:"cpu",kernelFunc:WV};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VV(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,i=At(Array.from(s),Array.from(o));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}const HV={kernelName:um,backendName:"cpu",kernelFunc:VV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=vt(Iu,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),UV={kernelName:Iu,backendName:"cpu",kernelFunc:jV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GV=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Y(e.shape)),a=n.data.get(e.dataId),s=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,i=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values;for(let l=0;l<i.length;l++){const u=i[l],d=c[l];r[l]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},qV={kernelName:q0,backendName:"cpu",kernelFunc:GV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ao(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const KV={kernelName:t1,backendName:"cpu",kernelFunc:Ao};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ro(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,s=Vt(a,e[0].shape)[0],o=e.map(m=>m.shape);jw(o,s);let i=So(e.map(m=>m.shape),s);if(Y(i)===0)return n.makeTensorInfo(i,e[0].dtype,[]);const c=e.filter(m=>Y(m.shape)>0);if(c.length===1)return ea({inputs:{x:c[0]},backend:n});if(c[0].dtype==="complex64"){const m=c.map(S=>Ps({inputs:{input:S},backend:n})),g=c.map(S=>Ao({inputs:{input:S},backend:n})),v=Ro({inputs:m,backend:n,attrs:{axis:s}}),b=Ro({inputs:g,backend:n,attrs:{axis:s}}),w=nr({inputs:{real:v,imag:b},backend:n});return m.forEach(S=>n.disposeIntermediateTensorInfo(S)),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),w}const l=c.map(m=>{const v=[-1,Y(m.shape.slice(s))];return Rt({inputs:{x:m},backend:n,attrs:{shape:v}})}),u=l.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));i=So(l.map(m=>m.shape),1);const d=l[0].shape[0]===1,f=T2(u,i,e[0].dtype,d),p=So(c.map(m=>m.shape),s),h=n.makeTensorInfo(p,e[0].dtype,f);return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const XV={kernelName:cm,backendName:"cpu",kernelFunc:Ro};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:o,pad:i,dataFormat:c,dilations:l,dimRoundingMode:u}=r;xe([a,s],"conv2d");const d=Wo(c),f=Kn(a.shape,s.shape,o,l,i,u,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,w=f.dataFormat==="channelsLast",S=new on(f.outShape,a.dtype),I=Ie(a.shape),E=Ie(s.shape),T=I[0],R=w?I[1]:I[2],$=w?I[2]:1,D=w?1:I[1],M=S.strides[0],z=w?S.strides[1]:S.strides[2],F=w?S.strides[2]:1,V=w?1:S.strides[1],H=n.data.get(a.dataId).values,U=n.data.get(s.dataId).values,Z=S.values;for(let q=0;q<f.batchSize;++q){const X=q*T,se=q*M;for(let te=0;te<f.outHeight;++te){const ce=se+te*z,ee=te*f.strideHeight-b;for(let ne=0;ne<p;++ne){const ie=ee+ne*m;if(ie<0||ie>=f.inHeight)continue;const ge=ne*E[0],be=X+ie*R;for(let pe=0;pe<f.outWidth;++pe){const we=ce+pe*F,Re=pe*f.strideWidth-v;for(let $e=0;$e<h;++$e){const Oe=Re+$e*g;if(Oe<0||Oe>=f.inWidth)continue;const We=ge+$e*E[1],Ue=be+Oe*$;let je=We;for(let Ne=0;Ne<f.inChannels;++Ne){const et=H[Ue+Ne*D];for(let Ye=0;Ye<f.outChannels;++Ye)Z[we+Ye*V]+=et*U[je+Ye];je+=f.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,Z)}const YV={kernelName:kl,backendName:"cpu",kernelFunc:w_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:o,pad:i,dataFormat:c,dimRoundingMode:l,filterShape:u}=r;xe([a,s],"conv2dBackpropFilter");const d=Wo(c),f=Kn(a.shape,u,o,1,i,l,!1,d),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=f,v=f.dataFormat==="channelsLast",b=new on(f.filterShape,"float32"),w=f.padInfo.left,S=f.padInfo.top,I=n.data.get(a.dataId).values,E=n.data.get(s.dataId).values,T=new on(a.shape,a.dtype,I),R=new on(s.shape,s.dtype,E);for(let $=0;$<m;++$){const D=Math.max(0,Math.ceil((S-$)/p)),M=Math.min(f.outHeight,(f.inHeight+S-$)/p);for(let z=0;z<g;++z){const F=Math.max(0,Math.ceil((w-z)/h)),V=Math.min(f.outWidth,(f.inWidth+w-z)/h);for(let H=0;H<f.inChannels;++H)for(let U=0;U<f.outChannels;++U){let Z=0;for(let q=0;q<f.batchSize;++q)for(let X=D;X<M;++X){const se=$+X*p-S;for(let te=F;te<V;++te){const ce=z+te*h-w;v?Z+=T.get(q,se,ce,H)*R.get(q,X,te,U):Z+=T.get(q,H,se,ce)*R.get(q,U,X,te)}}b.set(Z,$,z,H,U)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const JV={kernelName:K0,backendName:"cpu",kernelFunc:ZV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QV(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{inputShape:o,strides:i,pad:c,dataFormat:l,dimRoundingMode:u}=r;xe([a,s],"conv2dBackpropInput");const d=Ie(s.shape),f=Ie(a.shape);let p=Wo(l);const h=Kn(o,s.shape,i,1,c,u,!1,p),m=new on(h.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,b=n.data.get(s.dataId).values,[w,S,I]=d,{batchSize:E,filterHeight:T,filterWidth:R,inChannels:$,inHeight:D,inWidth:M,outChannels:z,outHeight:F,outWidth:V,strideHeight:H,strideWidth:U}=h;p=h.dataFormat;const Z=T-1-h.padInfo.top,q=R-1-h.padInfo.left,X=p==="channelsLast",se=m.strides[0],te=X?m.strides[1]:m.strides[2],ce=X?m.strides[2]:1,ee=X?1:m.strides[1],ne=f[0],ie=X?f[1]:f[2],ge=X?f[2]:1,be=X?1:f[1];for(let pe=0;pe<E;++pe)for(let we=0;we<$;++we)for(let Re=0;Re<D;++Re){const $e=Re-Z,Oe=Math.max(0,Math.ceil($e/H)),We=Math.min(F,(T+$e)/H);for(let Ue=0;Ue<M;++Ue){const je=Ue-q,Ne=Math.max(0,Math.ceil(je/U)),et=Math.min(V,(R+je)/U);let Ye=0;for(let at=Oe;at<We;++at){const Ht=at*H-$e;for(let st=Ne;st<et;++st){const St=st*U-je,Mt=ne*pe+ie*at+ge*st,Zt=w*(T-1-Ht)+S*(R-1-St)+I*we;for(let rn=0;rn<z;++rn){const jt=v[Mt+be*rn],pn=b[Zt+rn];Ye+=jt*pn}}}const ct=se*pe+te*Re+ce*Ue+ee*we;g[ct]=Ye}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const eH={kernelName:El,backendName:"cpu",kernelFunc:QV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:o,pad:i,dilations:c}=r;xe([a,s],"conv3d");const l=Hs(a.shape,s.shape,o,c,i),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:p,dilationHeight:h,dilationWidth:m,padInfo:g}=l,v=g.front,b=g.left,w=g.top,S=new on(l.outShape,a.dtype),I=n.data.get(a.dataId).values,E=n.data.get(s.dataId).values,T=S.values,R=Ie(a.shape),$=Ie(s.shape);for(let D=0;D<l.batchSize;++D){const M=D*R[0],z=D*S.strides[0];for(let F=0;F<l.outDepth;++F){const V=z+F*S.strides[1],H=F*l.strideDepth-v;for(let U=0;U<u;++U){const Z=H+U*p;if(Z<0||Z>=l.inDepth)continue;const q=U*$[0],X=M+Z*R[1];for(let se=0;se<l.outHeight;++se){const te=V+se*S.strides[2],ce=se*l.strideHeight-w;for(let ee=0;ee<d;++ee){const ne=ce+ee*h;if(ne<0||ne>=l.inHeight)continue;const ie=q+ee*$[1],ge=X+ne*R[2];for(let be=0;be<l.outWidth;++be){const pe=te+be*l.outChannels,we=be*l.strideWidth-b;for(let Re=0;Re<f;++Re){const $e=we+Re*m;if($e<0||$e>=l.inWidth)continue;const Oe=ie+Re*$[2],We=ge+$e*l.inChannels;let Ue=Oe;for(let je=0;je<l.inChannels;++je){const Ne=I[We+je];for(let et=0;et<l.outChannels;++et)T[pe+et]+=Ne*E[Ue+et];Ue+=l.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const nH={kernelName:Tl,backendName:"cpu",kernelFunc:tH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:o,pad:i,filterShape:c}=r;xe([a,s],"conv3dBackpropFilterV2");const l=Ie(a.shape),u=Ie(s.shape),d=Hs(a.shape,c,o,1,i),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,b=new on(d.filterShape,"float32"),w=b.values,[S,I,E,T]=b.strides,R=n.data.get(s.dataId).values,[$,D,M,z]=u,F=n.data.get(a.dataId).values,[V,H,U,Z]=l,q=d.padInfo.front,X=d.padInfo.left,se=d.padInfo.top;for(let te=0;te<m;++te){const ce=Math.max(0,Math.ceil((q-te)/f)),ee=Math.min(d.outDepth,(d.inDepth+q-te)/f),ne=te*S;for(let ie=0;ie<g;++ie){const ge=Math.max(0,Math.ceil((se-ie)/p)),be=Math.min(d.outHeight,(d.inHeight+se-ie)/p),pe=ie*I+ne;for(let we=0;we<v;++we){const Re=Math.max(0,Math.ceil((X-we)/h)),$e=Math.min(d.outWidth,(d.inWidth+X-we)/h),Oe=we*E+pe;for(let We=0;We<d.inChannels;++We){const Ue=We*T+Oe;for(let je=0;je<d.outChannels;++je){let Ne=0;for(let et=0;et<d.batchSize;++et){const Ye=et*V,ct=et*$;for(let at=ce;at<ee;++at){const st=(te+at*f-q)*H+Ye,St=at*D+ct;for(let Mt=ge;Mt<be;++Mt){const rn=(ie+Mt*p-se)*U+st,jt=Mt*M+St;for(let pn=Re;pn<$e;++pn){const aa=(we+pn*h-X)*Z+rn,En=pn*z+jt;Ne+=F[aa+We]*R[En+je]}}}}w[Ue+je]=Ne}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const aH={kernelName:lm,backendName:"cpu",kernelFunc:rH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sH(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{pad:o,strides:i,inputShape:c}=r;xe([a],"conv3dBackpropInputV2");const l=Ie(a.shape),u=Ie(s.shape),d=Hs(c,s.shape,i,1,o),f=new on(d.inShape,"float32"),p=f.values,[h,m,g,v]=f.strides,b=n.data.get(a.dataId).values,[w,S,I,E]=l,T=n.data.get(s.dataId).values,[R,$,D,M]=u,{batchSize:z,filterDepth:F,filterHeight:V,filterWidth:H,inChannels:U,inDepth:Z,inHeight:q,inWidth:X,outChannels:se,outDepth:te,outHeight:ce,outWidth:ee,strideDepth:ne,strideHeight:ie,strideWidth:ge}=d,be=F-1-d.padInfo.front,pe=V-1-d.padInfo.top,we=H-1-d.padInfo.left;for(let Re=0;Re<z;++Re)for(let $e=0;$e<U;++$e)for(let Oe=0;Oe<Z;++Oe){const We=Oe-be,Ue=Math.max(0,Math.ceil(We/ne)),je=Math.min(te,(F+We)/ne);for(let Ne=0;Ne<q;++Ne){const et=Ne-pe,Ye=Math.max(0,Math.ceil(et/ie)),ct=Math.min(ce,(V+et)/ie);for(let at=0;at<X;++at){const Ht=at-we,st=Math.max(0,Math.ceil(Ht/ge)),St=Math.min(ee,(H+Ht)/ge);let Mt=0;for(let Zt=Ue;Zt<je;++Zt){const rn=Zt*ne-We;for(let jt=Ye;jt<ct;++jt){const pn=jt*ie-et;for(let kn=st;kn<St;++kn){const aa=kn*ge-Ht,En=w*Re+S*Zt+I*jt+E*kn,Ia=R*(F-1-rn)+$*(V-1-pn)+D*(H-1-aa)+M*$e;for(let or=0;or<se;++or){const Xn=b[En+or],Lt=T[Ia+or];Mt+=Xn*Lt}}}}p[h*Re+m*Oe+g*Ne+v*at+$e]=Mt}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const oH={kernelName:Cl,backendName:"cpu",kernelFunc:sH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iH=vt(Nl,t=>Math.cos(t)),uH={kernelName:Nl,backendName:"cpu",kernelFunc:iH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cH=vt(Al,t=>Math.cosh(t)),lH={kernelName:Al,backendName:"cpu",kernelFunc:cH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:s,boxInd:o}=e,{cropSize:i,method:c,extrapolationValue:l}=r,[u,d,f,p]=a.shape,h=s.shape[0],[m,g]=i,v=Qe([h,m,g,p],"float32"),b=n.data.get(s.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,I=Ie(a.shape),E=Ie(v.shape);for(let T=0;T<h;T++){const R=T*4,$=b[R],D=b[R+1],M=b[R+2],z=b[R+3],F=w[T];if(F>=u)continue;const V=m>1?(M-$)*(d-1)/(m-1):0,H=g>1?(z-D)*(f-1)/(g-1):0;for(let U=0;U<m;U++){const Z=m>1?$*(d-1)+U*V:.5*($+M)*(d-1);if(Z<0||Z>d-1){for(let q=0;q<g;q++)for(let X=0;X<p;X++){const se=X+q*E[2]+U*E[1]+T*E[0];v.values[se]=l}continue}if(c==="bilinear"){const q=Math.floor(Z),X=Math.ceil(Z),se=Z-q;for(let te=0;te<g;te++){const ce=g>1?D*(f-1)+te*H:.5*(D+z)*(f-1);if(ce<0||ce>f-1){for(let ge=0;ge<p;ge++){const be=ge+te*E[2]+U*E[1]+T*E[0];v.values[be]=l}continue}const ee=Math.floor(ce),ne=Math.ceil(ce),ie=ce-ee;for(let ge=0;ge<p;ge++){let be=ge+ee*I[2]+q*I[1]+F*I[0];const pe=S[be];be=ge+ne*I[2]+q*I[1]+F*I[0];const we=S[be];be=ge+ee*I[2]+X*I[1]+F*I[0];const Re=S[be];be=ge+ne*I[2]+X*I[1]+F*I[0];const $e=S[be],Oe=pe+(we-pe)*ie,We=Re+($e-Re)*ie;be=ge+te*E[2]+U*E[1]+T*E[0],v.values[be]=Oe+(We-Oe)*se}}}else for(let q=0;q<g;++q){const X=g>1?D*(f-1)+q*H:.5*(D+z)*(f-1);if(X<0||X>f-1){for(let ce=0;ce<p;ce++){const ee=ce+q*E[2]+U*E[1]+T*E[0];v.values[ee]=l}continue}const se=Math.round(X),te=Math.round(Z);for(let ce=0;ce<p;ce++){const ee=ce+se*I[2]+te*I[1]+F*I[0],ne=ce+q*E[2]+U*E[1]+T*E[0];v.values[ne]=S[ee]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const fH={kernelName:Dl,backendName:"cpu",kernelFunc:dH};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:o,reverse:i}=r;xe(a,"cumprod");const c=pr([s],a.shape.length);let l=a;c!=null&&(l=Gn({inputs:{x:a},backend:n,attrs:{perm:c}}));const u=Mn(1,a.shape.length)[0];if(u!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${u}`);const d=Bo(l.dtype,"int32"),f=tm(Y(l.shape),d),p=n.data.get(l.dataId).values,h=l.shape[l.shape.length-1],m=i?(v,b)=>v+h-b-1:(v,b)=>v+b;for(let v=0;v<p.length;v+=h)for(let b=0;b<h;b++){const w=m(v,b);if(b===0)f[w]=o?1:p[w];else{const S=m(v,b-1);f[w]=o?p[S]*f[S]:p[w]*f[S]}}const g=n.makeTensorInfo(l.shape,d,f);if(c!=null){const v=cf(c),b=Gn({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),b}return g}const hH={kernelName:Rl,backendName:"cpu",kernelFunc:pH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:o,reverse:i}=r;xe(a,"cumsum");const c=pr([s],a.shape.length);let l=a;c!=null&&(l=Gn({inputs:{x:a},backend:n,attrs:{perm:c}}));const u=Mn(1,a.shape.length)[0];if(u!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${u}`);const d=Bo(l.dtype,"int32"),f=In(Y(l.shape),d),p=n.data.get(l.dataId).values,h=l.shape[l.shape.length-1],m=i?(v,b)=>v+h-b-1:(v,b)=>v+b;for(let v=0;v<p.length;v+=h)for(let b=0;b<h;b++){const w=m(v,b);if(b===0)f[w]=o?0:p[w];else{const S=m(v,b-1);f[w]=o?p[S]+f[S]:p[w]+f[S]}}const g=n.makeTensorInfo(l.shape,d,f);if(c!=null){const v=cf(c),b=Gn({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),b}return g}const gH={kernelName:$l,backendName:"cpu",kernelFunc:mH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:o,binaryOutput:i}=r;if(a.shape.length===1){const c=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,u=E2(c,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(a.shape.length===2){const c=n.bufferSync(a),l=n.bufferSync(s),u=CP(c,l,o,i);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const vH={kernelName:dm,backendName:"cpu",kernelFunc:yH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:s,dataFormat:o}=r;A(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const i=a.shape[0],c=a.shape[1],l=a.shape[2],u=a.shape[3],d=c*s,f=l*s,p=u/(s*s),h=n.data.get(a.dataId).values,m=new Float32Array(i*d*f*p);let g=0;for(let v=0;v<i;++v)for(let b=0;b<d;++b){const w=Math.floor(b/s),S=b%s;for(let I=0;I<f;++I){const E=Math.floor(I/s),T=I%s,R=(S*s+T)*p;for(let $=0;$<p;++$){const M=$+R+u*(E+l*(w+c*v));m[g++]=h[M]}}}return n.makeTensorInfo([i,d,f,p],a.dtype,m)}const wH={kernelName:Ol,backendName:"cpu",kernelFunc:bH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:o,pad:i,dilations:c,dimRoundingMode:l}=r;xe([a,s],"depthwiseConv2DNative");const u=Ie(a.shape),d=Ie(s.shape);let f=c;f==null&&(f=[1,1]),A(Er(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const p=Kn(a.shape,s.shape,o,f,i,l,!0),{filterHeight:h,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=p,w=b.left,S=b.top,I=p.outChannels/p.inChannels,E=new on(p.outShape,a.dtype),T=n.data.get(a.dataId).values,R=n.data.get(s.dataId).values,$=E.values;for(let D=0;D<p.batchSize;++D){const M=D*u[0],z=D*E.strides[0];for(let F=0;F<p.outHeight;++F){const V=z+F*E.strides[1],H=F*p.strideHeight-S;for(let U=0;U<h;++U){const Z=H+U*g;if(Z<0||Z>=p.inHeight)continue;const q=U*d[0],X=M+Z*u[1];for(let se=0;se<p.outWidth;++se){const te=V+se*E.strides[2],ce=se*p.strideWidth-w;for(let ee=0;ee<m;++ee){const ne=ce+ee*v;if(ne<0||ne>=p.inWidth)continue;const ie=q+ee*d[1],ge=X+ne*p.inChannels;let be=te,pe=ie;for(let we=0;we<p.inChannels;++we){const Re=T[ge+we];for(let $e=0;$e<I;++$e)$[be+$e]+=Re*R[pe+$e];be+=I,pe+=I}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const SH={kernelName:Fl,backendName:"cpu",kernelFunc:S_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _H(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:o,dilations:i,pad:c,dimRoundingMode:l,filterShape:u}=r;xe([a,s],"depthwiseConv2dNativeBackpropFilter");const d=Kn(a.shape,u,o,i,c,l,!0),{strideHeight:f,strideWidth:p,filterHeight:h,filterWidth:m}=d,g=new on(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,I=new on(a.shape,a.dtype,S),E=n.data.get(s.dataId).values,T=new on(s.shape,s.dtype,E);for(let R=0;R<h;++R){const $=Math.max(0,Math.ceil((b-R)/f)),D=Math.min(d.outHeight,(d.inHeight+b-R)/f);for(let M=0;M<m;++M){const z=Math.max(0,Math.ceil((v-M)/p)),F=Math.min(d.outWidth,(d.inWidth+v-M)/p);for(let V=0;V<d.outChannels;++V){const H=Math.trunc(V/w),U=V%w;let Z=0;for(let q=0;q<d.batchSize;++q)for(let X=$;X<D;++X){const se=R+X*f-b;for(let te=z;te<F;++te){const ce=M+te*p-v;Z+=I.get(q,se,ce,H)*T.get(q,X,te,V)}}g.set(Z,R,M,H,U)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const xH={kernelName:X0,backendName:"cpu",kernelFunc:_H};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{strides:o,dilations:i,pad:c,dimRoundingMode:l,inputShape:u}=r;xe([a,s],"depthwiseConv2DNativeBackpropInput");const d=Ie(a.shape),f=Ie(s.shape),p=Kn(u,s.shape,o,i,c,l,!0),h=new on(p.inShape,"float32"),m=h.values,[g,v,b]=h.strides,w=n.data.get(a.dataId).values,[S,I,E]=d,T=n.data.get(s.dataId).values,[R,$,D]=f,{batchSize:M,filterHeight:z,filterWidth:F,inChannels:V,inHeight:H,inWidth:U,outChannels:Z,outHeight:q,outWidth:X,strideHeight:se,strideWidth:te}=p,ce=z-1-p.padInfo.top,ee=F-1-p.padInfo.left,ne=Z/V;for(let ie=0;ie<M;++ie)for(let ge=0;ge<V;++ge)for(let be=0;be<H;++be){const pe=be-ce,we=Math.max(0,Math.ceil(pe/se)),Re=Math.min(q,(z+pe)/se);for(let $e=0;$e<U;++$e){const Oe=$e-ee,We=Math.max(0,Math.ceil(Oe/te)),Ue=Math.min(X,(F+Oe)/te);let je=0;for(let Ne=we;Ne<Re;++Ne){const et=Ne*se-pe;for(let Ye=We;Ye<Ue;++Ye){const ct=Ye*te-Oe,at=S*ie+I*Ne+E*Ye,Ht=R*(z-1-et)+$*(F-1-ct)+D*ge;for(let st=0;st<ne;++st){const St=ge*ne+st,Mt=w[at+St],Zt=T[Ht+st];je+=Mt*Zt}}}m[g*ie+v*be+b*$e+ge]=je}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const kH={kernelName:Y0,backendName:"cpu",kernelFunc:IH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EH(t){const{inputs:e,backend:n}=t,{x:r}=e,a=Y(r.shape),s=n.data.get(r.dataId).values,o=Qe([a,a],r.dtype),i=o.values;for(let l=0;l<s.length;l++)i[l*a+l]=s[l];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,o.dtype,o.values)}const TH={kernelName:fm,backendName:"cpu",kernelFunc:EH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CH={kernelName:Ml,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:s,pad:o,dilations:i}=n,c=e,l=c.data.get(r.dataId).values,u=r.shape.length,d=c.data.get(a.dataId).values,f=a.shape.length,{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:w,strideHeight:S,strideWidth:I,filterHeight:E,filterWidth:T,dilationHeight:R,dilationWidth:$,outShape:D}=Lo(r.shape,a.shape,s,o,"NHWC",i),M=Y(D),z=D.length,F=tn(r.dtype,M);for(let H=0;H<p;++H)for(let U=0;U<v;++U){const Z=U*S-w.top;for(let q=0;q<b;++q){const X=q*I-w.left;for(let se=0;se<g;++se){let te=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<E;++ee){const ne=Z+ee*R;if(ne>=0&&ne<h)for(let ie=0;ie<T;++ie){const ge=X+ie*$;if(ge>=0&&ge<m){const be=Zr([H,ne,ge,se],u,Ie(r.shape)),pe=Zr([ee,ie,se],f,Ie(a.shape)),we=l[be]+d[pe];we>te&&(te=we)}}}const ce=Zr([H,U,q,se],z,Ie(D));F[ce]=te}}}return{dataId:c.write(Vs(F,r.dtype),D,r.dtype),shape:D,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NH={kernelName:Nc,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:s}=t,{strides:o,pad:i,dilations:c}=n,l=e,u=xr(r.shape,l.data.get(r.dataId).values),d=xr(a.shape,l.data.get(a.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:I,filterWidth:E,dilationHeight:T,dilationWidth:R,outShape:$}=Lo(r.shape,a.shape,o,i,"NHWC",c);A(s.rank===$.length,()=>`Error in ${Nc}, dy must have the same rank as output ${$.length}, but got ${s.rank}`);const D=xr($,l.data.get(s.dataId).values),M=z0(a.shape,a.dtype);for(let F=0;F<f;++F)for(let V=0;V<g;++V){const H=V*w-b.top;for(let U=0;U<v;++U){const Z=U*S-b.left;for(let q=0;q<m;++q){let X=Number.MIN_SAFE_INTEGER,se=0,te=0;for(let ce=0;ce<I;++ce){const ee=H+ce*T;if(ee>=0&&ee<p)for(let ne=0;ne<E;++ne){const ie=Z+ne*R;if(ie>=0&&ie<h){const ge=u[F][ee][ie][q]+d[ce][ne][q];ge>X&&(X=ge,se=ce,te=ne)}}}M[se][te][q]+=D[F][V][U][q]}}}return{dataId:l.write(Vs(M,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AH={kernelName:Cc,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:s}=t,{strides:o,pad:i,dilations:c}=n,l=e,u=xr(r.shape,l.data.get(r.dataId).values),d=xr(a.shape,l.data.get(a.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:I,filterWidth:E,dilationHeight:T,dilationWidth:R,outShape:$}=Lo(r.shape,a.shape,o,i,"NHWC",c);A(s.rank===$.length,()=>`Error in ${Cc}, dy must have the same rank as output ${$.length}, but got ${s.rank}`);const D=xr($,l.data.get(s.dataId).values),M=z0(r.shape,r.dtype);for(let F=0;F<f;++F)for(let V=0;V<g;++V){const H=V*w-b.top;for(let U=0;U<v;++U){const Z=U*S-b.left;for(let q=0;q<m;++q){let X=Number.MIN_SAFE_INTEGER,se=H<0?0:H,te=Z<0?0:Z;for(let ce=0;ce<I;++ce){const ee=H+ce*T;if(ee>=0&&ee<p)for(let ne=0;ne<E;++ne){const ie=Z+ne*R;if(ie>=0&&ie<h){const ge=u[F][ee][ie][q]+d[ce][ne][q];ge>X&&(X=ge,se=ee,te=ie)}}}M[F][se][te][q]+=D[F][V][U][q]}}}return{dataId:l.write(Vs(M,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RH(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{canvas:s,options:o}=r,{contextOptions:i,imageOptions:c}=o||{},l=c?.alpha||1,u=i?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${i.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,i?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,p]=a.shape.slice(0,2),h=a.shape.length===2?1:a.shape[2],m=n.data.get(a.dataId).values,g=a.dtype==="float32"?255:1,v=new Uint8ClampedArray(p*f*4);for(let w=0;w<f*p;++w){const S=[0,0,0,255*l];for(let E=0;E<h;E++){const T=m[w*h+E];if(a.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(a.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);h===1?(S[0]=T*g,S[1]=T*g,S[2]=T*g):S[E]=T*g}const I=w*4;v[I+0]=Math.round(S[0]),v[I+1]=Math.round(S[1]),v[I+2]=Math.round(S[2]),v[I+3]=Math.round(S[3])}s.width=p,s.height=f;const b=new ImageData(v,p,f);return d.putImageData(b,0,0),a}const $H={kernelName:Z0,backendName:"cpu",kernelFunc:RH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r;xe(a,"sum");let i;a.dtype==="bool"?i=Ua({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):i=ea({inputs:{x:a},backend:n});const c=i.shape.length,l=Vt(s,i.shape),u=pr(l,c);let d=l,f=i;u!=null&&(f=Gn({inputs:{x:i},backend:n,attrs:{perm:u}}),d=Mn(d.length,c)),Fn("sum",d,f.shape.length);const[p,h]=On(f.shape,d),m=Bo(f.dtype,"int32");let g=Gc(n,p,m);const v=Y(h),b=n.data.get(g.dataId).values,w=n.data.get(f.dataId).values;for(let S=0;S<b.length;++S){const I=S*v;let E=0;for(let T=0;T<v;++T)E+=w[I+T];b[S]=E}if(o){const S=vn(g.shape,l),I=g;g=Rt({inputs:{x:g},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(I)}return n.disposeIntermediateTensorInfo(i),u!=null&&n.disposeIntermediateTensorInfo(f),g}const DH={kernelName:qd,backendName:"cpu",kernelFunc:Au};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,s=e,{allDims:o,summedDims:i,idDims:c}=kM(a,s.length);TM(o.length,c,s);const{path:l,steps:u}=CM(i,c),d=u.length;let f=null,p=o.length;const h=[];for(let m=0;m<d;++m){for(const g of u[m]){const{permutationIndices:v,expandDims:b}=EM(p,c[g]);let w;NM(v)?w=s[g]:(w=Gn({inputs:{x:s[g]},backend:n,attrs:{perm:v}}),h.push(w));const S=w.shape.slice();for(let I=0;I<b.length;++I)S.splice(b[I],0,1);Ir(w.shape,S)||(w=Rt({inputs:{x:w},backend:n,attrs:{shape:S}}),h.push(w)),f===null?f=w:(f=wf({inputs:{a:w,b:f},backend:n}),h.push(f))}m<d-1&&(l[m]>=0&&(f=Au({inputs:{x:f},backend:n,attrs:{axis:l[m]-(o.length-p),keepDims:!1}}),h.push(f)),p--)}for(const m of h)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const FH={kernelName:J0,backendName:"cpu",kernelFunc:OH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MH(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;xe([r,a],"eluGrad");const s=new Float32Array(Y(a.shape)),o=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values;for(let c=0;c<o.length;++c){const l=o[c];l>=0?s[c]=i[c]:s[c]=i[c]*(l+1)}return n.makeTensorInfo(a.shape,"float32",s)}const PH={kernelName:pm,backendName:"cpu",kernelFunc:MH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BH=fM,LH=pM,WH=hM,zH=mM,VH=gM,HH=yM,jH=vt(Ll,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+BH*n);return e*(1-((((HH*r+VH)*r+zH)*r+WH)*r+LH)*r*Math.exp(-n*n))}),UH={kernelName:Ll,backendName:"cpu",kernelFunc:jH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xc(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:s}=r,o=a.shape.length,i=a.shape.slice();let c=s;return s<0&&(A(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+s+1),i.splice(c,0,1),Rt({inputs:{x:a},backend:n,attrs:{shape:i}})}const GH={kernelName:hm,backendName:"cpu",kernelFunc:Xc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qH=Yt((t,e)=>t/e),yg=cn(Pl,qH),vh={kernelName:Pl,backendName:"cpu",kernelFunc:yg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function __(t,e,n){const r=t.shape,a=r[0],s=r[1],o=n.data.get(t.dataId),i=o.complexTensorInfos.real,c=o.complexTensorInfos.imag,l=[a,s],u=Y(l),d=Dn("float32",u),f=Dn("float32",u);for(let g=0;g<a;g++){const v=Bs({inputs:{x:i},backend:n,attrs:{begin:[g,0],size:[1,s]}}),b=Bs({inputs:{x:c},backend:n,attrs:{begin:[g,0],size:[1,s]}}),w=nr({inputs:{real:v,imag:b},backend:n}),{real:S,imag:I}=KH(w,e,n),E=Co(S,I);for(let T=0;T<s;T++){const R=Kw(E,T);d[g*s+T]=R.real,f[g*s+T]=R.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w)}const p=n.makeTensorInfo(l,"float32",d),h=n.makeTensorInfo(l,"float32",f),m=nr({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}function KH(t,e,n){const r=Y(t.shape),a=n.data.get(t.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(XH(r)){const i=bh(s,o,r,e,n),c=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(c,"float32",i.real),u=n.makeTensorInfo(c,"float32",i.imag),d=n.makeTensorInfo([],"float32",Vm(r,"float32")),f=ea({inputs:{x:d},backend:n}),p=vh.kernelFunc({inputs:{a:l,b:d},backend:n}),h=vh.kernelFunc({inputs:{a:u,b:f},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return i}else{const i=Co(s,o),c=YH(i,r,e);return vM(c)}}function XH(t){return(t&t-1)===0}function bh(t,e,n,r,a){if(n===1)return{real:t,imag:e};const s=Co(t,e),o=n/2,i=bM(s),c=i.real,l=i.imag,u=[c.length],d=a.makeTensorInfo(u,"float32",c),f=a.makeTensorInfo(u,"float32",l),p=nr({inputs:{real:d,imag:f},backend:a}),h=wM(s),m=h.real,g=h.imag,v=[m.length],b=a.makeTensorInfo(v,"float32",m),w=a.makeTensorInfo(v,"float32",g),S=nr({inputs:{real:b,imag:w},backend:a}),I=bh(c,l,o,r,a),E=I.real,T=I.imag,R=[E.length],$=a.makeTensorInfo(R,"float32",E),D=a.makeTensorInfo(R,"float32",T),M=nr({inputs:{real:$,imag:D},backend:a}),z=bh(m,g,o,r,a),F=z.real,V=z.imag,H=[F.length],U=a.makeTensorInfo(H,"float32",F),Z=a.makeTensorInfo(H,"float32",V),q=nr({inputs:{real:U,imag:Z},backend:a}),X=_M(n,r),se=[X.real.length],te=a.makeTensorInfo(se,"float32",X.real),ce=a.makeTensorInfo(se,"float32",X.imag),ee=nr({inputs:{real:te,imag:ce},backend:a}),ne=wf({inputs:{a:ee,b:q},backend:a}),ie=No({inputs:{a:M,b:ne},backend:a}),ge=hg({inputs:{a:M,b:ne},backend:a}),be=Ps({inputs:{input:ie},backend:a}),pe=Ps({inputs:{input:ge},backend:a}),we=Ao({inputs:{input:ie},backend:a}),Re=Ao({inputs:{input:ge},backend:a}),$e=Ro({inputs:[be,pe],backend:a,attrs:{axis:0}}),Oe=Ro({inputs:[we,Re],backend:a,attrs:{axis:0}}),We=a.data.get($e.dataId).values,Ue=a.data.get(Oe.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(ce),a.disposeIntermediateTensorInfo(ee),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(ge),a.disposeIntermediateTensorInfo(be),a.disposeIntermediateTensorInfo(we),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(Re),a.disposeIntermediateTensorInfo($e),a.disposeIntermediateTensorInfo(Oe),{real:We,imag:Ue}}function YH(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let s=0,o=0;for(let i=0;i<e;i++){const c=xM(a*i,e,n),l=Kw(t,i);s+=l.real*c.real-l.imag*c.imag,o+=l.real*c.imag+l.imag*c.real}n&&(s/=e,o/=e),SM(r,s,o,a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZH(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Y(r.shape),s=r.shape[r.shape.length-1],o=a/s,i=Rt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),c=__(i,!1,n),l=Rt({inputs:{x:c},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),l}const JH={kernelName:Q0,backendName:"cpu",kernelFunc:ZH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vg(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:s}=n,o=s||_u(a),i=tn(o,Y(r));return ej(i,a,o),e.makeTensorInfo(r,o,i)}const QH={kernelName:mm,backendName:"cpu",kernelFunc:vg};function ej(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tj={kernelName:Hl,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,s=Dn(r.dtype,Y(r.shape)),[o,i,c,l]=r.shape,u=a.data.get(r.dataId).values;for(let f=0;f<o;f++){const p=f*c*i*l;for(let h=0;h<i;h++){const m=h*(c*l);for(let g=0;g<c;g++){const v=g*l;for(let b=0;b<l;b++){const w=Math.round(c-g-1),S=p+m+v+b;let I=u[S];if(w>=0&&w<c){const E=w*l,T=p+m+E+b;I=u[T]}s[S]=I}}}}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:o,preluActivationWeights:i}=e,{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=w_({inputs:{x:a,filter:s},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const g=m;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const v=Rt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=No({inputs:{a:m,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else m=No({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(p){const g=m;if(u==="NCHW"&&p==="prelu"&&i.shape.length===1&&i.shape[0]!==1){const v=Rt({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Kc(n,m,p,v,h),n.disposeIntermediateTensorInfo(v)}else m=Kc(n,m,p,i,h);n.disposeIntermediateTensorInfo(g)}return m}const rj={kernelName:Ji,backendName:"cpu",kernelFunc:nj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:o,preluActivationWeights:i}=e,{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=S_({inputs:{x:a,filter:s},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const g=m;m=No({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){const g=m;m=Kc(n,m,p,i,h),n.disposeIntermediateTensorInfo(g)}return m}const sj={kernelName:Qi,backendName:"cpu",kernelFunc:aj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oj(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,s=Y(r.shape),o=a.shape,i=o[o.length-1],[c,l,u,d]=Bw(r,a);if(l===0)return n.makeTensorInfo(c,r.dtype,[]);const f=n.data.get(a.dataId).values,p=n.bufferSync(r),h=KP(f,p,r.dtype,l,i,u,d,r.shape,s);return n.makeTensorInfo(c,r.dtype,h.values)}const ij={kernelName:ql,backendName:"cpu",kernelFunc:oj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:s}=e,{axis:o,batchDims:i}=r;xe([a,s],"gatherV2");const c=Vt(o,a.shape)[0],l=n.data.get(s.dataId).values,u=a.shape[c];for(let S=0;S<l.length;++S){const I=l[S];A(I<=u-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${u-1}]`)}let d=i;i==null&&(d=0);const f=Y(s.shape),p=i2(a,s,c,d),h=Rt({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Rt({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}}),g=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],v=n.bufferSync(m),b=n.bufferSync(h),w=XP(b,v,g);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,w.dtype,w.values)}const cj={kernelName:gm,backendName:"cpu",kernelFunc:uj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lj(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Y(r.shape),s=r.shape[r.shape.length-1],o=a/s,i=Rt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),c=__(i,!0,n),l=Rt({inputs:{x:c},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),l}const dj={kernelName:e1,backendName:"cpu",kernelFunc:lj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fj=vt(Zl,t=>Number.isFinite(t)?1:0,"bool"),pj={kernelName:Zl,backendName:"cpu",kernelFunc:fj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hj=vt(Jl,t=>Math.abs(t)===1/0?1:0,"bool"),mj={kernelName:Jl,backendName:"cpu",kernelFunc:hj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gj=vt(Ql,t=>Number.isNaN(t)?1:0,"bool"),yj={kernelName:Ql,backendName:"cpu",kernelFunc:gj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:s}=n,o=u8(r,a,s);return e.makeTensorInfo([o.length],"float32",o)}const bj={kernelName:rd,backendName:"cpu",kernelFunc:vj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wj=vt(sd,t=>Math.log1p(t)),Sj={kernelName:sd,backendName:"cpu",kernelFunc:wj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _j=Yt((t,e)=>t&&e),xj=cn(od,_j,null,"bool"),Ij={kernelName:od,backendName:"cpu",kernelFunc:xj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kj=vt(id,t=>t?0:1,"bool"),Ej={kernelName:id,backendName:"cpu",kernelFunc:kj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tj=Yt((t,e)=>t||e),Cj=cn(ud,Tj,null,"bool"),Nj={kernelName:ud,backendName:"cpu",kernelFunc:Cj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:s,bias:o,alpha:i,beta:c}=r;xe(a,"LRN");const l=a.shape[3],u=l-1,d=n.data.get(a.dataId).values,f=Y(a.shape),p=new Float32Array(f);function h(m){const g=m%l;let v=m-g+Math.max(0,g-s);const b=m-g+Math.min(g+s,u);let w=0;for(;v<=b;v++){const S=d[v];w+=S*S}return w}for(let m=0;m<f;m++){const g=h(m),v=d[m]*Math.pow(o+i*g,-c);p[m]=v}return n.makeTensorInfo(a.shape,a.dtype,p)}const Rj={kernelName:cd,backendName:"cpu",kernelFunc:Aj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:s,dy:o}=e,{depthRadius:i,bias:c,alpha:l,beta:u}=r;xe(o,"LRNGrad");const d=Y(o.shape),f=o.shape[3],p=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),v=d;for(let b=0;b<v;b++){const w=b%f,S=b-w+Math.max(0,w-i),I=b-w+Math.min(f,w+i+1);let E=0;for(let T=S;T<I;T++)E+=Math.pow(h[T],2);E=l*E+c;for(let T=S;T<I;T++){let R=-2*l*u*h[T]*m[b]/E;b===T&&(R+=Math.pow(E,-u)),R*=p[b],g[T]+=R}}return n.makeTensorInfo(o.shape,a.dtype,g)}const Dj={kernelName:ym,backendName:"cpu",kernelFunc:$j};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:s,keepDims:o}=r,i=n;let c=a.shape;const l=c.length,u=Vt(s,c);let d=u;const f=pr(d,l);let p=i.data.get(a.dataId).values;if(f!=null){const S=new Array(l);for(let I=0;I<S.length;I++)S[I]=c[f[I]];p=R2(p,c,a.dtype,f,S),d=Mn(d.length,l),c=S}xe(a,"max"),Fn("max",d,l);const[h,m]=On(c,d),g=Y(m),v=f8(p,g,h,a.dtype),b=i.write(v,h,a.dtype);let w=h;return o&&(w=vn(h,u)),{dataId:b,shape:w,dtype:a.dtype}}const Oj={kernelName:ld,backendName:"cpu",kernelFunc:x_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;xe(a,"maxPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:c}=r,l=1;A(Er(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const u=Vr(a.shape,s,o,l,i,c);let d;if(u.filterWidth===1&&u.filterHeight===1&&Ir(u.inShape,u.outShape))d=ea({inputs:{x:a},backend:n});else{const f=n.data.get(a.dataId).values,p=Ie(a.shape),h=gg(f,a.shape,a.dtype,p,u,"max");d=n.makeTensorInfo(u.outShape,a.dtype,h.values)}return d}const Mj={kernelName:fd,backendName:"cpu",kernelFunc:Fj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:c,dataFormat:l}=r;xe(a,"maxPool3d");const u=Ya(a.shape,s,o,1,i,c,l),d=n.data.get(a.dataId).values,f=b_(d,a.shape,a.dtype,Ie(a.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const Bj={kernelName:vm,backendName:"cpu",kernelFunc:Pj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lj(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:o,strides:i,pad:c,dimRoundingMode:l}=r;xe([a,s],"maxPool3DGrad");const u=Ya(s.shape,o,i,1,c,l),d=n.bufferSync(s),f=TV(d,u),p=u.strideDepth,h=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,S=u.effectiveFilterHeight,I=u.effectiveFilterWidth,E=w-1-u.padInfo.front,T=I-1-u.padInfo.left,R=S-1-u.padInfo.top,$=Qe(s.shape,"float32"),D=n.bufferSync(a);for(let M=0;M<u.batchSize;++M)for(let z=0;z<u.inChannels;++z)for(let F=0;F<u.inDepth;++F)for(let V=0;V<u.inHeight;++V)for(let H=0;H<u.inWidth;++H){const U=F-E,Z=V-R,q=H-T;let X=0;for(let se=0;se<w;se+=g){const te=(U+se)/p;if(!(te<0||te>=u.outDepth||Math.floor(te)!==te))for(let ce=0;ce<S;ce+=v){const ee=(Z+ce)/h;if(!(ee<0||ee>=u.outHeight||Math.floor(ee)!==ee))for(let ne=0;ne<I;ne+=b){const ie=(q+ne)/m;if(ie<0||ie>=u.outWidth||Math.floor(ie)!==ie)continue;const ge=w*S*I-1-f.get(M,te,ee,ie,z),be=se*S*I+ce*I+ne,pe=ge===be?1:0;if(pe===0)continue;const we=D.get(M,te,ee,ie,z);X+=we*pe}}}$.set(X,M,F,V,H,z)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const Wj={kernelName:r1,backendName:"cpu",kernelFunc:Lj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s,output:o}=e,i=s;xe([s,o],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:d}=r,f=Vr(i.shape,c,l,1,u,d),p=n.data.get(i.dataId).values,h=Qe(f.outShape,i.dtype,v_(p,i.shape,i.dtype,f).values),m=f.strideHeight,g=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,S=f.effectiveFilterWidth,I=S-1-f.padInfo.left,E=w-1-f.padInfo.top,T=Qe(i.shape,"float32"),R=n.data.get(a.dataId).values,$=Qe(a.shape,"float32",R);for(let D=0;D<f.batchSize;++D)for(let M=0;M<f.inChannels;++M)for(let z=0;z<f.inHeight;++z)for(let F=0;F<f.inWidth;++F){const V=z-E,H=F-I;let U=0;for(let Z=0;Z<w;Z+=v){const q=(V+Z)/m;if(!(q<0||q>=f.outHeight||Math.floor(q)!==q))for(let X=0;X<S;X+=b){const se=(H+X)/g;if(se<0||se>=f.outWidth||Math.floor(se)!==se)continue;const te=w*S-1-h.get(D,q,se,M),ce=Z*S+X,ee=te===ce?1:0;if(ee===0)continue;const ne=$.get(D,q,se,M);U+=ne*ee}}T.set(U,D,z,F,M)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const Vj={kernelName:n1,backendName:"cpu",kernelFunc:zj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hj(t,e,n,r,a){const s=Ie(e),o=gg(t,e,n,s,a,"max"),i=v_(t,e,n,a,!0,r);return[o.values,i.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jj={kernelName:bm,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:s,pad:o,includeBatchInIndex:i}=e,c=n;xe(r,"MaxPoolWithArgmax");const l=c.data.get(r.dataId).values,u=Vr(r.shape,a,s,[1,1],o),[d,f]=Hj(l,r.shape,r.dtype,i,u),p=c.write(d,u.outShape,r.dtype),h=c.write(f,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:h,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r,i=Vt(s,a.shape),l=On(a.shape,i)[1],u=Y(l),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const p=Ua({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});d.push(p);const h=yg({inputs:{a:p,b:f},backend:n});d.push(h);const m=Au({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:o}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Gj={kernelName:pd,backendName:"cpu",kernelFunc:Uj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:o}=r;xe(a,"min");const i=Vt(s,a.shape);let c=i;const l=pr(c,a.shape.length);let u=a;l!=null&&(u=Gn({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Mn(c.length,a.shape.length)),Fn("min",c,u.shape.length);const[d,f]=On(u.shape,c),p=Y(f),h=In(Y(d),u.dtype),m=n.data.get(u.dataId).values;for(let v=0;v<h.length;++v){const b=v*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];(Number.isNaN(I)||I<w)&&(w=I)}h[v]=w}l!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,h);if(o){const v=vn(d,i),b=Rt({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const Kj={kernelName:hd,backendName:"cpu",kernelFunc:qj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xj(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:s,mode:o}=r;xe(a,"mirrorPad");const i=s.map((w,S)=>w[0]+a.shape[S]+w[1]),c=s.map(w=>w[0]),l=s.map((w,S)=>w[0]+a.shape[S]),u=o==="reflect"?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,p=Ie(a.shape),h=Y(i),m=i.length,g=Ie(i),v=Dn(a.dtype,h);for(let w=0;w<h;w++){let S=Po(w,m,g);for(let E=0;E<m;E++)S[E]<c[E]?S[E]=c[E]*2-S[E]-u:S[E]>=l[E]&&(S[E]=(l[E]-1)*2-S[E]+u);S=S.map((E,T)=>E-c[T]);const I=Zr(S,f,p);v[w]=d[I]}return{dataId:n.write(v,i,a.dtype),shape:i,dtype:a.dtype}}const Yj={kernelName:gd,backendName:"cpu",kernelFunc:Xj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zj=Yt((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Jj=cn(yd,Zj),Qj={kernelName:yd,backendName:"cpu",kernelFunc:Jj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:s}=r,o=a.shape.length;let i=s;if(i===-1&&(i=o-1),i!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${i}`);const c=Vt([i],a.shape),l=x_({inputs:{x:a},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),u=vn(l.shape,c),d=Rt({inputs:{x:l},backend:n,attrs:{shape:u}}),f=hg({inputs:{a,b:d},backend:n}),p=N2({inputs:{x:f},backend:n}),h=Au({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),m=Rt({inputs:{x:h},backend:n,attrs:{shape:u}}),g=yg({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const eU={kernelName:Kd,backendName:"cpu",kernelFunc:I_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tU(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:s,seed:o,normalized:i}=r;xe(a,"multinomial");const c=i?a:I_({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=c.shape[0],u=c.shape[1],d=n.data.get(c.dataId).values,f=[l,s],p=In(Y(f),"int32");for(let h=0;h<l;++h){const m=h*u,g=new Float32Array(u-1);g[0]=d[m];for(let w=1;w<g.length;++w)g[w]=g[w-1]+d[m+w];const v=pf.alea(o.toString()),b=h*s;for(let w=0;w<s;++w){const S=v();p[b+w]=g.length;for(let I=0;I<g.length;I++)if(S<g[I]){p[b+w]=I;break}}}return i||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(f,"int32",p)}const nU={kernelName:vd,backendName:"cpu",kernelFunc:tU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU=Cw;function aU(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:o,iouThreshold:i,scoreThreshold:c}=r;xe(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=rU(l,u,o,i,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const sU={kernelName:Sd,backendName:"cpu",kernelFunc:aU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oU=Nw;function iU(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:o,iouThreshold:i,scoreThreshold:c,padToMaxOutputSize:l}=r;xe(a,"NonMaxSuppressionPadded");const u=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:p}=oU(u,d,o,i,c,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const uU={kernelName:_d,backendName:"cpu",kernelFunc:iU};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cU=Aw;function lU(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:o,iouThreshold:i,scoreThreshold:c,softNmsSigma:l}=r;xe(a,"NonMaxSuppressionWithScore");const u=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=o,p=i,h=c,m=l,{selectedIndices:g,selectedScores:v}=cU(u,d,f,p,h,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const dU={kernelName:xd,backendName:"cpu",kernelFunc:lU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fU(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:s,depth:o,onValue:i,offValue:c}=r;xe(a,"oneHot");const l=Y(a.shape),u=new Float32Array(l*o);u.fill(c);const d=n.data.get(a.dataId).values;for(let f=0;f<l;++f)d[f]>=0&&d[f]<o&&(u[f*o+d[f]]=i);return n.makeTensorInfo([...a.shape,o],s,u)}const pU={kernelName:Id,backendName:"cpu",kernelFunc:fU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Ps({inputs:{input:r},backend:n}),s=Yc({inputs:{x:a},backend:n}),o=Ao({inputs:{input:r},backend:n}),i=Yc({inputs:{x:o},backend:n}),c=nr({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),c}else return vg({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const hU={kernelName:Wm,backendName:"cpu",kernelFunc:Yc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Ps({inputs:{input:r},backend:n}),s=k_({inputs:{x:a},backend:n}),o=Ao({inputs:{input:r},backend:n}),i=Yc({inputs:{x:o},backend:n}),c=nr({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),c}else return vg({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const mU={kernelName:Sm,backendName:"cpu",kernelFunc:k_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return Xc({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{ar(s,u.shape,"All tensors passed to stack must have matching shapes"),A(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],c=e.map(u=>{const d=Xc({inputs:{input:u},backend:n,attrs:{dim:a}});return i.push(d),d}),l=Ro({inputs:c,backend:n,attrs:{axis:a}});return i.forEach(u=>n.disposeIntermediateTensorInfo(u)),l}const gU={kernelName:_m,backendName:"cpu",kernelFunc:E_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:s,constantValue:o}=r;xe(a,"pad");const i=s.map((b,w)=>b[0]+a.shape[w]+b[1]),c=s.map(b=>b[0]),l=n.data.get(a.dataId).values,u=Y(a.shape),d=a.shape.length,f=Ie(a.shape),p=Y(i),h=i.length,m=Ie(i),g=Dn(a.dtype,p);o!==0&&g.fill(o);for(let b=0;b<u;b++){const S=Po(b,d,f).map((E,T)=>E+c[T]),I=Zr(S,h,m);g[I]=l[b]}return{dataId:n.write(g,i,a.dtype),shape:i,dtype:a.dtype}}const T_={kernelName:kd,backendName:"cpu",kernelFunc:yU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU=Yt((t,e)=>Math.pow(t,e)),bU=cn(Ed,vU),wU={kernelName:Ed,backendName:"cpu",kernelFunc:bU};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SU(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:s,indices:o}=e,i=a.map(g=>n.data.get(g.dataId).values),c=a.map(g=>g.shape),l=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[d,f,p]=P8(i,c,l,s.shape,s.dtype,u,o.shape),h=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,s.dtype,f);return h.concat([m])}const _U={kernelName:a1,backendName:"cpu",kernelFunc:SU};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xU(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,[l,u]=B8(o,r.shape,r.dtype,i,a.shape,c,s.shape),d=n.makeTensorInfo([l.length],"int32",l),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const IU={kernelName:s1,backendName:"cpu",kernelFunc:xU};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kU(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:s,defaultValue:o,rowPartitionTensors:i}=e,{rowPartitionTypes:c}=r,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,f=i.map(g=>n.data.get(g.dataId).values),p=i.map(g=>g.shape),[h,m]=L8(l,a.shape,u,s.shape,s.dtype,d,o.shape,f,p,c);return n.makeTensorInfo(h,s.dtype,m)}const EU={kernelName:o1,backendName:"cpu",kernelFunc:kU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TU(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:s,step:o}=n,i=$2(r,a,o,s);return e.makeTensorInfo([i.length],s,i)}const CU={kernelName:xm,backendName:"cpu",kernelFunc:TU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NU=vt(Nd,t=>1/t),AU={kernelName:Nd,backendName:"cpu",kernelFunc:NU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RU(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:o,size:i}=r;xe(a,"resizeBilinear");const c=Ie(a.shape),[l,u]=i,[d,f,p,h]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(Y([d,l,u,h])),v=[s&&l>1?f-1:f,s&&u>1?p-1:p],b=[s&&l>1?l-1:l,s&&u>1?u-1:u];let w=0;const S=v[0]/b[0],I=v[1]/b[1];for(let E=0;E<d;E++)for(let T=0;T<l;T++){let R;o?R=S*(T+.5)-.5:R=S*T;const $=Math.max(0,Math.floor(R)),D=R-$,M=Math.min(f-1,Math.ceil(R)),z=E*c[0]+$*c[1],F=E*c[0]+M*c[1];for(let V=0;V<u;V++){let H;o?H=I*(V+.5)-.5:H=I*V;const U=Math.max(0,Math.floor(H)),Z=H-U,q=Math.min(p-1,Math.ceil(H)),X=z+U*c[2],se=F+U*c[2],te=z+q*c[2],ce=F+q*c[2];for(let ee=0;ee<h;ee++){const ne=m[X+ee],ie=m[se+ee],ge=m[te+ee],be=m[ce+ee],pe=ne+(ge-ne)*Z,we=ie+(be-ie)*Z,Re=pe+(we-pe)*D;g[w++]=Re}}}return n.makeTensorInfo([d,l,u,h],"float32",g)}const $U={kernelName:$d,backendName:"cpu",kernelFunc:RU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DU(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:o}=r;xe([s,a],"resizeBilinearGrad");const i=Ie(a.shape),[c,l,u,d]=a.shape,[,f,p]=s.shape,h=new Float32Array(c*l*u*d),m=[o&&f>1?l-1:l,o&&p>1?u-1:u],g=[o&&f>1?f-1:f,o&&p>1?p-1:p],v=m[0]/g[0],b=m[1]/g[1],w=n.data.get(s.dataId).values;let S=0;for(let I=0;I<c;I++){const E=I*i[0];for(let T=0;T<f;T++){const R=T*v,$=Math.floor(R),D=Math.min(Math.ceil(R),l-1),M=E+$*i[1],z=E+D*i[1],F=R-$,V=1-F;for(let H=0;H<p;H++){const U=H*b,Z=Math.floor(U),q=Math.min(Math.ceil(U),u-1),X=U-Z,se=1-X,te=M+Z*i[2],ce=M+q*i[2],ee=z+Z*i[2],ne=z+q*i[2],ie=V*se,ge=V*X,be=F*se,pe=F*X;for(let we=0;we<d;we++){const Re=w[S++];h[te+we]+=Re*ie,h[ce+we]+=Re*ge,h[ee+we]+=Re*be,h[ne+we]+=Re*pe}}}}return n.makeTensorInfo([c,u,l,d],"float32",h)}const OU={kernelName:Em,backendName:"cpu",kernelFunc:DU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FU(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:o,size:i}=r;xe(a,"resizeNearestNeighbor");const c=Ie(a.shape),[l,u]=i,[d,f,p,h]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(d*l*u*h),v=[s&&l>1?f-1:f,s&&u>1?p-1:p],b=[s&&l>1?l-1:l,s&&u>1?u-1:u],w=v[0]/b[0],S=v[1]/b[1];let I=0;for(let E=0;E<d;E++){const T=E*c[0];for(let R=0;R<l;R++){const $=o?w*(R+.5):w*R;let D=Math.min(f-1,s?Math.round($):Math.floor($));o&&(D=Math.max(0,D));const M=T+D*c[1];for(let z=0;z<u;z++){const F=o?S*(z+.5):S*z;let V=Math.min(p-1,s?Math.round(F):Math.floor(F));o&&(V=Math.max(0,V));const H=M+V*c[2];for(let U=0;U<h;U++){const Z=m[H+U];g[I++]=Z}}}}return n.makeTensorInfo([d,l,u,h],a.dtype,g)}const MU={kernelName:Rd,backendName:"cpu",kernelFunc:FU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:o}=r;xe([s,a],"resizeNearestNeighborGrad");const i=Ie(a.shape),c=Ie(s.shape),[l,u,d,f]=a.shape,[,p,h]=s.shape,m=new Float32Array(l*u*d*f),g=n.data.get(s.dataId).values,v=[o&&p>1?u-1:u,o&&h>1?d-1:d],b=[o&&p>1?p-1:p,o&&h>1?h-1:h],w=v[0]/b[0],S=v[1]/b[1],I=1/w,E=1/S,T=Math.ceil(I)*2+2,R=Math.ceil(E)*2+2;for(let $=0;$<l;$++){const D=$*i[0];for(let M=0;M<u;M++){const z=D+M*i[1],F=Math.floor(M*I),V=Math.floor(F-T/2);for(let H=0;H<d;H++){const U=z+H*i[2],Z=Math.floor(H*E),q=Math.floor(Z-R/2);for(let X=0;X<f;X++){let se=0;for(let te=0;te<T;te++){const ce=te+V;if(ce<0||ce>=p)continue;const ee=D+ce*c[1],ne=ce*w,ie=Math.min(u-1,o?Math.round(ne):Math.floor(ne));if(M===ie)for(let ge=0;ge<R;ge++){const be=ge+q;if(be<0||be>=h)continue;const pe=ee+be*c[2],we=be*S,Re=Math.min(d-1,o?Math.round(we):Math.floor(we));H===Re&&(se+=g[pe+X])}}m[U+X]=se}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}const BU={kernelName:km,backendName:"cpu",kernelFunc:PU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:s}=r;xe(a,"reverse");const o=a.shape.length,i=Vt(s,a.shape);if(o===0)return ea({inputs:{x:a},backend:n});const c=new on(a.shape,a.dtype),l=n.bufferSync(a);for(let u=0;u<c.size;u++){const d=c.indexToLoc(u),f=d.slice();i.forEach(p=>f[p]=a.shape[p]-1-f[p]),c.set(l.get(...f),...d)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}const WU={kernelName:Od,backendName:"cpu",kernelFunc:LU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zU={kernelName:af,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:s,center:o}=e,i=n,c=Dn(r.dtype,Y(r.shape)),[l,u,d,f]=r.shape,[p,h]=Uw(o,u,d),m=255,g=Math.sin(a),v=Math.cos(a),b=i.data.get(r.dataId).values;for(let S=0;S<l;S++){const I=S*d*u*f;for(let E=0;E<u;E++){const T=E*(d*f);for(let R=0;R<d;R++){const $=R*f;for(let D=0;D<f;D++){const M=[l,E,R,D],z=M[2],F=M[1];let V=(z-p)*v-(F-h)*g,H=(z-p)*g+(F-h)*v;V=Math.round(V+p),H=Math.round(H+h);let U=s;if(typeof s!="number"&&(D===3?U=m:U=s[D]),V>=0&&V<d&&H>=0&&H<u){const q=H*(d*f),X=V*f,se=I+q+X+D;U=b[se]}const Z=I+T+$+D;c[Z]=U}}}}return{dataId:i.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VU=vt(Fd,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),HU={kernelName:Fd,backendName:"cpu",kernelFunc:VU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jU(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:s}=e,{shape:o}=r,{sliceRank:i,numUpdates:c,sliceSize:l,strides:u,outputSize:d}=zo(s,a,o),f=!0,p=n.bufferSync(a),h=n.bufferSync(s),m=mo(p,h,o,d,l,c,i,u,0,f);return n.makeTensorInfo(o,m.dtype,m.values)}const UU={kernelName:Pd,backendName:"cpu",kernelFunc:jU};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function qU(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function KU(t,e,n,r,a,s){const o=tn("int32",n*a);for(let i=0;i<n;++i){const c=t.slice(i*r,(i+1)*r),l=i*a;for(let u=0;u<a;++u)o[l+u]=s==="left"?GU(c,e[u+l]):qU(c,e[u+l])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XU(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:s}=e,{side:o}=r,i=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,l=KU(i,c,a.shape[0],a.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",l)}const YU={kernelName:Ld,backendName:"cpu",kernelFunc:XU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZU(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:s}=e;xe([r,a,s],"select");const o=r.shape.length,i=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,u=Bo(a.dtype,s.dtype),d=In(Y(a.shape),u);let f=0;const p=o===0||o>1||a.shape.length===1?1:Y(a.shape.slice(1));for(let h=0;h<i.length;h++)for(let m=0;m<p;m++)i[h]===1?d[f++]=c[h]:d[f++]=l[h];return n.makeTensorInfo(a.shape,u,d)}const JU={kernelName:Tm,backendName:"cpu",kernelFunc:ZU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QU=lM,eG=dM,tG=vt(Wd,t=>t>=0?eG*t:QU*(Math.exp(t)-1)),nG={kernelName:Wd,backendName:"cpu",kernelFunc:tG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rG=vt(Hd,t=>t<0?-1:t>0?1:0),aG={kernelName:Hd,backendName:"cpu",kernelFunc:rG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sG=vt(zd,t=>Math.sin(t)),oG={kernelName:zd,backendName:"cpu",kernelFunc:sG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG=vt(Vd,t=>Math.sinh(t)),uG={kernelName:Vd,backendName:"cpu",kernelFunc:iG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cG=11920928955078125e-23,Iv=Math.log(cG)+2,lG=vt(Ud,t=>{const e=t>-Iv,n=t<Iv,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),dG={kernelName:Ud,backendName:"cpu",kernelFunc:lG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fG(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,paddings:o}=r;xe([a],"spaceToBatchND");const i=Y(s),c=[[0,0]];c.push(...o);for(let E=1+s.length;E<a.shape.length;++E)c.push([0,0]);const l=T_.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),u=gf(l.shape,s,i,!1),d=yf(u.length,s.length,!1),f=vf(l.shape,s,i,!1),m=Rt({inputs:{x:l},backend:n,attrs:{shape:u}}),b=Gn({inputs:{x:m},backend:n,attrs:{perm:d}}),I=Rt({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),I}const pG={kernelName:Nm,backendName:"cpu",kernelFunc:fG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hG(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const i=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[d,f,p,h,m]=U8(i,r.shape,r.dtype,c,a.dtype,l,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],a.dtype,p),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const mG={kernelName:Rm,backendName:"cpu",kernelFunc:hG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gG(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(a.dataId).values),i=n.data.get(r.dataId).values,c=Array.from(n.data.get(s.dataId).values),[l,u,d]=G8(i,r.shape,r.dtype,o,c);return[n.makeTensorInfo(u,r.dtype,l),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const yG={kernelName:Xd,backendName:"cpu",kernelFunc:gG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vG(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,[l,u]=O2(o,r.shape,r.dtype,i,c,!0);return n.makeTensorInfo(u,r.dtype,l)}const bG={kernelName:$m,backendName:"cpu",kernelFunc:vG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wG(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,[l,u]=O2(o,r.shape,r.dtype,i,c);return n.makeTensorInfo(u,r.dtype,l)}const SG={kernelName:Dm,backendName:"cpu",kernelFunc:wG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _G(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:s,defaultValue:o}=e,{outputShape:i}=r,{sliceRank:c,numUpdates:l,sliceSize:u,strides:d,outputSize:f}=zo(s,a,i),p=!1,h=n.bufferSync(a);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),v=!!n.data.get(o.dataId).values[0];m=mo(h,g,i,f,u,l,c,d,v,p);break}case"float32":{const g=n.bufferSync(s),v=n.data.get(o.dataId).values[0];m=mo(h,g,i,f,u,l,c,d,v,p);break}case"int32":{const g=n.bufferSync(s),v=n.data.get(o.dataId).values[0];m=mo(h,g,i,f,u,l,c,d,v,p);break}case"string":{const g=n.bufferSync(s),v=eu(n.data.get(o.dataId).values[0]);m=mo(h,g,i,f,u,l,c,d,v,p);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(i,m.dtype,m.values)}const xG={kernelName:Yd,backendName:"cpu",kernelFunc:_G};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IG(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:s,axis:o}=r,i=Vt(o,a.shape)[0],c=Xw(a,s,i),l=new Array(a.shape.length).fill(0),u=a.shape.slice();return c.map(d=>{const f=[...u];f[i]=d;const p=Bs({inputs:{x:a},backend:n,attrs:{begin:l,size:f}});return l[i]+=d,p})}const kG={kernelName:Am,backendName:"cpu",kernelFunc:IG};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EG={kernelName:u1,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;xe(n,"square");const a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let i=0;i<a.length;++i){const c=a[i];s[i]=c*c}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TG=vt(Eu,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),CG={kernelName:Eu,backendName:"cpu",kernelFunc:TG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NG(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,end:o,strides:i,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;xe(a,"stridedSlice");const{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:w,strides:S}=Hw(a.shape,s,o,i,c,l,u,d,f);let I;if(m)I=Rt({inputs:{x:a},backend:n,attrs:{shape:h}});else if(g||v){A(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=Lw(b,w,S),T=Bs({inputs:{x:a},backend:n,attrs:{begin:b,size:E}});I=Rt({inputs:{x:T},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(T)}else{const E=n.bufferSync(a),T=tB(p,E,S,b);I=n.makeTensorInfo(h,T.dtype,T.values)}return I}const AG={kernelName:Jd,backendName:"cpu",kernelFunc:NG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RG(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:s,leftPad:o,rightPad:i,padWidth:c,preserveShortSequences:l}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[h,m]=F2(f,p,a,s,o,i,c,l);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}const $G={kernelName:Fm,backendName:"cpu",kernelFunc:RG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DG(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const i=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values[0],[l,u,d]=M2(i,c,a),f=u.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const OG={kernelName:Mm,backendName:"cpu",kernelFunc:DG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FG(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,i=P2(o,a);return n.makeTensorInfo(s.shape,"int32",i)}const MG={kernelName:Pm,backendName:"cpu",kernelFunc:FG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PG=vt(ef,t=>Math.tan(t)),BG={kernelName:ef,backendName:"cpu",kernelFunc:PG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LG=vt(tf,t=>Math.tanh(t)),WG={kernelName:tf,backendName:"cpu",kernelFunc:LG};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zG(t){const{inputs:e,backend:n}=t,{tensor:r,indices:a,updates:s}=e,{sliceRank:o,numUpdates:i,sliceSize:c,strides:l,outputSize:u}=zo(s,a,r.shape),d=!1,f=n.bufferSync(a),p=n.bufferSync(s),h=n.bufferSync(r),m=mo(f,p,r.shape,u,c,i,o,l,h,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const VG={kernelName:Bd,backendName:"cpu",kernelFunc:zG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:s}=r;xe(a,"tile");const o=iB(n.bufferSync(a),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const jG={kernelName:ku,backendName:"cpu",kernelFunc:HG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UG(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:s,sorted:o}=r;xe(a,"topk");const i=n.data.get(a.dataId).values,[c,l]=uB(i,a.shape,a.dtype,s,o);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const GG={kernelName:nf,backendName:"cpu",kernelFunc:UG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qG(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:s}=e,{interpolation:o,fillMode:i,fillValue:c,outputShape:l}=n,[u,d,f,p]=a.shape,[h,m]=l??[d,f],g=[u,h,m,p],v=Ie(a.shape),b=v[0],w=v[1],S=v[2],I=Ie(g),E=I[0],T=I[1],R=I[2],$=Dn(a.dtype,Y(g));$.fill(c);const D=r.data.get(a.dataId).values,M=r.data.get(s.dataId).values;for(let F=0;F<u;++F){const V=s.shape[0]===1?M:M.subarray(F*8,F*8+8);for(let H=0;H<h;++H)for(let U=0;U<m;++U)for(let Z=0;Z<p;++Z){let q;const X=V[6]*U+V[7]*H+1;if(X===0)continue;const se=(V[0]*U+V[1]*H+V[2])/X,te=(V[3]*U+V[4]*H+V[5])/X,ce=kv(se,f,i),ee=kv(te,d,i);switch(o){case"nearest":q=QG(D,d,f,b,w,S,F,ee,ce,Z,c);break;case"bilinear":q=eq(D,d,f,b,w,S,F,ee,ce,Z,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ne=F*E+H*T+U*R+Z;$[ne]=q}return r.makeTensorInfo(g,a.dtype,$)}return{dataId:r.write($,g,a.dtype),shape:a.shape,dtype:a.dtype}}const KG={kernelName:rf,backendName:"cpu",kernelFunc:qG};function kv(t,e,n){switch(n){case"reflect":return XG(t,e);case"wrap":return YG(t,e);case"nearest":return JG(t,e);case"constant":default:return ZG(t)}}function XG(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return em(0,n,e-1)}function YG(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return em(0,n,e-1)}function ZG(t,e){return t}function JG(t,e){return em(0,t,e-1)}function Oi(t,e,n,r,a,s,o,i,c,l,u){const d=o*r+i*a+c*s+l;return 0<=i&&i<e&&0<=c&&c<n?t[d]:u}function QG(t,e,n,r,a,s,o,i,c,l,u){const d=Math.round(i),f=Math.round(c);return Oi(t,e,n,r,a,s,o,d,f,l,u)}function eq(t,e,n,r,a,s,o,i,c,l,u){const d=Math.floor(i),f=Math.floor(c),p=d+1,h=f+1,m=(h-c)*Oi(t,e,n,r,a,s,o,d,f,l,u)+(c-f)*Oi(t,e,n,r,a,s,o,d,h,l,u),g=(h-c)*Oi(t,e,n,r,a,s,o,p,f,l,u)+(c-f)*Oi(t,e,n,r,a,s,o,p,h,l,u);return(p-i)*m+(i-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tq(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:s}=e;xe(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:i,outputShape:c,indices:l}=L2(o,a,s.shape,s.dtype);return[r.makeTensorInfo(c,s.dtype,i),r.makeTensorInfo([l.length],"int32",l)]}const nq={kernelName:Bm,backendName:"cpu",kernelFunc:tq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rq(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a.shape.length,i=a.shape[s],c=new Array(o-1);let l=0;for(let p=0;p<o;p++)p!==s&&(c[l++]=a.shape[p]);const u=new Array(o).fill(0),d=a.shape.slice();d[s]=1;const f=new Array(i);for(let p=0;p<f.length;p++){u[s]=p;const h=Bs({inputs:{x:a},backend:n,attrs:{begin:u,size:d}});f[p]=Rt({inputs:{x:h},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(h)}return f}const aq={kernelName:Lm,backendName:"cpu",kernelFunc:rq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sq(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:s}=e,{numSegments:o}=r;xe(a,"unsortedSegmentSum");const i=a.shape.length,c=s.shape.length,l=[],u=[],d=i-c;let f=s;for(let h=0;h<d;++h){const m=Xc({inputs:{input:f},backend:n,attrs:{dim:h+1}});f=m,u.push(m)}for(let h=0;h<o;++h){const m=Vm(h,"int32"),g=n.makeTensorInfo([],"int32",m),v=C2({inputs:{a:g,b:f},backend:n}),b=Ua({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),w=wf({inputs:{a:b,b:a},backend:n}),S=Au({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});l.push(S),u.push(g),u.push(v),u.push(b),u.push(w),u.push(S)}const p=E_({inputs:l,backend:n,attrs:{axis:0}});return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),p}const oq={kernelName:c1,backendName:"cpu",kernelFunc:sq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iq=[tV,bP,rV,sV,TP,iV,cV,dV,pV,mV,yV,bV,SV,IV,EV,NV,RV,DV,FV,Qz,PV,LV,zV,RP,HV,IP,OP,UV,wP,qV,XV,YV,JV,eH,nH,aH,oH,uH,lH,fH,hH,gH,vH,wH,SH,xH,kH,TH,CH,NH,AH,$H,FH,Gz,PH,MP,UH,BP,GH,zP,JH,QH,tj,jP,qP,rj,sj,ij,cj,JP,t8,SP,dj,KV,pj,mj,yj,qz,a8,i8,bj,d8,Sj,Ij,Ej,Nj,Rj,Dj,Oj,m8,Mj,Bj,Wj,Vj,jj,Gj,Kj,v8,Yj,Qj,nU,w8,x8,sU,uU,dU,E8,pU,mU,gU,T_,wU,Xz,A8,_U,IU,EU,CU,_P,vh,AU,Yz,Zz,Jz,$U,OU,MU,BU,WU,zU,HU,V8,UU,YU,JU,nG,H8,aG,oG,uG,j8,eU,dG,pG,mG,yG,bG,SG,xG,kG,K8,EG,Z8,eB,CG,AG,$G,OG,MG,oB,DH,BG,WG,VG,jG,GG,KG,T8,nq,aq,oq,hU];for(const t of iq)l1(t);function uq(){try{return!!window.WebAssembly&&(!!window.WebAssembly.compile||!!window.WebAssembly.compileStreaming)}catch{return!1}}var cq="1.0.2",lq="https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow-models/blazeface/".concat(cq,"/model/model.json"),dq="https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow/tfjs-backend-wasm/".concat(Hz,"/"),fq=function(t){rI(e,t);function e(n,r){var a=t.call(this)||this;return a.faceModelUrl=r??lq,a.binaryPath=n??dq,a}return e.prototype.loadModels=function(){return ot(this,void 0,void 0,function(){var n;return tt(this,function(r){switch(r.label){case 0:return uq()?[4,this._loadWebAssemblyBackend()]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._loadCPUBackend()];case 3:r.sent(),r.label=4;case 4:return r.trys.push([4,7,,8]),[4,EC()];case 5:return r.sent(),n=this,[4,E5(Uc.MediaPipeFaceDetector,{runtime:"tfjs",detectorModelUrl:this.faceModelUrl})];case 6:return n._model=r.sent(),[3,8];case 7:throw r.sent(),new Error("There was an error loading the blazeface model. If you are using a custom blazeface model url ensure that it is a fully qualified url that returns a json file.");case 8:return[2]}})})},e.prototype.detectFaces=function(n){return ot(this,void 0,void 0,function(){var r,a,s,o,i=this;return tt(this,function(c){switch(c.label){case 0:return r=!0,[4,this._model.estimateFaces(n,{flipHorizontal:r})];case 1:return a=c.sent(),s=Date.now(),o=a.map(function(l){var u=l.box,d=l.keypoints,f=u.xMin,p=u.yMin,h=u.width,m=u.height,g=i._getCoordinate(d,"rightEye"),v=i._getCoordinate(d,"leftEye"),b=i._getCoordinate(d,"noseTip"),w=i._getCoordinate(d,"mouthCenter"),S=i._getCoordinate(d,"rightEarTragion"),I=i._getCoordinate(d,"leftEarTragion"),E=[90];return{top:p,left:f,width:h,height:m,timestampMs:s,probability:E[0],rightEye:g,leftEye:v,mouth:w,nose:b,rightEar:S,leftEar:I}}),[2,o]}})})},e.prototype._getCoordinate=function(n,r){var a=n.find(function(s){return s.name===r});return[a.x,a.y]},e.prototype._loadWebAssemblyBackend=function(){return ot(this,void 0,void 0,function(){var n=this;return tt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),zz(this.binaryPath),[4,KI(function(){return ot(n,void 0,void 0,function(){var a;return tt(this,function(s){switch(s.label){case 0:return[4,Zy("wasm")];case 1:if(a=s.sent(),!a)throw new Error("Initialization of backend wasm failed");return[2]}})})},[])];case 1:return r.sent(),this.modelBackend="wasm",[3,3];case 2:throw r.sent(),new Error('There was an error loading the TFJS WASM backend. If you are using a custom WASM path ensure that it ends with "/" and that it is not the full URL as @tensorflow/tfjs-backend-wasm will append the wasm binary file name. Read more: https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/src/backend_wasm.ts#L475.');case 3:return[2]}})})},e.prototype._loadCPUBackend=function(){return ot(this,void 0,void 0,function(){return tt(this,function(n){switch(n.label){case 0:return[4,Zy("cpu")];case 1:return n.sent(),this.modelBackend="cpu",[2]}})})},e}(WE),pq=function(){function t(e){if(typeof MediaRecorder>"u")throw Error("MediaRecorder is not supported by this browser");this._stream=e,this._chunks=[],this._recorder=new MediaRecorder(e,{bitsPerSecond:1e6}),this._setupCallbacks()}return t.prototype.getState=function(){return this._recorder.state},t.prototype.start=function(e){this.clearRecordedData(),this.recordingStartApiTimestamp=Date.now(),this._recorder.start(e)},t.prototype.stop=function(){return ot(this,void 0,void 0,function(){return tt(this,function(e){return this.getState()==="recording"&&this._recorder.stop(),[2,this._recorderStopped]})})},t.prototype.pause=function(){this._recorder.pause()},t.prototype.clearRecordedData=function(){this._chunks=[]},t.prototype.dispatch=function(e){this._recorder.dispatchEvent(e)},t.prototype.getVideoChunkSize=function(){return this._chunks.length},t.prototype._setupCallbacks=function(){var e=this;this.videoStream=new ReadableStream({start:function(n){e._recorder&&(e._recorder.ondataavailable=function(r){r.data&&r.data.size>0&&(e._chunks.length===0&&(e.firstChunkTimestamp=Date.now()),e._chunks.push(r.data),n.enqueue(r.data))},e._recorder.addEventListener("clientSesssionInfo",function(r){n.enqueue(r.data.clientInfo)}),e._recorder.addEventListener("stopVideo",function(){n.enqueue("stopVideo")}),e._recorder.addEventListener("endStream",function(){n.close()}),e._recorder.addEventListener("endStreamWithCode",function(r){n.enqueue({type:"endStreamWithCode",code:r.data.code})}))}}),this.recorderStarted=new Promise(function(n){e._recorder.onstart=function(){e.recorderStartTimestamp=Date.now(),n()}}),this._recorderStopped=new Promise(function(n){e._recorder.onstop=function(){e.recorderEndTimestamp=Date.now(),n()}}),this._recorder.onerror=function(){e.getState()!=="stopped"&&e.stop()}},t}();function hq(t){const e=t.signer,n=t.signer,r=t.eventStreamPayloadHandlerProvider({...t,messageSigner:n});return{...t,eventSigner:e,eventStreamPayloadHandler:r}}var Ev;(function(t){t.HEADER="header",t.QUERY="query"})(Ev||(Ev={}));var Tv;(function(t){t.HEADER="header",t.QUERY="query"})(Tv||(Tv={}));var du;(function(t){t.HTTP="http",t.HTTPS="https"})(du||(du={}));var Zc;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Zc||(Zc={}));var Cv;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(Cv||(Cv={}));const wh="__smithy_context";var Nv;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(Nv||(Nv={}));var Av;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(Av||(Av={}));let C_=class N_{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new N_({...this,headers:{...this.headers}});return e.query&&(e.query=mq(e.query)),e}};function mq(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}const gq=t=>(e,n)=>async r=>{const{request:a}=r;return C_.isInstance(a)?t.eventStreamPayloadHandler.handle(e,r,n):e(r)},yq={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},vq=t=>async e=>{const{request:n}=e;return C_.isInstance(n)?(n.headers={...n.headers,"Content-Type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},t({...e,request:n})):t(e)},bq={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},wq=t=>({applyToStack:e=>{e.addRelativeTo(gq(t),yq),e.add(vq,bq)}});let Sq=class A_{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new A_({...this,headers:{...this.headers}});return e.query&&(e.query=_q(e.query)),e}};function _q(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}const xq=t=>e=>async n=>{if(!Sq.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:a=""}=t.requestHandler.metadata||{};if(a.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]="";else if(!r.headers.host){let s=r.hostname;r.port!=null&&(s+=`:${r.port}`),r.headers.host=s}return e(n)},Iq={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},kq=t=>({applyToStack:e=>{e.add(xq(t),Iq)}}),Eq=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:a,commandName:s,logger:o,dynamoDbDocumentClientOptions:i={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=i,u=c??e.inputFilterSensitiveLog,d=l??e.outputFilterSensitiveLog,{$metadata:f,...p}=r.output;return o?.info?.({clientName:a,commandName:s,input:u(n.input),output:d(p),metadata:f}),r}catch(r){const{clientName:a,commandName:s,logger:o,dynamoDbDocumentClientOptions:i={}}=e,{overrideInputFilterSensitiveLog:c}=i,l=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:a,commandName:s,input:l(n.input),error:r,metadata:r.$metadata}),r}},Tq={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Cq=t=>({applyToStack:e=>{e.add(Eq(),Tq)}});let Nq=class R_{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new R_({...this,headers:{...this.headers}});return e.query&&(e.query=Aq(e.query)),e}};function Aq(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}const Rv="X-Amzn-Trace-Id",Rq="AWS_LAMBDA_FUNCTION_NAME",$q="_X_AMZN_TRACE_ID",Dq=t=>e=>async n=>{const{request:r}=n;if(!Nq.isInstance(r)||t.runtime!=="node"||r.headers.hasOwnProperty(Rv))return e(n);const a=process.env[Rq],s=process.env[$q],o=i=>typeof i=="string"&&i.length>0;return o(a)&&o(s)&&(r.headers[Rv]=s),e({...n,request:r})},Oq={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Fq=t=>({applyToStack:e=>{e.add(Dq(t),Oq)}}),$_=(t,e,n)=>{let r,a,s,o=!1;const i=async()=>{a||(a=t());try{r=await a,s=!0,o=!1}finally{a=void 0}return r};return e===void 0?async c=>((!s||c?.forceRefresh)&&(r=await i()),r):async c=>((!s||c?.forceRefresh)&&(r=await i()),o?r:n&&!n(r)?(o=!0,r):(e(r)&&await i(),r))};var Qf={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sh=function(t,e){return Sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Sh(t,e)};function Mq(t,e){Sh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _h=function(){return _h=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_h.apply(this,arguments)};function Pq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Bq(t,e,n,r){var a=arguments.length,s=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function Lq(t,e){return function(n,r){e(n,r,t)}}function Wq(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function zq(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function Vq(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Hq(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function jq(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function xh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D_(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Uq(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(D_(arguments[e]));return t}function Gq(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var s=arguments[e],o=0,i=s.length;o<i;o++,a++)r[a]=s[o];return r}function fu(t){return this instanceof fu?(this.v=t,this):new fu(t)}function qq(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof fu?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function Kq(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,s){e[a]=t[a]?function(o){return(n=!n)?{value:fu(t[a](o)),done:a==="return"}:s?s(o):o}:s}}function Xq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xh=="function"?xh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}function Yq(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Zq(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Jq(t){return t&&t.__esModule?t:{default:t}}function Qq(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function eK(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const tK=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _h},__asyncDelegator:Kq,__asyncGenerator:qq,__asyncValues:Xq,__await:fu,__awaiter:zq,__classPrivateFieldGet:Qq,__classPrivateFieldSet:eK,__createBinding:Hq,__decorate:Bq,__exportStar:jq,__extends:Mq,__generator:Vq,__importDefault:Jq,__importStar:Zq,__makeTemplateObject:Yq,__metadata:Wq,__param:Lq,__read:D_,__rest:Pq,__spread:Uq,__spreadArrays:Gq,__values:xh},Symbol.toStringTag,{value:"Module"})),O_=_a(tK);var mi={},$v;function nK(){if($v)return mi;$v=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.AwsCrc32=void 0;var t=O_,e=wu(),n=F_(),r=function(){function a(){this.crc32=new n.Crc32}return a.prototype.update=function(s){(0,e.isEmptyData)(s)||this.crc32.update((0,e.convertToBuffer)(s))},a.prototype.digest=function(){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(s){return[2,(0,e.numToUint8)(this.crc32.digest())]})})},a.prototype.reset=function(){this.crc32=new n.Crc32},a}();return mi.AwsCrc32=r,mi}var Dv;function F_(){return Dv||(Dv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var e=O_,n=wu();function r(c){return new a().update(c).digest()}t.crc32=r;var a=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(l){var u,d;try{for(var f=e.__values(l),p=f.next();!p.done;p=f.next()){var h=p.value;this.checksum=this.checksum>>>8^o[(this.checksum^h)&255]}}catch(m){u={error:m}}finally{try{p&&!p.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();t.Crc32=a;var s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,n.uint32ArrayFrom)(s),i=nK();Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return i.AwsCrc32}})}(Qf)),Qf}var M_=F_();const P_={},Ih={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),P_[t]=e,Ih[e]=t}function B_(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in Ih)e[n/2]=Ih[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function br(t){let e="";for(let n=0;n<t.byteLength;n++)e+=P_[t[n]];return e}class Vi{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,a=Math.abs(Math.round(e));r>-1&&a>0;r--,a/=256)n[r]=a;return e<0&&Ov(n),new Vi(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&Ov(e),parseInt(br(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function Ov(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class L_{constructor(e,n){this.toUtf8=e,this.fromUtf8=n}format(e){const n=[];for(const s of Object.keys(e)){const o=this.fromUtf8(s);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[s]))}const r=new Uint8Array(n.reduce((s,o)=>s+o.byteLength,0));let a=0;for(const s of n)r.set(s,a),a+=s.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case"binary":const s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(s.buffer);return o.set(e.value,3),o;case"string":const i=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+i.byteLength));c.setUint8(0,7),c.setUint16(1,i.byteLength,!1);const l=new Uint8Array(c.buffer);return l.set(i,3),l;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(Vi.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!dK.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(B_(e.value.replace(/\-/g,"")),1),d}}parse(e){const n={};let r=0;for(;r<e.byteLength;){const a=e.getUint8(r++),s=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a));switch(r+=a,e.getUint8(r++)){case 0:n[s]={type:Mv,value:!0};break;case 1:n[s]={type:Mv,value:!1};break;case 2:n[s]={type:rK,value:e.getInt8(r++)};break;case 3:n[s]={type:aK,value:e.getInt16(r,!1)},r+=2;break;case 4:n[s]={type:sK,value:e.getInt32(r,!1)},r+=4;break;case 5:n[s]={type:oK,value:new Vi(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,n[s]={type:iK,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const i=e.getUint16(r,!1);r+=2,n[s]={type:uK,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,i))},r+=i;break;case 8:n[s]={type:cK,value:new Date(new Vi(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const c=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[s]={type:lK,value:`${br(c.subarray(0,4))}-${br(c.subarray(4,6))}-${br(c.subarray(6,8))}-${br(c.subarray(8,10))}-${br(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var Fv;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Fv||(Fv={}));const Mv="boolean",rK="byte",aK="short",sK="integer",oK="long",iK="binary",uK="string",cK="timestamp",lK="uuid",dK=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,W_=4,$a=W_*2,gs=4,fK=$a+gs*2;function pK({byteLength:t,byteOffset:e,buffer:n}){if(t<fK)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,e,t),a=r.getUint32(0,!1);if(t!==a)throw new Error("Reported message length does not match received message length");const s=r.getUint32(W_,!1),o=r.getUint32($a,!1),i=r.getUint32(t-gs,!1),c=new M_.Crc32().update(new Uint8Array(n,e,$a));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(n,e+$a,t-($a+gs))),i!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${i}`);return{headers:new DataView(n,e+$a+gs,s),body:new Uint8Array(n,e+$a+gs+s,a-s-($a+gs+gs))}}class z_{constructor(e,n){this.headerMarshaller=new L_(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){const r=this.headerMarshaller.format(e),a=r.byteLength+n.byteLength+16,s=new Uint8Array(a),o=new DataView(s.buffer,s.byteOffset,s.byteLength),i=new M_.Crc32;return o.setUint32(0,a,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,i.update(s.subarray(0,8)).digest(),!1),s.set(r,12),s.set(n,r.byteLength+12),o.setUint32(a-4,i.update(s.subarray(8,a-4)).digest(),!1),s}decode(e){const{headers:n,body:r}=pK(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class hK{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class mK{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class gK{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const n=await this.options.deserializer(e);n!==void 0&&(yield n)}}}class yK{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}const vK=t=>t[wh]||(t[wh]={}),Br=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},bK="X-Amz-Algorithm",wK="X-Amz-Credential",V_="X-Amz-Date",SK="X-Amz-SignedHeaders",_K="X-Amz-Expires",H_="X-Amz-Signature",j_="X-Amz-Security-Token",U_="authorization",G_=V_.toLowerCase(),xK="date",IK=[U_,G_,xK],kK=H_.toLowerCase(),kh="x-amz-content-sha256",EK=j_.toLowerCase(),TK={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},CK=/^proxy-/,NK=/^sec-/,ep="AWS4-HMAC-SHA256",AK="AWS4-HMAC-SHA256-PAYLOAD",RK="UNSIGNED-PAYLOAD",$K=50,q_="aws4_request",DK=60*60*24*7,oc={},tp=[],np=(t,e,n)=>`${t}/${e}/${n}/${q_}`,OK=async(t,e,n,r,a)=>{const s=await Pv(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${a}:${br(s)}:${e.sessionToken}`;if(o in oc)return oc[o];for(tp.push(o);tp.length>$K;)delete oc[tp.shift()];let i=`AWS4${e.secretAccessKey}`;for(const c of[n,r,a,q_])i=await Pv(t,i,c);return oc[o]=i},Pv=(t,e,n)=>{const r=new t(e);return r.update(Fi(n)),r.digest()},Bv=({headers:t},e,n)=>{const r={};for(const a of Object.keys(t).sort()){if(t[a]==null)continue;const s=a.toLowerCase();(s in TK||e?.has(s)||CK.test(s)||NK.test(s))&&(!n||n&&!n.has(s))||(r[s]=t[a].trim().replace(/\s+/g," "))}return r},Is=t=>encodeURIComponent(t).replace(/[!'()*]/g,FK),FK=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,MK=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t).sort()){if(r.toLowerCase()===kK)continue;e.push(r);const a=t[r];typeof a=="string"?n[r]=`${Is(r)}=${Is(a)}`:Array.isArray(a)&&(n[r]=a.slice(0).reduce((s,o)=>s.concat([`${Is(r)}=${Is(o)}`]),[]).sort().join("&"))}return e.map(r=>n[r]).filter(r=>r).join("&")},PK=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",rp=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===kh)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||PK(e)){const r=new n;return r.update(Fi(e)),br(await r.digest())}return RK},BK=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},K_=({headers:t,query:e,...n})=>({...n,headers:{...t},query:e?LK(e):void 0}),LK=t=>Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{}),WK=(t,e={})=>{const{headers:n,query:r={}}=typeof t.clone=="function"?t.clone():K_(t);for(const a of Object.keys(n)){const s=a.toLowerCase();s.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(s)&&(r[a]=n[a],delete n[a])}return{...t,headers:n,query:r}},Lv=t=>{t=typeof t.clone=="function"?t.clone():K_(t);for(const e of Object.keys(t.headers))IK.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},zK=t=>VK(t).toISOString().replace(/\.\d{3}Z$/,"Z"),VK=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class Wv{constructor({applyChecksum:e,credentials:n,region:r,service:a,sha256:s,uriEscapePath:o=!0}){this.headerMarshaller=new L_(Hh,bu),this.service=a,this.sha256=s,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Br(r),this.credentialProvider=Br(n)}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:a=3600,unsignableHeaders:s,unhoistableHeaders:o,signableHeaders:i,signingRegion:c,signingService:l}=n,u=await this.credentialProvider();this.validateResolvedCredentials(u);const d=c??await this.regionProvider(),{longDate:f,shortDate:p}=ic(r);if(a>DK)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const h=np(p,d,l??this.service),m=WK(Lv(e),{unhoistableHeaders:o});u.sessionToken&&(m.query[j_]=u.sessionToken),m.query[bK]=ep,m.query[wK]=`${u.accessKeyId}/${h}`,m.query[V_]=f,m.query[_K]=a.toString(10);const g=Bv(m,s,i);return m.query[SK]=zv(g),m.query[H_]=await this.getSignature(f,h,this.getSigningKey(u,d,p,l),this.createCanonicalRequest(m,g,await rp(e,this.sha256))),m}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:a,signingRegion:s,signingService:o}){const i=s??await this.regionProvider(),{shortDate:c,longDate:l}=ic(r),u=np(c,i,o??this.service),d=await rp({headers:{},body:n},this.sha256),f=new this.sha256;f.update(e);const p=br(await f.digest()),h=[AK,l,u,a,p,d].join(`
`);return this.signString(h,{signingDate:r,signingRegion:i,signingService:o})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:a}){return this.signEvent({headers:this.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:a,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:a}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const o=r??await this.regionProvider(),{shortDate:i}=ic(n),c=new this.sha256(await this.getSigningKey(s,o,i,a));return c.update(Fi(e)),br(await c.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:a,signingRegion:s,signingService:o}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const c=s??await this.regionProvider(),l=Lv(e),{longDate:u,shortDate:d}=ic(n),f=np(d,c,o??this.service);l.headers[G_]=u,i.sessionToken&&(l.headers[EK]=i.sessionToken);const p=await rp(l,this.sha256);!BK(kh,l.headers)&&this.applyChecksum&&(l.headers[kh]=p);const h=Bv(l,a,r),m=await this.getSignature(u,f,this.getSigningKey(i,c,d,o),this.createCanonicalRequest(l,h,p));return l.headers[U_]=`${ep} Credential=${i.accessKeyId}/${f}, SignedHeaders=${zv(h)}, Signature=${m}`,l}createCanonicalRequest(e,n,r){const a=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${MK(e)}
${a.map(s=>`${s}:${n[s]}`).join(`
`)}

${a.join(";")}
${r}`}async createStringToSign(e,n,r){const a=new this.sha256;a.update(Fi(r));const s=await a.digest();return`${ep}
${e}
${n}
${br(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const s of e.split("/"))s?.length!==0&&s!=="."&&(s===".."?n.pop():n.push(s));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(r).replace(/%2F/g,"/")}return e}async getSignature(e,n,r,a){const s=await this.createStringToSign(e,n,a),o=new this.sha256(await r);return o.update(Fi(s)),br(await o.digest())}getSigningKey(e,n,r,a){return OK(this.sha256,e,r,n,a||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const ic=t=>{const e=zK(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},zv=t=>Object.keys(t).sort().join(";"),HK=3e5,jK=t=>{const e=t.credentials?UK(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:n=!0,systemClockOffset:r=t.systemClockOffset||0,sha256:a}=t;let s;return t.signer?s=Br(t.signer):t.regionInfoProvider?s=()=>Br(t.region)().then(async o=>[await t.regionInfoProvider(o,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},o]).then(([o,i])=>{const{signingRegion:c,signingService:l}=o;t.signingRegion=t.signingRegion||c||i,t.signingName=t.signingName||l||t.serviceId;const u={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:n},d=t.signerConstructor||Wv;return new d(u)}):s=async o=>{o=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Br(t.region)(),properties:{}},o);const i=o.signingRegion,c=o.signingName;t.signingRegion=t.signingRegion||i,t.signingName=t.signingName||c||t.serviceId;const l={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:n},u=t.signerConstructor||Wv;return new u(l)},{...t,systemClockOffset:r,signingEscapePath:n,credentials:e,signer:s}},UK=t=>typeof t=="function"?$_(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<HK,e=>e.expiration!==void 0):Br(t);let GK=class X_{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new X_({...this,headers:{...this.headers}});return e.query&&(e.query=qK(e.query)),e}};function qK(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}let KK=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};const Y_=t=>new Date(Date.now()+t),XK=(t,e)=>Math.abs(Y_(e).getTime()-t)>=3e5,Vv=(t,e)=>{const n=Date.parse(t);return XK(n,e)?n-Date.now():e},YK=t=>(e,n)=>async function(r){if(!GK.isInstance(r.request))return e(r);const a=n.endpointV2?.properties?.authSchemes?.[0],s=a?.name==="sigv4a"?a?.signingRegionSet?.join(","):void 0,o=await t.signer(a),i=await e({...r,request:await o.sign(r.request,{signingDate:Y_(t.systemClockOffset),signingRegion:s||n.signing_region,signingService:n.signing_service})}).catch(l=>{const u=l.ServerTime??Hv(l.$response);throw u&&(t.systemClockOffset=Vv(u,t.systemClockOffset)),l}),c=Hv(i.response);return c&&(t.systemClockOffset=Vv(c,t.systemClockOffset)),i},Hv=t=>KK.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,ZK={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},JK=t=>({applyToStack:e=>{e.addRelativeTo(YK(t),ZK)}});function QK(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}const eX=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],tX="1.1",Z_={partitions:eX,version:tX};let J_=Z_,Q_="";const nX=t=>{const{partitions:e}=J_;for(const r of e){const{regions:a,outputs:s}=r;for(const[o,i]of Object.entries(a))if(o===t)return{...s,...i}}for(const r of e){const{regionRegex:a,outputs:s}=r;if(new RegExp(a).test(t))return{...s}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},ex=(t,e="")=>{J_=t,Q_=e},rX=()=>{ex(Z_,"")},tx=()=>Q_,aX=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),nx=t=>aX.test(t)||t.startsWith("[")&&t.endsWith("]"),pu="endpoints";function Ga(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Ga(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Ga).join(", ")})`:JSON.stringify(t,null,2)}class dr extends Error{constructor(e){super(e),this.name="EndpointError"}}const sX=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),bg=(t,e=!1)=>{if(!e)return sX.test(t);const n=t.split(".");for(const r of n)if(!bg(r))return!1;return!0},rx=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!rx(n))return!1;return!0}return!(!bg(t)||t.length<3||t.length>63||t!==t.toLowerCase()||nx(t))},oX=t=>{const e=t.split(":");if(e.length<6)return null;const[n,r,a,s,o,...i]=e;return n!=="arn"||r===""||a===""||i[0]===""?null:{partition:r,service:a,region:s,accountId:o,resourceId:i[0].includes("/")?i[0].split("/"):i}},iX=Object.freeze(Object.defineProperty({__proto__:null,getUserAgentPrefix:tx,isVirtualHostableS3Bucket:rx,parseArn:oX,partition:nX,setPartitionInfo:ex,useDefaultPartitionInfo:rX},Symbol.toStringTag,{value:"Module"})),uX=(t,e)=>t===e,cX=t=>{const e=t.split("."),n=[];for(const r of e){const a=r.indexOf("[");if(a!==-1){if(r.indexOf("]")!==r.length-1)throw new dr(`Path: '${t}' does not end with ']'`);const s=r.slice(a+1,-1);if(Number.isNaN(parseInt(s)))throw new dr(`Invalid array index: '${s}' in path: '${t}'`);a!==0&&n.push(r.slice(0,a)),n.push(s)}else n.push(r)}return n},ax=(t,e)=>cX(e).reduce((n,r)=>{if(typeof n!="object")throw new dr(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),lX=t=>t!=null,dX=t=>!t;var jv;(function(t){t.AAAA="AAAA",t.A="A"})(jv||(jv={}));const ap={[du.HTTP]:80,[du.HTTPS]:443},fX=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:p,protocol:h="",path:m="",query:g={}}=t,v=new URL(`${h}//${f}${p?`:${p}`:""}${m}`);return v.search=Object.entries(g).map(([b,w])=>`${b}=${w}`).join("&"),v}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:a,pathname:s,protocol:o,search:i}=e;if(i)return null;const c=o.slice(0,-1);if(!Object.values(du).includes(c))return null;const l=nx(a),u=n.includes(`${r}:${ap[c]}`)||typeof t=="string"&&t.includes(`${r}:${ap[c]}`),d=`${r}${u?`:${ap[c]}`:""}`;return{scheme:c,authority:d,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}},pX=(t,e)=>t===e,hX=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),mX=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),gX=Object.freeze(Object.defineProperty({__proto__:null,aws:iX,booleanEquals:uX,getAttr:ax,isSet:lX,isValidHostLabel:bg,not:dX,parseURL:fX,stringEquals:pX,substring:hX,uriEncode:mX},Symbol.toStringTag,{value:"Module"})),sx=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let a=0;for(;a<t.length;){const s=t.indexOf("{",a);if(s===-1){n.push(t.slice(a));break}n.push(t.slice(a,s));const o=t.indexOf("}",s);if(o===-1){n.push(t.slice(s));break}t[s+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(s+1,o)),a=o+2);const i=t.substring(s+1,o);if(i.includes("#")){const[c,l]=i.split("#");n.push(ax(r[c],l))}else n.push(r[i]);a=o+1}return n.join("")},yX=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],_f=(t,e,n)=>{if(typeof t=="string")return sx(t,n);if(t.fn)return ox(t,n);if(t.ref)return yX(t,n);throw new dr(`'${e}': ${String(t)} is not a string, function or reference.`)},ox=({fn:t,argv:e},n)=>{const r=e.map(a=>["boolean","number"].includes(typeof a)?a:_f(a,"arg",n));return t.split(".").reduce((a,s)=>a[s],gX)(...r)},vX=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new dr(`'${t}' is already defined in Reference Record.`);const r=ox(e,n);return n.logger?.debug?.(pu,`evaluateCondition: ${Ga(e)} = ${Ga(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},wg=(t=[],e)=>{const n={};for(const r of t){const{result:a,toAssign:s}=vX(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!a)return{result:a};s&&(n[s.name]=s.value,e.logger?.debug?.(pu,`assign: ${s.name} := ${Ga(s.value)}`))}return{result:!0,referenceRecord:n}},bX=(t,e)=>Object.entries(t).reduce((n,[r,a])=>({...n,[r]:a.map(s=>{const o=_f(s,"Header value entry",e);if(typeof o!="string")throw new dr(`Header '${r}' value '${o}' is not a string`);return o})}),{}),ix=(t,e)=>{if(Array.isArray(t))return t.map(n=>ix(n,e));switch(typeof t){case"string":return sx(t,e);case"object":if(t===null)throw new dr(`Unexpected endpoint property: ${t}`);return ux(t,e);case"boolean":return t;default:throw new dr(`Unexpected endpoint property type: ${typeof t}`)}},ux=(t,e)=>Object.entries(t).reduce((n,[r,a])=>({...n,[r]:ix(a,e)}),{}),wX=(t,e)=>{const n=_f(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new dr(`Endpoint URL must be a string, got ${typeof n}`)},SX=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:a,referenceRecord:s}=wg(n,e);if(!a)return;const o={...e,referenceRecord:{...e.referenceRecord,...s}},{url:i,properties:c,headers:l}=r;return e.logger?.debug?.(pu,`Resolving endpoint from template: ${Ga(r)}`),{...l!=null&&{headers:bX(l,o)},...c!=null&&{properties:ux(c,o)},url:wX(i,o)}},_X=(t,e)=>{const{conditions:n,error:r}=t,{result:a,referenceRecord:s}=wg(n,e);if(a)throw new dr(_f(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...s}}))},xX=(t,e)=>{const{conditions:n,rules:r}=t,{result:a,referenceRecord:s}=wg(n,e);if(a)return cx(r,{...e,referenceRecord:{...e.referenceRecord,...s}})},cx=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=SX(n,e);if(r)return r}else if(n.type==="error")_X(n,e);else if(n.type==="tree"){const r=xX(n,e);if(r)return r}else throw new dr(`Unknown endpoint rule: ${n}`);throw new dr("Rules evaluation failed")},IX=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:a,rules:s}=t;e.logger?.debug?.(`${pu} Initial EndpointParams: ${Ga(n)}`);const o=Object.entries(a).filter(([,l])=>l.default!=null).map(([l,u])=>[l,u.default]);if(o.length>0)for(const[l,u]of o)n[l]=n[l]??u;const i=Object.entries(a).filter(([,l])=>l.required).map(([l])=>l);for(const l of i)if(n[l]==null)throw new dr(`Missing required parameter: '${l}'`);const c=cx(s,{endpointParams:n,logger:r,referenceRecord:{}});if(e.endpointParams?.Endpoint)try{const l=new URL(e.endpointParams.Endpoint),{protocol:u,port:d}=l;c.url.protocol=u,c.url.port=d}catch{}return e.logger?.debug?.(`${pu} Resolved endpoint: ${Ga(c)}`),c};let kX=class lx{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new lx({...this,headers:{...this.headers}});return e.query&&(e.query=EX(e.query)),e}};function EX(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}const Uv="user-agent",sp="x-amz-user-agent",Gv=" ",op="/",TX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,CX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,qv="-",NX=t=>(e,n)=>async r=>{const{request:a}=r;if(!kX.isInstance(a))return e(r);const{headers:s}=a,o=n?.userAgent?.map(ip)||[],i=(await t.defaultUserAgentProvider()).map(ip),c=t?.customUserAgent?.map(ip)||[],l=tx(),u=(l?[l]:[]).concat([...i,...o,...c]).join(Gv),d=[...i.filter(f=>f.startsWith("aws-sdk-")),...c].join(Gv);return t.runtime!=="browser"?(d&&(s[sp]=s[sp]?`${s[Uv]} ${d}`:d),s[Uv]=u):s[sp]=u,e({...r,request:a})},ip=t=>{const e=t[0].split(op).map(o=>o.replace(TX,qv)).join(op),n=t[1]?.replace(CX,qv),r=e.indexOf(op),a=e.substring(0,r);let s=e.substring(r+1);return a==="api"&&(s=s.toLowerCase()),[a,s,n].filter(o=>o&&o.length>0).reduce((o,i,c)=>{switch(c){case 0:return i;case 1:return`${o}/${i}`;default:return`${o}#${i}`}},"")},AX={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},RX=t=>({applyToStack:e=>{e.add(NX(t),AX)}}),$X=(t,e,n)=>{let r=t;const a={start(){},async transform(s,o){try{const i=new Date,c={":date":{type:"timestamp",value:i}},l=await e.sign({message:{body:s,headers:c},priorSignature:r},{signingDate:i});r=l.signature;const u=n.encode({headers:{...c,":chunk-signature":{type:"binary",value:B_(l.signature)}},body:s});o.enqueue(u)}catch(i){o.error(i)}}};return new TransformStream({...a})};class DX{constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new z_(e.utf8Encoder,e.utf8Decoder)}async handle(e,n,r={}){const a=n.request,{body:s,headers:o,query:i}=a;if(!(s instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");const c=new TransformStream;a.body=c.readable;let l;try{l=await e(n)}catch(h){throw a.body.cancel(),h}const d=((o.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||i&&i["X-Amz-Signature"]||"",f=$X(d,await this.messageSigner(),this.eventStreamCodec);return s.pipeThrough(f).pipeThrough(c),l}}const OX=t=>new DX(t),FX=()=>t=>async e=>{const n={...e.input},r=await t(e),a=r.output;return n.SessionId&&a.SessionId==null&&(a.SessionId=n.SessionId),r},MX={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0};let dx=class fx{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new fx({...this,headers:{...this.headers}});return e.query&&(e.query=PX(e.query)),e}};function PX(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}let BX=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};const LX=(t,e)=>n=>r=>{const{request:a}=r;if(dx.isInstance(a)&&t.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){a.protocol="wss:",a.method="GET",a.path=`${a.path}-websocket`;const{headers:s}=a;delete s["Content-Type"],delete s["x-amz-content-sha256"];for(const o of Object.keys(s))if(o.indexOf(e.headerPrefix)===0){const i=o.replace(e.headerPrefix,"");a.query[i]=s[o]}s["x-amz-user-agent"]&&(a.query["user-agent"]=s["x-amz-user-agent"]),a.headers={host:s.host??a.hostname}}return n(r)},WX={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},zX=(t,e)=>({applyToStack:n=>{n.addRelativeTo(LX(t,e),WX),n.add(FX(),MX)}}),px=t=>t.protocol==="ws:"||t.protocol==="wss:";class VX{constructor(e){this.signer=e.signer}presign(e,n={}){return this.signer.presign(e,n)}async sign(e,n){return dx.isInstance(e)&&px(e)?{...await this.signer.presign({...e,body:""},{...n,expiresIn:60,unsignableHeaders:new Set(Object.keys(e.headers).filter(a=>a!=="host"))}),body:e.body}:this.signer.sign(e,n)}}const HX=t=>({...t,signer:async e=>{const n=await t.signer(e);if(jX(n))return new VX({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}}),jX=t=>!!t;function Sg(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=Is(n),Array.isArray(r))for(let a=0,s=r.length;a<s;a++)e.push(`${n}=${Is(r[a])}`);else{let a=n;(r||typeof r=="string")&&(a+=`=${Is(r)}`),e.push(a)}}return e.join("&")}function UX(t){const{port:e,query:n}=t;let{protocol:r,path:a,hostname:s}=t;r&&r.slice(-1)!==":"&&(r+=":"),e&&(s+=`:${e}`),a&&a.charAt(0)!=="/"&&(a=`/${a}`);let o=n?Sg(n):"";o&&o[0]!=="?"&&(o=`?${o}`);let i="";if(t.username!=null||t.password!=null){const l=t.username??"",u=t.password??"";i=`${l}:${u}@`}let c="";return t.fragment&&(c=`#${t.fragment}`),`${r}//${i}${s}${a}${o}${c}`}function GX(t){let e=0,n=0,r=null,a=null;const s=i=>{if(typeof i!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+i);e=i,n=4,r=new Uint8Array(i),new DataView(r.buffer).setUint32(0,i,!1)},o=async function*(){const i=t[Symbol.asyncIterator]();for(;;){const{value:c,done:l}=await i.next();if(l){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}const u=c.length;let d=0;for(;d<u;){if(!r){const p=u-d;a||(a=new Uint8Array(4));const h=Math.min(4-n,p);if(a.set(c.slice(d,d+h),n),n+=h,d+=h,n<4)break;s(new DataView(a.buffer).getUint32(0,!1)),a=null}const f=Math.min(e-n,u-d);r.set(c.slice(d,d+f),n),n+=f,d+=f,e&&e===n&&(yield r,r=null,e=0,n=0)}}};return{[Symbol.asyncIterator]:o}}function qX(t,e){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const a=new Error(n.headers[":error-message"].value||"UnknownError");throw a.name=n.headers[":error-code"].value,a}else if(r==="exception"){const a=n.headers[":exception-type"].value,s={[a]:n},o=await t(s);if(o.$unknown){const i=new Error(e(n.body));throw i.name=a,i}throw o[a]}else if(r==="event"){const a={[n.headers[":event-type"].value]:n},s=await t(a);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let KX=class{constructor({utf8Encoder:e,utf8Decoder:n}){this.eventStreamCodec=new z_(e,n),this.utfEncoder=e}deserialize(e,n){const r=GX(e);return new gK({messageStream:new hK({inputStream:r,decoder:this.eventStreamCodec}),deserializer:qX(n,this.utfEncoder)})}serialize(e,n){return new mK({messageStream:new yK({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const _g=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}}),xg=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:a}=await e.next();if(r)return n.close();n.enqueue(a)}})};class XX{constructor({utf8Encoder:e,utf8Decoder:n}){this.universalMarshaller=new KX({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){const r=YX(e)?_g(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){const r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?xg(r):r}}const YX=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,ZX=t=>new XX(t);let hx=class mx{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new mx({...this,headers:{...this.headers}});return e.query&&(e.query=JX(e.query)),e}};function JX(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Jc{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function QX(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const eY={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class Ru{static create(e){return typeof e?.handle=="function"?e:new Ru(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,a=this.config.keepAlive===!0;if(n?.aborted){const m=new Error("Request aborted");return m.name="AbortError",Promise.reject(m)}let s=e.path;const o=Sg(e.query||{});o&&(s+=`?${o}`),e.fragment&&(s+=`#${e.fragment}`);let i="";if(e.username!=null||e.password!=null){const m=e.username??"",g=e.password??"";i=`${m}:${g}@`}const{port:c,method:l}=e,u=`${e.protocol}//${i}${e.hostname}${c?`:${c}`:""}${s}`,f={body:l==="GET"||l==="HEAD"?void 0:e.body,headers:new Headers(e.headers),method:l};typeof AbortController<"u"&&(f.signal=n),eY.supported&&(f.keepalive=a);const p=new Request(u,f),h=[fetch(p).then(m=>{const g=m.headers,v={};for(const w of g.entries())v[w[0]]=w[1];return m.body!=null?{response:new Jc({headers:v,reason:m.statusText,statusCode:m.status,body:m.body})}:m.blob().then(w=>({response:new Jc({headers:v,reason:m.statusText,statusCode:m.status,body:w})}))}),QX(r)];return n&&h.push(new Promise((m,g)=>{n.onabort=()=>{const v=new Error("Request aborted");v.name="AbortError",g(v)}})),Promise.race(h)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const qa={},Ho=new Array(64);for(let t=0,e="A".charCodeAt(0),n="Z".charCodeAt(0);t+e<=n;t++){const r=String.fromCharCode(t+e);qa[r]=t,Ho[t]=r}for(let t=0,e="a".charCodeAt(0),n="z".charCodeAt(0);t+e<=n;t++){const r=String.fromCharCode(t+e),a=t+26;qa[r]=a,Ho[a]=r}for(let t=0;t<10;t++){qa[t.toString(10)]=t+52;const e=t.toString(10),n=t+52;qa[e]=n,Ho[n]=e}qa["+"]=62;Ho[62]="+";qa["/"]=63;Ho[63]="/";const _o=6,Hi=8,tY=63,Ig=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let a=0;a<t.length;a+=4){let s=0,o=0;for(let l=a,u=a+3;l<=u;l++)if(t[l]!=="="){if(!(t[l]in qa))throw new TypeError(`Invalid character ${t[l]} in base64 string.`);s|=qa[t[l]]<<(u-l)*_o,o+=_o}else s>>=_o;const i=a/4*3;s>>=o%Hi;const c=Math.floor(o/Hi);for(let l=0;l<c;l++){const u=(c-l-1)*Hi;r.setUint8(i+l,(s&255<<u)>>u)}}return new Uint8Array(n)};function gx(t){let e;typeof t=="string"?e=bu(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let a="";for(let s=0;s<e.length;s+=3){let o=0,i=0;for(let l=s,u=Math.min(s+3,e.length);l<u;l++)o|=e[l]<<(u-l-1)*Hi,i+=Hi;const c=Math.ceil(i/_o);o<<=c*_o-i;for(let l=1;l<=c;l++){const u=(c-l)*_o;a+=Ho[(o&tY<<u)>>u]}a+="==".slice(0,4-c)}return a}const nY=t=>typeof Blob=="function"&&t instanceof Blob?rY(t):aY(t);async function rY(t){const e=await sY(t),n=Ig(e);return new Uint8Array(n)}async function aY(t){let e=new Uint8Array(0);const n=t.getReader();let r=!1;for(;!r;){const{done:a,value:s}=await n.read();if(s){const o=e;e=new Uint8Array(o.length+s.length),e.set(o),e.set(s,o.length)}r=a}return e}function sY(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const a=r.result??"",s=a.indexOf(","),o=s>-1?s+1:a.length;e(a.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const oY=2e3;class iY{constructor(e,n=new Ru){this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.httpHandler=n,typeof e=="function"?this.configPromise=e().then(r=>r??{}):this.configPromise=Promise.resolve(e??{})}destroy(){for(const[e,n]of Object.entries(this.sockets)){for(const r of n)r.close(1e3,"Socket closed through destroy() call");delete this.sockets[e]}}async handle(e){if(!px(e))return this.httpHandler.handle(e);const n=UX(e),r=new WebSocket(n);this.sockets[n]||(this.sockets[n]=[]),this.sockets[n].push(r),r.binaryType="arraybuffer";const{connectionTimeout:a=oY}=await this.configPromise;await this.waitForReady(r,a);const{body:s}=e,o=uY(s),i=this.connect(r,o),c=cY(i);return{response:new BX({statusCode:200,body:c})}}removeNotUsableSockets(e){this.sockets[e]=(this.sockets[e]??[]).filter(n=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(n.readyState))}waitForReady(e,n){return new Promise((r,a)=>{const s=setTimeout(()=>{this.removeNotUsableSockets(e.url),a({$metadata:{httpStatusCode:500}})},n);e.onopen=()=>{clearTimeout(s),r()}})}connect(e,n){let r,a=!1,s=()=>{},o=()=>{};e.onmessage=l=>{o({done:!1,value:new Uint8Array(l.data)})},e.onerror=l=>{a=!0,e.close(),s(l)},e.onclose=()=>{this.removeNotUsableSockets(e.url),!a&&(r?s(r):o({done:!0,value:void 0}))};const i={[Symbol.asyncIterator]:()=>({next:()=>new Promise((l,u)=>{o=l,s=u})})};return(async()=>{try{for await(const l of n)e.send(l)}catch(l){r=l}finally{e.close(1e3)}})(),i}}const uY=t=>t[Symbol.asyncIterator]?t:lY(t)?_g(t):{[Symbol.asyncIterator]:async function*(){yield t}},cY=t=>typeof ReadableStream=="function"?xg(t):t,lY=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;var Kv;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Kv||(Kv={}));const dY=!1,fY=!1,yx=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Xv=t=>yx(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,pY=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return Xv(e);const r=await e();return Xv(r)},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return yx(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},hY=t=>({...t,eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),Yv="content-length";function mY(t){return e=>async n=>{const r=n.request;if(hx.isInstance(r)){const{body:a,headers:s}=r;if(a&&Object.keys(s).map(o=>o.toLowerCase()).indexOf(Yv)===-1)try{const o=t(a);r.headers={...r.headers,[Yv]:String(o)}}catch{}}return e({...n,request:r})}}const gY={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},yY=t=>({applyToStack:e=>{e.add(mY(t.bodyLengthChecker),gY)}}),vY=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),xY(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!_Y(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},bY=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,wY=/(\d+\.){3}\d+/,SY=/\.\./,_Y=t=>bY.test(t)&&!wY.test(t)&&!SY.test(t),xY=t=>{const[e,n,r,a,s,o]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,c=[e,n,r,s,o].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!n&&!!r&&!!s&&!!o},IY=(t,e,n)=>{const r=async()=>{const a=n[t]??n[e];return typeof a=="function"?a():a};return t==="credentialScope"||e==="CredentialScope"?async()=>{const a=typeof n.credentials=="function"?await n.credentials():n.credentials;return a?.credentialScope??a?.CredentialScope}:t==="endpoint"||e==="endpoint"?async()=>{const a=await r();if(a&&typeof a=="object"){if("url"in a)return a.url.href;if("hostname"in a){const{protocol:s,hostname:o,port:i,path:c}=a;return`${s}//${o}${i?":"+i:""}${c}`}}return a}:r},kY=async t=>{};function EY(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,a=null]=n.split("=");r=decodeURIComponent(r),a&&(a=decodeURIComponent(a)),r in e?Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]:e[r]=a}return e}const Qc=t=>{if(typeof t=="string")return Qc(new URL(t));const{hostname:e,pathname:n,port:r,protocol:a,search:s}=t;let o;return s&&(o=EY(s)),{hostname:e,port:r?parseInt(r):void 0,protocol:a,path:n,query:o}},vx=t=>typeof t=="object"?"url"in t?Qc(t.url):t:Qc(t),TY=async(t,e,n,r)=>{if(!n.endpoint){const o=await kY(n.serviceId||"");o&&(n.endpoint=()=>Promise.resolve(vx(o)))}const a=await CY(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(a,r)},CY=async(t,e,n)=>{const r={},a=e?.getEndpointParameterInstructions?.()||{};for(const[s,o]of Object.entries(a))switch(o.type){case"staticContextParams":r[s]=o.value;break;case"contextParams":r[s]=t[o.name];break;case"clientContextParams":case"builtInParams":r[s]=await IY(o.name,s,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(a).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await vY(r),r},NY=({config:t,instructions:e})=>(n,r)=>async a=>{const s=await TY(a.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=s,r.authSchemes=s.properties?.authSchemes;const o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const c=vK(r)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...a})},AY=(t,e)=>(n,r)=>async a=>{const{response:s}=await n(a);try{const o=await e(s,t);return{response:s,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:s}),!("$metadata"in o)){const i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+i,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},RY=(t,e)=>(n,r)=>async a=>{const s=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint;if(!s)throw new Error("No valid endpoint provider available.");const o=await e(a.input,{...t,endpoint:s});return n({...a,request:o})},$Y={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},bx={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function DY(t,e,n){return{applyToStack:r=>{r.add(AY(t,n),$Y),r.add(RY(t,e),bx)}}}const OY={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:bx.name},FY=(t,e)=>({applyToStack:n=>{n.addRelativeTo(NY({config:t,instructions:e}),OY)}}),MY=t=>{const e=t.tls??!0,{endpoint:n}=t,r=n!=null?async()=>vx(await Br(n)()):void 0;return{...t,endpoint:r,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Br(t.useDualstackEndpoint??!1),useFipsEndpoint:Br(t.useFipsEndpoint??!1)}};var $o;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})($o||($o={}));const el=3,PY=$o.STANDARD,BY=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],LY=["TimeoutError","RequestTimeout","RequestTimeoutException"],WY=[500,502,503,504],zY=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],VY=t=>t.$metadata?.clockSkewCorrected,wx=t=>t.$metadata?.httpStatusCode===429||BY.includes(t.name)||t.$retryable?.throttling==!0,Sx=t=>VY(t)||LY.includes(t.name)||zY.includes(t?.code||"")||WY.includes(t.$metadata?.httpStatusCode||0),HY=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!Sx(t)}return!1};class jY{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>setTimeout(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),wx(e)){const a=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=a,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(a),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Eh=100,_x=20*1e3,UY=500,Zv=500,GY=5,qY=10,KY=1,XY="amz-sdk-invocation-id",YY="amz-sdk-request",ZY=()=>{let t=Eh;return{computeNextBackoffDelay:r=>Math.floor(Math.min(_x,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},Jv=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(_x,t),getRetryCost:()=>n});class xx{constructor(e){this.maxAttempts=e,this.mode=$o.STANDARD,this.capacity=Zv,this.retryBackoffStrategy=ZY(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Jv({retryDelay:Eh,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const a=n.errorType;this.retryBackoffStrategy.setDelayBase(a==="THROTTLING"?UY:Eh);const s=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,s):s,i=this.getCapacityCost(a);return this.capacity-=i,Jv({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Zv,this.capacity+(e.getRetryCost()??KY))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${el}`),el}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?qY:GY}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class JY{constructor(e,n){this.maxAttemptsProvider=e,this.mode=$o.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new jY,this.standardRetryStrategy=new xx(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}var uc,QY=new Uint8Array(16);function eZ(){if(!uc&&(uc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!uc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uc(QY)}const tZ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function nZ(t){return typeof t=="string"&&tZ.test(t)}var Sn=[];for(var up=0;up<256;++up)Sn.push((up+256).toString(16).substr(1));function rZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Sn[t[e+0]]+Sn[t[e+1]]+Sn[t[e+2]]+Sn[t[e+3]]+"-"+Sn[t[e+4]]+Sn[t[e+5]]+"-"+Sn[t[e+6]]+Sn[t[e+7]]+"-"+Sn[t[e+8]]+Sn[t[e+9]]+"-"+Sn[t[e+10]]+Sn[t[e+11]]+Sn[t[e+12]]+Sn[t[e+13]]+Sn[t[e+14]]+Sn[t[e+15]]).toLowerCase();if(!nZ(n))throw TypeError("Stringified UUID is invalid");return n}function aZ(t,e,n){t=t||{};var r=t.random||(t.rng||eZ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=r[a];return e}return rZ(r)}const sZ=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),oZ=t=>{const{retryStrategy:e}=t,n=Br(t.maxAttempts??el);return{...t,maxAttempts:n,retryStrategy:async()=>e||(await Br(t.retryMode)()===$o.ADAPTIVE?new JY(n):new xx(n))}};class Ix{trace(){}debug(){}info(){}warn(){}error(){}}const hs=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},Ra=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,tl=()=>{let t=[],e=[],n=!1;const r=new Set,a=d=>d.sort((f,p)=>Qv[p.step]-Qv[f.step]||eb[p.priority||"normal"]-eb[f.priority||"normal"]),s=d=>{let f=!1;const p=h=>{const m=hs(h.name,h.aliases);if(m.includes(d)){f=!0;for(const g of m)r.delete(g);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},o=d=>{let f=!1;const p=h=>{if(h.middleware===d){f=!0;for(const m of hs(h.name,h.aliases))r.delete(m);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},i=d=>(t.forEach(f=>{d.add(f.middleware,{...f})}),e.forEach(f=>{d.addRelativeTo(f.middleware,{...f})}),d.identifyOnResolve?.(u.identifyOnResolve()),d),c=d=>{const f=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...c(p))}),f.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...c(p))}),f},l=(d=!1)=>{const f=[],p=[],h={};return t.forEach(g=>{const v={...g,before:[],after:[]};for(const b of hs(v.name,v.aliases))h[b]=v;f.push(v)}),e.forEach(g=>{const v={...g,before:[],after:[]};for(const b of hs(v.name,v.aliases))h[b]=v;p.push(v)}),p.forEach(g=>{if(g.toMiddleware){const v=h[g.toMiddleware];if(v===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${Ra(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&v.after.push(g),g.relation==="before"&&v.before.push(g)}}),a(f).map(c).reduce((g,v)=>(g.push(...v),g),[])},u={add:(d,f={})=>{const{name:p,override:h,aliases:m}=f,g={step:"initialize",priority:"normal",middleware:d,...f},v=hs(p,m);if(v.length>0){if(v.some(b=>r.has(b))){if(!h)throw new Error(`Duplicate middleware name '${Ra(p,m)}'`);for(const b of v){const w=t.findIndex(I=>I.name===b||I.aliases?.some(E=>E===b));if(w===-1)continue;const S=t[w];if(S.step!==g.step||g.priority!==S.priority)throw new Error(`"${Ra(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${Ra(p,m)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(w,1)}}for(const b of v)r.add(b)}t.push(g)},addRelativeTo:(d,f)=>{const{name:p,override:h,aliases:m}=f,g={middleware:d,...f},v=hs(p,m);if(v.length>0){if(v.some(b=>r.has(b))){if(!h)throw new Error(`Duplicate middleware name '${Ra(p,m)}'`);for(const b of v){const w=e.findIndex(I=>I.name===b||I.aliases?.some(E=>E===b));if(w===-1)continue;const S=e[w];if(S.toMiddleware!==g.toMiddleware||S.relation!==g.relation)throw new Error(`"${Ra(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${Ra(p,m)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(w,1)}}for(const b of v)r.add(b)}e.push(g)},clone:()=>i(tl()),use:d=>{d.applyToStack(u)},remove:d=>typeof d=="string"?s(d):o(d),removeByTag:d=>{let f=!1;const p=h=>{const{tags:m,name:g,aliases:v}=h;if(m&&m.includes(d)){const b=hs(g,v);for(const w of b)r.delete(w);return f=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),f},concat:d=>{const f=i(tl());return f.use(d),f.identifyOnResolve(n||f.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),f},applyToStack:i,identify:()=>l(!0).map(d=>{const f=d.step??d.relation+" "+d.toMiddleware;return Ra(d.name,d.aliases)+" - "+f}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,f)=>{for(const p of l().map(h=>h.middleware).reverse())d=p(d,f);return n&&console.log(u.identify()),d}};return u},Qv={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},eb={high:3,normal:2,low:1};class iZ{constructor(e){this.middlewareStack=tl(),this.config=e}send(e,n,r){const a=typeof n!="function"?n:void 0,s=typeof n=="function"?n:r,o=e.resolveMiddleware(this.middlewareStack,this.config,a);if(s)o(e).then(i=>s(null,i.output),i=>s(i)).catch(()=>{});else return o(e).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}function uZ(t,e="utf-8"){return e==="base64"?gx(t):Hh(t)}function cZ(t,e){return e==="base64"?Cs.mutate(Ig(t)):Cs.mutate(bu(t))}class Cs extends Uint8Array{static fromString(e,n="utf-8"){switch(typeof e){case"string":return cZ(e,n);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,Cs.prototype),e}transformToString(e="utf-8"){return uZ(this,e)}}const lZ=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Cs.mutate(t);if(!t)return Cs.mutate(new Uint8Array);const n=e.streamCollector(t);return Cs.mutate(await n)};class kx{constructor(){this.middlewareStack=tl()}static classBuilder(){return new dZ}resolveMiddlewareWithContext(e,n,r,{middlewareFn:a,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:u,CommandCtor:d}){for(const g of a.bind(this)(d,e,n,r))this.middlewareStack.use(g);const f=e.concat(this.middlewareStack),{logger:p}=n,h={logger:p,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:c,[wh]:{...l},...u},{requestHandler:m}=n;return f.resolve(g=>m.handle(g.request,r||{}),h)}}class dZ{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let n;return n=class extends kx{static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this)}resolveMiddleware(r,a,s){return this.resolveMiddlewareWithContext(r,a,s,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const fZ=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Tx.warn(Ex(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},pZ=Math.ceil(2**127*(2-2**-23)),hZ=t=>{const e=fZ(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>pZ)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},mZ=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},gZ=t=>yZ(t,32),yZ=(t,e)=>{const n=mZ(t);if(n!==void 0&&vZ(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},vZ=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},bZ=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},qn=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Tx.warn(Ex(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},wZ=t=>{if(t==null)return;const e=bZ(t),n=Object.entries(e).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return e},Nn=t=>typeof t=="string"?SZ(t):hZ(t),SZ=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},Ex=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Tx={warn:console.warn};class kg extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,kg.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const ts=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,a])=>{(t[r]==null||t[r]==="")&&(t[r]=a)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},_Z=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{const a=IZ(t),s=a.httpStatusCode?a.httpStatusCode+"":void 0,o=new n({name:e?.code||e?.Code||r||s||"UnknownError",$fault:"client",$metadata:a});throw ts(o,e)},xZ=t=>({output:e,parsedBody:n,errorCode:r})=>{_Z({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},IZ=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),kZ=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},EZ=t=>{const e=[];for(const n in Zc){const r=Zc[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},TZ=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},CZ=t=>{let e=t.retryStrategy;return{setRetryStrategy(n){e=n},retryStrategy(){return e}}},NZ=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},AZ=t=>({...EZ(t),...CZ(t)}),RZ=t=>({...TZ(t),...NZ(t)}),Th=function(){const t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),n=new e;return Object.setPrototypeOf(n,t.prototype),n};Th.prototype=Object.create(String.prototype,{constructor:{value:Th,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Th,String);function ta(t,e,n){let r,a,s;if(typeof e>"u"&&typeof n>"u")r={},s=t;else{if(r=t,typeof e=="function")return a=e,s=n,$Z(r,a,s);s=e}for(const o of Object.keys(s)){if(!Array.isArray(s[o])){r[o]=s[o];continue}Cx(r,null,s,o)}return r}const fn=(t,e)=>{const n={};for(const r in e)Cx(n,t,e,r);return n},$Z=(t,e,n)=>ta(t,Object.entries(n).reduce((r,[a,s])=>(Array.isArray(s)?r[a]=s:typeof s=="function"?r[a]=[e,s()]:r[a]=[e,s],r),{})),Cx=(t,e,n,r)=>{if(e!==null){let o=n[r];typeof o=="function"&&(o=[,o]);const[i=DZ,c=OZ,l=r]=o;(typeof i=="function"&&i(e[l])||typeof i!="function"&&i)&&(t[r]=c(e[l]));return}let[a,s]=n[r];if(typeof s=="function"){let o;const i=a===void 0&&(o=s())!=null,c=typeof a=="function"&&!!a(void 0)||typeof a!="function"&&!!a;i?t[r]=o:c&&(t[r]=s())}else{const o=a===void 0&&s!=null,i=typeof a=="function"&&!!a(s)||typeof a!="function"&&!!a;(o||i)&&(t[r]=s)}},DZ=t=>t!=null,OZ=t=>t,cc=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},hu=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(hu);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=hu(t[n]));return e}return t},FZ=t=>t?.body instanceof ReadableStream,MZ=t=>(e,n)=>async r=>{let a=await t.retryStrategy();const s=await t.maxAttempts();if(PZ(a)){a=a;let o=await a.acquireInitialRetryToken(n.partition_id),i=new Error,c=0,l=0;const{request:u}=r,d=hx.isInstance(u);for(d&&(u.headers[XY]=aZ());;)try{d&&(u.headers[YY]=`attempt=${c+1}; max=${s}`);const{response:f,output:p}=await e(r);return a.recordSuccess(o),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=l,{response:f,output:p}}catch(f){const p=BZ(f);if(i=sZ(f),d&&FZ(u))throw(n.logger instanceof Ix?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),i;try{o=await a.refreshRetryTokenForRetry(o,p)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,i}c=o.getRetryCount();const h=o.getRetryDelay();l+=h,await new Promise(m=>setTimeout(m,h))}}else return a=a,a?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",a.mode]]),a.retry(e,r)},PZ=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",BZ=t=>{const e={error:t,errorType:LZ(t)},n=VZ(t.$response);return n&&(e.retryAfterHint=n),e},LZ=t=>wx(t)?"THROTTLING":Sx(t)?"TRANSIENT":HY(t)?"SERVER_ERROR":"CLIENT_ERROR",WZ={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},zZ=t=>({applyToStack:e=>{e.add(MZ(t),WZ)}}),VZ=t=>{if(!Jc.isInstance(t))return;const e=Object.keys(t.headers).find(s=>s.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},HZ=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rekognition"}),jZ="@aws-sdk/client-rekognitionstreaming",UZ="AWS SDK for JavaScript Rekognitionstreaming Client for Node.js, Browser and React Native",GZ="3.398.0",qZ={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo rekognitionstreaming"},KZ="./dist-cjs/index.js",XZ="./dist-types/index.d.ts",YZ="./dist-es/index.js",ZZ=!1,JZ={"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.398.0","@aws-sdk/credential-provider-node":"3.398.0","@aws-sdk/eventstream-handler-node":"3.398.0","@aws-sdk/middleware-eventstream":"3.398.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/middleware-websocket":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@smithy/config-resolver":"^2.0.5","@smithy/eventstream-serde-browser":"^2.0.5","@smithy/eventstream-serde-config-resolver":"^2.0.5","@smithy/eventstream-serde-node":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},QZ={"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},eJ={node:">=14.0.0"},tJ={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},nJ=["dist-*/**"],rJ={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},aJ="Apache-2.0",sJ={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},oJ="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rekognitionstreaming",iJ={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rekognitionstreaming"},uJ={name:jZ,description:UZ,version:GZ,scripts:qZ,main:KZ,types:XZ,module:YZ,sideEffects:ZZ,dependencies:JZ,devDependencies:QZ,engines:eJ,typesVersions:tJ,files:nJ,author:rJ,license:aJ,browser:sJ,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:oJ,repository:iJ};var Nx={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ch=function(t,e){return Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Ch(t,e)};function cJ(t,e){Ch(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nh=function(){return Nh=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nh.apply(this,arguments)};function lJ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function dJ(t,e,n,r){var a=arguments.length,s=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function fJ(t,e){return function(n,r){e(n,r,t)}}function pJ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hJ(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function mJ(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gJ(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function yJ(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ah(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ax(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function vJ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ax(arguments[e]));return t}function bJ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var s=arguments[e],o=0,i=s.length;o<i;o++,a++)r[a]=s[o];return r}function mu(t){return this instanceof mu?(this.v=t,this):new mu(t)}function wJ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof mu?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function SJ(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,s){e[a]=t[a]?function(o){return(n=!n)?{value:mu(t[a](o)),done:a==="return"}:s?s(o):o}:s}}function _J(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ah=="function"?Ah(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}function xJ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function IJ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function kJ(t){return t&&t.__esModule?t:{default:t}}function EJ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function TJ(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const CJ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Nh},__asyncDelegator:SJ,__asyncGenerator:wJ,__asyncValues:_J,__await:mu,__awaiter:hJ,__classPrivateFieldGet:EJ,__classPrivateFieldSet:TJ,__createBinding:gJ,__decorate:dJ,__exportStar:yJ,__extends:cJ,__generator:mJ,__importDefault:kJ,__importStar:IJ,__makeTemplateObject:xJ,__metadata:pJ,__param:fJ,__read:Ax,__rest:lJ,__spread:vJ,__spreadArrays:bJ,__values:Ah},Symbol.toStringTag,{value:"Module"})),NJ=_a(CJ);var gi={},yi={},vi={},tb;function AJ(){if(tb)return vi;tb=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.isEmptyData=void 0;function t(e){return typeof e=="string"?e.length===0:e.byteLength===0}return vi.isEmptyData=t,vi}var cp={},nb;function Rx(){return nb||(nb=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(cp)),cp}const RJ={};function $J(){return typeof window<"u"?window:typeof self<"u"?self:RJ}const DJ=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:$J},Symbol.toStringTag,{value:"Module"})),Eg=_a(DJ);var rb;function $x(){if(rb)return yi;rb=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Sha256=void 0;var t=AJ(),e=Rx(),n=d0,r=Eg,a=function(){function i(c){this.secret=c,this.reset()}return i.prototype.update=function(c){var l=this;(0,t.isEmptyData)(c)||(this.operation=this.operation.then(function(u){return u.onerror=function(){l.operation=Promise.reject(new Error("Error encountered updating hash"))},u.process(o(c)),u}),this.operation.catch(function(){}))},i.prototype.digest=function(){return this.operation.then(function(c){return new Promise(function(l,u){c.onerror=function(){u(new Error("Error encountered finalizing hash"))},c.oncomplete=function(){c.result&&l(new Uint8Array(c.result)),u(new Error("Error encountered finalizing hash"))},c.finish()})})},i.prototype.reset=function(){this.secret?(this.operation=s(this.secret).then(function(c){return(0,r.locateWindow)().msCrypto.subtle.sign(e.SHA_256_HMAC_ALGO,c)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,r.locateWindow)().msCrypto.subtle.digest("SHA-256"))},i}();yi.Sha256=a;function s(i){return new Promise(function(c,l){var u=(0,r.locateWindow)().msCrypto.subtle.importKey("raw",o(i),e.SHA_256_HMAC_ALGO,!1,["sign"]);u.oncomplete=function(){u.result&&c(u.result),l(new Error("ImportKey completed without importing key."))},u.onerror=function(){l(new Error("ImportKey failed to import key."))}})}function o(i){return typeof i=="string"?(0,n.fromUtf8)(i):ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(i)}return yi}var bi={},ab;function Dx(){if(ab)return bi;ab=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Sha256=void 0;var t=wu(),e=Rx(),n=Eg,r=function(){function a(s){this.toHash=new Uint8Array(0),this.secret=s,this.reset()}return a.prototype.update=function(s){if(!(0,t.isEmptyData)(s)){var o=(0,t.convertToBuffer)(s),i=new Uint8Array(this.toHash.byteLength+o.byteLength);i.set(this.toHash,0),i.set(o,this.toHash.byteLength),this.toHash=i}},a.prototype.digest=function(){var s=this;return this.key?this.key.then(function(o){return(0,n.locateWindow)().crypto.subtle.sign(e.SHA_256_HMAC_ALGO,o,s.toHash).then(function(i){return new Uint8Array(i)})}):(0,t.isEmptyData)(this.toHash)?Promise.resolve(e.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,n.locateWindow)().crypto.subtle.digest(e.SHA_256_HASH,s.toHash)}).then(function(o){return Promise.resolve(new Uint8Array(o))})},a.prototype.reset=function(){var s=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(o,i){(0,n.locateWindow)().crypto.subtle.importKey("raw",(0,t.convertToBuffer)(s.secret),e.SHA_256_HMAC_ALGO,!1,["sign"]).then(o,i)}),this.key.catch(function(){}))},a}();return bi.Sha256=r,bi}var lp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rh=function(t,e){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Rh(t,e)};function OJ(t,e){Rh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $h=function(){return $h=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$h.apply(this,arguments)};function FJ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function MJ(t,e,n,r){var a=arguments.length,s=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function PJ(t,e){return function(n,r){e(n,r,t)}}function BJ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function LJ(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function WJ(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zJ(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function VJ(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Dh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ox(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function HJ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ox(arguments[e]));return t}function jJ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var s=arguments[e],o=0,i=s.length;o<i;o++,a++)r[a]=s[o];return r}function gu(t){return this instanceof gu?(this.v=t,this):new gu(t)}function UJ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof gu?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function GJ(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,s){e[a]=t[a]?function(o){return(n=!n)?{value:gu(t[a](o)),done:a==="return"}:s?s(o):o}:s}}function qJ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dh=="function"?Dh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}function KJ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function XJ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function YJ(t){return t&&t.__esModule?t:{default:t}}function ZJ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function JJ(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const QJ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $h},__asyncDelegator:GJ,__asyncGenerator:UJ,__asyncValues:qJ,__await:gu,__awaiter:LJ,__classPrivateFieldGet:ZJ,__classPrivateFieldSet:JJ,__createBinding:zJ,__decorate:MJ,__exportStar:VJ,__extends:OJ,__generator:WJ,__importDefault:YJ,__importStar:XJ,__makeTemplateObject:KJ,__metadata:BJ,__param:PJ,__read:Ox,__rest:FJ,__spread:HJ,__spreadArrays:jJ,__values:Dh},Symbol.toStringTag,{value:"Module"})),Fx=_a(QJ);var Nr={},sb;function eQ(){if(sb)return Nr;sb=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.supportsZeroByteGCM=Nr.supportsSubtleCrypto=Nr.supportsSecureRandom=Nr.supportsWebCrypto=void 0;var t=Fx,e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function n(o){if(r(o)&&typeof o.crypto.subtle=="object"){var i=o.crypto.subtle;return a(i)}return!1}Nr.supportsWebCrypto=n;function r(o){if(typeof o=="object"&&typeof o.crypto=="object"){var i=o.crypto.getRandomValues;return typeof i=="function"}return!1}Nr.supportsSecureRandom=r;function a(o){return o&&e.every(function(i){return typeof o[i]=="function"})}Nr.supportsSubtleCrypto=a;function s(o){return t.__awaiter(this,void 0,void 0,function(){var i,c;return t.__generator(this,function(l){switch(l.label){case 0:if(!a(o))return[2,!1];l.label=1;case 1:return l.trys.push([1,4,,5]),[4,o.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return i=l.sent(),[4,o.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},i,new Uint8Array(0))];case 3:return c=l.sent(),[2,c.byteLength===16];case 4:return l.sent(),[2,!1];case 5:return[2]}})})}return Nr.supportsZeroByteGCM=s,Nr}var ob;function tQ(){return ob||(ob=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Fx;e.__exportStar(eQ(),t)}(lp)),lp}var dp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Oh=function(t,e){return Oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Oh(t,e)};function nQ(t,e){Oh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fh=function(){return Fh=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fh.apply(this,arguments)};function rQ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function aQ(t,e,n,r){var a=arguments.length,s=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s}function sQ(t,e){return function(n,r){e(n,r,t)}}function oQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function iQ(t,e,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):a(u.value).then(i,c)}l((r=r.apply(t,e||[])).next())})}function uQ(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=l[0]&2?a.return:l[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,l[1])).done)return s;switch(a=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],a=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function cQ(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function lQ(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Mh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mx(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function dQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Mx(arguments[e]));return t}function fQ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var s=arguments[e],o=0,i=s.length;o<i;o++,a++)r[a]=s[o];return r}function yu(t){return this instanceof yu?(this.v=t,this):new yu(t)}function pQ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){r[f]&&(a[f]=function(p){return new Promise(function(h,m){s.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{c(r[f](p))}catch(h){d(s[0][3],h)}}function c(f){f.value instanceof yu?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){i("next",f)}function u(f){i("throw",f)}function d(f,p){f(p),s.shift(),s.length&&i(s[0][0],s[0][1])}}function hQ(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,s){e[a]=t[a]?function(o){return(n=!n)?{value:yu(t[a](o)),done:a==="return"}:s?s(o):o}:s}}function mQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Mh=="function"?Mh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(i,c){o=t[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}}function gQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function yQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function vQ(t){return t&&t.__esModule?t:{default:t}}function bQ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function wQ(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const SQ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Fh},__asyncDelegator:hQ,__asyncGenerator:pQ,__asyncValues:mQ,__await:yu,__awaiter:iQ,__classPrivateFieldGet:bQ,__classPrivateFieldSet:wQ,__createBinding:cQ,__decorate:aQ,__exportStar:lQ,__extends:nQ,__generator:uQ,__importDefault:vQ,__importStar:yQ,__makeTemplateObject:gQ,__metadata:oQ,__param:sQ,__read:Mx,__rest:rQ,__spread:dQ,__spreadArrays:fQ,__values:Mh},Symbol.toStringTag,{value:"Module"})),_Q=_a(SQ);var fp={},ib;function xQ(){return ib||(ib=1,Object.defineProperty(fp,"__esModule",{value:!0})),fp}var pp={},ub;function IQ(){return ub||(ub=1,Object.defineProperty(pp,"__esModule",{value:!0})),pp}var hp={},cb;function kQ(){return cb||(cb=1,Object.defineProperty(hp,"__esModule",{value:!0})),hp}var mp={},lb;function EQ(){return lb||(lb=1,Object.defineProperty(mp,"__esModule",{value:!0})),mp}var wi={},db;function TQ(){if(db)return wi;db=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.isMsWindow=void 0;var t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function e(r){return"MSInputMethodContext"in r&&"msCrypto"in r}function n(r){if(e(r)&&r.msCrypto.subtle!==void 0){var a=r.msCrypto,s=a.getRandomValues,o=a.subtle;return t.map(function(i){return o[i]}).concat(s).every(function(i){return typeof i=="function"})}return!1}return wi.isMsWindow=n,wi}var fb;function CQ(){return fb||(fb=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=_Q;e.__exportStar(xQ(),t),e.__exportStar(IQ(),t),e.__exportStar(kQ(),t),e.__exportStar(EQ(),t),e.__exportStar(TQ(),t)}(dp)),dp}var pb;function NQ(){if(pb)return gi;pb=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Sha256=void 0;var t=$x(),e=Dx(),n=i0,r=tQ(),a=CQ(),s=Eg,o=wu(),i=function(){function c(l){(0,r.supportsWebCrypto)((0,s.locateWindow)())?this.hash=new e.Sha256(l):(0,a.isMsWindow)((0,s.locateWindow)())?this.hash=new t.Sha256(l):this.hash=new n.Sha256(l)}return c.prototype.update=function(l,u){this.hash.update((0,o.convertToBuffer)(l))},c.prototype.digest=function(){return this.hash.digest()},c.prototype.reset=function(){this.hash.reset()},c}();return gi.Sha256=i,gi}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0;var e=NJ;e.__exportStar(NQ(),t);var n=$x();Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return n.Sha256}});var r=Dx();Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return r.Sha256}})})(Nx);const AQ={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Px={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Jt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},zn={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Da={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ue{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const a=ue.getVersionPrecision(e),s=ue.getVersionPrecision(n);let o=Math.max(a,s),i=0;const c=ue.map([e,n],l=>{const u=o-ue.getVersionPrecision(l),d=l+new Array(u+1).join(".0");return ue.map(d.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(i=o-Math.min(a,s)),o-=1;o>=i;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===i)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(e,n){const r=[];let a;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(a=0;a<e.length;a+=1)r.push(n(e[a]));return r}static find(e,n){let r,a;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,a=e.length;r<a;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let a,s;if(Object.assign)return Object.assign(e,...n);for(a=0,s=n.length;a<s;a+=1){const o=n[a];typeof o=="object"&&o!==null&&Object.keys(o).forEach(c=>{r[c]=o[c]})}return e}static getBrowserAlias(e){return AQ[e]}static getBrowserTypeByAlias(e){return Px[e]||""}}const Ct=/version\/(\d+(\.?_?\d+)+)/i,RQ=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=ue.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=ue.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=ue.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=ue.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=ue.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=ue.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=ue.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=ue.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=ue.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=ue.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=ue.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=ue.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=ue.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=ue.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=ue.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=ue.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=ue.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=ue.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=ue.getFirstMatch(Ct,t)||ue.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=ue.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=ue.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=ue.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=ue.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=ue.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=ue.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=ue.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=ue.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=ue.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=ue.getFirstMatch(Ct,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,a=t.search("\\(")!==-1?n:e;return{name:ue.getFirstMatch(a,t),version:ue.getSecondMatch(a,t)}}}],$Q=[{test:[/Roku\/DVP/],describe(t){const e=ue.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:zn.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=ue.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:zn.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=ue.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=ue.getWindowsVersionName(e);return{name:zn.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:zn.iOS},n=ue.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=ue.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=ue.getMacOSVersionName(e),r={name:zn.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=ue.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:zn.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=ue.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=ue.getAndroidVersionName(e),r={name:zn.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=ue.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:zn.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=ue.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||ue.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||ue.getFirstMatch(/\bbb(\d+)/i,t);return{name:zn.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=ue.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:zn.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=ue.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:zn.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:zn.Linux}}},{test:[/CrOS/],describe(){return{name:zn.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=ue.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:zn.PlayStation4,version:e}}}],DQ=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=ue.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Jt.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Jt.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Jt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Jt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Jt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Jt.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Jt.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=ue.getFirstMatch(/(ipod|iphone)/i,t);return{type:Jt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Jt.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Jt.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Jt.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Jt.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Jt.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Jt.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Jt.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Jt.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Jt.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Jt.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Jt.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Jt.tv}}}],OQ=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Da.Blink};const n=ue.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Da.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:Da.Trident},n=ue.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Da.Presto},n=ue.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Da.Gecko},n=ue.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Da.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Da.WebKit},n=ue.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class hb{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ue.find(RQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ue.find($Q,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=ue.find(DQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ue.find(OQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ue.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const a={};let s=0;if(Object.keys(e).forEach(i=>{const c=e[i];typeof c=="string"?(a[i]=c,s+=1):typeof c=="object"&&(n[i]=c,r+=1)}),r>0){const i=Object.keys(n),c=ue.find(i,u=>this.isOS(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}const l=ue.find(i,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(s>0){const i=Object.keys(a),c=ue.find(i,l=>this.isBrowser(l,!0));if(c!==void 0)return this.compareVersion(a[c])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let a=e.toLowerCase();const s=ue.getBrowserTypeByAlias(a);return n&&s&&(a=s.toLowerCase()),a===r}compareVersion(e){let n=[0],r=e,a=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(a=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(a=!0,r=e.substr(1)),n.indexOf(ue.compareVersions(s,r,a))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bx{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new hb(e,n)}static parse(e){return new hb(e).getResult()}static get BROWSER_MAP(){return Px}static get ENGINE_MAP(){return Da}static get OS_MAP(){return zn}static get PLATFORMS_MAP(){return Jt}}const FQ=({serviceId:t,clientVersion:e})=>async()=>{const n=typeof window<"u"&&window?.navigator?.userAgent?Bx.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",e],["ua","2.0"],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];return t&&r.push([`api/${t}`,e]),r},MQ=t=>()=>Promise.reject(t),mb=typeof TextEncoder=="function"?new TextEncoder:null,PQ=t=>{if(typeof t=="string"){if(mb)return mb.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},Lx="required",pa="fn",ha="argv",jo="ref",gb="isSet",Wn="tree",ao="error",Si="endpoint",Tg="PartitionResult",yb={[Lx]:!1,type:"String"},vb={[Lx]:!0,default:!1,type:"Boolean"},bb={[jo]:"Endpoint"},Wx={[pa]:"booleanEquals",[ha]:[{[jo]:"UseFIPS"},!0]},zx={[pa]:"booleanEquals",[ha]:[{[jo]:"UseDualStack"},!0]},qr={},wb={[pa]:"booleanEquals",[ha]:[!0,{[pa]:"getAttr",[ha]:[{[jo]:Tg},"supportsFIPS"]}]},Sb={[pa]:"booleanEquals",[ha]:[!0,{[pa]:"getAttr",[ha]:[{[jo]:Tg},"supportsDualStack"]}]},_b=[Wx],xb=[zx],Ib=[{[jo]:"Region"}],BQ={version:"1.0",parameters:{Region:yb,UseDualStack:vb,UseFIPS:vb,Endpoint:yb},rules:[{conditions:[{[pa]:gb,[ha]:[bb]}],type:Wn,rules:[{conditions:_b,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ao},{type:Wn,rules:[{conditions:xb,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ao},{endpoint:{url:bb,properties:qr,headers:qr},type:Si}]}]},{type:Wn,rules:[{conditions:[{[pa]:gb,[ha]:Ib}],type:Wn,rules:[{conditions:[{[pa]:"aws.partition",[ha]:Ib,assign:Tg}],type:Wn,rules:[{conditions:[Wx,zx],type:Wn,rules:[{conditions:[wb,Sb],type:Wn,rules:[{type:Wn,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qr,headers:qr},type:Si}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ao}]},{conditions:_b,type:Wn,rules:[{conditions:[wb],type:Wn,rules:[{type:Wn,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dnsSuffix}",properties:qr,headers:qr},type:Si}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ao}]},{conditions:xb,type:Wn,rules:[{conditions:[Sb],type:Wn,rules:[{type:Wn,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qr,headers:qr},type:Si}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ao}]},{type:Wn,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dnsSuffix}",properties:qr,headers:qr},type:Si}]}]}]},{error:"Invalid Configuration: Missing Region",type:ao}]}]},LQ=BQ,WQ=(t,e={})=>IX(LQ,{endpointParams:t,logger:e.logger}),zQ=t=>({apiVersion:"2022-05-30",base64Decoder:t?.base64Decoder??Ig,base64Encoder:t?.base64Encoder??gx,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??WQ,extensions:t?.extensions??[],logger:t?.logger??new Ix,serviceId:t?.serviceId??"RekognitionStreaming",urlParser:t?.urlParser??Qc,utf8Decoder:t?.utf8Decoder??bu,utf8Encoder:t?.utf8Encoder??Hh}),VQ=["in-region","cross-region","mobile","standard","legacy"],HQ=({defaultsMode:t}={})=>$_(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(jQ()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${VQ.join(", ")}, got ${e}`)}}),jQ=()=>{const e=(typeof window<"u"&&window?.navigator?.userAgent?Bx.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"},UQ=t=>{const e=HQ(t),n=()=>e().then(kZ),r=zQ(t);return{...r,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??PQ,credentialDefaultProvider:t?.credentialDefaultProvider??(a=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??FQ({serviceId:r.serviceId,clientVersion:uJ.version}),eventStreamPayloadHandlerProvider:t?.eventStreamPayloadHandlerProvider??OX,eventStreamSerdeProvider:t?.eventStreamSerdeProvider??ZX,maxAttempts:t?.maxAttempts??el,region:t?.region??MQ("Region is missing"),requestHandler:t?.requestHandler??new iY(n,new Ru(n)),retryMode:t?.retryMode??(async()=>(await n()).retryMode||PY),sha256:t?.sha256??Nx.Sha256,streamCollector:t?.streamCollector??nY,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(dY)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(fY))}},GQ=t=>t,qQ=(t,e)=>{const n={...GQ(AZ(t))};return e.forEach(r=>r.configure(n)),{...t,...RZ(n)}};class KQ extends iZ{constructor(...[e]){const n=UQ(e||{}),r=HZ(n),a=pY(r),s=MY(a),o=oZ(s),i=o,c=jK(i),l=hq(c),u=HX(l),d=QK(u),f=hY(d),p=qQ(f,e?.extensions||[]);super(p),this.config=p,this.middlewareStack.use(zZ(this.config)),this.middlewareStack.use(yY(this.config)),this.middlewareStack.use(kq(this.config)),this.middlewareStack.use(Cq(this.config)),this.middlewareStack.use(Fq(this.config)),this.middlewareStack.use(JK(this.config)),this.middlewareStack.use(RX(this.config))}destroy(){super.destroy()}}class na extends kg{constructor(e){super(e),Object.setPrototypeOf(this,na.prototype)}}class Cg extends na{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Cg.prototype),this.Message=e.Message,this.Code=e.Code}}var Ph;(function(t){t.visit=(e,n)=>e.FaceMovementAndLightChallenge!==void 0?n.FaceMovementAndLightChallenge(e.FaceMovementAndLightChallenge):n._(e.$unknown[0],e.$unknown[1])})(Ph||(Ph={}));class Ng extends na{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Ng.prototype),this.Message=e.Message,this.Code=e.Code}}var Bh;(function(t){t.visit=(e,n)=>e.VideoEvent!==void 0?n.VideoEvent(e.VideoEvent):e.ClientSessionInformationEvent!==void 0?n.ClientSessionInformationEvent(e.ClientSessionInformationEvent):n._(e.$unknown[0],e.$unknown[1])})(Bh||(Bh={}));var kb;(function(t){t.visit=(e,n)=>e.FaceMovementAndLightChallenge!==void 0?n.FaceMovementAndLightChallenge(e.FaceMovementAndLightChallenge):n._(e.$unknown[0],e.$unknown[1])})(kb||(kb={}));class Ag extends na{constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,Ag.prototype),this.Message=e.Message,this.Code=e.Code}}class Rg extends na{constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,Rg.prototype),this.Message=e.Message,this.Code=e.Code}}class $g extends na{constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),this.name="ThrottlingException",this.$fault="client",Object.setPrototypeOf(this,$g.prototype),this.Message=e.Message,this.Code=e.Code}}class Dg extends na{constructor(e){super({name:"ValidationException",$fault:"client",...e}),this.name="ValidationException",this.$fault="client",Object.setPrototypeOf(this,Dg.prototype),this.Message=e.Message,this.Code=e.Code}}var Eb;(function(t){t.visit=(e,n)=>e.ServerSessionInformationEvent!==void 0?n.ServerSessionInformationEvent(e.ServerSessionInformationEvent):e.DisconnectionEvent!==void 0?n.DisconnectionEvent(e.DisconnectionEvent):e.ValidationException!==void 0?n.ValidationException(e.ValidationException):e.InternalServerException!==void 0?n.InternalServerException(e.InternalServerException):e.ThrottlingException!==void 0?n.ThrottlingException(e.ThrottlingException):e.ServiceQuotaExceededException!==void 0?n.ServiceQuotaExceededException(e.ServiceQuotaExceededException):e.ServiceUnavailableException!==void 0?n.ServiceUnavailableException(e.ServiceUnavailableException):n._(e.$unknown[0],e.$unknown[1])})(Eb||(Eb={}));class Og extends na{constructor(e){super({name:"SessionNotFoundException",$fault:"client",...e}),this.name="SessionNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Og.prototype),this.Message=e.Message,this.Code=e.Code}}const XQ=t=>({...t,...t.LivenessRequestStream&&{LivenessRequestStream:"STREAMING_CONTENT"}}),YQ=t=>({...t,...t.LivenessResponseStream&&{LivenessResponseStream:"STREAMING_CONTENT"}});class Fg{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){const e=new Fg({...this,headers:{...this.headers}});return e.query&&(e.query=ZQ(e.query)),e}}function ZQ(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}const JQ=async(t,e)=>{const{hostname:n,protocol:r="https",port:a,path:s}=await e.endpoint(),o=ta({},Aee,{"x-amz-rekognition-streaming-liveness-session-id":t.SessionId,"x-amz-rekognition-streaming-liveness-video-width":t.VideoWidth,"x-amz-rekognition-streaming-liveness-video-height":t.VideoHeight,"x-amz-rekognition-streaming-liveness-challenge-versions":t.ChallengeVersions}),i=`${s?.endsWith("/")?s.slice(0,-1):s||""}/start-face-liveness-session`;let c;return t.LivenessRequestStream!==void 0&&(c=aee(t.LivenessRequestStream,e)),new Fg({protocol:r,hostname:n,port:a,method:"POST",headers:o,path:i,body:c})},QQ=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return eee(t,e);const n=ta({$metadata:ns(t),SessionId:[,t.headers["x-amz-rekognition-streaming-liveness-session-id"]]}),r=t.body;return n.LivenessResponseStream=iee(r,e),n},eee=async(t,e)=>{const n={...t,body:await Ree(t.body,e)},r=$ee(t,n.body);switch(r){case"AccessDeniedException":case"com.amazonaws.rekognitionstreaming#AccessDeniedException":throw await nee(n);case"InternalServerException":case"com.amazonaws.rekognitionstreaming#InternalServerException":throw await Vx(n);case"ServiceQuotaExceededException":case"com.amazonaws.rekognitionstreaming#ServiceQuotaExceededException":throw await Hx(n);case"ServiceUnavailableException":case"com.amazonaws.rekognitionstreaming#ServiceUnavailableException":throw await jx(n);case"SessionNotFoundException":case"com.amazonaws.rekognitionstreaming#SessionNotFoundException":throw await ree(n);case"ThrottlingException":case"com.amazonaws.rekognitionstreaming#ThrottlingException":throw await Ux(n);case"ValidationException":case"com.amazonaws.rekognitionstreaming#ValidationException":throw await Gx(n);default:const a=n.body;return tee({output:t,parsedBody:a,errorCode:r})}},tee=xZ(na),nee=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Cg({$metadata:ns(t),...n});return ts(s,t.body)},Vx=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Ng({$metadata:ns(t),...n});return ts(s,t.body)},Hx=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Ag({$metadata:ns(t),...n});return ts(s,t.body)},jx=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Rg({$metadata:ns(t),...n});return ts(s,t.body)},ree=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Og({$metadata:ns(t),...n});return ts(s,t.body)},Ux=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new $g({$metadata:ns(t),...n});return ts(s,t.body)},Gx=async(t,e)=>{const n=ta({}),r=t.body,a=fn(r,{Code:qn,Message:qn});Object.assign(n,a);const s=new Dg({$metadata:ns(t),...n});return ts(s,t.body)},aee=(t,e)=>{const n=r=>Bh.visit(r,{VideoEvent:a=>oee(a,e),ClientSessionInformationEvent:a=>see(a,e),_:a=>a});return e.eventStreamMarshaller.serialize(t,n)},see=(t,e)=>{const n={":event-type":{type:"string",value:"ClientSessionInformationEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}};let r=new Uint8Array;return r=gee(t),r=e.utf8Decoder(JSON.stringify(r)),{headers:n,body:r}},oee=(t,e)=>{const n={":event-type":{type:"string",value:"VideoEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}};let r=new Uint8Array;return r=wee(t,e),r=e.utf8Decoder(JSON.stringify(r)),{headers:n,body:r}},iee=(t,e)=>e.eventStreamMarshaller.deserialize(t,async n=>n.ServerSessionInformationEvent!=null?{ServerSessionInformationEvent:await lee(n.ServerSessionInformationEvent,e)}:n.DisconnectionEvent!=null?{DisconnectionEvent:await uee(n.DisconnectionEvent,e)}:n.ValidationException!=null?{ValidationException:await hee(n.ValidationException,e)}:n.InternalServerException!=null?{InternalServerException:await cee(n.InternalServerException,e)}:n.ThrottlingException!=null?{ThrottlingException:await pee(n.ThrottlingException,e)}:n.ServiceQuotaExceededException!=null?{ServiceQuotaExceededException:await dee(n.ServiceQuotaExceededException,e)}:n.ServiceUnavailableException!=null?{ServiceUnavailableException:await fee(n.ServiceUnavailableException,e)}:{$unknown:t}),uee=async(t,e)=>{const n={},r=await rs(t.body,e);return Object.assign(n,hu(r)),n},cee=async(t,e)=>{const n={...t,body:await rs(t.body,e)};return Vx(n)},lee=async(t,e)=>{const n={},r=await rs(t.body,e);return Object.assign(n,Tee(r)),n},dee=async(t,e)=>{const n={...t,body:await rs(t.body,e)};return Hx(n)},fee=async(t,e)=>{const n={...t,body:await rs(t.body,e)};return jx(n)},pee=async(t,e)=>{const n={...t,body:await rs(t.body,e)};return Ux(n)},hee=async(t,e)=>{const n={...t,body:await rs(t.body,e)};return Gx(n)},qx=(t,e)=>fn(t,{Height:cc,Left:cc,Top:cc,Width:cc}),mee=(t,e)=>Ph.visit(t,{FaceMovementAndLightChallenge:n=>({FaceMovementAndLightChallenge:yee(n)}),_:(n,r)=>({name:r})}),gee=(t,e)=>fn(t,{Challenge:n=>mee(n)}),yee=(t,e)=>fn(t,{ChallengeId:[],ColorDisplayed:hu,InitialFace:n=>vee(n),TargetFace:n=>bee(n),VideoEndTimestamp:[],VideoStartTimestamp:[]}),vee=(t,e)=>fn(t,{BoundingBox:n=>qx(n),InitialFaceDetectedTimestamp:[]}),bee=(t,e)=>fn(t,{BoundingBox:n=>qx(n),FaceDetectedInTargetPositionEndTimestamp:[],FaceDetectedInTargetPositionStartTimestamp:[]}),wee=(t,e)=>fn(t,{TimestampMillis:[],VideoChunk:e.base64Encoder}),See=(t,e)=>fn(t,{BlazeFaceDetectionThreshold:Nn,FaceDistanceThreshold:Nn,FaceDistanceThresholdMax:Nn,FaceDistanceThresholdMin:Nn,FaceIouHeightThreshold:Nn,FaceIouWidthThreshold:Nn,OvalFitTimeout:gZ,OvalHeightWidthRatio:Nn,OvalIouHeightThreshold:Nn,OvalIouThreshold:Nn,OvalIouWidthThreshold:Nn}),_ee=(t,e)=>fn(t,{DownscrollDuration:Nn,FlatDisplayDuration:Nn,FreshnessColor:hu}),xee=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>_ee(r)),Iee=(t,e)=>fn(t,{ChallengeConfig:n=>See(n),ColorSequences:n=>xee(n),LightChallengeType:qn,OvalParameters:n=>kee(n)}),kee=(t,e)=>fn(t,{CenterX:Nn,CenterY:Nn,Height:Nn,Width:Nn}),Eee=(t,e)=>t.FaceMovementAndLightChallenge!=null?{FaceMovementAndLightChallenge:Iee(t.FaceMovementAndLightChallenge)}:{$unknown:Object.entries(t)[0]},Tee=(t,e)=>fn(t,{SessionInformation:n=>Cee(n)}),Cee=(t,e)=>fn(t,{Challenge:n=>Eee(wZ(n))}),ns=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Nee=(t,e)=>lZ(t,e).then(n=>e.utf8Encoder(n)),Aee=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),rs=(t,e)=>Nee(t,e).then(n=>n.length?JSON.parse(n):{}),Ree=async(t,e)=>{const n=await rs(t,e);return n.message=n.message??n.Message,n},$ee=(t,e)=>{const n=(s,o)=>Object.keys(s).find(i=>i.toLowerCase()===o.toLowerCase()),r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},a=n(t.headers,"x-amzn-errortype");if(a!==void 0)return r(t.headers[a]);if(e.code!==void 0)return r(e.code);if(e.__type!==void 0)return r(e.__type)};class Mg extends kx{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,n,r){this.middlewareStack.use(DY(n,this.serialize,this.deserialize)),this.middlewareStack.use(FY(n,Mg.getEndpointParameterInstructions())),this.middlewareStack.use(wq(n)),this.middlewareStack.use(zX(n,{headerPrefix:"x-amz-rekognition-streaming-liveness-"}));const a=e.concat(this.middlewareStack),{logger:s}=n,c={logger:s,clientName:"RekognitionStreamingClient",commandName:"StartFaceLivenessSessionCommand",inputFilterSensitiveLog:XQ,outputFilterSensitiveLog:YQ},{requestHandler:l}=n;return a.resolve(u=>l.handle(u.request,r||{}),c)}serialize(e,n){return JQ(e,n)}deserialize(e,n){return QQ(e,n)}}var Dee="3.0.13",Oee="ui-react-liveness/".concat(Dee),Fee=function(){return Oee};function Mee(t){const{port:e,query:n}=t;let{protocol:r,path:a,hostname:s}=t;r&&r.slice(-1)!==":"&&(r+=":"),e&&(s+=`:${e}`),a&&a.charAt(0)!=="/"&&(a=`/${a}`);let o=n?Sg(n):"";o&&o[0]!=="?"&&(o=`?${o}`);let i="";if(t.username!=null||t.password!=null){const l=t.username??"",u=t.password??"";i=`${l}:${u}@`}let c="";return t.fragment&&(c=`#${t.fragment}`),`${r}//${i}${s}${a}${o}${c}`}var Pee=2e3,Bee=function(t){return t.protocol==="ws:"||t.protocol==="wss:"},Lee=function(t){return typeof ReadableStream=="function"&&t instanceof ReadableStream},Wee=function(t){var e;return t[Symbol.asyncIterator]?t:Lee(t)?_g(t):(e={},e[Symbol.asyncIterator]=function(){return Qb(this,arguments,function(){return tt(this,function(n){switch(n.label){case 0:return[4,Or(t)];case 1:return[4,n.sent()];case 2:return n.sent(),[2]}})})},e)},zee=function(t){return typeof ReadableStream=="function"?xg(t):t},Vee=function(){function t(e,n){n===void 0&&(n=new Ru),this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.utf8decoder=new TextDecoder,this.httpHandler=n,typeof e=="function"?this.configPromise=e().then(function(r){return r??{}}):this.configPromise=Promise.resolve(e??{})}return t.prototype.destroy=function(){for(var e=0,n=Object.entries(this.sockets);e<n.length;e++){for(var r=n[e],a=r[0],s=r[1],o=0,i=s;o<i.length;o++){var c=i[o];c.close(1e3,"Socket closed through destroy() call")}delete this.sockets[a]}},t.prototype.handle=function(e){return ot(this,void 0,void 0,function(){var n,r,a,s,o,i,c,l;return tt(this,function(u){switch(u.label){case 0:return Bee(e)?(n=Mee(e),r=new WebSocket(n),this.sockets[n]||(this.sockets[n]=[]),this.sockets[n].push(r),r.binaryType="arraybuffer",[4,this.configPromise]):[2,this.httpHandler.handle(e)];case 1:return a=u.sent().connectionTimeout,s=a===void 0?Pee:a,[4,this.waitForReady(r,s)];case 2:return u.sent(),o=e.body,i=Wee(o),c=this.connect(r,i),l=zee(c),[2,{response:new Jc({statusCode:200,body:l})}]}})})},t.prototype.removeNotUsableSockets=function(e){var n;this.sockets[e]=((n=this.sockets[e])!==null&&n!==void 0?n:[]).filter(function(r){return![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState)})},t.prototype.waitForReady=function(e,n){var r=this;return new Promise(function(a,s){var o=setTimeout(function(){r.removeNotUsableSockets(e.url),s({$metadata:{httpStatusCode:500}})},n);e.onopen=function(){clearTimeout(o),a()}})},t.prototype.connect=function(e,n){var r,a=this,s=void 0,o=!1,i=function(){},c=function(){};e.onmessage=function(d){c({done:!1,value:new Uint8Array(d.data)})},e.onerror=function(d){o=!0,e.close(),i(d)},e.onclose=function(){a.removeNotUsableSockets(e.url),!o&&(s?i(s):c({done:!0,value:void 0}))};var l=(r={},r[Symbol.asyncIterator]=function(){return{next:function(){return new Promise(function(d,f){c=d,i=f})}}},r),u=function(){return ot(a,void 0,void 0,function(){var d,f,p,h,m,g,v,b,w,S,I,E,T;return tt(this,function(R){switch(R.label){case 0:R.trys.push([0,13,14,15]),R.label=1;case 1:R.trys.push([1,6,7,12]),d=!0,f=e0(n),R.label=2;case 2:return[4,f.next()];case 3:if(p=R.sent(),S=p.done,!!S)return[3,5];if(T=p.value,d=!1,h=T,m=this.utf8decoder.decode(h),m.includes("closeCode"))return g=m.match(/"closeCode":([0-9]*)/),g&&(v=g[1],e.close(parseInt(v))),[3,4];e.send(h),R.label=4;case 4:return d=!0,[3,2];case 5:return[3,12];case 6:return b=R.sent(),I={error:b},[3,12];case 7:return R.trys.push([7,,10,11]),!d&&!S&&(E=f.return)?[4,E.call(f)]:[3,9];case 8:R.sent(),R.label=9;case 9:return[3,11];case 10:if(I)throw I.error;return[7];case 11:return[7];case 12:return[3,15];case 13:return w=R.sent(),s=w,[3,15];case 14:return e.close(uo.SUCCESS_CODE),[7];case 15:return[2]}})})};return u(),l},t}(),Hee=1e3;function jee(t){return t.arrayBuffer!==void 0}function Uee(t){return t.Challenge!==void 0}function Gee(t){return t.code!==void 0}var qee=function(){function t(e){var n=e.sessionId,r=e.region,a=e.stream,s=e.videoEl,o=e.credentialProvider,i=e.endpointOverride;this.sessionId=n,this.region=r,this._stream=a,this.videoEl=s,this.videoRecorder=new pq(a),this.credentialProvider=o,this.endpointOverride=i,this.initPromise=this.init()}return t.prototype.getResponseStream=function(){return ot(this,void 0,void 0,function(){return tt(this,function(e){switch(e.label){case 0:return[4,this.initPromise];case 1:return e.sent(),[2,this.responseStream]}})})},t.prototype.startRecordingLivenessVideo=function(){this.videoRecorder.start(Hee)},t.prototype.sendClientInfo=function(e){this.videoRecorder.dispatch(new MessageEvent("clientSesssionInfo",{data:{clientInfo:e}}))},t.prototype.stopVideo=function(){return ot(this,void 0,void 0,function(){return tt(this,function(e){switch(e.label){case 0:return[4,this.videoRecorder.stop()];case 1:return e.sent(),[2]}})})},t.prototype.dispatchStopVideoEvent=function(){this.videoRecorder.dispatch(new Event("stopVideo"))},t.prototype.endStreamWithCode=function(e){return ot(this,void 0,void 0,function(){return tt(this,function(n){switch(n.label){case 0:return this.videoRecorder.getState()!=="recording"?[3,2]:[4,this.stopVideo()];case 1:n.sent(),n.label=2;case 2:return this.videoRecorder.dispatch(new MessageEvent("endStreamWithCode",{data:{code:e}})),[2]}})})},t.prototype.init=function(){var e;return ot(this,void 0,void 0,function(){var n,r,a,s,o;return tt(this,function(i){switch(i.label){case 0:return(e=this.credentialProvider)!==null&&e!==void 0?(r=e,[3,3]):[3,1];case 1:return[4,r0()];case 2:r=i.sent().credentials,i.label=3;case 3:if(n=r,!n)throw new Error("No credentials");return a={credentials:n,region:this.region,customUserAgent:"".concat(qI()," ").concat(Fee()),requestHandler:new Vee({connectionTimeout:1e4})},this.endpointOverride&&(s=this.endpointOverride,a.endpointProvider=function(){var c=new URL(s);return{url:c}}),this._client=new KQ(a),o=this,[4,this.startLivenessVideoConnection()];case 4:return o.responseStream=i.sent(),[2]}})})},t.prototype.getAsyncGeneratorFromReadableStream=function(e){var n=this;return this._reader=e.getReader(),function(){return Qb(this,arguments,function(){var r,a,s,o,i;return tt(this,function(c){switch(c.label){case 0:return[4,Or(n._reader.read())];case 1:return r=c.sent(),a=r.done,s=r.value,a?[4,Or(void 0)]:[3,3];case 2:return[2,c.sent()];case 3:return s!=="stopVideo"?[3,6]:[4,Or({VideoEvent:{VideoChunk:[],TimestampMillis:Date.now()}})];case 4:return[4,c.sent()];case 5:return c.sent(),[3,17];case 6:return jee(s)?[4,Or(s.arrayBuffer())]:[3,11];case 7:return o=c.sent(),i=new Uint8Array(o),i.length>0?[4,Or({VideoEvent:{VideoChunk:i,TimestampMillis:Date.now()}})]:[3,10];case 8:return[4,c.sent()];case 9:c.sent(),c.label=10;case 10:return[3,17];case 11:return Uee(s)?[4,Or({ClientSessionInformationEvent:{Challenge:s.Challenge}})]:[3,14];case 12:return[4,c.sent()];case 13:return c.sent(),[3,17];case 14:return Gee(s)?[4,Or({VideoEvent:{VideoChunk:[],TimestampMillis:{closeCode:s.code}}})]:[3,17];case 15:return[4,c.sent()];case 16:c.sent(),c.label=17;case 17:return[3,0];case 18:return[2]}})})}},t.prototype.startLivenessVideoConnection=function(){return ot(this,void 0,void 0,function(){var e,n;return tt(this,function(r){switch(r.label){case 0:return e=this.getAsyncGeneratorFromReadableStream(this.videoRecorder.videoStream)(),[4,this._client.send(new Mg({ChallengeVersions:"FaceMovementAndLightChallenge_1.0.0",SessionId:this.sessionId,LivenessRequestStream:e,VideoWidth:this.videoEl.videoWidth.toString(),VideoHeight:this.videoEl.videoHeight.toString()}))];case 1:return n=r.sent(),[2,n.LivenessResponseStream]}})})},t}(),Kee=10,Rr;(function(t){t.SCROLLING="SCROLLING",t.FLAT="FLAT"})(Rr||(Rr={}));var Xee=function(){function t(e,n){this.context=e,this.freshnessColorsSequence=n,this.isFirstTick=!0}return t.prototype.displayColorTick=function(){return ot(this,void 0,void 0,function(){var e=this;return tt(this,function(n){return[2,new Promise(function(r,a){setTimeout(function(){e.displayNextColorTick(r,a)},Math.min(Kee))})]})})},t.prototype.init=function(){this.stageIndex=0,this.currColorIndex=0,this.currColorSequence=this.freshnessColorsSequence[0],this.prevColorSequence=this.freshnessColorsSequence[0],this.stage=Rr.FLAT,this.timeLastFlatOrScrollChange=Date.now(),this.timeLastFaceMatchChecked=Date.now()},t.prototype.displayNextColorTick=function(e,n){var r=this.context.freshnessColorAssociatedParams.freshnessColorEl,a=this.context.ovalAssociatedParams,s=a.ovalDetails,o=a.scaleFactor,i=this.context.videoAssociatedParams.videoEl,c=Date.now();this.isFirstTick&&(this.init(),this.isFirstTick=!1,this.sendColorStartTime({tickStartTime:c,currColor:this.currColorSequence.color,prevColor:this.currColorSequence.color,currColorIndex:this.stageIndex}));var l=c-this.timeLastFlatOrScrollChange;if(r.style.display="block",(this.stage===Rr.FLAT&&l>=this.currColorSequence.flatDisplayDuration||this.stage===Rr.SCROLLING&&l>=this.currColorSequence.downscrollDuration)&&(this.incrementStageIndex(c),l=0),this.currColorIndex<this.freshnessColorsSequence.length){var u=l/(this.stage===Rr.SCROLLING?this.currColorSequence.downscrollDuration:this.currColorSequence.flatDisplayDuration);YE({overlayCanvas:r,prevColor:this.prevColorSequence.color,nextColor:this.currColorSequence.color,videoEl:i,ovalDetails:s,heightFraction:u,scaleFactor:o}),e(!1)}else r.style.display="none",e(!0)},t.prototype.incrementStageIndex=function(e){if(this.stageIndex+=1,this.prevColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.stage===Rr.FLAT)this.currColorIndex+=1,this.stage=Rr.SCROLLING;else if(this.stage===Rr.SCROLLING){var n=this.freshnessColorsSequence[this.currColorIndex];n.flatDisplayDuration>0?this.stage=Rr.FLAT:(this.stage=Rr.SCROLLING,this.currColorIndex+=1)}this.currColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.timeLastFlatOrScrollChange=Date.now(),this.currColorSequence&&this.sendColorStartTime({tickStartTime:e,currColor:this.currColorSequence.color,prevColor:this.prevColorSequence.color,currColorIndex:this.stageIndex})},t.prototype.sendColorStartTime=function(e){var n=e.tickStartTime,r=e.currColor,a=e.prevColor,s=e.currColorIndex,o=this.context,i=o.livenessStreamProvider,c=o.challengeId;i.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:c,ColorDisplayed:{CurrentColor:{RGB:Dy(r)},PreviousColor:{RGB:Dy(a)},SequenceNumber:s,CurrentColorStartTimestamp:n}}}})},t}();let Tb=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let r=n[t]&63;r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r<63?e+="_":e+="-"}return e};var Yee=function(t){return!!t?.ServerSessionInformationEvent},Zee=function(t){return!!t?.DisconnectionEvent},Jee=function(t){return!!t?.ValidationException},Qee=function(t){return!!t?.InternalServerException},ete=function(t){return!!t?.ThrottlingException},tte=function(t){return!!t?.ServiceQuotaExceededException},nte=function(t){var e=t,n=e.message,r=e.name;return r==="InvalidSignatureException"&&n.includes("valid region")},nl={width:{min:320,ideal:640},height:{min:240,ideal:480},frameRate:{min:15,ideal:30,max:30},facingMode:"user"},rte=1e3,ate=7e3,Kx,Xx="AmplifyLivenessCameraId";function ste(){return localStorage.getItem(Xx)}function Cb(t){localStorage.setItem(Xx,t)}var ote=CE({id:"livenessMachine",initial:"cameraCheck",predictableActionArguments:!0,context:{challengeId:Tb(),maxFailedAttempts:0,failedAttempts:0,componentProps:void 0,serverSessionInformation:void 0,videoAssociatedParams:{videoConstraints:nl,selectableDevices:[]},ovalAssociatedParams:void 0,faceMatchAssociatedParams:{illuminationState:void 0,faceMatchState:void 0,faceMatchPercentage:25,currentDetectedFace:void 0,startFace:void 0,endFace:void 0,initialFaceMatchTime:void 0},freshnessColorAssociatedParams:{freshnessColorEl:void 0,freshnessColors:[],freshnessColorsComplete:!1,freshnessColorDisplay:void 0},errorState:void 0,livenessStreamProvider:void 0,responseStreamActorRef:void 0,shouldDisconnect:!1,faceMatchStateBeforeStart:void 0,isFaceFarEnoughBeforeRecording:void 0,isRecordingStopped:!1},on:{CANCEL:"userCancel",TIMEOUT:{target:"retryableTimeout",actions:"updateErrorStateForTimeout"},SET_SESSION_INFO:{internal:!0,actions:"updateSessionInfo"},DISCONNECT_EVENT:{internal:!0,actions:"updateShouldDisconnect"},SET_DOM_AND_CAMERA_DETAILS:{actions:"setDOMAndCameraDetails"},UPDATE_DEVICE_AND_STREAM:{actions:"updateDeviceAndStream"},SERVER_ERROR:{target:"error",actions:"updateErrorStateForServer"},RUNTIME_ERROR:{target:"error"},MOBILE_LANDSCAPE_WARNING:{target:"mobileLandscapeWarning",actions:"updateErrorStateForServer"}},states:{cameraCheck:{entry:["resetErrorState"],invoke:{src:"checkVirtualCameraAndGetStream",onDone:{target:"waitForDOMAndCameraDetails",actions:["updateVideoMediaStream"]},onError:{target:"permissionDenied"}}},waitForDOMAndCameraDetails:{after:{0:{target:"start",cond:"hasDOMAndCameraDetails"},10:{target:"waitForDOMAndCameraDetails"}}},start:{entry:["drawStaticOval","initializeFaceDetector"],always:[{target:"detectFaceBeforeStart",cond:"shouldSkipStartScreen"}],on:{BEGIN:"detectFaceBeforeStart"}},detectFaceBeforeStart:{invoke:{src:"detectFace",onDone:{target:"checkFaceDetectedBeforeStart",actions:["updateFaceMatchBeforeStartDetails"]}}},checkFaceDetectedBeforeStart:{after:{0:{target:"detectFaceDistanceBeforeRecording",cond:"hasSingleFaceBeforeStart"},100:{target:"detectFaceBeforeStart"}}},detectFaceDistanceBeforeRecording:{invoke:{src:"detectFaceDistance",onDone:{target:"checkFaceDistanceBeforeRecording",actions:["updateFaceDistanceBeforeRecording"]}}},checkFaceDistanceBeforeRecording:{after:{0:{target:"initializeLivenessStream",cond:"hasEnoughFaceDistanceBeforeRecording"},100:{target:"detectFaceDistanceBeforeRecording"}}},initializeLivenessStream:{invoke:{src:"openLivenessStreamConnection",onDone:{target:"notRecording",actions:["updateLivenessStreamProvider","spawnResponseStreamActor"]}}},notRecording:{initial:"waitForSessionInfo",states:{waitForSessionInfo:{after:{0:{target:"#livenessMachine.recording",cond:"hasServerSessionInfo"},100:{target:"waitForSessionInfo"}}}}},recording:{entry:["clearErrorState","startRecording"],initial:"ovalDrawing",states:{ovalDrawing:{entry:["sendTimeoutAfterOvalDrawingDelay"],invoke:{src:"detectInitialFaceAndDrawOval",onDone:{target:"checkFaceDetected",actions:["updateOvalAndFaceDetailsPostDraw","sendTimeoutAfterOvalMatchDelay"]},onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},checkFaceDetected:{after:{0:{target:"checkRecordingStarted",cond:"hasSingleFace"},100:{target:"ovalDrawing"}}},checkRecordingStarted:{after:{0:{target:"ovalMatching",cond:"hasRecordingStarted",actions:["updateRecordingStartTimestampMs"]},100:{target:"checkRecordingStarted"}}},ovalMatching:{entry:["cancelOvalDrawingTimeout"],invoke:{src:"detectFaceAndMatchOval",onDone:{target:"checkMatch",actions:"updateFaceDetailsPostMatch"}}},checkMatch:{after:{0:{target:"flashFreshnessColors",cond:"hasFaceMatchedInOvalWithMinTime",actions:["updateEndFaceMatch","setupFlashFreshnessColors","cancelOvalMatchTimeout","cancelOvalDrawingTimeout"]},.1:{target:"ovalMatching",cond:"hasFaceMatchedInOval",actions:"setFaceMatchTimeAndStartFace"},1:{target:"ovalMatching",cond:"hasNotFaceMatchedInOval"}}},flashFreshnessColors:{invoke:{src:"flashColors",onDone:[{target:"success",cond:"hasFreshnessColorShown"},{target:"flashFreshnessColors",actions:"updateFreshnessDetails"}]}},success:{entry:["stopRecording"],type:"final"}},onDone:"uploading"},uploading:{initial:"pending",states:{pending:{entry:["sendTimeoutAfterWaitingForDisconnect","pauseVideoStream"],invoke:{src:"stopVideo",onDone:"waitForDisconnectEvent",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},waitForDisconnectEvent:{after:{0:{target:"getLivenessResult",cond:"getShouldDisconnect"},100:{target:"waitForDisconnectEvent"}}},getLivenessResult:{entry:["cancelWaitForDisconnectTimeout","freezeStream"],invoke:{src:"getLiveness",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForServer"}}}}},retryableTimeout:{entry:"updateFailedAttempts",always:[{target:"timeout",cond:"shouldTimeoutOnFailedAttempts"},{target:"notRecording"}]},permissionDenied:{entry:"callUserPermissionDeniedCallback",on:{RETRY_CAMERA_CHECK:"cameraCheck"}},mobileLandscapeWarning:{entry:"callMobileLandscapeWarningCallback",always:[{target:"error"}]},timeout:{entry:["cleanUpResources","callUserTimeoutCallback","freezeStream"]},error:{entry:["cleanUpResources","callErrorCallback","cancelOvalDrawingTimeout","cancelWaitForDisconnectTimeout","cancelOvalMatchTimeout","freezeStream"]},userCancel:{entry:["cleanUpResources","callUserCancelCallback","resetContext"],always:[{target:"cameraCheck"}]}}},{actions:{spawnResponseStreamActor:xt({responseStreamActorRef:function(){return xE(ite)}}),updateFailedAttempts:xt({failedAttempts:function(t){return t.failedAttempts+1}}),updateVideoMediaStream:xt({videoAssociatedParams:function(t,e){var n,r,a;return _e(_e({},t.videoAssociatedParams),{videoMediaStream:(n=e.data)===null||n===void 0?void 0:n.stream,selectedDeviceId:(r=e.data)===null||r===void 0?void 0:r.selectedDeviceId,selectableDevices:(a=e.data)===null||a===void 0?void 0:a.selectableDevices})}}),initializeFaceDetector:xt({ovalAssociatedParams:function(t){var e=t.componentProps,n=e.config,r=n.faceModelUrl,a=n.binaryPath,s=new fq(a,r);return s.triggerModelLoading(),_e(_e({},t.ovalAssociatedParams),{faceDetector:s})}}),updateLivenessStreamProvider:xt({livenessStreamProvider:function(t,e){var n;return(n=e.data)===null||n===void 0?void 0:n.livenessStreamProvider}}),setDOMAndCameraDetails:xt({videoAssociatedParams:function(t,e){var n,r,a;return _e(_e({},t.videoAssociatedParams),{videoEl:(n=e.data)===null||n===void 0?void 0:n.videoEl,canvasEl:(r=e.data)===null||r===void 0?void 0:r.canvasEl,isMobile:(a=e.data)===null||a===void 0?void 0:a.isMobile})},freshnessColorAssociatedParams:function(t,e){var n;return _e(_e({},t.freshnessColorAssociatedParams),{freshnessColorEl:(n=e.data)===null||n===void 0?void 0:n.freshnessColorEl})}}),updateDeviceAndStream:xt({videoAssociatedParams:function(t,e){var n,r,a;return Cb((n=e.data)===null||n===void 0?void 0:n.newDeviceId),_e(_e({},t.videoAssociatedParams),{selectedDeviceId:(r=e.data)===null||r===void 0?void 0:r.newDeviceId,videoMediaStream:(a=e.data)===null||a===void 0?void 0:a.newStream})}}),drawStaticOval:function(t){var e=t.videoAssociatedParams,n=e.canvasEl,r=e.videoEl,a=e.videoMediaStream;Fp(n,r,a)},updateRecordingStartTimestampMs:xt({videoAssociatedParams:function(t){var e=t.challengeId,n=t.videoAssociatedParams,r=t.ovalAssociatedParams,a=t.livenessStreamProvider,s=a.videoRecorder,o=s.recordingStartApiTimestamp,i=s.recorderStartTimestamp,c=n.videoMediaStream,l=r.initialFace,u=Math.round(.73*(i-o)+o),d=c.getTracks()[0].getSettings(),f=d.width,p=d.height,h=f-l.left-l.width;return t.livenessStreamProvider.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:e,VideoStartTimestamp:u,InitialFace:{InitialFaceDetectedTimestamp:l.timestampMs,BoundingBox:Vf({deviceHeight:p,deviceWidth:f,height:l.height,width:l.width,top:l.top,left:h})}}}}),_e(_e({},t.videoAssociatedParams),{recordingStartTimestampMs:u})}}),startRecording:xt({videoAssociatedParams:function(t){if(!t.serverSessionInformation)throw new Error("Session information was not received from response stream");return t.livenessStreamProvider.videoRecorder&&t.livenessStreamProvider.videoRecorder.getState()!=="recording"&&t.livenessStreamProvider.startRecordingLivenessVideo(),_e({},t.videoAssociatedParams)}}),stopRecording:function(t){},updateFaceMatchBeforeStartDetails:xt({faceMatchStateBeforeStart:function(t,e){return e.data.faceMatchState}}),updateFaceDistanceBeforeRecording:xt({isFaceFarEnoughBeforeRecording:function(t,e){return e.data.isFaceFarEnoughBeforeRecording}}),updateFaceDistanceWhileLoading:xt({isFaceFarEnoughBeforeRecording:function(t,e){return e.data.isFaceFarEnoughBeforeRecording},errorState:function(t,e){var n;return(n=e.data)===null||n===void 0?void 0:n.error}}),updateOvalAndFaceDetailsPostDraw:xt({ovalAssociatedParams:function(t,e){return _e(_e({},t.ovalAssociatedParams),{initialFace:e.data.initialFace,ovalDetails:e.data.ovalDetails,scaleFactor:e.data.scaleFactor})},faceMatchAssociatedParams:function(t,e){return _e(_e({},t.faceMatchAssociatedParams),{faceMatchState:e.data.faceMatchState,illuminationState:e.data.illuminationState})}}),updateFaceDetailsPostMatch:xt({faceMatchAssociatedParams:function(t,e){return _e(_e({},t.faceMatchAssociatedParams),{faceMatchState:e.data.faceMatchState,faceMatchPercentage:e.data.faceMatchPercentage,illuminationState:e.data.illuminationState,currentDetectedFace:e.data.detectedFace})}}),updateEndFaceMatch:xt({faceMatchAssociatedParams:function(t){return _e(_e({},t.faceMatchAssociatedParams),{endFace:t.faceMatchAssociatedParams.currentDetectedFace})}}),setFaceMatchTimeAndStartFace:xt({faceMatchAssociatedParams:function(t){return _e(_e({},t.faceMatchAssociatedParams),{startFace:t.faceMatchAssociatedParams.startFace===void 0?t.faceMatchAssociatedParams.currentDetectedFace:t.faceMatchAssociatedParams.startFace,initialFaceMatchTime:t.faceMatchAssociatedParams.initialFaceMatchTime===void 0?Date.now():t.faceMatchAssociatedParams.initialFaceMatchTime})}}),resetErrorState:xt({errorState:function(t){}}),updateErrorStateForTimeout:xt({errorState:function(t,e){var n;return((n=e.data)===null||n===void 0?void 0:n.errorState)||lt.TIMEOUT}}),updateErrorStateForRuntime:xt({errorState:function(t,e){var n;return((n=e.data)===null||n===void 0?void 0:n.errorState)||lt.RUNTIME_ERROR}}),updateErrorStateForServer:xt({errorState:function(t){return lt.SERVER_ERROR}}),clearErrorState:xt({errorState:function(t){}}),updateSessionInfo:xt({serverSessionInformation:function(t,e){return e.data.sessionInfo}}),updateShouldDisconnect:xt({shouldDisconnect:function(t){return!0}}),updateFreshnessDetails:xt({freshnessColorAssociatedParams:function(t,e){return _e(_e({},t.freshnessColorAssociatedParams),{freshnessColorsComplete:e.data.freshnessColorsComplete})}}),setupFlashFreshnessColors:xt({freshnessColorAssociatedParams:function(t){var e=t.serverSessionInformation,n=JE(e),r=new Xee(t,n);return _e(_e({},t.freshnessColorAssociatedParams),{freshnessColorDisplay:r})}}),sendTimeoutAfterOvalDrawingDelay:ki({type:"TIMEOUT"},{delay:5e3,id:"ovalDrawingTimeout"}),cancelOvalDrawingTimeout:Ei("ovalDrawingTimeout"),sendTimeoutAfterOvalMatchDelay:ki({type:"TIMEOUT"},{delay:function(t){var e,n,r,a;return((a=(r=(n=(e=t.serverSessionInformation)===null||e===void 0?void 0:e.Challenge)===null||n===void 0?void 0:n.FaceMovementAndLightChallenge)===null||r===void 0?void 0:r.ChallengeConfig)===null||a===void 0?void 0:a.OvalFitTimeout)||ate},id:"ovalMatchTimeout"}),cancelOvalMatchTimeout:Ei("ovalMatchTimeout"),sendTimeoutAfterWaitingForDisconnect:ki({type:"TIMEOUT",data:{errorState:lt.SERVER_ERROR}},{delay:2e4,id:"waitForDisconnectTimeout"}),cancelWaitForDisconnectTimeout:Ei("waitForDisconnectTimeout"),sendTimeoutAfterFaceDistanceDelay:ki({type:"RUNTIME_ERROR",data:new Error("Avoid moving closer during countdown and ensure only one face is in front of camera.")},{delay:0,id:"faceDistanceTimeout"}),cancelFaceDistanceTimeout:Ei("faceDistanceTimeout"),callUserPermissionDeniedCallback:xt({errorState:function(t,e){var n,r,a;e.data.message.includes("15 fps")?a=lt.CAMERA_FRAMERATE_ERROR:a=lt.CAMERA_ACCESS_ERROR;var s=e.data.message||e.data.Message,o=new Error(s),i={state:a,error:o};return(r=(n=t.componentProps).onError)===null||r===void 0||r.call(n,i),a}}),callMobileLandscapeWarningCallback:xt({errorState:function(t){return lt.MOBILE_LANDSCAPE_ERROR}}),callUserCancelCallback:function(t){return ot(void 0,void 0,void 0,function(){var e,n;return tt(this,function(r){return(n=(e=t.componentProps).onUserCancel)===null||n===void 0||n.call(e),[2]})})},callUserTimeoutCallback:function(t){return ot(void 0,void 0,void 0,function(){var e,n,r,a;return tt(this,function(s){return e=new Error("Client Timeout"),e.name=t.errorState,n={state:t.errorState,error:e},(a=(r=t.componentProps).onError)===null||a===void 0||a.call(r,n),[2]})})},callErrorCallback:function(t,e){return ot(void 0,void 0,void 0,function(){var n,r,a,s;return tt(this,function(o){return n={state:t.errorState,error:((r=e.data)===null||r===void 0?void 0:r.error)||e.data},(s=(a=t.componentProps).onError)===null||s===void 0||s.call(a,n),[2]})})},cleanUpResources:function(t){return ot(void 0,void 0,void 0,function(){var e,n,r;return tt(this,function(a){switch(a.label){case 0:return e=t.freshnessColorAssociatedParams.freshnessColorEl,e&&(e.style.display="none"),n=uo.DEFAULT_ERROR_CODE,t.errorState===lt.TIMEOUT?n=uo.FACE_FIT_TIMEOUT:t.errorState===lt.RUNTIME_ERROR?n=uo.RUNTIME_ERROR:t.errorState===lt.FACE_DISTANCE_ERROR||t.errorState===lt.MULTIPLE_FACES_ERROR?n=uo.USER_ERROR_DURING_CONNECTION:t.errorState===void 0&&(n=uo.USER_CANCEL),[4,(r=t.livenessStreamProvider)===null||r===void 0?void 0:r.endStreamWithCode(n)];case 1:return a.sent(),[2]}})})},freezeStream:function(t){return ot(void 0,void 0,void 0,function(){var e,n,r;return tt(this,function(a){return e=t.videoAssociatedParams,n=e.videoMediaStream,r=e.videoEl,t.isRecordingStopped=!0,r?.pause(),n?.getTracks().forEach(function(s){s.stop()}),[2]})})},pauseVideoStream:function(t){return ot(void 0,void 0,void 0,function(){var e;return tt(this,function(n){return e=t.videoAssociatedParams.videoEl,t.isRecordingStopped=!0,e.pause(),[2]})})},resetContext:xt({challengeId:Tb(),maxFailedAttempts:0,failedAttempts:0,componentProps:function(t){return t.componentProps},serverSessionInformation:function(t){},videoAssociatedParams:function(t){return{videoConstraints:nl}},ovalAssociatedParams:function(t){},errorState:function(t){},livenessStreamProvider:function(t){},responseStreamActorRef:function(t){},shouldDisconnect:!1,faceMatchStateBeforeStart:function(t){},isFaceFarEnoughBeforeRecording:function(t){},isRecordingStopped:!1})},guards:{shouldTimeoutOnFailedAttempts:function(t){return t.failedAttempts>=t.maxFailedAttempts},hasFaceMatchedInOvalWithMinTime:function(t){var e=t.faceMatchAssociatedParams,n=e.faceMatchState,r=e.initialFaceMatchTime,a=Date.now()-r,s=n===nt.MATCHED&&a>=rte;return s},hasFaceMatchedInOval:function(t){return t.faceMatchAssociatedParams.faceMatchState===nt.MATCHED},hasNotFaceMatchedInOval:function(t){return t.faceMatchAssociatedParams.faceMatchState!==nt.MATCHED},hasSingleFace:function(t){return t.faceMatchAssociatedParams.faceMatchState===nt.FACE_IDENTIFIED},hasSingleFaceBeforeStart:function(t){return t.faceMatchStateBeforeStart===nt.FACE_IDENTIFIED},hasEnoughFaceDistanceBeforeRecording:function(t){return t.isFaceFarEnoughBeforeRecording},hasNotEnoughFaceDistanceBeforeRecording:function(t){return!t.isFaceFarEnoughBeforeRecording},hasLivenessCheckSucceeded:function(t,e,n){return n.state.event.data.isLive},hasFreshnessColorShown:function(t){return t.freshnessColorAssociatedParams.freshnessColorsComplete},hasServerSessionInfo:function(t){return t.serverSessionInformation!==void 0},hasDOMAndCameraDetails:function(t){return t.videoAssociatedParams.videoEl!==void 0&&t.videoAssociatedParams.canvasEl!==void 0&&t.freshnessColorAssociatedParams.freshnessColorEl!==void 0},getShouldDisconnect:function(t){return!!t.shouldDisconnect},hasRecordingStarted:function(t){return t.livenessStreamProvider.videoRecorder.firstChunkTimestamp!==void 0},shouldSkipStartScreen:function(t){var e;return!!(!((e=t.componentProps)===null||e===void 0)&&e.disableStartScreen)}},services:{checkVirtualCameraAndGetStream:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u;return tt(this,function(d){switch(d.label){case 0:return e=t.videoAssociatedParams.videoConstraints,n=ste(),[4,navigator.mediaDevices.getUserMedia({video:_e(_e({},e),n?{deviceId:n}:{}),audio:!1})];case 1:return r=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if(a=d.sent(),s=a.filter(function(f){return f.kind==="videoinput"}).filter(function(f){return!qE(f)}),!s.length)throw new Error("No real video devices found");if(o=r.getTracks().filter(function(f){var p=f.getSettings();return p.frameRate>=15}),o.length<1)throw new Error("No camera found with more than 15 fps");return i=o[0].getSettings().deviceId,c=s.some(function(f){return f.deviceId===i}),l=i,u=r,c?[3,4]:(l=s[0].deviceId,[4,navigator.mediaDevices.getUserMedia({video:_e(_e({},e),{deviceId:{exact:s[0].deviceId}}),audio:!1})]);case 3:u=d.sent(),d.label=4;case 4:return Cb(l),[2,{stream:u,selectedDeviceId:i,selectableDevices:s}]}})})},openLivenessStreamConnection:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s;return tt(this,function(o){return e=t.componentProps.config,n=e,r=n.credentialProvider,a=n.endpointOverride,s=new qee({sessionId:t.componentProps.sessionId,region:t.componentProps.region,stream:t.videoAssociatedParams.videoMediaStream,videoEl:t.videoAssociatedParams.videoEl,credentialProvider:r,endpointOverride:a}),Kx=s.getResponseStream(),[2,{livenessStreamProvider:s}]})})},detectFace:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a;return tt(this,function(s){switch(s.label){case 0:e=t.videoAssociatedParams.videoEl,n=t.ovalAssociatedParams.faceDetector,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.modelLoadingPromise];case 2:return s.sent(),[3,4];case 3:return r=s.sent(),console.log({err:r}),[3,4];case 4:return[4,QE(n,e)];case 5:return a=s.sent(),[2,{faceMatchState:a}]}})})},detectFaceDistance:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d;return tt(this,function(f){switch(f.label){case 0:return e=t.isFaceFarEnoughBeforeRecording,n=t.videoAssociatedParams,r=n.videoEl,a=n.videoMediaStream,s=n.isMobile,o=t.ovalAssociatedParams.faceDetector,i=a.getTracks()[0].getSettings(),c=i.width,l=i.height,u=Op({width:c,height:l}),[4,Oy({faceDetector:o,videoEl:r,ovalDetails:u,reduceThreshold:e,isMobile:s})];case 1:return d=f.sent().isDistanceBelowThreshold,[2,{isFaceFarEnoughBeforeRecording:d}]}})})},detectFaceDistanceWhileLoading:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d,f,p;return tt(this,function(h){switch(h.label){case 0:return e=t.isFaceFarEnoughBeforeRecording,n=t.videoAssociatedParams,r=n.videoEl,a=n.videoMediaStream,s=n.isMobile,o=t.ovalAssociatedParams.faceDetector,i=a.getTracks()[0].getSettings(),c=i.width,l=i.height,u=Op({width:c,height:l}),[4,Oy({faceDetector:o,videoEl:r,ovalDetails:u,reduceThreshold:e,isMobile:s})];case 1:return d=h.sent(),f=d.isDistanceBelowThreshold,p=d.error,[2,{isFaceFarEnoughBeforeRecording:f,error:p}]}})})},detectInitialFaceAndDrawOval:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d,f,p,h,m,g,v,b;return tt(this,function(w){switch(w.label){case 0:e=t.serverSessionInformation,n=t.livenessStreamProvider,r=t.videoAssociatedParams,a=r.videoEl,s=r.canvasEl,o=r.isMobile,i=t.ovalAssociatedParams.faceDetector,w.label=1;case 1:return w.trys.push([1,4,,5]),[4,i.modelLoadingPromise];case 2:return w.sent(),[4,n.videoRecorder.recorderStarted];case 3:return w.sent(),[3,5];case 4:return c=w.sent(),console.log({err:c}),[3,5];case 5:return[4,i.detectFaces(a)];case 6:switch(l=w.sent(),l.length){case 0:{d=nt.CANT_IDENTIFY,f=$y(a);break}case 1:{d=nt.FACE_IDENTIFIED,u=l[0];break}default:{d=nt.TOO_MANY;break}}return u?(p=a.getBoundingClientRect(),h=p.width,m=p.height,o?(s.width=window.innerWidth,s.height=window.innerHeight):(s.width=h,s.height=m),g=h/a.videoWidth,v=jE({sessionInformation:e,videoWidth:a.width}),b=Mp(u,v),u.top=b.top,u.left=b.left,u.height=b.bottom-b.top,u.width=b.right-b.left,M0({canvas:s,oval:v,scaleFactor:g,videoEl:a}),[2,{faceMatchState:d,ovalDetails:v,scaleFactor:g,initialFace:u}]):[2,{faceMatchState:d,illuminationState:f}]}})})},detectFaceAndMatchOval:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d,f,p,h,m,g,v;return tt(this,function(b){switch(b.label){case 0:return e=t.serverSessionInformation,n=t.videoAssociatedParams.videoEl,r=t.ovalAssociatedParams,a=r.faceDetector,s=r.ovalDetails,o=r.initialFace,[4,a.detectFaces(n)];case 1:switch(i=b.sent(),l=0,f=Mp(o,s),p=O0(s).ovalBoundingBox,h=F0(f,p),i.length){case 0:{c=nt.CANT_IDENTIFY,d=$y(n);break}case 1:{u=i[0],m=GE(u,s,h,e),g=m.faceMatchState,v=m.faceMatchPercentage,c=g,l=v;break}default:{c=nt.TOO_MANY;break}}return[2,{faceMatchState:c,faceMatchPercentage:l,illuminationState:d,detectedFace:u}]}})})},flashColors:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a;return tt(this,function(s){switch(s.label){case 0:return e=t.freshnessColorAssociatedParams,n=e.freshnessColorsComplete,r=e.freshnessColorDisplay,n?[2]:[4,r.displayColorTick()];case 1:return a=s.sent(),[2,{freshnessColorsComplete:a}]}})})},stopVideo:function(t){return ot(this,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d,f,p,h;return tt(this,function(m){switch(m.label){case 0:return e=t.challengeId,n=t.livenessStreamProvider,r=t.videoAssociatedParams.videoMediaStream,a=t.ovalAssociatedParams,s=a.initialFace,o=a.ovalDetails,i=t.faceMatchAssociatedParams,c=i.startFace,l=i.endFace,u=r.getTracks()[0].getSettings(),d=u.width,f=u.height,p=d-s.left-s.width,[4,n.stopVideo()];case 1:if(m.sent(),h={Challenge:{FaceMovementAndLightChallenge:{ChallengeId:e,InitialFace:{InitialFaceDetectedTimestamp:s.timestampMs,BoundingBox:Vf({deviceHeight:f,deviceWidth:d,height:s.height,width:s.width,top:s.top,left:p})},TargetFace:{FaceDetectedInTargetPositionStartTimestamp:c.timestampMs,FaceDetectedInTargetPositionEndTimestamp:l.timestampMs,BoundingBox:Vf({deviceHeight:f,deviceWidth:d,height:o.height,width:o.width,top:o.centerY-o.height/2,left:o.centerX-o.width/2})},VideoEndTimestamp:n.videoRecorder.recorderEndTimestamp}}},n.videoRecorder.getVideoChunkSize()===0)throw new Error("Video chunks not recorded successfully.");return n.sendClientInfo(h),[4,n.dispatchStopVideoEvent()];case 2:return m.sent(),[2]}})})},getLiveness:function(t){return ot(this,void 0,void 0,function(){var e;return tt(this,function(n){switch(n.label){case 0:return e=t.componentProps.onAnalysisComplete,[4,e()];case 1:return n.sent(),[2]}})})}}}),ite=function(t){return ot(void 0,void 0,void 0,function(){var e,n,r,a,s,o,i,c,l,u,d,f;return tt(this,function(p){switch(p.label){case 0:return p.trys.push([0,14,,15]),[4,Kx];case 1:e=p.sent(),p.label=2;case 2:p.trys.push([2,7,8,13]),n=!0,r=e0(e),p.label=3;case 3:return[4,r.next()];case 4:if(a=p.sent(),l=a.done,!!l)return[3,6];f=a.value,n=!1,s=f,Yee(s)?t({type:"SET_SESSION_INFO",data:{sessionInfo:s.ServerSessionInformationEvent.SessionInformation}}):Zee(s)?t({type:"DISCONNECT_EVENT"}):Jee(s)?t({type:"SERVER_ERROR",data:{error:_e({},s.ValidationException)}}):Qee(s)?t({type:"SERVER_ERROR",data:{error:_e({},s.InternalServerException)}}):ete(s)?t({type:"SERVER_ERROR",data:{error:_e({},s.ThrottlingException)}}):tte(s)&&t({type:"SERVER_ERROR",data:{error:_e({},s.ServiceQuotaExceededException)}}),p.label=5;case 5:return n=!0,[3,3];case 6:return[3,13];case 7:return o=p.sent(),u={error:o},[3,13];case 8:return p.trys.push([8,,11,12]),!n&&!l&&(d=r.return)?[4,d.call(r)]:[3,10];case 9:p.sent(),p.label=10;case 10:return[3,12];case 11:if(u)throw u.error;return[7];case 12:return[7];case 13:return[3,15];case 14:return i=p.sent(),c=i,nte(i)&&(c=new Error("Invalid region in FaceLivenessDetector or credentials are scoped to the wrong region.")),c instanceof Error&&t({type:"SERVER_ERROR",data:{error:c}}),[3,15];case 15:return[2]}})})},ute=typeof $n=="object"&&$n&&$n.Object===Object&&$n,cte=ute,lte=cte,dte=typeof self=="object"&&self&&self.Object===Object&&self,fte=lte||dte||Function("return this")(),pte=fte,hte=pte,mte=hte.Symbol,Pg=mte,Nb=Pg,Yx=Object.prototype,gte=Yx.hasOwnProperty,yte=Yx.toString,_i=Nb?Nb.toStringTag:void 0;function vte(t){var e=gte.call(t,_i),n=t[_i];try{t[_i]=void 0;var r=!0}catch{}var a=yte.call(t);return r&&(e?t[_i]=n:delete t[_i]),a}var bte=vte,wte=Object.prototype,Ste=wte.toString;function _te(t){return Ste.call(t)}var xte=_te,Ab=Pg,Ite=bte,kte=xte,Ete="[object Null]",Tte="[object Undefined]",Rb=Ab?Ab.toStringTag:void 0;function Cte(t){return t==null?t===void 0?Tte:Ete:Rb&&Rb in Object(t)?Ite(t):kte(t)}var Nte=Cte,Ate=Array.isArray,Rte=Ate;function $te(t){return t!=null&&typeof t=="object"}var Dte=$te;function $u(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Do(t){return typeof t=="string"||typeof t=="object"&&Object.prototype.toString.call(t)==="[object String]"}function vu(t,e){return t!=null&&Object.prototype.hasOwnProperty.call(t,e)}const Qr=(t,e)=>e?`${t}--${e}`:"",Ns=(t,e,n)=>n?`${t}--${e}`:"";function Ote(t,e){for(var n=-1,r=t==null?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a}var Fte=Ote,Mte=Nte,Pte=Dte,Bte="[object Symbol]";function Lte(t){return typeof t=="symbol"||Pte(t)&&Mte(t)==Bte}var Wte=Lte,$b=Pg,zte=Fte,Vte=Rte,Hte=Wte,jte=1/0,Db=$b?$b.prototype:void 0,Ob=Db?Db.toString:void 0;function Zx(t){if(typeof t=="string")return t;if(Vte(t))return zte(t,Zx)+"";if(Hte(t))return Ob?Ob.call(t):"";var e=t+"";return e=="0"&&1/t==-jte?"-0":e}var Ute=Zx,Gte=Ute;function qte(t){return t==null?"":Gte(t)}var Jx=qte;function Kte(t){return t.toLowerCase()}var Xte=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Yte=/[^A-Z0-9]+/gi;function Uo(t,e){e===void 0&&(e={});for(var n=e.splitRegexp,r=n===void 0?Xte:n,a=e.stripRegexp,s=a===void 0?Yte:a,o=e.transform,i=o===void 0?Kte:o,c=e.delimiter,l=c===void 0?" ":c,u=Fb(Fb(t,r,"$1\0$2"),s,"\0"),d=0,f=u.length;u.charAt(d)==="\0";)d++;for(;u.charAt(f-1)==="\0";)f--;return u.slice(d,f).split("\0").map(i).join(l)}function Fb(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,a){return r.replace(a,n)},t)}function Bg(t,e){var n=t.charAt(0),r=t.substr(1).toLowerCase();return e>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function Qx(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function e3(t,e){return e===void 0&&(e={}),Uo(t,_e({delimiter:"",transform:Bg},e))}function t3(t,e){return e===0?t.toLowerCase():Bg(t,e)}function Zte(t,e){return e===0?t.toLowerCase():Qx(t)}function Jte(t,e){return e===void 0&&(e={}),e3(t,_e({transform:t3},e))}function n3(t){return t.charAt(0).toUpperCase()+t.substr(1)}function r3(t){return n3(t.toLowerCase())}function a3(t,e){return e===void 0&&(e={}),Uo(t,_e({delimiter:" ",transform:r3},e))}function Qte(t){return t.toUpperCase()}function ene(t,e){return e===void 0&&(e={}),Uo(t,_e({delimiter:"_",transform:Qte},e))}function xf(t,e){return e===void 0&&(e={}),Uo(t,_e({delimiter:"."},e))}function tne(t,e){return e===void 0&&(e={}),a3(t,_e({delimiter:"-"},e))}function nne(t,e){return e===void 0&&(e={}),xf(t,_e({delimiter:"-"},e))}function rne(t,e){return e===void 0&&(e={}),xf(t,_e({delimiter:"/"},e))}function s3(t,e){var n=t.toLowerCase();return e===0?n3(n):n}function ane(t,e){return e===void 0&&(e={}),Uo(t,_e({delimiter:" ",transform:s3},e))}function sne(t,e){return e===void 0&&(e={}),xf(t,_e({delimiter:"_"},e))}const one=Object.freeze(Object.defineProperty({__proto__:null,camelCase:Jte,camelCaseTransform:t3,camelCaseTransformMerge:Zte,capitalCase:a3,capitalCaseTransform:r3,constantCase:ene,dotCase:xf,headerCase:tne,noCase:Uo,paramCase:nne,pascalCase:e3,pascalCaseTransform:Bg,pascalCaseTransformMerge:Qx,pathCase:rne,sentenceCase:ane,sentenceCaseTransform:s3,snakeCase:sne},Symbol.toStringTag,{value:"Module"})),ine=_a(one),wc=ine,une=function(t,e,n){return Object.keys(t||{}).reduce((r,a)=>{let s=t[a];return e(r,s,a,t)},n)},gp=function(t,e){Object.keys(t||{}).forEach(n=>{let r=t[n];e(r,n)})},cne=function(t){return Object.assign(new t.constructor,t)},rl=function(t){if(t==null||typeof t!="object")return t;if(t instanceof Array)return t.reduce((e,n,r)=>(e[r]=rl(n),e),[]);if(t instanceof Object)return Object.keys(t||{}).reduce((e,n)=>(e[n]=rl(t[n]),e),{})},o3=function(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")},lne=function(t){return typeof t=="string"||t instanceof String},dne=function(t){return Array.isArray(t)},fne=function(t){return[Object,Array].includes((t||{}).constructor)&&!Object.entries(t||{}).length};function pne(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const hne=function(t,e){if(typeof e!="function")throw"filter is not a function";return typeof t>"u"?[]:t.filter(e)},mne=function(){let t=Array.prototype.slice.call(arguments);return t.unshift({}),Object.assign(...t)},gne=function(t,...e){var n=new Set(e);for(let r=t.length-1;r>=0;r--)n.has(t[r])&&t.splice(r,1)},yne=function(t){return[...new Set(t)]},vne=function(t){return t?t[0].toUpperCase()+t.substr(1):""},i3=function(t,e){return o3(e)?Object.keys(e).every(n=>i3(t[n],e[n])):t==e},bne=function(t){let e=rl(t);return r=>i3(r,e)},wne={transform:wc.camelCaseTransformMerge},Sne=function(t,e){return(n,r)=>t(n,Object.assign({},wne,e,r))};var u3={each:gp,forEach:gp,forIn:gp,keys:Object.keys,clone:cne,cloneDeep:rl,extend:Object.assign,isString:lne,isArray:dne,isObject:o3,isPlainObject:pne,isEmpty:fne,filter:hne,reduce:une,assign:mne,upperFirst:vne,camelCase:Sne(wc.camelCase),snakeCase:wc.snakeCase,kebabCase:wc.paramCase,pull:gne,matches:bne,unique:yne},lc=u3;function c3(t,e,n){if(t==null)return{};var r,a,s,o,i,c,l=t[0]||{},u=1,d=t.length;for(n=n||[],typeof l!="object"&&(l={});u<d;u++)if((i=t[u])!=null){for(o in i)if(i.hasOwnProperty(o)&&o!=="__proto__"&&(r=l[o],s=i[o],l!==s))if(s&&(lc.isPlainObject(s)||(a=lc.isArray(s)))){a?(a=!1,c=r&&lc.isArray(r)?r:[]):c=r&&lc.isPlainObject(r)?r:{};var f=n.slice(0);f.push(o),l[o]=c3([c,s],e,f)}else s!==void 0&&(r!=null&&typeof e=="function"&&e({target:l,copy:i,path:n,key:o}),l[o]=s)}return l}var _ne=c3;const xne=Ws(_ne);var Mb=u3;function l3(t,e){e=e||[];for(var n in t)t.hasOwnProperty(n)&&(Mb.isPlainObject(t[n])&&"value"in t[n]?e.push(t[n]):Mb.isPlainObject(t[n])&&l3(t[n],e));return e}var Ine=l3;const Pb=Ws(Ine),d3={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},f3={red:{10:{value:"hsl(0, 75%, 95%)"},20:{value:"hsl(0, 75%, 85%)"},40:{value:"hsl(0, 75%, 75%)"},60:{value:"hsl(0, 50%, 50%)"},80:{value:"hsl(0, 95%, 30%)"},90:{value:"hsl(0, 100%, 20%)"},100:{value:"hsl(0, 100%, 15%)"}},orange:{10:{value:"hsl(30, 75%, 95%)"},20:{value:"hsl(30, 75%, 85%)"},40:{value:"hsl(30, 75%, 75%)"},60:{value:"hsl(30, 50%, 50%)"},80:{value:"hsl(30, 95%, 30%)"},90:{value:"hsl(30, 100%, 20%)"},100:{value:"hsl(30, 100%, 15%)"}},yellow:{10:{value:"hsl(60, 75%, 95%)"},20:{value:"hsl(60, 75%, 85%)"},40:{value:"hsl(60, 75%, 75%)"},60:{value:"hsl(60, 50%, 50%)"},80:{value:"hsl(60, 95%, 30%)"},90:{value:"hsl(60, 100%, 20%)"},100:{value:"hsl(60, 100%, 15%)"}},green:{10:{value:"hsl(130, 60%, 95%)"},20:{value:"hsl(130, 60%, 90%)"},40:{value:"hsl(130, 44%, 63%)"},60:{value:"hsl(130, 43%, 46%)"},80:{value:"hsl(130, 33%, 37%)"},90:{value:"hsl(130, 27%, 29%)"},100:{value:"hsl(130, 22%, 23%)"}},teal:{10:{value:"hsl(190, 75%, 95%)"},20:{value:"hsl(190, 75%, 85%)"},40:{value:"hsl(190, 70%, 70%)"},60:{value:"hsl(190, 50%, 50%)"},80:{value:"hsl(190, 95%, 30%)"},90:{value:"hsl(190, 100%, 20%)"},100:{value:"hsl(190, 100%, 15%)"}},blue:{10:{value:"hsl(220, 95%, 95%)"},20:{value:"hsl(220, 85%, 85%)"},40:{value:"hsl(220, 70%, 70%)"},60:{value:"hsl(220, 50%, 50%)"},80:{value:"hsl(220, 95%, 30%)"},90:{value:"hsl(220, 100%, 20%)"},100:{value:"hsl(220, 100%, 15%)"}},purple:{10:{value:"hsl(300, 95%, 95%)"},20:{value:"hsl(300, 85%, 85%)"},40:{value:"hsl(300, 70%, 70%)"},60:{value:"hsl(300, 50%, 50%)"},80:{value:"hsl(300, 95%, 30%)"},90:{value:"hsl(300, 100%, 20%)"},100:{value:"hsl(300, 100%, 15%)"}},pink:{10:{value:"hsl(340, 95%, 95%)"},20:{value:"hsl(340, 90%, 85%)"},40:{value:"hsl(340, 70%, 70%)"},60:{value:"hsl(340, 50%, 50%)"},80:{value:"hsl(340, 95%, 30%)"},90:{value:"hsl(340, 100%, 20%)"},100:{value:"hsl(340, 100%, 15%)"}},neutral:{10:{value:"hsl(210, 5%, 98%)"},20:{value:"hsl(210, 5%, 94%)"},40:{value:"hsl(210, 5%, 87%)"},60:{value:"hsl(210, 10%, 58%)"},80:{value:"hsl(210, 10%, 40%)"},90:{value:"hsl(210, 25%, 25%)"},100:{value:"hsl(210, 50%, 10%)"}},primary:{10:{value:"{colors.teal.10.value}"},20:{value:"{colors.teal.20.value}"},40:{value:"{colors.teal.40.value}"},60:{value:"{colors.teal.60.value}"},80:{value:"{colors.teal.80.value}"},90:{value:"{colors.teal.90.value}"},100:{value:"{colors.teal.100.value}"}},secondary:{10:{value:"{colors.purple.10.value}"},20:{value:"{colors.purple.20.value}"},40:{value:"{colors.purple.40.value}"},60:{value:"{colors.purple.60.value}"},80:{value:"{colors.purple.80.value}"},90:{value:"{colors.purple.90.value}"},100:{value:"{colors.purple.100.value}"}},font:{primary:{value:"{colors.neutral.100.value}"},secondary:{value:"{colors.neutral.90.value}"},tertiary:{value:"{colors.neutral.80.value}"},disabled:{value:"{colors.neutral.60.value}"},inverse:{value:"{colors.white.value}"},interactive:{value:"{colors.primary.80.value}"},hover:{value:"{colors.primary.90.value}"},focus:{value:"{colors.primary.100.value}"},active:{value:"{colors.primary.100.value}"},info:{value:"{colors.blue.90.value}"},warning:{value:"{colors.orange.90.value}"},error:{value:"{colors.red.90.value}"},success:{value:"{colors.green.90.value}"}},background:{primary:{value:"{colors.white.value}"},secondary:{value:"{colors.neutral.10.value}"},tertiary:{value:"{colors.neutral.20.value}"},quaternary:{value:"{colors.neutral.60.value}"},disabled:{value:"{colors.background.tertiary.value}"},info:{value:"{colors.blue.10.value}"},warning:{value:"{colors.orange.10.value}"},error:{value:"{colors.red.10.value}"},success:{value:"{colors.green.10.value}"}},border:{primary:{value:"{colors.neutral.60.value}"},secondary:{value:"{colors.neutral.40.value}"},tertiary:{value:"{colors.neutral.20.value}"},disabled:{value:"{colors.border.tertiary.value}"},pressed:{value:"{colors.primary.100.value}"},focus:{value:"{colors.primary.100.value}"},error:{value:"{colors.red.80.value}"},info:{value:"{colors.blue.80.value}"},success:{value:"{colors.green.80.value}"},warning:{value:"{colors.orange.80.value}"}},shadow:{primary:{value:"hsla(210, 50%, 10%, 0.25)"},secondary:{value:"hsla(210, 50%, 10%, 0.15)"},tertiary:{value:"hsla(210, 50%, 10%, 0.05)"}},overlay:{5:{value:"hsla(0, 0%, 0%, 0.05)"},10:{value:"hsla(0, 0%, 0%, 0.1)"},20:{value:"hsla(0, 0%, 0%, 0.2)"},30:{value:"hsla(0, 0%, 0%, 0.3)"},40:{value:"hsla(0, 0%, 0%, 0.4)"},50:{value:"hsla(0, 0%, 0%, 0.5)"},60:{value:"hsla(0, 0%, 0%, 0.6)"},70:{value:"hsla(0, 0%, 0%, 0.7)"},80:{value:"hsla(0, 0%, 0%, 0.8)"},90:{value:"hsla(0, 0%, 0%, 0.9)"}},black:{value:"hsl(0, 0%, 0%)"},white:{value:"hsl(0, 0%, 100%)"},transparent:{value:"transparent"}},kne={alignItems:{value:"center"},justifyContent:{value:"space-between"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}}},Ene={menu:{width:{value:"100%"},marginBlockStart:{value:"{space.xxxs}"},backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small}"},options:{display:{value:"flex"},flexDirection:{value:"column"},maxHeight:{value:"300px"}},option:{backgroundColor:{value:"{colors.background.primary}"},color:{value:"currentcolor"},cursor:{value:"pointer"},transitionDuration:{value:"{time.short}"},transitionProperty:{value:"background-color, color"},transitionTimingFunction:{value:"ease"},_active:{backgroundColor:{value:"{colors.primary.80}"},color:{value:"{colors.white}"}}},_empty:{display:{value:"flex"}},_loading:{alignItems:{value:"center"},display:{value:"flex"},gap:{value:"{space.xxxs}"}},spaceShared:{paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"}}}},Tne={maxWidth:{value:"60rem"},modal:{width:{value:"{space.relative.full}"},height:{value:"{space.relative.full}"},backgroundColor:{value:"{colors.overlay.50.value}"},top:{value:"{space.zero}"},left:{value:"{space.zero}"}},container:{widthMax:{value:"30rem"}},router:{borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.medium.value}"}},footer:{paddingBottom:{value:"{space.medium.value}"}},form:{padding:{value:"{space.xl.value}"}},state:{inactive:{backgroundColor:{value:"{colors.background.secondary.value}"}}},orContainer:{color:{value:"{colors.neutral.80.value}"},orLine:{backgroundColor:{value:"{colors.background.primary.value}"}}}},Cne={color:{value:"{colors.font.primary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},paddingVertical:{value:"{space.xs.value}"},paddingHorizontal:{value:"{space.small.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderRadius:{value:"{radii.xl.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},paddingVertical:{value:"{space.xxs.value}"},paddingHorizontal:{value:"{space.xs.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"}}},Nne={flexDirection:{value:"row"},flexWrap:{value:"wrap"},gap:{value:"0"},color:{value:"{colors.font.tertiary}"},item:{flexDirection:{value:"row"},color:{value:"inherit"},fontSize:{value:"inherit"},alignItems:{value:"center"},lineHeight:{value:"1"}},separator:{color:{value:"inherit"},fontSize:{value:"inherit"},paddingInline:{value:"{space.xxs}"}},link:{color:{value:"{components.link.color}"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"},paddingInline:{value:"{space.xs}"},paddingBlock:{value:"{space.xxs}"},current:{color:{value:"inherit"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"}}}},Ane={fontWeight:{value:"{fontWeights.bold.value}"},transitionDuration:{value:"{components.fieldcontrol.transitionDuration.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},lineHeight:{value:"{components.fieldcontrol.lineHeight.value}"},paddingBlockStart:{value:"{components.fieldcontrol.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.paddingInlineEnd.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},borderWidth:{value:"{components.fieldcontrol.borderWidth.value}"},borderStyle:{value:"{components.fieldcontrol.borderStyle.value}"},borderRadius:{value:"{components.fieldcontrol.borderRadius.value}"},color:{value:"{colors.font.primary.value}"},_hover:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.primary.60.value}"}},_focus:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{color:{value:"{colors.font.active.value}"},backgroundColor:{value:"{colors.primary.20.value}"},borderColor:{value:"{colors.primary.100.value}"}},_loading:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},outlined:{info:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"}},_focus:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"}},_focus:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"}},_focus:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"}},_focus:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_hover:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"}},_focus:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.neutral.100.value}"}}}},primary:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.font.inverse.value}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.100.value}"},color:{value:"{colors.font.inverse.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.100.value}"},color:{value:"{colors.font.inverse.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.100.value}"},color:{value:"{colors.font.inverse.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100.value}"},color:{value:"{colors.font.inverse.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.100.value}"},color:{value:"{colors.font.inverse.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.70}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}}}},menu:{borderWidth:{value:"{space.zero.value}"},backgroundColor:{value:"transparent"},justifyContent:{value:"start"},_hover:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_focus:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_active:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.90.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"}}},link:{backgroundColor:{value:"transparent"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.interactive.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.hover.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.20.value}"},color:{value:"{colors.font.active.value}"}},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.neutral.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.80.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.overlay.90.value}"}}}},warning:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.red.60}"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.red.60}"},_hover:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.font.error}"}},_focus:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.red.80}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"{colors.red.100}"},backgroundColor:{value:"{colors.red.20}"},color:{value:"{colors.red.100}"}},_disabled:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}}},destructive:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.red.60}"},color:{value:"{colors.font.inverse}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100}"},color:{value:"{colors.font.inverse}"}}},small:{fontSize:{value:"{components.fieldcontrol.small.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.small.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.small.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.small.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.small.paddingInlineEnd.value}"}},large:{fontSize:{value:"{components.fieldcontrol.large.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.large.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.large.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.large.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.large.paddingInlineEnd.value}"}},loaderWrapper:{alignItems:{value:"center"},gap:{value:"{space.xs.value}"}}},Rne={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"none"},padding:{value:"{space.medium.value}"},outlined:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{components.card.boxShadow.value}"}},elevated:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"{shadows.medium.value}"}}},$ne={cursor:{value:"pointer"},alignItems:{value:"center"},_disabled:{cursor:{value:"not-allowed"}},button:{position:{value:"relative"},alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},before:{width:{value:"100%"},height:{value:"100%"},borderWidth:{value:"{borderWidths.medium.value}"},borderRadius:{value:"20%"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"}},_focus:{outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{borderColor:{value:"{colors.border.error.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},icon:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"20%"},opacity:{value:"{opacities.0.value}"},transform:{value:"scale(0)"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.short.value}"},transitionTimingFunction:{value:"ease-in-out"},_checked:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},_indeterminate:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},Dne={alignItems:{value:"flex-start"},alignContent:{value:"center"},flexDirection:{value:"column"},justifyContent:{value:"center"}},One={pagination:{current:{color:{value:"{components.pagination.current.color}"},backgroundColor:{value:"{components.pagination.current.backgroundColor}"}},button:{color:{value:"{components.pagination.button.color}"},_hover:{backgroundColor:{value:"{components.pagination.button.hover.backgroundColor}"},color:{value:"{components.pagination.button.hover.color}"}},_disabled:{color:{value:"{components.pagination.button.disabled.color}"}}}},search:{input:{color:{value:"{components.searchfield.color}"}},button:{color:{value:"{components.searchfield.button.color}"},_active:{backgroundColor:{value:"{components.searchfield.button._active.backgroundColor}"},borderColor:{value:"{components.searchfield.button._active.borderColor}"},color:{value:"{components.searchfield.button._active.color}"}},_disabled:{backgroundColor:{value:"{components.searchfield.button._disabled.backgroundColor}"},borderColor:{value:"{components.searchfield.button._disabled.borderColor}"},color:{value:"{components.searchfield.button._disabled.color}"}},_focus:{backgroundColor:{value:"{components.searchfield.button._focus.backgroundColor}"},borderColor:{value:"{components.searchfield.button._focus.borderColor}"},color:{value:"{components.searchfield.button._focus.color}"}},_hover:{backgroundColor:{value:"{components.searchfield.button._hover.backgroundColor}"},borderColor:{value:"{components.searchfield.button._hover.borderColor}"},color:{value:"{components.searchfield.button._hover.color}"}}}}},Fne={fontSize:{value:"{fontSizes.xs}"},gap:{value:"{space.relative.medium}"},svg:{path:{fill:{value:"{colors.font.primary}"}}},toolTip:{bottom:{value:"{space.large}"},color:{value:"{colors.teal.100}"},fontSize:{value:"{fontSizes.xxs}"}}},Mne={height:{value:"{space.relative.full.value}"}},Pne={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},label:{color:{value:"{colors.font.tertiary.value}"},paddingInline:{value:"{space.medium.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.background.primary.value}"}},small:{borderWidth:{value:"{borderWidths.small.value}"}},large:{borderWidth:{value:"{borderWidths.large.value}"}},opacity:{value:"{opacities.60.value}"}},Bne={backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.font.primary}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.primary}"}},_disabled:{backgroundColor:{value:"{colors.background.disabled}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.disabled}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.disabled}"}},accepted:{backgroundColor:{value:"{colors.background.success}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.success}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.success}"}},rejected:{backgroundColor:{value:"{colors.background.error}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.error}"}}},Lne={backgroundColor:{value:"{colors.background.primary.value}"},item:{borderColor:{value:"{colors.border.secondary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small.value}"},trigger:{alignItems:{value:"center"},backgroundColor:{value:"{colors.background.primary.value}"},color:{value:"inherit"},gap:{value:"{space.small.value}"},justifyContent:{value:"space-between"},paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},_hover:{color:{value:"inherit"},backgroundColor:{value:"{colors.overlay.5.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0",offsetY:"0",blurRadius:"0",spreadRadius:"2px",color:"{colors.border.focus.value}"}}}},content:{color:{value:"inherit"},paddingInline:{value:"{space.small.value}"},paddingBlockEnd:{value:"{space.small.value}"},paddingBlockStart:{value:"{space.xxxs.value}"}},icon:{color:{value:"{colors.font.tertiary.value}"},transitionDuration:{value:"{time.medium.value}"},transitionTimingFunction:{value:"cubic-bezier(0.87, 0, 0.13, 1)"}}}},Wne={gap:{value:"{space.xs.value}"},fontSize:{value:"{fontSizes.medium.value}"},flexDirection:{value:"column"},small:{gap:{value:"{space.xxxs.value}"},fontSize:{value:"{fontSizes.small.value}"}},large:{gap:{value:"{space.small.value}"},fontSize:{value:"{fontSizes.large.value}"}},label:{color:{value:"{colors.font.secondary.value}"}}},zne={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.small.value}"},color:{value:"{colors.font.primary.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"},fontSize:{value:"{components.field.fontSize.value}"},lineHeight:{value:"{lineHeights.medium.value}"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},small:{fontSize:{value:"{components.field.small.fontSize.value}"},paddingBlockStart:{value:"{space.xxs.value}"},paddingBlockEnd:{value:"{space.xxs.value}"},paddingInlineStart:{value:"{space.small.value}"},paddingInlineEnd:{value:"{space.small.value}"}},large:{fontSize:{value:"{components.field.large.fontSize.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}},quiet:{borderStyle:{value:"none"},borderInlineStart:{value:"none"},borderInlineEnd:{value:"none"},borderBlockStart:{value:"none"},borderRadius:{value:"0"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderBlockEndColor:{value:"{colors.border.error.value}"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.focus.value}"}}},_disabled:{color:{value:"{colors.font.disabled.value}"},cursor:{value:"not-allowed"},borderColor:{value:"{colors.transparent.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},color:{value:"{colors.font.error.value}"},_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.error.value}"}}}},info:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.blue.100.value}"}}}},warning:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.orange.100.value}"}}}},success:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.green.100.value}"}}}},overlay:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.overlay.90.value}"}}}}},Vne={gap:{value:"{space.zero.value}"},vertical:{alignItems:{value:"center"}},outer:{alignItems:{value:"center"}}},Hne={backgroundColor:{value:"transparent"},borderRadius:{value:"{radii.xs.value}"},flexDirection:{value:"column"},gap:{value:"{components.field.gap.value}"},legend:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"{components.field.fontSize.value}"},fontWeight:{value:"{fontWeights.bold.value}"},lineHeight:{value:"{lineHeights.medium.value}"},small:{fontSize:"{components.field.small.fontSize.value}"},large:{fontSize:"{components.field.large.fontSize.value}"}},outlined:{padding:"{space.medium.value}",borderColor:"{colors.neutral.40.value}",borderWidth:"{borderWidths.small.value}",borderStyle:"solid",small:{padding:"{space.small.value}"},large:{padding:"{space.large.value}"}},small:{gap:"{components.field.small.gap.value}"},large:{gap:"{components.field.large.gap.value}"}},jne={error:{color:{value:"{colors.font.error.value}"},fontSize:{value:"{fontSizes.small.value}"}},description:{color:{value:"{colors.font.secondary.value}"},fontStyle:{value:"italic"},fontSize:{value:"{fontSizes.small.value}"}}},Une={gap:{value:"{space.medium.value}"},justifyContent:{value:"normal"},alignItems:{value:"stretch"},alignContent:{value:"normal"},flexWrap:{value:"nowrap"}},Gne={color:{value:"{colors.font.primary.value}"},lineHeight:{value:"{lineHeights.small.value}"},1:{fontSize:{value:"{fontSizes.xxxxl.value}"},fontWeight:{value:"{fontWeights.light.value}"}},2:{fontSize:{value:"{fontSizes.xxxl.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},3:{fontSize:{value:"{fontSizes.xxl.value}"},fontWeight:{value:"{fontWeights.medium.value}"}},4:{fontSize:{value:"{fontSizes.xl.value}"},fontWeight:{value:"{fontWeights.semibold.value}"}},5:{fontSize:{value:"{fontSizes.large.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},6:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},qne={highlighted:{fontWeight:{value:"{fontWeights.bold}"}}},Kne={lineHeight:{value:1},height:{value:"1em"}},Xne={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},Yne={maxWidth:{value:"100%"},height:{value:"auto"},objectFit:{value:"initial"},objectPosition:{value:"initial"}},Zne={banner:{height:{value:"150px "},width:{value:"400px "}},button:{backgroundColor:{value:"#e8e8e8"},borderRadius:{value:"5px"},color:{value:"black"}},dialog:{height:{value:"50vh"},minHeight:{value:"400px"},minWidth:{value:"400px"},width:{value:"30vw"}},header:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},Jne={active:{color:{value:"{colors.font.active.value}"}},color:{value:"{colors.font.interactive.value}"},focus:{color:{value:"{colors.font.focus.value}"}},hover:{color:{value:"{colors.font.hover.value}"}},visited:{color:{value:"{colors.font.interactive.value}"}}},Qne={cameraModule:{backgroundColor:{value:"{colors.black}"}}},ere={width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},fontSize:{value:"{fontSizes.xs.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"},fontSize:{value:"{fontSizes.xxs.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"},fontSize:{value:"{fontSizes.small.value}"}},linear:{width:{value:"100%"},minWidth:{value:"5rem"},fontSize:{value:"{fontSizes.xxs.value}"},strokeWidth:{value:"{fontSizes.xxs.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{strokeWidth:{value:"{fontSizes.xxxs.value}"},fontSize:{value:"{fontSizes.xxxs.value}"}},large:{strokeWidth:{value:"{fontSizes.xs.value}"},fontSize:{value:"{fontSizes.xs.value}"}}},text:{fill:{value:"{colors.font.primary.value}"}}},tre={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.medium.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{shadows.large.value}"},flexDirection:{value:"column"},gap:{value:"{space.zero.value}"},maxWidth:{value:"30rem"},minWidth:{value:"14rem"},small:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"}},large:{width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}},item:{minHeight:{value:"2.5rem"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}}},nre={alignItems:{value:"center"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderColor:{value:"transparent"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.xs.value}"},color:{value:"{colors.font.primary.value}"},justifyContent:{value:"flex-start"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},lineHeight:{value:"{lineHeights.small.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},dismiss:{gap:{value:"{space.xxs.value}"}},plain:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}}},outlined:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.primary.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.error.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.success.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.warning.value}"}}},filled:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.secondary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"transparent"}}}},rre={current:{alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.overlay.40.value}"}},button:{color:{value:"{colors.font.primary.value}"},paddingInlineStart:{value:"{space.xxs.value}"},paddingInlineEnd:{value:"{space.xxs.value}"},transitionProperty:{value:"background-color"},transitionDuration:{value:"{time.medium.value}"},hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},disabled:{color:{value:"{colors.font.disabled.value}"}}},ellipsis:{alignItems:{value:"baseline"},justifyContent:{value:"center"},paddingInlineStart:{value:"{space.xs.value}"},paddingInlineEnd:{value:"{space.xs.value}"}},itemContainer:{marginLeft:{value:"{space.xxxs.value}"},marginRight:{value:"{space.xxxs.value}"}},itemShared:{height:{value:"{fontSizes.xxl.value}"},minWidth:{value:"{fontSizes.xxl.value}"},borderRadius:{value:"{fontSizes.medium.value}"}}},are={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_error:{color:{value:"{components.button.outlined.error.color.value}"},backgroundColor:{value:"{components.button.outlined.error.backgroundColor.value}"},borderColor:{value:"{components.button.outlined.error.borderColor.value}"},_active:{borderColor:{value:"{components.button.outlined.error._active.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._active.backgroundColor.value}"},color:{value:"{components.button.outlined.error._active.color.value}"}},_focus:{borderColor:{value:"{components.button.outlined.error._focus.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._focus.backgroundColor.value}"},color:{value:"{components.button.outlined.error._focus.color.value}"},boxShadow:{value:"{components.button.outlined.error._focus.boxShadow.value}"}},_hover:{borderColor:{value:"{components.button.outlined.error._hover.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._hover.backgroundColor.value}"},color:{value:"{components.button.outlined.error._hover.color.value}"}}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},sre={color:{value:"{components.fieldcontrol.color}"},borderColor:{value:"{components.fieldcontrol.borderColor}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}}},ore={borderRadius:{value:"{radii.small.value}"},transitionDuration:{value:"{time.long.value}"},startColor:{value:"{colors.background.secondary.value}"},endColor:{value:"{colors.background.tertiary.value}"},small:{height:{value:"{space.small.value}"}},default:{height:{value:"{space.medium.value}"}},large:{height:{value:"{space.large.value}"}}},ire={alignItems:{value:"center"},justifyContent:{value:"flex-start"},gap:{value:"inherit"},_disabled:{cursor:{value:"not-allowed"}},button:{alignItems:{value:"center"},justifyContent:{value:"center"},width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},boxSizing:{value:"border-box"},borderWidth:{value:"{borderWidths.medium.value}"},borderStyle:{value:"solid"},borderRadius:{value:"50%"},borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.background.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},padding:{value:"{borderWidths.medium.value}"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"}},_checked:{color:{value:"{colors.primary.80.value}"},_disabled:{color:{value:"{colors.background.disabled.value}"}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.primary.value}"}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},ure={radio:{borderWidth:{value:"{components.radio.button.borderWidth}"},borderColor:{value:"{components.radio.button.borderColor}"},backgroundColor:{value:"{components.radio.button.backgroundColor}"},_checked:{color:{value:"{components.radio.button._checked.color}"}},label:{color:{value:"{components.radio.label.color}"}}},legend:{color:{value:"{components.fieldset.legend.color}"},fontWeight:{value:"{fontWeights.normal}"}}},cre={large:{size:{value:"{fontSizes.xxxl.value}"}},default:{size:{value:"{fontSizes.xl.value}"}},small:{size:{value:"{fontSizes.small.value}"}},filled:{color:{value:"{colors.secondary.80.value}"}},empty:{color:{value:"{colors.background.tertiary.value}"}}},lre={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},backgroundColor:{value:"{colors.background.primary.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},dre={color:{value:"{components.fieldcontrol.color}"},backgroundColor:{value:"{colors.background.primary.value}"},paddingInlineEnd:{value:"{space.xxl.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},wrapper:{flex:{value:"1"},display:{value:"block"},position:{value:"relative"},cursor:{value:"pointer"}},iconWrapper:{alignItems:{value:"center"},position:{value:"absolute"},top:{value:"50%"},right:{value:"{space.medium.value}"},transform:{value:"translateY(-50%)"},pointerEvents:{value:"none"},small:{right:{value:"{space.xs.value}"}},large:{right:{value:"{space.medium.value}"}}},option:{backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"}}},whiteSpace:{value:"nowrap"},minWidth:{value:"6.5rem"},small:{minWidth:{value:"5.5rem"},paddingInlineEnd:{value:"{space.xl.value}"}},large:{minWidth:{value:"7.5rem"},paddingInlineEnd:{value:"{space.xxl.value}"}},expanded:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},option:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"}}}},fre={borderColor:{value:"{components.fieldcontrol.borderColor}"},color:{value:"{components.fieldcontrol.color}"},flexDirection:{value:"column"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}},label:{color:{value:"{components.field.label.color}"}}},pre={paddingBlock:{value:"{space.xs.value}"},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"9999px"},height:{value:"0.375rem"},minWidth:{value:"10rem"}},range:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"9999px"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},thumb:{width:{value:"1.25rem"},height:{value:"1.25rem"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.small.value}"},borderRadius:{value:"50%"},borderWidth:{value:"{borderWidths.medium.value}"},borderColor:{value:"{colors.border.primary.value}"},borderStyle:{value:"solid"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"},borderColor:{value:"transparent"},boxShadow:{value:"none"}},_hover:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.focus.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}}},small:{track:{height:{value:"0.25rem"}},thumb:{width:{value:"1rem"},height:{value:"1rem"}}},large:{track:{height:{value:"0.625rem"}},thumb:{width:{value:"1.5rem"},height:{value:"1.5rem"}}}},hre={borderColor:{value:"{components.fieldcontrol.borderColor}"},flexDirection:{value:"column"},input:{color:{value:"{components.fieldcontrol.color}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},textAlign:{value:"center"}},button:{color:{value:"{components.button.color}"},backgroundColor:{value:"{colors.transparent}"},_active:{color:{value:"{components.button._active.color}"},backgroundColor:{value:"{components.button._active.backgroundColor}"}},_focus:{color:{value:"{components.button._focus.color}"},backgroundColor:{value:"{components.button._focus.backgroundColor}"}},_disabled:{color:{value:"{components.button._disabled.color}"},backgroundColor:{value:"{components.fieldcontrol._disabled.backgroundColor}"}},_hover:{color:{value:"{components.button._hover.color}"},backgroundColor:{value:"{components.button._hover.backgroundColor}"}}}},mre={dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.storagemanager.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.storagemanager.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},gre={_disabled:{opacity:{value:"{opacities.60.value}"}},_focused:{shadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},fontSize:{value:"{fontSizes.medium.value}"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}},label:{padding:{value:"{space.xs.value}"}},thumb:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.xxxl.value}"},checked:{transform:{value:"{transforms.slideX.medium.value}"}},transition:{duration:{value:"{time.medium.value}"}},width:{value:"{space.relative.medium.value}"}},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"{radii.xxxl.value}"},checked:{backgroundColor:{value:"{colors.primary.80.value}"}},height:{value:"{space.relative.medium.value}"},padding:{value:"{outlineWidths.medium.value}"},transition:{duration:{value:"{time.short.value}"}},width:{value:"{space.relative.xl.value}"},_error:{backgroundColor:{value:"{colors.background.error.value}"}}}},yre={borderCollapse:{value:"collapse"},display:{value:"table"},width:{value:"100%"},head:{display:{value:"table-header-group"},verticalAlign:{value:"middle"}},body:{display:{value:"table-row-group"},verticalAlign:{value:"middle"}},foot:{display:{value:"table-footer-group"},verticalAlign:{value:"middle"}},row:{display:{value:"table-row"},verticalAlign:{value:"middle"},hover:{backgroundColor:{value:"{colors.background.tertiary.value}"}},striped:{backgroundColor:{value:"{colors.background.secondary.value}"}}},header:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},data:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.normal.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},caption:{captionSide:{value:"bottom"},color:{value:"{colors.font.primary.value}"},display:{value:"table-caption"},fontSize:{value:"{fontSizes.medium.value}"},textAlign:{value:"center"},wordBreak:{value:"break-all"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}}}},vre={backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},gap:{value:"0"},item:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},color:{value:"{colors.font.secondary.value}"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"},textAlign:{value:"center"},transitionDuration:{value:"{time.medium.value}"},_hover:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.hover.value}"}},_focus:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"{borderWidths.medium}",color:"{colors.border.focus.value}"}},color:{value:"{colors.font.focus.value}"}},_active:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.font.interactive.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.interactive.value}"}},_disabled:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.disabled.value}"}}},panel:{backgroundColor:{value:"transparent"},paddingInline:{value:"0"},paddingBlock:{value:"{space.small.value}"}}},bre={color:{value:"{colors.font.primary.value}"},primary:{color:{value:"{colors.font.primary.value}"}},secondary:{color:{value:"{colors.font.secondary.value}"}},tertiary:{color:{value:"{colors.font.tertiary.value}"}},error:{color:{value:"{colors.font.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"}},success:{color:{value:"{colors.font.success.value}"}},info:{color:{value:"{colors.font.info.value}"}}},wre={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},Sre={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},_re={borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.font.primary.value}"},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.font.primary.value}"}},_active:{backgroundColor:{value:"{colors.transparent.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},borderColor:{value:"{colors.border.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{borderColor:{value:"{colors.border.pressed.value}"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.overlay.20.value}"},_hover:{backgroundColor:{value:"{colors.overlay.30.value}"}}},primary:{backgroundColor:{value:"{colors.transparent.value}"},borderWidth:{value:"{borderWidths.small.value}"},_focus:{borderColor:{value:"{colors.border.focus.value}"},backgroundColor:{value:"{colors.transparent.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"},color:{value:"{colors.font.primary.value}"}},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.primary.80.value}"},borderColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.background.primary.value}"},_focus:{backgroundColor:{value:"{colors.border.focus.value}"},borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.background.primary.value}"}},_hover:{borderColor:{value:"{colors.primary.60.value}"},backgroundColor:{value:"{colors.primary.60.value}"},boxShadow:{value:"{colors.primary.60.value}"},color:{value:"{colors.background.primary.value}"}}}},link:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"},_hover:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"}},_hover:{color:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.transparent.value}"}}}}},xre={alignItems:{value:"center"},alignContent:{value:"center"},justifyContent:{value:"flex-start"}},Ire={accordion:Lne,alert:kne,authenticator:Tne,autocomplete:Ene,badge:Cne,breadcrumbs:Nne,button:Ane,card:Rne,checkbox:$ne,checkboxfield:Dne,collection:One,copy:Fne,countrycodeselect:Mne,divider:Pne,dropzone:Bne,field:Wne,fieldcontrol:zne,fieldgroup:Vne,fieldmessages:jne,fieldset:Hne,flex:Une,heading:Gne,icon:Kne,highlightmatch:qne,image:Yne,inappmessaging:Zne,input:Xne,link:Jne,liveness:Qne,loader:ere,menu:tre,message:nre,pagination:rre,passwordfield:are,phonenumberfield:sre,placeholder:ore,radio:ire,radiogroup:ure,rating:cre,searchfield:lre,select:dre,selectfield:fre,sliderfield:pre,stepperfield:hre,storagemanager:mre,switchfield:gre,table:yre,tabs:vre,text:bre,textareafield:wre,textfield:Sre,togglebutton:_re,togglebuttongroup:xre},kre={default:{variable:{value:`'InterVariable', 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont,
        'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans',
        sans-serif`},static:{value:`'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue',
        'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif`}}},ia={xxxs:{value:"0.375rem"},xxs:{value:"0.5rem"},xs:{value:"0.75rem"},small:{value:"0.875rem"},medium:{value:"1rem"},large:{value:"1.25rem"},xl:{value:"1.5rem"},xxl:{value:"2rem"},xxxl:{value:"2.5rem"},xxxxl:{value:"3rem"}},p3={hairline:{value:100},thin:{value:200},light:{value:300},normal:{value:400},medium:{value:500},semibold:{value:600},bold:{value:700},extrabold:{value:800},black:{value:900}},Ere={small:{value:"1.25"},medium:{value:"1.5"},large:{value:"2"}},h3={0:{value:"0"},10:{value:"0.1"},20:{value:"0.2"},30:{value:"0.3"},40:{value:"0.4"},50:{value:"0.5"},60:{value:"0.6"},70:{value:"0.7"},80:{value:"0.8"},90:{value:"0.9"},100:{value:"1"}},Tre={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},Cre={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},m3={xs:{value:"0.125rem"},small:{value:"0.25rem"},medium:{value:"0.5rem"},large:{value:"1rem"},xl:{value:"2rem"},xxl:{value:"4rem"},xxxl:{value:"8rem"}},Nre={small:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"4px",color:"{colors.shadow.tertiary.value}"}},medium:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"6px",color:"{colors.shadow.secondary.value}"}},large:{value:{offsetX:"0px",offsetY:"4px",blurRadius:"12px",color:"{colors.shadow.primary.value}"}}},ua={zero:{value:"0"},xxxs:{value:"0.25rem"},xxs:{value:"0.375rem"},xs:{value:"0.5rem"},small:{value:"0.75rem"},medium:{value:"1rem"},large:{value:"1.5rem"},xl:{value:"2.0rem"},xxl:{value:"3.0rem"},xxxl:{value:"4.5rem"},relative:{xxxs:{value:"0.25em"},xxs:{value:"0.375em"},xs:{value:"0.5em"},small:{value:"0.75em"},medium:{value:"1em"},large:{value:"1.5em"},xl:{value:"2.0em"},xxl:{value:"3.0em"},xxxl:{value:"4.5em"},full:{value:"100%"}}},g3={short:{value:"100ms"},medium:{value:"250ms"},long:{value:"500ms"}},Are={slideX:{small:{value:"translateX(0.5em)"},medium:{value:"translateX(1em)"},large:{value:"translateX(2em)"}}},Rre={components:Ire,borderWidths:d3,colors:f3,fonts:kre,fontSizes:ia,fontWeights:p3,lineHeights:Ere,opacities:h3,outlineOffsets:Tre,outlineWidths:Cre,radii:m3,shadows:Nre,space:ua,time:g3,transforms:Are};ia.xxs,ia.xs,ia.small,ia.medium,ia.large,ia.xl,ia.xxl,ia.xxxl,ua.xxxs,ua.xs,ua.small,ua.medium,ua.large,ua.xl,ua.xxl,ua.xxxl;const $re={values:{base:0,small:480,medium:768,large:992,xl:1280,xxl:1536},defaultBreakpoint:"base"},y3={tokens:Rre,breakpoints:$re,name:"default-theme"};function Dre(t,e,n,r){var a=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++a]);++a<s;)n=e(n,t[a],a,t);return n}var Ore=Dre;function Fre(t){return function(e){return t?.[e]}}var Mre=Fre,Pre=Mre,Bre={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Lre=Pre(Bre),Wre=Lre,zre=Wre,Vre=Jx,Hre=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jre="\\u0300-\\u036f",Ure="\\ufe20-\\ufe2f",Gre="\\u20d0-\\u20ff",qre=jre+Ure+Gre,Kre="["+qre+"]",Xre=RegExp(Kre,"g");function Yre(t){return t=Vre(t),t&&t.replace(Hre,zre).replace(Xre,"")}var Zre=Yre,Jre=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Qre(t){return t.match(Jre)||[]}var eae=Qre,tae=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function nae(t){return tae.test(t)}var rae=nae,v3="\\ud800-\\udfff",aae="\\u0300-\\u036f",sae="\\ufe20-\\ufe2f",oae="\\u20d0-\\u20ff",iae=aae+sae+oae,b3="\\u2700-\\u27bf",w3="a-z\\xdf-\\xf6\\xf8-\\xff",uae="\\xac\\xb1\\xd7\\xf7",cae="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lae="\\u2000-\\u206f",dae=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",S3="A-Z\\xc0-\\xd6\\xd8-\\xde",fae="\\ufe0e\\ufe0f",_3=uae+cae+lae+dae,x3="[']",Bb="["+_3+"]",pae="["+iae+"]",I3="\\d+",hae="["+b3+"]",k3="["+w3+"]",E3="[^"+v3+_3+I3+b3+w3+S3+"]",mae="\\ud83c[\\udffb-\\udfff]",gae="(?:"+pae+"|"+mae+")",yae="[^"+v3+"]",T3="(?:\\ud83c[\\udde6-\\uddff]){2}",C3="[\\ud800-\\udbff][\\udc00-\\udfff]",po="["+S3+"]",vae="\\u200d",Lb="(?:"+k3+"|"+E3+")",bae="(?:"+po+"|"+E3+")",Wb="(?:"+x3+"(?:d|ll|m|re|s|t|ve))?",zb="(?:"+x3+"(?:D|LL|M|RE|S|T|VE))?",N3=gae+"?",A3="["+fae+"]?",wae="(?:"+vae+"(?:"+[yae,T3,C3].join("|")+")"+A3+N3+")*",Sae="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_ae="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xae=A3+N3+wae,Iae="(?:"+[hae,T3,C3].join("|")+")"+xae,kae=RegExp([po+"?"+k3+"+"+Wb+"(?="+[Bb,po,"$"].join("|")+")",bae+"+"+zb+"(?="+[Bb,po+Lb,"$"].join("|")+")",po+"?"+Lb+"+"+Wb,po+"+"+zb,_ae,Sae,I3,Iae].join("|"),"g");function Eae(t){return t.match(kae)||[]}var Tae=Eae,Cae=eae,Nae=rae,Aae=Jx,Rae=Tae;function $ae(t,e,n){return t=Aae(t),e=n?void 0:e,e===void 0?Nae(t)?Rae(t):Cae(t):t.match(e)||[]}var Dae=$ae,Oae=Ore,Fae=Zre,Mae=Dae,Pae="[']",Bae=RegExp(Pae,"g");function Lae(t){return function(e){return Oae(Mae(Fae(e).replace(Bae,"")),t,"")}}var Wae=Lae,zae=Wae,Vae=zae(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hae=Vae;const jae=Ws(Hae),Uae={opening_character:"{",closing_character:"}",separator:"."};var Gae=Uae;const qae=Gae;function Kae(t={}){const e=Object.assign({},qae,t);return new RegExp("\\"+e.opening_character+"([^"+e.closing_character+"]+)\\"+e.closing_character,"g")}var Xae=Kae;const Yae=Xae;function R3(t,e={}){const n=e instanceof RegExp?e:Yae(e);if(typeof t=="string")return n.test(t);if(typeof t=="object"){let r=!1;for(const a in t)if(t.hasOwnProperty(a)){const s=t[a];if(R3(s,e)){r=!0;break}}return r}return!1}var Zae=R3;const Jae=Ws(Zae),Qae="amplify",ese=["offsetX","offsetY","blurRadius","spreadRadius","color"];function Vb(t){if(!t)return"";if(Jae(t)){const e=t.replace(/\{|\}/g,"").replace(".value","").split(".");return`var(--${Lg({path:e})})`}return t}function tse(t){const{value:e}=t;return Do(e)?Vb(e):Hb(e)?ese.map(n=>Vb(Hb(t)?t[n]:e[n])).join(" "):e}function Lg({path:t=[]}){return`${jae([Qae,...t].join(" "))}`}function Wg(t){return $u(t)&&vu(t,"value")}function Hb(t){return $u(t)&&vu(t,"offsetX")}function Lh({tokens:t,path:e=[],setupToken:n}){if(vu(t,"value"))return n({token:t,path:e});const r={};for(const a in t)if(vu(t,a)){const s=t[a],o=$u(s)?s:{value:s};r[a]=Lh({tokens:o,path:e.concat(a),setupToken:n})}return r}const jb=({token:t,path:e})=>{const n=`--${Lg({path:e})}`,{value:r}=t,a=tse(t);return{name:n,original:r,path:e,value:a,toString:()=>`var(${n})`}};function Ub({keys:t,value:e}){return t.reduce((n,r)=>({...n,[r]:{value:`{colors.${e}.${r}.value}`}}),{})}function $3(t,e=y3){const n=xne([{},e,t]),{primaryColor:r,secondaryColor:a}=n;Do(r)&&(n.tokens.colors.primary=Ub({keys:Object.keys(n.tokens.colors[r]),value:r})),Do(a)&&(n.tokens.colors.secondary=Ub({keys:Object.keys(n.tokens.colors[a]),value:a}));const s=Lh({tokens:n.tokens,setupToken:jb}),{breakpoints:o,name:i}=n;let c=`[data-amplify-theme="${i}"] {
`+Pb(s).map(u=>`${u.name}: ${u.value};`).join(`
`)+`
}
`,l=[];return n.overrides&&(l=n.overrides.map(u=>{const d=Lh({tokens:u.tokens,setupToken:jb}),f=Pb(d).map(p=>`${p.name}: ${p.value};`).join(`
`);if("selector"in u&&(c+=`
${u.selector} {
${f}
}
`),"mediaQuery"in u&&(c+=`
@media (${u.mediaQuery}) {
  [data-amplify-theme="${i}"] {
    ${f}
  }
}
`),"breakpoint"in u){const p=n.breakpoints.values[u.breakpoint];c+=`
@media (min-width: ${p}px) {
  [data-amplify-theme="${i}"] {
    ${f}
  }
}
`}return"colorMode"in u&&(c+=`
@media (prefers-color-scheme: ${u.colorMode}) {
          [data-amplify-theme="${i}"][data-amplify-color-mode="system"] {
            ${f}
            color-scheme: ${u.colorMode};
          }
        }
`,c+=`
[data-amplify-theme="${i}"][data-amplify-color-mode="${u.colorMode}"] {
          ${f}
          color-scheme: ${u.colorMode};
        }
`),{...u,tokens:d}})),{tokens:s,breakpoints:o,name:i,cssText:c,overrides:l}}const Fe={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"},qt=(...t)=>{const e=[];for(const n of t)if(n){if(Do(n)){e.push(n);continue}if(typeof n=="number"){e.push(n.toString());continue}if(Array.isArray(n)){e.push(qt(...n));continue}if($u(n)){if(n.toString!==Object.prototype.toString&&n.toString()!=="[object Object]"){e.push(n.toString());continue}for(const r in n)vu(n,r)&&n[r]&&e.push(r)}}return e.join(" ")},D3=re.createContext({theme:$3(),colorMode:void 0}),zg={alignContent:"alignContent",alignItems:"alignItems",alignSelf:"alignSelf",area:"gridArea",aspectRatio:"aspectRatio",autoColumns:"gridAutoColumns",autoFlow:"gridAutoFlow",autoRows:"gridAutoRows",backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",basis:"flexBasis",border:"border",borderRadius:"borderRadius",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",bottom:"bottom",boxShadow:"boxShadow",color:"color",column:"gridColumn",columnEnd:"gridColumnEnd",columnGap:"columnGap",columnSpan:"gridColumn",columnStart:"gridColumnStart",direction:"flexDirection",display:"display",flex:"flex",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",gap:"gap",grow:"flexGrow",height:"height",justifyContent:"justifyContent",left:"left",letterSpacing:"letterSpacing",lineHeight:"lineHeight",margin:"margin",marginBlock:"marginBlock",marginBlockEnd:"marginBlockEnd",marginBlockStart:"marginBlockStart",marginBottom:"marginBlockEnd",marginInline:"marginInline",marginInlineEnd:"marginInlineEnd",marginInlineStart:"marginInlineStart",marginLeft:"marginInlineStart",marginRight:"marginInlineEnd",marginTop:"marginBlockStart",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",objectFit:"objectFit",objectPosition:"objectPosition",opacity:"opacity",order:"order",overflow:"overflow",padding:"padding",paddingBlock:"paddingBlock",paddingBlockEnd:"paddingBlockEnd",paddingBlockStart:"paddingBlockStart",paddingBottom:"paddingBlockEnd",paddingInline:"paddingInline",paddingInlineEnd:"paddingInlineEnd",paddingInlineStart:"paddingInlineStart",paddingLeft:"paddingInlineStart",paddingRight:"paddingInlineEnd",paddingTop:"paddingBlockStart",position:"position",resize:"resize",right:"right",row:"gridRow",rowEnd:"gridRowEnd",rowGap:"rowGap",rowSpan:"gridRow",rowStart:"gridRowStart",shrink:"flexShrink",templateAreas:"gridTemplateAreas",templateColumns:"gridTemplateColumns",templateRows:"gridTemplateRows",textAlign:"textAlign",textDecoration:"textDecoration",textTransform:"textTransform",top:"top",transform:"transform",transformOrigin:"transformOrigin",width:"width",whiteSpace:"whiteSpace",wrap:"flexWrap"},Wh={backgroundColor:"colors",borderColor:"colors",borderWidth:"borderWidths",color:"colors",borderRadius:"radii",fontSize:"fontSizes",fontWeight:"fontWeights",fontFamily:"fonts",lineHeight:"lineHeights",opacity:"opacities",boxShadow:"shadows",transform:"transforms",left:"space",right:"space",top:"space",bottom:"space",height:"space",width:"space",letterSpacing:"space",margin:"space",marginBlock:"space",marginBlockEnd:"space",marginBlockStart:"space",marginInline:"space",marginInlineEnd:"space",marginInlineStart:"space",marginLeft:"space",marginRight:"space",marginTop:"space",marginBottom:"space",maxHeight:"space",maxWidth:"space",minHeight:"space",minWidth:"space",padding:"space",paddingBlock:"space",paddingBlockEnd:"space",paddingBlockStart:"space",paddingInline:"space",paddingInlineEnd:"space",paddingInlineStart:"space",paddingLeft:"space",paddingRight:"space",paddingTop:"space",paddingBottom:"space",gap:"space",columnGap:"space",rowGap:"space"},nse=t=>t in Wh,O3=t=>typeof t=="string"&&t.length===0,Gb=t=>t==null||O3(t),If=t=>Object.keys(t),Vg=(t,e,n)=>{if(typeof e!="string")return e;if(e.includes(" "))return e.split(" ").map(r=>Vg(t,r,n)).join(" ");if(nse(t)){const r=e.split("."),a=Wh[t];let s=n[a];for(let o=0;o<r.length;o++){if(s){s=s[r[o]];continue}break}return Wg(s)?`var(--${Lg({path:[Wh[t],...r]})})`:e}return e},rse=({breakpoint:t,breakpoints:e,values:n})=>{const r=n[t];if(r!==void 0)return r;const a=If(e).sort((o,i)=>e[i]-e[o]),s=a.slice(a.indexOf(t));for(const o of s){const i=n[o];if(i!==void 0)return i}return null},ase=t=>If(t).reduce((e,n)=>n in y3.breakpoints.values?{...e,[n]:t[n]}:e,{}),sse=({breakpoint:t,breakpoints:e,values:n})=>{let r={};const a=If(e).sort((s,o)=>e[s]-e[o]);return Array.isArray(n)?n.forEach((s,o)=>{r[a[o]]=s}):typeof n=="object"&&(r=ase(n)),rse({breakpoint:t,breakpoints:e,values:r})},ose=({breakpoints:t})=>{const e=If(t).sort((n,r)=>t[r]-t[n]);return e.map((n,r)=>{let a="";const s=t[n],o=e[r-1],i=o?t[o]-1:null;return s>=0&&(a=`(min-width: ${s}px)`),i!==null&&(a&&(a+=" and "),a+=`(max-width: ${i}px)`),{breakpoint:n,query:a,maxWidth:i,minWidth:s}})},ise=typeof window>"u"?re.useEffect:re.useLayoutEffect,F3=({breakpoints:t,defaultBreakpoint:e})=>{const r=typeof window<"u"&&typeof window.matchMedia<"u"?window.matchMedia:null,a=re.useMemo(()=>ose({breakpoints:t}),[t]),[s,o]=re.useState(e),i=re.useCallback((c,l)=>{c&&o(l)},[o]);return ise(()=>{if(!r)return;const c=a.map(({query:l,breakpoint:u})=>{const d=r(l);i(d.matches,u);const f=p=>{p.matches&&o(u)};return d.addEventListener("change",f),()=>d.removeEventListener("change",f)});return()=>{c.forEach(l=>l())}},[t,o,r,a]),re.useDebugValue(s,c=>c),s},use=t=>typeof t>"u"||typeof t.theme>"u"?$3():t.theme,Hg=()=>{const t=re.useContext(D3);return use(t)},cse=()=>re.useContext(D3).colorMode,lse=({value:t,propKey:e,tokens:n})=>Wg(t)?t.toString():Do(t)?Do(e)?Vg(e,t,n):t:null,dse=t=>t==="auto"||typeof t=="number"&&!isNaN(t)||typeof t=="string"&&!isNaN(parseFloat(t)),yp=t=>t==="auto"?"auto":`span ${t}`,qb=t=>dse(t)?yp(t):Array.isArray(t)?t.map(e=>yp(e)):typeof t=="object"&&t!=null?Object.entries(t).reduce((e,[n,r])=>({...e,[n]:yp(r)}),{}):null,fse=t=>{const{rowSpan:e,columnSpan:n,row:r,column:a,...s}=t,{rowFromSpanValue:o,columnFromSpanValue:i}=re.useMemo(()=>({rowFromSpanValue:qb(e),columnFromSpanValue:qb(n)}),[e,n]);return{row:Gb(r)?o:r,column:Gb(a)?i:a,...s}},pse=t=>t in zg,hse=({props:t={},style:e={},breakpoint:n,breakpoints:r,tokens:a})=>{const s={};return Object.keys(t).filter(o=>t[o]!==null).forEach(o=>{if(pse(o)){const i=t[o];if(!i||O3(i))return;const c=zg[o];let l="";Wg(i)?l=i.toString():typeof i=="string"?l=Vg(o,i,a):typeof i=="number"?l=i:typeof i=="object"&&(l=lse({propKey:o,tokens:a,value:sse({values:i,breakpoint:n,breakpoints:r})})),e={...e,[c]:l}}else typeof t[o]<"u"&&(s[o]=t[o])}),{propStyles:e,nonStyleProps:s}},mse=(t,e)=>{const{breakpoints:{values:n,defaultBreakpoint:r},tokens:a}=Hg(),s=F3({breakpoints:n,defaultBreakpoint:r}),o=fse(t);return re.useMemo(()=>hse({props:o,style:e,breakpoint:s,breakpoints:n,tokens:a}),[o,e,n,s,a])},ra=t=>re.forwardRef(t),gse=({as:t="div",children:e,testId:n,ariaLabel:r,isDisabled:a,style:s,inert:o,...i},c)=>{const{propStyles:l,nonStyleProps:u}=mse(i,s);return re.createElement(t,{"aria-label":r,"data-testid":n,disabled:a,ref:c,inert:o?"":null,style:l,...u},e)},yt=ra(gse);yt.displayName="View";const xi={minX:0,minY:0,width:24,height:24},yse=({className:t,as:e="svg",fill:n="currentColor",pathData:r,viewBox:a=xi,children:s,paths:o,...i},c)=>{const l=a.minX?a.minX:xi.minX,u=a.minY?a.minY:xi.minY,d=a.width?a.width:xi.width,f=a.height?a.height:xi.height;let p;return s&&(p=s),o&&(p=o.map((h,m)=>re.createElement("path",{...h,key:m}))),r&&(p=re.createElement("path",{d:r,fill:n})),re.createElement(yt,{as:e,className:qt(Fe.Icon,t),ref:c,viewBox:`${l} ${u} ${d} ${f}`,...i},p)},M3=ra(yse);M3.displayName="Icon";const vse=re.createContext({});function P3(t){const e=re.useContext(vse);if(t&&e)return e[t]}const bse=t=>{const{className:e,...n}=t;return re.createElement(yt,{as:"span",width:"1em",height:"1em",className:qt(Fe.Icon,e),...n},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",fill:"currentColor"})))},wse=t=>{const{className:e,...n}=t;return re.createElement(yt,{as:"span",width:"1em",height:"1em",className:qt(Fe.Icon,e),...n},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})))},Sse=t=>{const{className:e,...n}=t;return re.createElement(yt,{as:"span",width:"1em",height:"1em",className:qt(Fe.Icon,e),...n},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re.createElement("path",{d:"M11 7H13V9H11V7ZM11 11H13V17H11V11ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"})))},_se=t=>{const{className:e,...n}=t;return re.createElement(yt,{as:"span",width:"1em",height:"1em",className:qt(Fe.Icon,e),...n},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re.createElement("path",{d:"M1 21H23L12 2L1 21ZM13 18H11V16H13V18ZM13 14H11V10H13V14Z",fill:"currentColor"})))},jg=({variation:t,ariaHidden:e,ariaLabel:n,role:r})=>{const a=P3("alert");let s;switch(t){case"info":s=a?.info??re.createElement(Sse,{"aria-hidden":e,"aria-label":n,role:r});break;case"error":s=a?.error??re.createElement(wse,{"aria-hidden":e,"aria-label":n,role:r});break;case"warning":s=a?.warning??re.createElement(_se,{"aria-hidden":e,"aria-label":n,role:r});break;case"success":s=a?.success??re.createElement(bse,{"aria-hidden":e,"aria-label":n,role:r});break}return s?re.createElement("span",{className:Fe.AlertIcon},s):null};jg.displayName="AlertIcon";const xse=re.createContext({isFieldsetDisabled:!1}),B3=()=>re.useContext(xse),Ise=({className:t,children:e,...n},r)=>re.createElement(yt,{className:qt(Fe.Flex,t),ref:r,...n},e),It=ra(Ise);It.displayName="Flex";const kse="linear-empty",Ese="linear-filled",Tse="circular-empty",Cse="circular-filled",Kb=8,zh=42,dc=2*zh*Math.PI,Nse=({className:t,filledColor:e,emptyColor:n,size:r,variation:a,isDeterminate:s=!1,isPercentageTextHidden:o=!1,percentage:i=0,...c},l)=>{i=Math.min(i,100),i=Math.max(i,0);const u=`${i}%`,d=qt(Fe.Loader,Qr(Fe.Loader,r),Qr(Fe.Loader,a),Ns(Fe.Loader,"determinate",s),t),f=re.createElement("g",null,re.createElement("line",{x1:"0",x2:"100%",y1:"50%",y2:"50%",style:{stroke:String(n)},"data-testid":kse}),re.createElement("line",{x1:"0",x2:s?u:"100%",y1:"50%",y2:"50%",style:{stroke:s&&i===0?"none":e?String(e):void 0},"data-testid":Ese}),s?re.createElement("text",{"aria-live":"polite",className:qt(Fe.LoaderLabel,o?Fe.VisuallyHidden:null),x:`${-1+i}%`,y:"200%"},u):null),p=re.createElement("g",null,re.createElement("circle",{cx:"50%",cy:"50%",r:`${zh}%`,strokeWidth:`${Kb}%`,style:{stroke:String(n)},"data-testid":Tse}),re.createElement("circle",{cx:"50%",cy:"50%",r:`${zh}%`,strokeWidth:`${Kb}%`,style:{stroke:String(e),strokeDasharray:s?`${dc}% ${dc}%`:void 0,strokeDashoffset:s?`${dc-dc*i/100}%`:void 0},"data-testid":Cse}),s?re.createElement("text",{"aria-live":"polite",className:qt(Fe.LoaderLabel,o?Fe.VisuallyHidden:null),x:"130%",y:"80%"},u):null);return re.createElement(yt,{as:"svg",className:d,ref:l,role:"img",...c},a==="linear"?f:p)},Du=ra(Nse);Du.displayName="Loader";const Ase=["link","primary",void 0],Rse=({className:t,children:e,colorTheme:n,isFullWidth:r=!1,isDisabled:a,isLoading:s,loadingText:o="",size:i,type:c="button",variation:l,...u},d)=>{const f=Ase.includes(l)&&n?`${l??"outlined"}--${n}`:void 0,{isFieldsetDisabled:p}=B3(),h=p||(a??s??u.disabled),m=qt(Fe.Button,Fe.FieldGroupControl,Qr(Fe.Button,l),Qr(Fe.Button,f),Qr(Fe.Button,i),Ns(Fe.Button,"disabled",h),Ns(Fe.Button,"loading",s),Ns(Fe.Button,"fullwidth",r),t);return re.createElement(yt,{ref:d,as:"button",className:m,isDisabled:h,type:c,...u},s?re.createElement(It,{as:"span",className:Fe.ButtonLoaderWrapper},re.createElement(Du,{size:i}),o||null):e)},qs=ra(Rse);qs.displayName="Button";const $se=t=>{const{className:e,size:n,...r}=t;return re.createElement(yt,{as:"span",width:n??"1em",height:n??"1em",className:qt(Fe.Icon,e),...r},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n?{width:n,height:n}:void 0},re.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})))},Dse=({as:t="p",className:e,children:n,isTruncated:r,variation:a,...s},o)=>{const i=qt(Fe.Text,Qr(Fe.Text,a),Ns(Fe.Text,"truncated",r),e);return re.createElement(yt,{as:t,className:i,ref:o,...s},n)},Lr=ra(Dse);Lr.displayName="Text";const Ose="qa-field-description",L3=({descriptiveText:t,labelHidden:e,...n})=>t?re.createElement(Lr,{"data-testid":Ose,className:qt(Fe.FieldDescription,{[Fe.VisuallyHidden]:e}),...n},t):null;L3.displayName="FieldDescription";const W3=({errorMessage:t,hasError:e,...n})=>e&&t?re.createElement(Lr,{className:Fe.FieldErrorMessage,...n},t):null;W3.displayName="FieldErrorMessage";const Fse=({children:t,className:e,visuallyHidden:n,...r},a)=>re.createElement(yt,{as:"label",className:qt(Fe.Label,e,{[Fe.VisuallyHidden]:n}),ref:a,...r},t),Ug=ra(Fse);Ug.displayName="Label";const Mse=globalThis?.document?re.useLayoutEffect:()=>{},Pse="amplify-id",Bse=re["useId".toString()]||(()=>{});let Lse=0;const Xb=t=>{const[e,n]=re.useState(Bse());return Mse(()=>{t||n(r=>r??String(Lse++))},[t]),t??(e?`${Pse}-${e}`:"")},Wse=t=>t in zg,zse=t=>{const e={styleProps:{},rest:{}};return Object.keys(t).forEach(n=>{Wse(n)?e.styleProps={...e.styleProps,[n]:t[n]}:e.rest={...e.rest,[n]:t[n]}}),e},Vse=({as:t="span",children:e,className:n,...r},a)=>re.createElement(yt,{as:t,className:qt(Fe.VisuallyHidden,n),ref:a,...r},e),Sc=ra(Vse);Sc.displayName="VisuallyHidden";const Hse=t=>{const{className:e,...n}=t;return re.createElement(yt,{as:"span",width:"1em",height:"1em",className:qt(Fe.Icon,e),...n},re.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re.createElement("path",{d:"M16.59 8.58984L12 13.1698L7.41 8.58984L6 9.99984L12 15.9998L18 9.99984L16.59 8.58984Z",fill:"currentColor"})))},jse=({autoComplete:t,className:e,size:n,variation:r,value:a,defaultValue:s,hasError:o,icon:i,iconColor:c,children:l,placeholder:u,isDisabled:d,isRequired:f,isMultiple:p=!1,selectSize:h=1,...m},g)=>{const v="",b=a===void 0&&s===void 0&&u,w=p||h>1,S=qt(Fe.Select,Fe.FieldGroupControl,Qr(Fe.Select,n),Qr(Fe.Select,r),Ns(Fe.Select,"error",o),Ns(Fe.Select,"expanded",w),e),I=P3("select"),{isFieldsetDisabled:E}=B3();return re.createElement(yt,{className:Fe.SelectWrapper},re.createElement(yt,{"aria-invalid":o,as:"select",autoComplete:t,value:a,defaultValue:b?v:s,isDisabled:E||d,multiple:p,size:h,required:f,className:S,ref:g,...m},u&&re.createElement("option",{value:""},u),l),w?null:re.createElement(It,{className:qt(Fe.SelectIcon,Qr(Fe.SelectIcon,n)),color:c},i??I?.expand??re.createElement(Hse,null)))},z3=ra(jse);z3.displayName="Select";const Use=({children:t,options:e})=>t?(e?.length&&console.warn("Amplify UI: <SelectField> component  defaults to rendering children over `options`. When using the `options` prop, omit children."),t):e?.map((n,r)=>re.createElement("option",{label:n,value:n,key:`${n}-${r}`},n)),Gse=(t,e)=>{const{children:n,className:r,descriptiveText:a,errorMessage:s,hasError:o=!1,id:i,label:c,labelHidden:l=!1,options:u,size:d,testId:f,inputStyles:p,...h}=t,m=Xb(i),g=Xb(),v=a?g:void 0,{styleProps:b,rest:w}=zse(h);return re.createElement(It,{className:qt(Fe.Field,Qr(Fe.Field,d),Fe.SelectField,r),testId:f,...b},re.createElement(Ug,{htmlFor:m,visuallyHidden:l},c),re.createElement(L3,{id:g,labelHidden:l,descriptiveText:a}),re.createElement(z3,{"aria-describedby":v,hasError:o,id:m,ref:e,size:d,...w,...p},Use({children:n,options:u})),re.createElement(W3,{hasError:o,errorMessage:s}))},V3=ra(Gse);V3.displayName="SelectField";var H3=oe.createContext(null);function qse(t){var e=t.children,n=al(t,["children"]);return oe.createElement(H3.Provider,{value:n},e)}function j3(){var t=oe.useContext(H3);if(t===null)throw new Error("useFaceLivenessDetector must be used within a FaceLivenessDetectorProvider");return t}const Kse=()=>{const{breakpoints:{values:t,defaultBreakpoint:e}}=Hg();return F3({breakpoints:t,defaultBreakpoint:e})};function kf(){var t=j3().service,e=ME(t);return e}function Vn(t){var e=j3().service;return LE(e,t)}function Xse(t){var e=nl.height.ideal,n=nl.width.ideal,r=oe.useRef(null),a=oe.useState(e),s=a[0],o=a[1],i=oe.useState(n),c=i[0],l=i[1];return oe.useEffect(function(){if(t){$u(r.current)&&(r.current.srcObject=t);var u=t.getTracks()[0].getSettings(),d=u.height,f=u.width;o(d),l(f)}return function(){t&&t.getTracks().forEach(function(p){t.removeTrack(p),p.stop()})}},[t]),{videoRef:r,videoHeight:s,videoWidth:c}}var Ve;(function(t){t.CameraModule="amplify-liveness-camera-module",t.CancelContainer="amplify-liveness-cancel-container",t.CancelButton="amplify-liveness-cancel-button",t.CountdownContainer="amplify-liveness-countdown-container",t.DescriptionBullet="amplify-liveness-description-bullet",t.DescriptionBulletIndex="amplify-liveness-description-bullet__index",t.DescriptionBulletIndexText="amplify-liveness-description-bullet__index__text",t.DescriptionBulletMessage="amplify-liveness-description-bullet__message",t.ErrorModal="amplify-liveness-error-modal",t.ErrorModalHeading="amplify-liveness-error-modal__heading",t.FadeOut="amplify-liveness-fade-out",t.FreshnessCanvas="amplify-liveness-freshness-canvas",t.InstructionList="amplify-liveness-instruction-list",t.InstructionOverlay="amplify-liveness-instruction-overlay",t.Hint="amplify-liveness-hint",t.HintText="amplify-liveness-hint__text",t.LandscapeErrorModal="amplify-liveness-landscape-error-modal",t.LandscapeErrorModalButton="amplify-liveness-landscape-error-modal__button",t.LandscapeErrorModalHeader="amplify-liveness-landscape-error-modal__header",t.Loader="amplify-liveness-loader",t.MatchIndicator="amplify-liveness-match-indicator",t.OvalCanvas="amplify-liveness-oval-canvas",t.OpaqueOverlay="amplify-liveness-overlay-opaque",t.Overlay="amplify-liveness-overlay",t.Popover="amplify-liveness-popover",t.PopoverContainer="amplify-liveness-popover__container",t.PopoverAnchor="amplify-liveness-popover__anchor",t.PopoverAnchorSecondary="amplify-liveness-popover__anchor-secondary",t.RecordingIconContainer="amplify-liveness-recording-icon-container",t.RecordingIcon="amplify-liveness-recording-icon",t.StartScreenCameraSelect="amplify-liveness-start-screen-camera-select",t.StartScreenCameraSelectContainer="amplify-liveness-start-screen-camera-select__container",t.StartScreenCameraWaiting="amplify-liveness-start-screen-camera-waiting",t.StartScreenHeader="amplify-liveness-start-screen-header",t.StartScreenHeaderBody="amplify-liveness-start-screen-header__body",t.StartScreenHeaderHeading="amplify-liveness-start-screen-header__heading",t.StartScreenWarning="amplify-liveness-start-screen-warning",t.StartScreenInstructions="amplify-liveness-start-screen-instructions",t.StartScreenInstructionsHeading="amplify-liveness-start-screen-instructions__heading",t.Toast="amplify-liveness-toast",t.ToastContainer="amplify-liveness-toast__container",t.ToastMessage="amplify-liveness-toast__message",t.Video="amplify-liveness-video",t.VideoAnchor="amplify-liveness-video-anchor"})(Ve||(Ve={}));var U3=function(t){var e=t.ariaLabel,n=kf(),r=n[0],a=n[1],s=r.done,o=function(){a({type:"CANCEL"})};return s?null:oe.createElement(qs,{autoFocus:!0,variation:"link",onClick:o,size:"large",className:Ve.CancelButton,"aria-label":e},oe.createElement($se,{"aria-hidden":"true","data-testid":"close-icon"}))},Ef=function(t){var e=t.variation,n=e===void 0?"default":e,r=t.size,a=r===void 0?"medium":r,s=t.children,o=t.isInitial,i=o===void 0?!1:o,c=al(t,["variation","size","children","isInitial"]),l=Hg().tokens;return re.createElement(yt,_e({className:"".concat(Ve.Toast," ").concat(Ve.Toast,"--").concat(n," ").concat(Ve.Toast,"--").concat(a)},i&&{backgroundColor:l.colors.background.primary},c),re.createElement(It,{className:Ve.ToastContainer},re.createElement(It,_e({className:Ve.ToastMessage},i?{color:l.colors.font.primary}:{}),s)))},Yb=function(t){var e=t.displayText;return re.createElement(Ef,{"aria-live":"polite"},re.createElement(It,{className:Ve.HintText},re.createElement(Du,null),re.createElement(yt,null,e)))},Gg=function(t){return t.context.errorState},Yse=function(t){return t.context.faceMatchAssociatedParams.faceMatchState},Zse=function(t){return t.context.faceMatchAssociatedParams.illuminationState},Jse=function(t){return t.context.isFaceFarEnoughBeforeRecording},Qse=function(t){return t.context.faceMatchStateBeforeStart},eoe=function(t){var e;return(e=t.context.faceMatchAssociatedParams)===null||e===void 0?void 0:e.faceMatchPercentage},so=function(t){var e=t.text,n=t.isInitial,r=n===void 0?!1:n;return re.createElement(Ef,{size:"large",variation:"primary",isInitial:r},re.createElement(yt,{"aria-live":"assertive"},e))},toe=function(t){var e,n,r=t.hintDisplayText,a=kf()[0],s=Vn(Gg),o=Vn(Yse),i=Vn(Zse),c=Vn(Qse),l=Vn(Jse),u=Vn(eoe),d=a.matches("checkFaceDetectedBeforeStart")||a.matches("detectFaceBeforeStart"),f=a.matches("checkFaceDistanceBeforeRecording")||a.matches("detectFaceDistanceBeforeRecording"),p=a.matches("start")||a.matches("userCancel"),h=a.matches("recording"),m=a.matches("notRecording"),g=a.matches("uploading"),v=a.matches("checkSucceeded"),b=a.matches("checkFailed"),w=a.matches({recording:"flashFreshnessColors"}),S=(e={},e[nt.CANT_IDENTIFY]=r.hintCanNotIdentifyText,e[nt.FACE_IDENTIFIED]=r.hintTooFarText,e[nt.TOO_MANY]=r.hintTooManyFacesText,e[nt.TOO_CLOSE]=r.hintTooCloseText,e[nt.TOO_FAR]=r.hintTooFarText,e[nt.MATCHED]=r.hintHoldFaceForFreshnessText,e[nt.OFF_CENTER]=r.hintFaceOffCenterText,e),I=(n={},n[fa.BRIGHT]=r.hintIlluminationTooBrightText,n[fa.DARK]=r.hintIlluminationTooDarkText,n[fa.NORMAL]=r.hintIlluminationNormalText,n);if(p)return re.createElement(re.Fragment,null,re.createElement(Sc,{role:"alert"},r.hintCenterFaceInstructionText),re.createElement(so,{text:r.hintCenterFaceText,isInitial:!0}));if(s??(b||v))return null;if(!h){if(d)return c===nt.TOO_MANY?re.createElement(so,{text:r.hintTooManyFacesText}):re.createElement(so,{text:r.hintMoveFaceFrontOfCameraText});if(f&&l===!1)return re.createElement(so,{text:r.hintTooCloseText});if(m)return re.createElement(Yb,{displayText:r.hintConnectingText});if(g)return re.createElement(re.Fragment,null,re.createElement(Sc,{"aria-live":"assertive"},r.hintCheckCompleteText),re.createElement(Yb,{displayText:r.hintVerifyingText}));if(i&&i!==fa.NORMAL)return re.createElement(so,{text:I[i]})}if(w)return re.createElement(so,{text:r.hintHoldFaceForFreshnessText});if(h&&!w){var E=S[nt.TOO_FAR];(o===nt.TOO_CLOSE||o===nt.MATCHED)&&(E=S[o]);var T=E;return o===nt.OFF_CENTER?T=S[o]:o===nt.TOO_FAR&&u>50&&(T=r.hintMatchIndicatorText),re.createElement(Ef,{size:"large",variation:o===nt.TOO_CLOSE?"error":"primary"},re.createElement(Sc,{"aria-live":"assertive"},T),re.createElement(yt,{"aria-label":T},E))}return null},noe=function(t){var e=t.percentage,n=t.initialPercentage,r=n===void 0?25:n,a=t.testId,s=oe.useState(r),o=s[0],i=s[1];oe.useEffect(function(){e<0?i(0):e>100?i(100):i(e)},[e]);var c={"--percentage":"".concat(o,"%")};return oe.createElement("div",{className:Ve.MatchIndicator,"data-testid":a},oe.createElement("div",{className:"".concat(Ve.MatchIndicator,"__bar"),style:c,role:"progressbar","aria-label":"MatchIndicator","aria-valuenow":e,"aria-valuetext":"".concat(e,"% face fit")}))},G3=function(t){var e=t.children,n=t.horizontal,r=n===void 0?"center":n,a=t.vertical,s=a===void 0?"center":a,o=t.className,i=al(t,["children","horizontal","vertical","className"]);return re.createElement(It,_e({className:"".concat(Ve.Overlay," ").concat(o),alignItems:r,justifyContent:s},i),e)},roe=function(t){var e=t.children;return oe.createElement(It,{className:Ve.RecordingIcon},oe.createElement(It,{"data-testid":"rec-icon",justifyContent:"center"},oe.createElement(M3,{viewBox:{width:20,height:20},width:"20",height:"20"},oe.createElement("circle",{cx:"10",cy:"10",r:"8",fill:"red"}))),oe.createElement(Lr,{as:"span",fontWeight:"bold"},e))},Tf={errorLabelText:"Error",timeoutHeaderText:"Time out",timeoutMessageText:"Face didn't fit inside oval in time limit. Try again and completely fill the oval with face in it.",faceDistanceHeaderText:"Forward movement detected",faceDistanceMessageText:"Avoid moving closer when connecting.",multipleFacesHeaderText:"Multiple faces detected",multipleFacesMessageText:"Ensure only one face is present in front of the camera when connecting.",clientHeaderText:"Client error",clientMessageText:"Check failed due to client issue",serverHeaderText:"Server issue",serverMessageText:"Cannot complete check due to server issue",landscapeHeaderText:"Landscape orientation not supported",landscapeMessageText:"Rotate your device to portrait (vertical) orientation.",portraitMessageText:"Ensure your device remains in portrait (vertical) orientation for the checks duration.",tryAgainText:"Try again"},aoe=_e({cameraMinSpecificationsHeadingText:"Camera does not meet minimum specifications",cameraMinSpecificationsMessageText:"Camera must support at least 320*240 resolution and 15 frames per second.",cameraNotFoundHeadingText:"Camera is not accessible.",cameraNotFoundMessageText:"Check that a camera is connected and there is not another application using the camera. You may have to go into settings to grant camera permissions and close out all instances of your browser and retry.",a11yVideoLabelText:"Webcam for liveness check",cancelLivenessCheckText:"Cancel Liveness check",goodFitCaptionText:"Good fit",goodFitAltText:"Ilustration of a person's face, perfectly fitting inside of an oval.",hintCenterFaceText:"Center your face",hintCenterFaceInstructionText:"Instruction: Before starting the check, make sure your camera is at the center top of your screen and center your face to the camera. When the check starts an oval will show up in the center. You will be prompted to move forward into the oval and then prompted to hold still. After holding still for a few seconds, you should hear check complete.",hintFaceOffCenterText:"Face is not in the oval, center your face to the camera.",hintMoveFaceFrontOfCameraText:"Move face in front of camera",hintTooManyFacesText:"Ensure only one face is in front of camera",hintFaceDetectedText:"Face detected",hintCanNotIdentifyText:"Move face in front of camera",hintTooCloseText:"Move back",hintTooFarText:"Move closer",hintConnectingText:"Connecting...",hintVerifyingText:"Verifying...",hintCheckCompleteText:"Check complete",hintIlluminationTooBrightText:"Move to dimmer area",hintIlluminationTooDarkText:"Move to brighter area",hintIlluminationNormalText:"Lighting conditions normal",hintHoldFaceForFreshnessText:"Hold still",hintMatchIndicatorText:"50% completed. Keep moving closer.",photosensitivityWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivityWarningHeadingText:"Photosensitivity warning",photosensitivityWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivityWarningLabelText:"More information about photosensitivity",photosensitivyWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivyWarningHeadingText:"Photosensitivity warning",photosensitivyWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivyWarningLabelText:"More information about photosensitivity",retryCameraPermissionsText:"Retry",recordingIndicatorText:"Rec",startScreenBeginCheckText:"Start video check",tooFarCaptionText:"Too far",tooFarAltText:"Illustration of a person's face inside of an oval; there is a gap between the perimeter of the face and the boundaries of the oval.",waitingCameraPermissionText:"Waiting for you to allow camera permission."},Tf),soe=function(t){var e=t.error,n=t.displayText,r=n.errorLabelText,a=n.timeoutHeaderText,s=n.timeoutMessageText,o=n.faceDistanceHeaderText,i=n.faceDistanceMessageText,c=n.multipleFacesHeaderText,l=n.multipleFacesMessageText,u=n.clientHeaderText,d=n.clientMessageText,f=n.serverHeaderText,p=n.serverMessageText,h,m;switch(e){case lt.TIMEOUT:h=a,m=s;break;case lt.FACE_DISTANCE_ERROR:h=o,m=i;break;case lt.MULTIPLE_FACES_ERROR:h=c,m=l;break;case lt.RUNTIME_ERROR:h=u,m=d;break;case lt.SERVER_ERROR:default:h=f,m=p}return oe.createElement(oe.Fragment,null,oe.createElement(It,{className:Ve.ErrorModal},oe.createElement(jg,{ariaLabel:r,role:"img",variation:"error"}),oe.createElement(Lr,{className:Ve.ErrorModalHeading,id:"amplify-liveness-error-heading"},h)),oe.createElement(Lr,{id:"amplify-liveness-error-message"},m))},ooe=function(t){var e=t.errorState,n=t.overrideErrorDisplayText,r=_e(_e({},Tf),n);return e===lt.CAMERA_ACCESS_ERROR||e===lt.CAMERA_FRAMERATE_ERROR||e===lt.MOBILE_LANDSCAPE_ERROR?null:soe({error:e,displayText:r})},ioe=function(t){var e=t.children,n=t.onRetry,r=t.displayText,a=_e(_e({},Tf),r),s=a.tryAgainText;return oe.createElement(G3,{className:Ve.OpaqueOverlay},oe.createElement(Ef,{"aria-labelledby":"amplify-liveness-error-heading","aria-describedby":"amplify-liveness-error-message",role:"alertdialog"},e,oe.createElement(It,{justifyContent:"center"},oe.createElement(qs,{variation:"primary",type:"button",onClick:n},s))))},q3=function(t){var e=t.children,n=t.headingText,r=t.labelText,a=Kse(),s=oe.useState(!1),o=s[0],i=s[1],c=oe.useRef(null),l=a==="base";return oe.useEffect(function(){function u(d){o&&c.current&&!c.current.contains(d.target)&&i(!1)}return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}},[c,o]),oe.createElement("div",{className:Ve.Popover,ref:c},oe.createElement(qs,{"aria-controls":"photosensitivity-description","aria-expanded":o,role:"alertdialog","aria-label":r,"aria-describedby":"photosensitivity-description",colorTheme:"info",id:"popover-button",onClick:function(){return i(!o)},testId:"popover-icon"},oe.createElement(jg,{ariaHidden:!0,variation:"info"})),o&&oe.createElement(oe.Fragment,null,oe.createElement(It,{className:Ve.PopoverAnchor}),oe.createElement(It,{className:Ve.PopoverAnchorSecondary}),oe.createElement(It,{"aria-hidden":!o,"aria-label":n,className:Ve.PopoverContainer,"data-testid":"popover-text",id:"photosensitivity-description",left:l?-190:-108,role:"alertdialog"},e)))};q3.displayName="LivenessIconWithPopover";var uoe=function(t){var e=t.bodyText,n=t.headingText,r=t.infoText,a=t.labelText;return oe.createElement(It,{className:"".concat(Fe.Alert," ").concat(Ve.StartScreenWarning),style:{zIndex:"3"}},oe.createElement(yt,{flex:"1"},oe.createElement(yt,{className:Fe.AlertHeading},n),oe.createElement(yt,{className:Fe.AlertBody},e)),oe.createElement(q3,{labelText:a,headingText:n},r))},coe=function(t){var e=t.recordingIndicatorText;return oe.createElement(yt,{className:Ve.RecordingIconContainer},oe.createElement(roe,null,e))},loe=function(t){var e=t.cancelLivenessCheckText;return oe.createElement(yt,{className:Ve.CancelContainer},oe.createElement(U3,{ariaLabel:e}))},doe=function(t){var e;return(e=t.context.videoAssociatedParams)===null||e===void 0?void 0:e.videoConstraints},foe=function(t){var e;return(e=t.context.videoAssociatedParams)===null||e===void 0?void 0:e.videoMediaStream},poe=function(t){var e;return(e=t.context.faceMatchAssociatedParams)===null||e===void 0?void 0:e.faceMatchPercentage},hoe=function(t){var e;return(e=t.context.faceMatchAssociatedParams)===null||e===void 0?void 0:e.faceMatchState},moe=function(t){var e;return(e=t.context.videoAssociatedParams)===null||e===void 0?void 0:e.selectedDeviceId},goe=function(t){var e;return(e=t.context.videoAssociatedParams)===null||e===void 0?void 0:e.selectableDevices},yoe=oe.createElement(Du,{size:"large",className:Ve.Loader,"data-testid":"centered-loader"}),voe=[nt.TOO_FAR,nt.CANT_IDENTIFY,nt.FACE_IDENTIFIED,nt.OFF_CENTER],boe=oe.memo(noe),woe=function(t){var e=t.isMobileScreen,n=t.isRecordingStopped,r=t.instructionDisplayText,a=t.streamDisplayText,s=t.hintDisplayText,o=t.errorDisplayText,i=t.cameraDisplayText,c=t.components,l=t.testId,u=a.cancelLivenessCheckText,d=a.recordingIndicatorText,f=c??{},p=f.ErrorView,h=p===void 0?ioe:p,m=f.PhotosensitiveWarning,g=m===void 0?uoe:m,v=kf(),b=v[0],w=v[1],S=Vn(foe),I=Vn(doe),E=Vn(moe),T=Vn(goe),R=Vn(poe),$=Vn(hoe),D=Vn(Gg),M=cse(),z=Xse(S),F=z.videoRef,V=z.videoWidth,H=z.videoHeight,U=oe.useRef(null),Z=oe.useRef(null),q=oe.useState(!1),X=q[0],se=q[1],te=b.matches("cameraCheck"),ce=b.matches("waitForDOMAndCameraDetails"),ee=b.matches("start")||b.matches("userCancel"),ne=b.matches("detectFaceBeforeStart"),ie=b.matches("recording"),ge=b.matches("checkSucceeded"),be=b.matches({recording:"flashFreshnessColors"}),pe=oe.useState(V),we=pe[0],Re=pe[1],$e=oe.useState(H),Oe=$e[0],We=$e[1],Ue=oe.useState(function(){return V&&H?V/H:0}),je=Ue[0],Ne=Ue[1];oe.useEffect(function(){U?.current&&F?.current&&S&&ee&&Fp(U.current,F.current,S)},[U,F,S,M,ee]),oe.useEffect(function(){var st=function(Zt){Zt.matches&&U?.current&&F?.current&&S&&ee&&Fp(U.current,F.current,S)},St=window.matchMedia("(prefers-color-scheme: dark)"),Mt=window.matchMedia("(prefers-color-scheme: light)");return St.addEventListener("change",st),Mt.addEventListener("change",st),function(){St.removeEventListener("change",st),Mt.addEventListener("change",st)}},[U,F,S,ee]),oe.useLayoutEffect(function(){X&&w({type:"SET_DOM_AND_CAMERA_DETAILS",data:{videoEl:F.current,canvasEl:U.current,freshnessColorEl:Z.current,isMobile:e}}),F.current&&(Re(F.current.videoWidth),We(F.current.videoHeight),Ne(F.current.videoWidth/F.current.videoHeight))},[w,F,X,e]),oe.useEffect(function(){ne&&UE({canvas:U.current})},[ne]);var et=oe.useMemo(function(){return oe.createElement(yt,{style:{visibility:ee?"visible":"hidden"}},oe.createElement(g,{bodyText:r.photosensitivityWarningBodyText,headingText:r.photosensitivityWarningHeadingText,infoText:r.photosensitivityWarningInfoText,labelText:r.photosensitivityWarningLabelText}))},[g,r,ee]),Ye=function(){se(!0)},ct=oe.useCallback(function(){w({type:"BEGIN"})},[w]),at=oe.useCallback(function(st){var St=st.target.value,Mt=function(){return ot(void 0,void 0,void 0,function(){var Zt;return tt(this,function(rn){switch(rn.label){case 0:return[4,navigator.mediaDevices.getUserMedia({video:_e(_e({},I),{deviceId:{exact:St}}),audio:!1})];case 1:return Zt=rn.sent(),w({type:"UPDATE_DEVICE_AND_STREAM",data:{newDeviceId:St,newStream:Zt}}),[2]}})})};Mt()},[I,w]);if(te)return oe.createElement(It,{justifyContent:"center",className:Ve.StartScreenCameraWaiting},oe.createElement(Du,{size:"large",className:Ve.Loader,"data-testid":"centered-loader",position:"unset"}),oe.createElement(Lr,{fontSize:"large",fontWeight:"bold","data-testid":"waiting-camera-permission",className:"".concat(Ve.StartScreenCameraWaiting,"__text")},i.waitingCameraPermissionText));var Ht=e&&!ee&&!ce;return oe.createElement(oe.Fragment,null,et,oe.createElement(It,{className:qt(Ve.CameraModule,Ht&&"".concat(Ve.CameraModule,"--mobile")),"data-testid":l,gap:"zero"},!X&&yoe,oe.createElement(G3,{horizontal:"center",vertical:ie&&!be?"start":"space-between",className:Ve.InstructionOverlay},ie&&oe.createElement(coe,{recordingIndicatorText:d}),!ee&&!ce&&!ge&&oe.createElement(loe,{cancelLivenessCheckText:u}),oe.createElement(It,{className:qt(Ve.Hint,Ht&&"".concat(Ve.Hint,"--mobile"))},oe.createElement(toe,{hintDisplayText:s})),D&&oe.createElement(h,{onRetry:function(){w({type:"CANCEL"})},displayText:o},ooe({errorState:D,overrideErrorDisplayText:o})),ie&&!be&&voe.includes($)?oe.createElement(boe,{percentage:Math.ceil(R)}):null),oe.createElement(yt,{as:"canvas",ref:Z,className:Ve.FreshnessCanvas,hidden:!0}),oe.createElement(yt,{className:Ve.VideoAnchor,style:{aspectRatio:"".concat(je)}},oe.createElement("video",{ref:F,muted:!0,autoPlay:!0,playsInline:!0,width:we,height:Oe,onCanPlay:Ye,"data-testid":"video",className:Ve.Video,"aria-label":i.a11yVideoLabelText}),oe.createElement(It,{className:qt(Ve.OvalCanvas,Ht&&"".concat(Ve.OvalCanvas,"--mobile"),n&&Ve.FadeOut)},oe.createElement(yt,{as:"canvas",ref:U})),ee&&!e&&T&&T.length>1&&oe.createElement(It,{className:Ve.StartScreenCameraSelect},oe.createElement(yt,{className:Ve.StartScreenCameraSelectContainer},oe.createElement(Ug,{htmlFor:"amplify-liveness-camera-select",className:"".concat(Ve.StartScreenCameraSelect,"__label")},"Camera:"),oe.createElement(V3,{id:"amplify-liveness-camera-select",label:"Camera",labelHidden:!0,value:E,onChange:at},T?.map(function(st){return oe.createElement("option",{value:st.deviceId,key:st.deviceId},st.label)})))))),ee&&oe.createElement(It,{justifyContent:"center"},oe.createElement(qs,{variation:"primary",type:"button",onClick:ct},r.startScreenBeginCheckText)))};function Soe(){return/Macintosh/i.test(navigator.userAgent)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>1}function _oe(){var t=/Android|iPhone|iPad/i.test(navigator.userAgent)||Soe();return t}function K3(){return window.matchMedia("(orientation: landscape)")}var xoe=function(t){var e=t.onRetry,n=t.header,r=t.portraitMessage,a=t.landscapeMessage,s=t.tryAgainText,o=re.useState(!0),i=o[0],c=o[1];return re.useLayoutEffect(function(){var l=K3();return c(l.matches),l.addEventListener("change",function(u){c(u.matches)}),function(){l.removeEventListener("change",function(u){return c(u.matches)})}},[]),re.createElement(It,{className:Ve.LandscapeErrorModal,height:i?"auto":480},re.createElement(Lr,{className:Ve.LandscapeErrorModalHeader},n),re.createElement(Lr,null,i?a:r),i?null:re.createElement(It,{className:Ve.LandscapeErrorModalButton},re.createElement(qs,{variation:"primary",type:"button",onClick:e},s)))},Zb="liveness-detector-check",Ioe=420,koe=function(t){return t.context.isRecordingStopped},Eoe=function(t){var e=t.instructionDisplayText,n=t.hintDisplayText,r=t.cameraDisplayText,a=t.streamDisplayText,s=t.errorDisplayText,o=t.components,i=kf(),c=i[0],l=i[1],u=Vn(Gg),d=Vn(koe),f=c.matches("permissionDenied"),p=_oe(),h=function(){l({type:"RETRY_CAMERA_CHECK"})},m=r.cameraMinSpecificationsHeadingText,g=r.cameraMinSpecificationsMessageText,v=r.cameraNotFoundHeadingText,b=r.cameraNotFoundMessageText,w=r.retryCameraPermissionsText,S=a.cancelLivenessCheckText;re.useLayoutEffect(function(){if(p){var E=function(R){R&&l({type:"MOBILE_LANDSCAPE_WARNING"})},T=K3();return E(T.matches),T.addEventListener("change",function(R){E(R.matches)}),function(){T.removeEventListener("change",function(R){return E(R.matches)})}}},[p,l]);var I=function(){if(u===lt.MOBILE_LANDSCAPE_ERROR){var E=_e(_e({},Tf),s),T=E.landscapeHeaderText,R=E.portraitMessageText,$=E.landscapeMessageText,D=E.tryAgainText;return re.createElement(It,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%"},re.createElement(xoe,{header:T,portraitMessage:R,landscapeMessage:$,tryAgainText:D,onRetry:function(){l({type:"CANCEL"})}}))}else return f?re.createElement(It,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",width:"100%",height:480},re.createElement(Lr,{fontSize:"large",fontWeight:"bold"},u===lt.CAMERA_FRAMERATE_ERROR?m:v),re.createElement(Lr,{maxWidth:Ioe},u===lt.CAMERA_FRAMERATE_ERROR?g:b),re.createElement(qs,{variation:"primary",type:"button",onClick:h},w),re.createElement(yt,{position:"absolute",top:"medium",right:"medium"},re.createElement(U3,{ariaLabel:S}))):re.createElement(woe,{isMobileScreen:p,isRecordingStopped:d,instructionDisplayText:e,streamDisplayText:a,hintDisplayText:n,errorDisplayText:s,cameraDisplayText:r,components:o})};return re.createElement(It,{direction:"column",position:"relative",testId:Zb,className:Zb,gap:"xl"},I())};function Toe(t){var e=_e(_e({},aoe),t),n=e.a11yVideoLabelText,r=e.cameraMinSpecificationsHeadingText,a=e.cameraMinSpecificationsMessageText,s=e.cameraNotFoundHeadingText,o=e.cameraNotFoundMessageText,i=e.cancelLivenessCheckText,c=e.clientHeaderText,l=e.clientMessageText,u=e.errorLabelText,d=e.hintCanNotIdentifyText,f=e.hintCenterFaceText,p=e.hintCenterFaceInstructionText,h=e.hintFaceOffCenterText,m=e.hintConnectingText,g=e.hintFaceDetectedText,v=e.hintHoldFaceForFreshnessText,b=e.hintIlluminationNormalText,w=e.hintIlluminationTooBrightText,S=e.hintIlluminationTooDarkText,I=e.hintMoveFaceFrontOfCameraText,E=e.hintTooManyFacesText,T=e.hintTooCloseText,R=e.hintTooFarText,$=e.hintVerifyingText,D=e.hintCheckCompleteText,M=e.hintMatchIndicatorText,z=e.faceDistanceHeaderText,F=e.faceDistanceMessageText,V=e.goodFitCaptionText,H=e.goodFitAltText,U=e.landscapeHeaderText,Z=e.landscapeMessageText,q=e.multipleFacesHeaderText,X=e.multipleFacesMessageText,se=e.photosensitivityWarningBodyText,te=e.photosensitivityWarningHeadingText,ce=e.photosensitivityWarningInfoText,ee=e.photosensitivityWarningLabelText,ne=e.photosensitivyWarningBodyText,ie=e.photosensitivyWarningHeadingText,ge=e.photosensitivyWarningInfoText,be=e.photosensitivyWarningLabelText,pe=e.portraitMessageText,we=e.retryCameraPermissionsText,Re=e.recordingIndicatorText,$e=e.serverHeaderText,Oe=e.serverMessageText,We=e.startScreenBeginCheckText,Ue=e.timeoutHeaderText,je=e.timeoutMessageText,Ne=e.tooFarCaptionText,et=e.tooFarAltText,Ye=e.tryAgainText,ct=e.waitingCameraPermissionText,at={hintMoveFaceFrontOfCameraText:I,hintTooManyFacesText:E,hintFaceDetectedText:g,hintCanNotIdentifyText:d,hintTooCloseText:T,hintTooFarText:R,hintConnectingText:m,hintVerifyingText:$,hintCheckCompleteText:D,hintIlluminationTooBrightText:w,hintIlluminationTooDarkText:S,hintIlluminationNormalText:b,hintHoldFaceForFreshnessText:v,hintCenterFaceText:f,hintCenterFaceInstructionText:p,hintFaceOffCenterText:h,hintMatchIndicatorText:M},Ht={cameraMinSpecificationsHeadingText:r,cameraMinSpecificationsMessageText:a,cameraNotFoundHeadingText:s,cameraNotFoundMessageText:o,retryCameraPermissionsText:we,waitingCameraPermissionText:ct,a11yVideoLabelText:n},st={photosensitivityWarningBodyText:se,photosensitivityWarningHeadingText:te,photosensitivityWarningInfoText:ce,photosensitivityWarningLabelText:ee,photosensitivyWarningBodyText:ne,photosensitivyWarningHeadingText:ie,photosensitivyWarningInfoText:ge,photosensitivyWarningLabelText:be,goodFitCaptionText:V,goodFitAltText:H,tooFarCaptionText:Ne,tooFarAltText:et,startScreenBeginCheckText:We},St={cancelLivenessCheckText:i,recordingIndicatorText:Re},Mt={errorLabelText:u,timeoutHeaderText:Ue,timeoutMessageText:je,faceDistanceHeaderText:z,faceDistanceMessageText:F,multipleFacesHeaderText:q,multipleFacesMessageText:X,clientHeaderText:c,clientMessageText:l,serverHeaderText:$e,serverMessageText:Oe,landscapeHeaderText:U,landscapeMessageText:Z,portraitMessageText:pe,tryAgainText:Ye};return{hintDisplayText:at,cameraDisplayText:Ht,instructionDisplayText:st,streamDisplayText:St,errorDisplayText:Mt}}var Jb="liveness-detector";function X3(t){var e=t.components,n=t.config,r=t.displayText,a=oe.useRef(null),s=Toe(r),o=s.hintDisplayText,i=s.cameraDisplayText,c=s.instructionDisplayText,l=s.streamDisplayText,u=s.errorDisplayText,d=RE(ote,{devTools:process.env.NODE_ENV==="development",context:{componentProps:_e(_e({},t),{config:n??{}})}});return oe.createElement(yt,{className:Jb,testId:Jb},oe.createElement(qse,{componentProps:t,service:d},oe.createElement(It,{direction:"column",ref:a},oe.createElement(Eoe,{instructionDisplayText:c,hintDisplayText:o,cameraDisplayText:i,streamDisplayText:l,errorDisplayText:u,components:e}))))}var Coe=function(){return ot(void 0,void 0,void 0,function(){var t;return tt(this,function(e){switch(e.label){case 0:return[4,r0()];case 1:if(t=e.sent().credentials,!t)throw new Error("No credentials provided");return[2,t]}})})};function Noe(t){var e=t.config,n=al(t,["config"]);return re.createElement(X3,_e({},n,{config:_e({credentialProvider:Coe},e)}))}exports.FaceLivenessDetector=Noe;exports.FaceLivenessDetectorCore=X3;
